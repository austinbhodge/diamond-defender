{"version":3,"file":"index-GwVgNqG0.js","sources":["../../node_modules/@thegraid/createjs-module/createjs.js","../../src/config/gameConfig.ts","../../src/entities/Player.ts","../../src/types/index.ts","../../src/entities/EnemyProjectile.ts","../../src/entities/weapons/SwipeAttack.ts","../../src/entities/Enemy.ts","../../src/entities/ExperienceOrb.ts","../../src/utils/math.ts","../../src/entities/Mouse.ts","../../src/entities/weapons/Phaser.ts","../../src/entities/weapons/Kick.ts","../../src/entities/WaveTriggerZone.ts","../../src/entities/HealthTradingZone.ts","../../src/managers/InputManager.ts","../../src/managers/WaveManager.ts","../../src/managers/UIManager.ts","../../src/utils/viewport.ts","../../src/managers/GameManager.ts","../../src/main.ts"],"sourcesContent":["var createjs = (this.createjs = (this.createjs || {}));\nvar ww; try { ww = window} catch { ww = false }\n/*!\n* EaselJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function(subclass, superclass) {\n\t\"use strict\";\n\n\tfunction o() { this.constructor = subclass; }\n\to.prototype = superclass.prototype;\n\treturn (subclass.prototype = new o());\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function(subclass, prefix) {\n\t\"use strict\";\n\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\n\tif (supP) {\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n\t\tfor (var n in supP) {\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\n\t\t}\n\t}\n\treturn subclass;\n};\n\n//##############################################################################\n// indexOf.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement){\n\t\"use strict\";\n\n\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\tif (searchElement === array[i]) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n//##############################################################################\n// UID.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Global utility for generating sequential unique ID numbers. The UID class uses a static interface (ex. <code>UID.get()</code>)\n\t * and should not be instantiated.\n\t * @class UID\n\t * @static\n\t **/\n\tfunction UID() {\n\t\tthrow \"UID cannot be instantiated\";\n\t}\n\n\n// private static properties:\n\t/**\n\t * @property _nextID\n\t * @type Number\n\t * @protected\n\t **/\n\tUID._nextID = 0;\n\n\n// public static methods:\n\t/**\n\t * Returns the next unique id.\n\t * @method get\n\t * @return {Number} The next unique id\n\t * @static\n\t **/\n\tUID.get = function() {\n\t\treturn UID._nextID++;\n\t};\n\n\n\tcreatejs.UID = UID;\n}());\n\n//##############################################################################\n// deprecate.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Wraps deprecated methods so they still be used, but throw warnings to developers.\n *\n *\tobj.deprecatedMethod = createjs.deprecate(\"Old Method Name\", obj._fallbackMethod);\n *\n * The recommended approach for deprecated properties is:\n *\n *\ttry {\n *\t\tObj\tect.defineProperties(object, {\n *\t\t\treadyOnlyProp: { get: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }) },\n *\t\t\treadWriteProp: {\n *\t\t\t\tget: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }),\n *\t\t\t\tset: createjs.deprecate(\"readOnlyProp\", function(val) { this.alternateProp = val; })\n *\t\t});\n *\t} catch (e) {}\n *\n * @method deprecate\n * @param {Function} [fallbackMethod=null] A method to call when the deprecated method is used. See the example for how\n * @param {String} [name=null] The name of the method or property to display in the console warning.\n * to deprecate properties.\n * @return {Function} If a fallbackMethod is supplied, returns a closure that will call the fallback method after\n * logging the warning in the console.\n */\ncreatejs.deprecate = function(fallbackMethod, name) {\n\t\"use strict\";\n\treturn function() {\n\t\tvar msg = \"Deprecated property or method '\"+name+\"'. See docs for info.\";\n\t\tconsole && (console.warn ? console.warn(msg) : console.log(msg));\n\t\treturn fallbackMethod && fallbackMethod.apply(this, arguments);\n\t}\n};\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * Contains properties and methods shared by all events for use with\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n\t * \n\t * Note that Event objects are often reused, so you should never\n\t * rely on an event object's state outside of the call stack it was received in.\n\t * @class Event\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @constructor\n\t **/\n\tfunction Event(type, bubbles, cancelable) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The type of event.\n\t\t * @property type\n\t\t * @type String\n\t\t **/\n\t\tthis.type = type;\n\t\n\t\t/**\n\t\t * The object that generated an event.\n\t\t * @property target\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.target = null;\n\t\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t * @property currentTarget\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.currentTarget = null;\n\t\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t * @property eventPhase\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.eventPhase = 0;\n\t\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t * @property bubbles\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.bubbles = !!bubbles;\n\t\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t * @property cancelable\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.cancelable = !!cancelable;\n\t\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t * @property timeStamp\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.timeStamp = (new Date()).getTime();\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property defaultPrevented\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.defaultPrevented = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t * @property propagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.propagationStopped = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property immediatePropagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.immediatePropagationStopped = false;\n\t\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t * @property removed\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.removed = false;\n\t}\n\tvar p = Event.prototype;\n\n// public methods:\n\t/**\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @method preventDefault\n\t **/\n\tp.preventDefault = function() {\n\t\tthis.defaultPrevented = this.cancelable&&true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopPropagation\n\t **/\n\tp.stopPropagation = function() {\n\t\tthis.propagationStopped = true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopImmediatePropagation\n\t **/\n\tp.stopImmediatePropagation = function() {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t};\n\t\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t * \n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t * \t\t\t// do stuff...\n\t * \t\t\tevt.remove(); // removes this listener.\n\t * \t\t});\n\t * \n\t * @method remove\n\t **/\n\tp.remove = function() {\n\t\tthis.removed = true;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Event instance.\n\t * @method clone\n\t * @return {Event} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t};\n\n\tcreatejs.Event = Event;\n}());\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n\t *\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n\t * \n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n\t * \n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n\t * \n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n\t *\n\t * <h4>Example</h4>\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\n\t *\n\t *      EventDispatcher.initialize(MyClass.prototype);\n\t *\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n\t *\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\n\t *      function handlerMethod(event) {\n\t *          console.log(event.target + \" Was Clicked\");\n\t *      }\n\t *\n\t * <b>Maintaining proper scope</b><br />\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n\t * method to subscribe to events simplifies this.\n\t *\n\t *      instance.addEventListener(\"click\", function(event) {\n\t *          console.log(instance == this); // false, scope is ambiguous.\n\t *      });\n\t *      \n\t *      instance.on(\"click\", function(event) {\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n\t *      });\n\t * \n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n\t * scope.\n\t *\n\t * <b>Browser support</b>\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n\t * requires modern browsers (IE9+).\n\t *      \n\t *\n\t * @class EventDispatcher\n\t * @constructor\n\t **/\n\tfunction EventDispatcher() {\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @protected\n\t\t * @property _listeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._listeners = null;\n\t\t\n\t\t/**\n\t\t * @protected\n\t\t * @property _captureListeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._captureListeners = null;\n\t}\n\tvar p = EventDispatcher.prototype;\n\n// static public methods:\n\t/**\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\n\t * \n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n\t * \n\t * @method initialize\n\t * @static\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n\t * prototype.\n\t **/\n\tEventDispatcher.initialize = function(target) {\n\t\ttarget.addEventListener = p.addEventListener;\n\t\ttarget.on = p.on;\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\n\t\ttarget.hasEventListener = p.hasEventListener;\n\t\ttarget.dispatchEvent = p.dispatchEvent;\n\t\ttarget._dispatchEvent = p._dispatchEvent;\n\t\ttarget.willTrigger = p.willTrigger;\n\t};\n\t\n\n// public methods:\n\t/**\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n\t * multiple callbacks getting fired.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *         // Click happened.\n\t *      }\n\t *\n\t * @method addEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\n\t **/\n\tp.addEventListener = function(type, listener, useCapture) {\n\t\tvar listeners;\n\t\tif (useCapture) {\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\n\t\t} else {\n\t\t\tlisteners = this._listeners = this._listeners||{};\n\t\t}\n\t\tvar arr = listeners[type];\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\n\t\tarr = listeners[type]; // remove may have deleted the array\n\t\tif (!arr) { listeners[type] = [listener];  }\n\t\telse { arr.push(listener); }\n\t\treturn listener;\n\t};\n\t\n\t/**\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\n\t * \n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n\t * to `on` with the same params will create multiple listeners.\n\t * \n\t * <h4>Example</h4>\n\t * \n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n\t * \t\tfunction handleClick(evt, data) {\n\t * \t\t\tdata.count -= 1;\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n\t * \t\t\tif (data.count == 0) {\n\t * \t\t\t\talert(\"clicked 3 times!\");\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\n\t * \t\t\t\t// alternately: evt.remove();\n\t * \t\t\t}\n\t * \t\t}\n\t * \n\t * @method on\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n\t * @param {Boolean} [once=false] If true, the listener is removed before the first time it is triggered.\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n\t **/\n\tp.on = function(type, listener, scope, once, data, useCapture) {\n\t\tif (listener.handleEvent) {\n\t\t\tscope = scope||listener;\n\t\t\tlistener = listener.handleEvent;\n\t\t}\n\t\tscope = scope||this;\n\t\tlet d=this,listnr = function (evt) {\n\t\t\tonce&&d.removeEventListener(type, listnr, useCapture)\n\t\t\tlistener.call(scope, evt, data);\n\t\t}\n\t\treturn this.addEventListener(type, listnr, useCapture);\n\t};\n\n\t/**\n\t * Removes the specified event listener.\n\t *\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n\t * closure will not work.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.removeEventListener(\"click\", handleClick);\n\t *\n\t * @method removeEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.removeEventListener = function(type, listener, useCapture) {\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\n\t\tif (!listeners) { return; }\n\t\tvar arr = listeners[type];\n\t\tif (!arr) { return; }\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\n\t\t\tif (arr[i] == listener) {\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\n\t\t\t\telse { arr.splice(i,1); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n\t * .on method.\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n\t *\n\t * @method off\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.off = p.removeEventListener;\n\n\t/**\n\t * Removes all listeners for the specified type, or all listeners of all types.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Remove all listeners\n\t *      displayObject.removeAllEventListeners();\n\t *\n\t *      // Remove all click listeners\n\t *      displayObject.removeAllEventListeners(\"click\");\n\t *\n\t * @method removeAllEventListeners\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n\t **/\n\tp.removeAllEventListeners = function(type) {\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\n\t\telse {\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the specified event to all listeners.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Use a string event\n\t *      this.dispatchEvent(\"complete\");\n\t *\n\t *      // Use an Event instance\n\t *      var event = new createjs.Event(\"progress\");\n\t *      this.dispatchEvent(event);\n\t *\n\t * @method dispatchEvent\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n\t **/\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\n\t\tif (typeof eventObj == \"string\") {\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\n\t\t\tvar listeners = this._listeners;\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\n\t\t} else if (eventObj.target && eventObj.clone) {\n\t\t\t// redispatching an active event object, so clone it:\n\t\t\teventObj = eventObj.clone();\n\t\t}\n\t\t\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\n\n\t\tif (!eventObj.bubbles || !this.parent) {\n\t\t\tthis._dispatchEvent(eventObj, 2);\n\t\t} else {\n\t\t\tvar top=this, list=[top];\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\n\t\t\tvar i, l=list.length;\n\n\t\t\t// capture & atTarget\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\n\t\t\t}\n\t\t\t// bubbling\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\n\t\t\t}\n\t\t}\n\t\treturn !eventObj.defaultPrevented;\n\t};\n\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type.\n\t * @method hasEventListener\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\n\t **/\n\tp.hasEventListener = function(type) {\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\n\t};\n\t\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n\t * specified type is dispatched from this object, it will trigger at least one listener.\n\t * \n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n\t * event flow for a listener, not just this object.\n\t * @method willTrigger\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n\t **/\n\tp.willTrigger = function(type) {\n\t\tvar o = this;\n\t\twhile (o) {\n\t\t\tif (o.hasEventListener(type)) { return true; }\n\t\t\to = o.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[EventDispatcher]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _dispatchEvent\n\t * @param {Object | Event} eventObj\n\t * @param {Object} eventPhase\n\t * @protected\n\t **/\n\tp._dispatchEvent = function(eventObj, eventPhase) {\n\t\tvar l, arr, listeners = (eventPhase <= 2) ? this._captureListeners : this._listeners;\n\t\tif (eventObj && listeners && (arr = listeners[eventObj.type]) && (l=arr.length)) {\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\n\t\t\ttry { eventObj.eventPhase = eventPhase|0; } catch (e) {}\n\t\t\teventObj.removed = false;\n\t\t\t\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\n\t\t\t\tvar o = arr[i];\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\n\t\t\t\telse { o(eventObj); }\n\t\t\t\tif (eventObj.removed) {\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\n\t\t\t\t\teventObj.removed = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (eventPhase === 2) { this._dispatchEvent(eventObj, 2.1); }\n\t};\n\n\n\tcreatejs.EventDispatcher = EventDispatcher;\n}());\n\n//##############################################################################\n// Ticker.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The Ticker provides a centralized tick or heartbeat broadcast at a set interval. Listeners can subscribe to the tick\n\t * event to be notified when a set time interval has elapsed.\n\t *\n\t * Note that the interval that the tick event is called is a target interval, and may be broadcast at a slower interval\n\t * when under high CPU load. The Ticker class uses a static interface (ex. `Ticker.framerate = 30;`) and\n\t * can not be instantiated.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          // Actions carried out each tick (aka frame)\n\t *          if (!event.paused) {\n\t *              // Actions carried out when the Ticker is not paused.\n\t *          }\n\t *      }\n\t *\n\t * @class Ticker\n\t * @uses EventDispatcher\n\t * @static\n\t **/\n\tfunction Ticker() {\n\t\tthrow \"Ticker cannot be instantiated.\";\n\t}\n\n\n// constants:\n\t/**\n\t * In this mode, Ticker uses the requestAnimationFrame API, but attempts to synch the ticks to target framerate. It\n\t * uses a simple heuristic that compares the time of the RAF return to the target time for the current frame and\n\t * dispatches the tick when the time is within a certain threshold.\n\t *\n\t * This mode has a higher variance for time between frames than {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}},\n\t * but does not require that content be time based as with {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}} while\n\t * gaining the benefits of that API (screen synch, background throttling).\n\t *\n\t * Variance is usually lowest for framerates that are a divisor of the RAF frequency. This is usually 60, so\n\t * framerates of 10, 12, 15, 20, and 30 work well.\n\t *\n\t * Falls back to {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t * supported.\n\t * @property RAF_SYNCHED\n\t * @static\n\t * @type {String}\n\t * @default \"synched\"\n\t * @readonly\n\t **/\n\tTicker.RAF_SYNCHED = \"synched\";\n\n\t/**\n\t * In this mode, Ticker passes through the requestAnimationFrame heartbeat, ignoring the target framerate completely.\n\t * Because requestAnimationFrame frequency is not deterministic, any content using this mode should be time based.\n\t * You can leverage {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} and the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event object's \"delta\" properties to make this easier.\n\t *\n\t * Falls back on {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t * supported.\n\t * @property RAF\n\t * @static\n\t * @type {String}\n\t * @default \"raf\"\n\t * @readonly\n\t **/\n\tTicker.RAF = \"raf\";\n\n\t/**\n\t * In this mode, Ticker uses the setTimeout API. This provides predictable, adaptive frame timing, but does not\n\t * provide the benefits of requestAnimationFrame (screen synch, background throttling).\n\t * @property TIMEOUT\n\t * @static\n\t * @type {String}\n\t * @default \"timeout\"\n\t * @readonly\n\t **/\n\tTicker.TIMEOUT = \"timeout\";\n\n\n// static events:\n\t/**\n\t * Dispatched each tick. The event will be dispatched to each listener even when the Ticker has been paused using\n\t * {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          console.log(\"Paused:\", event.paused, event.delta);\n\t *      }\n\t *\n\t * @event tick\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Boolean} paused Indicates whether the ticker is currently paused.\n\t * @param {Number} delta The time elapsed in ms since the last tick.\n\t * @param {Number} time The total time in ms since Ticker was initialized.\n\t * @param {Number} runTime The total time in ms that Ticker was not paused since it was initialized. For example,\n\t * \tyou could determine the amount of time that the Ticker has been paused since initialization with `time-runTime`.\n\t * @since 0.6.0\n\t */\n\n\n// public static properties:\n\t/**\n\t * Specifies the timing api (setTimeout or requestAnimationFrame) and mode to use. See\n\t * {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}}, {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}}, and\n\t * {{#crossLink \"Ticker/RAF_SYNCHED:property\"}}{{/crossLink}} for mode details.\n\t * @property timingMode\n\t * @static\n\t * @type {String}\n\t * @default Ticker.TIMEOUT\n\t **/\n\tTicker.timingMode = null;\n\n\t/**\n\t * Specifies a maximum value for the delta property in the tick event object. This is useful when building time\n\t * based animations and systems to prevent issues caused by large time gaps caused by background tabs, system sleep,\n\t * alert dialogs, or other blocking routines. Double the expected frame duration is often an effective value\n\t * (ex. maxDelta=50 when running at 40fps).\n\t * \n\t * This does not impact any other values (ex. time, runTime, etc), so you may experience issues if you enable maxDelta\n\t * when using both delta and other values.\n\t * \n\t * If 0, there is no maximum.\n\t * @property maxDelta\n\t * @static\n\t * @type {number}\n\t * @default 0\n\t */\n\tTicker.maxDelta = 0;\n\t\n\t/**\n\t * When the ticker is paused, all listeners will still receive a tick event, but the <code>paused</code> property\n\t * of the event will be `true`. Also, while paused the `runTime` will not increase. See {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}},\n\t * {{#crossLink \"Ticker/getTime\"}}{{/crossLink}}, and {{#crossLink \"Ticker/getEventTime\"}}{{/crossLink}} for more\n\t * info.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      createjs.Ticker.paused = true;\n\t *      function handleTick(event) {\n\t *          console.log(event.paused,\n\t *          \tcreatejs.Ticker.getTime(false),\n\t *          \tcreatejs.Ticker.getTime(true));\n\t *      }\n\t *\n\t * @property paused\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tTicker.paused = false;\n\n\n// mix-ins:\n\t// EventDispatcher methods:\n\tTicker.removeEventListener = null;\n\tTicker.removeAllEventListeners = null;\n\tTicker.dispatchEvent = null;\n\tTicker.hasEventListener = null;\n\tTicker._listeners = null;\n\tcreatejs.EventDispatcher.initialize(Ticker); // inject EventDispatcher methods.\n\tTicker._addEventListener = Ticker.addEventListener;\n\tTicker.addEventListener = function() {\n\t\t!Ticker._inited&&Ticker.init();\n\t\treturn Ticker._addEventListener.apply(Ticker, arguments);\n\t};\n\n\n// private static properties:\n\t/**\n\t * @property _inited\n\t * @static\n\t * @type {Boolean}\n\t * @private\n\t **/\n\tTicker._inited = false;\n\n\t/**\n\t * @property _startTime\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._startTime = 0;\n\n\t/**\n\t * @property _pausedTime\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._pausedTime=0;\n\n\t/**\n\t * The number of ticks that have passed\n\t * @property _ticks\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._ticks = 0;\n\n\t/**\n\t * The number of ticks that have passed while Ticker has been paused\n\t * @property _pausedTicks\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._pausedTicks = 0;\n\n\t/**\n\t * @property _interval\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._interval = 50;\n\n\t/**\n\t * @property _lastTime\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._lastTime = 0;\n\n\t/**\n\t * @property _times\n\t * @static\n\t * @type {Array}\n\t * @private\n\t **/\n\tTicker._times = null;\n\n\t/**\n\t * @property _tickTimes\n\t * @static\n\t * @type {Array}\n\t * @private\n\t **/\n\tTicker._tickTimes = null;\n\n\t/**\n\t * Stores the timeout or requestAnimationFrame id.\n\t * @property _timerId\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._timerId = null;\n\t\n\t/**\n\t * True if currently using requestAnimationFrame, false if using setTimeout. This may be different than timingMode\n\t * if that property changed and a tick hasn't fired.\n\t * @property _raf\n\t * @static\n\t * @type {Boolean}\n\t * @private\n\t **/\n\tTicker._raf = true;\n\t\n\n// static getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t * @method _setInterval\n\t * @private\n\t * @static\n\t * @param {Number} interval\n\t **/\n\tTicker._setInterval = function(interval) {\n\t\tTicker._interval = interval;\n\t\tif (!Ticker._inited) { return; }\n\t\tTicker._setupTick();\n\t};\n\t// Ticker.setInterval is @deprecated. Remove for 1.1+\n\tTicker.setInterval = createjs.deprecate(Ticker._setInterval, \"Ticker.setInterval\");\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t * @method _getInterval\n\t * @private\n\t * @static\n\t * @return {Number}\n\t **/\n\tTicker._getInterval = function() {\n\t\treturn Ticker._interval;\n\t};\n\t// Ticker.getInterval is @deprecated. Remove for 1.1+\n\tTicker.getInterval = createjs.deprecate(Ticker._getInterval, \"Ticker.getInterval\");\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t * @method _setFPS\n\t * @private\n\t * @static\n\t * @param {Number} value\n\t **/\n\tTicker._setFPS = function(value) {\n\t\tTicker._setInterval(1000/value);\n\t};\n\t// Ticker.setFPS is @deprecated. Remove for 1.1+\n\tTicker.setFPS = createjs.deprecate(Ticker._setFPS, \"Ticker.setFPS\");\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t * @method _getFPS\n\t * @static\n\t * @private\n\t * @return {Number}\n\t **/\n\tTicker._getFPS = function() {\n\t\treturn 1000/Ticker._interval;\n\t};\n\t// Ticker.getFPS is @deprecated. Remove for 1.1+\n\tTicker.getFPS = createjs.deprecate(Ticker._getFPS, \"Ticker.getFPS\");\n\n\t/**\n\t * Indicates the target time (in milliseconds) between ticks. Default is 50 (20 FPS).\n\t * Note that actual time between ticks may be more than specified depending on CPU load.\n\t * This property is ignored if the ticker is using the `RAF` timing mode.\n\t * @property interval\n\t * @static\n\t * @type {Number}\n\t **/\n\t \n\t/**\n\t * Indicates the target frame rate in frames per second (FPS). Effectively just a shortcut to `interval`, where\n\t * `framerate == 1000/interval`.\n\t * @property framerate\n\t * @static\n\t * @type {Number}\n\t **/\n\ttry {\n\t\tObject.defineProperties(Ticker, {\n\t\t\tinterval: { get: Ticker._getInterval, set: Ticker._setInterval },\n\t\t\tframerate: { get: Ticker._getFPS, set: Ticker._setFPS }\n\t\t});\n\t} catch (e) { console.log(e); }\n\n\n// public static methods:\n\t/**\n\t * Starts the tick. This is called automatically when the first listener is added.\n\t * @method init\n\t * @static\n\t **/\n\tTicker.init = function() {\n\t\tif (Ticker._inited) { return; }\n\t\tTicker._inited = true;\n\t\tTicker._times = [];\n\t\tTicker._tickTimes = [];\n\t\tTicker._startTime = Ticker._getTime();\n\t\tTicker._times.push(Ticker._lastTime = 0);\n\t\tTicker.interval = Ticker._interval;\n\t};\n\t\n\t/**\n\t * Stops the Ticker and removes all listeners. Use init() to restart the Ticker.\n\t * @method reset\n\t * @static\n\t **/\n\tTicker.reset = function() {\n\t\tif (Ticker._raf) {\n\t\t\tvar f = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame;\n\t\t\tf&&f(Ticker._timerId);\n\t\t} else {\n\t\t\tclearTimeout(Ticker._timerId);\n\t\t}\n\t\tTicker.removeAllEventListeners(\"tick\");\n\t\tTicker._timerId = Ticker._times = Ticker._tickTimes = null;\n\t\tTicker._startTime = Ticker._lastTime = Ticker._ticks = Ticker._pausedTime = 0;\n\t\tTicker._inited = false;\n\t};\n\n\t/**\n\t * Returns the average time spent within a tick. This can vary significantly from the value provided by getMeasuredFPS\n\t * because it only measures the time spent within the tick execution stack. \n\t * \n\t * Example 1: With a target FPS of 20, getMeasuredFPS() returns 20fps, which indicates an average of 50ms between \n\t * the end of one tick and the end of the next. However, getMeasuredTickTime() returns 15ms. This indicates that \n\t * there may be up to 35ms of \"idle\" time between the end of one tick and the start of the next.\n\t *\n\t * Example 2: With a target FPS of 30, {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} returns 10fps, which\n\t * indicates an average of 100ms between the end of one tick and the end of the next. However, {{#crossLink \"Ticker/getMeasuredTickTime\"}}{{/crossLink}}\n\t * returns 20ms. This would indicate that something other than the tick is using ~80ms (another script, DOM\n\t * rendering, etc).\n\t * @method getMeasuredTickTime\n\t * @static\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the average time spent in a tick.\n\t * Defaults to the number of ticks per second. To get only the last tick's time, pass in 1.\n\t * @return {Number} The average time spent in a tick in milliseconds.\n\t **/\n\tTicker.getMeasuredTickTime = function(ticks) {\n\t\tvar ttl=0, times=Ticker._tickTimes;\n\t\tif (!times || times.length < 1) { return -1; }\n\n\t\t// by default, calculate average for the past ~1 second:\n\t\tticks = Math.min(times.length, ticks||(Ticker._getFPS()|0));\n\t\tfor (var i=0; i<ticks; i++) { ttl += times[i]; }\n\t\treturn ttl/ticks;\n\t};\n\n\t/**\n\t * Returns the actual frames / ticks per second.\n\t * @method getMeasuredFPS\n\t * @static\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the actual frames / ticks per second.\n\t * Defaults to the number of ticks per second.\n\t * @return {Number} The actual frames / ticks per second. Depending on performance, this may differ\n\t * from the target frames per second.\n\t **/\n\tTicker.getMeasuredFPS = function(ticks) {\n\t\tvar times = Ticker._times;\n\t\tif (!times || times.length < 2) { return -1; }\n\n\t\t// by default, calculate fps for the past ~1 second:\n\t\tticks = Math.min(times.length-1, ticks||(Ticker._getFPS()|0));\n\t\treturn 1000/((times[0]-times[ticks])/ticks);\n\t};\n\n\t/**\n\t * Returns the number of milliseconds that have elapsed since Ticker was initialized via {{#crossLink \"Ticker/init\"}}.\n\t * Returns -1 if Ticker has not been initialized. For example, you could use\n\t * this in a time synchronized animation to determine the exact amount of time that has elapsed.\n\t * @method getTime\n\t * @static\n\t * @param {Boolean} [runTime=false] If true only time elapsed while Ticker was not paused will be returned.\n\t * If false, the value returned will be total time elapsed since the first tick event listener was added.\n\t * @return {Number} Number of milliseconds that have elapsed since Ticker was initialized or -1.\n\t **/\n\tTicker.getTime = function(runTime) {\n\t\treturn Ticker._startTime ? Ticker._getTime() - (runTime ? Ticker._pausedTime : 0) : -1;\n\t};\n\n\t/**\n\t * Similar to the {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} method, but returns the time on the most recent {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event object.\n\t * @method getEventTime\n\t * @static\n\t * @param runTime {Boolean} [runTime=false] If true, the runTime property will be returned instead of time.\n\t * @returns {number} The time or runTime property from the most recent tick event or -1.\n\t */\n\tTicker.getEventTime = function(runTime) {\n\t\treturn Ticker._startTime ? (Ticker._lastTime || Ticker._startTime) - (runTime ? Ticker._pausedTime : 0) : -1;\n\t};\n\t\n\t/**\n\t * Returns the number of ticks that have been broadcast by Ticker.\n\t * @method getTicks\n\t * @static\n\t * @param {Boolean} pauseable Indicates whether to include ticks that would have been broadcast\n\t * while Ticker was paused. If true only tick events broadcast while Ticker is not paused will be returned.\n\t * If false, tick events that would have been broadcast while Ticker was paused will be included in the return\n\t * value. The default value is false.\n\t * @return {Number} of ticks that have been broadcast.\n\t **/\n\tTicker.getTicks = function(pauseable) {\n\t\treturn  Ticker._ticks - (pauseable ? Ticker._pausedTicks : 0);\n\t};\n\n\n// private static methods:\n\t/**\n\t * @method _handleSynch\n\t * @static\n\t * @private\n\t **/\n\tTicker._handleSynch = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\n\t\t// run if enough time has elapsed, with a little bit of flexibility to be early:\n\t\tif (Ticker._getTime() - Ticker._lastTime >= (Ticker._interval-1)*0.97) {\n\t\t\tTicker._tick();\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleRAF\n\t * @static\n\t * @private\n\t **/\n\tTicker._handleRAF = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\t\tTicker._tick();\n\t};\n\n\t/**\n\t * @method _handleTimeout\n\t * @static\n\t * @private\n\t **/\n\tTicker._handleTimeout = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\t\tTicker._tick();\n\t};\n\n\t/**\n\t * @method _setupTick\n\t * @static\n\t * @private\n\t **/\n\tTicker._setupTick = function() {\n\t\tif (Ticker._timerId != null) { return; } // avoid duplicates\n\n\t\tvar mode = Ticker.timingMode;\n\t\tif (mode == Ticker.RAF_SYNCHED || mode == Ticker.RAF) {\n\t\t\tvar f = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\n\t\t\tif (f) {\n\t\t\t\tTicker._timerId = f(mode == Ticker.RAF ? Ticker._handleRAF : Ticker._handleSynch);\n\t\t\t\tTicker._raf = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tTicker._raf = false;\n\t\tTicker._timerId = setTimeout(Ticker._handleTimeout, Ticker._interval);\n\t};\n\n\t/**\n\t * @method _tick\n\t * @static\n\t * @private\n\t **/\n\tTicker._tick = function() {\n\t\tvar paused = Ticker.paused;\n\t\tvar time = Ticker._getTime();\n\t\tvar elapsedTime = time-Ticker._lastTime;\n\t\tTicker._lastTime = time;\n\t\tTicker._ticks++;\n\t\t\n\t\tif (paused) {\n\t\t\tTicker._pausedTicks++;\n\t\t\tTicker._pausedTime += elapsedTime;\n\t\t}\n\t\t\n\t\tif (Ticker.hasEventListener(\"tick\")) {\n\t\t\tvar event = new createjs.Event(\"tick\");\n\t\t\tvar maxDelta = Ticker.maxDelta;\n\t\t\tevent.delta = (maxDelta && elapsedTime > maxDelta) ? maxDelta : elapsedTime;\n\t\t\tevent.paused = paused;\n\t\t\tevent.time = time;\n\t\t\tevent.runTime = time-Ticker._pausedTime;\n\t\t\tTicker.dispatchEvent(event);\n\t\t}\n\t\t\n\t\tTicker._tickTimes.unshift(Ticker._getTime()-time);\n\t\twhile (Ticker._tickTimes.length > 100) { Ticker._tickTimes.pop(); }\n\n\t\tTicker._times.unshift(time);\n\t\twhile (Ticker._times.length > 100) { Ticker._times.pop(); }\n\t};\n\n\t/**\n\t * @method _getTime\n\t * @static\n\t * @private\n\t **/\n\t var w=ww&&window, now=ww&&(w.performance.now || w.performance.mozNow || w.performance.msNow || w.performance.oNow || w.performance.webkitNow);\n\tTicker._getTime = function() {\n\t\treturn ((now&&now.call(w.performance))||(new Date().getTime())) - Ticker._startTime;\n\t};\n\n\n\tcreatejs.Ticker = Ticker;\n}());\n\n//##############################################################################\n// VideoBuffer.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * When an HTML video seeks, including when looping, there is an indeterminate period before a new frame is available.\n\t * This can result in the video blinking or flashing when it is drawn to a canvas. The VideoBuffer class resolves\n\t * this issue by drawing each frame to an off-screen canvas and preserving the prior frame during a seek.\n\t * \n\t * \tvar myBuffer = new createjs.VideoBuffer(myVideo);\n\t * \tvar myBitmap = new Bitmap(myBuffer);\n\t * \n\t * @class VideoBuffer\n\t * @param {HTMLVideoElement} video The HTML video element to buffer.\n\t * @constructor\n\t **/\n\tfunction VideoBuffer(video) {\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * Used by Bitmap to determine when the video buffer is ready to be drawn. Not intended for general use.\n\t\t * @property readyState\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.readyState = video.readyState;\n\t\t\n\t\t/**\n\t\t * @property _video\n\t\t * @protected\n\t\t * @type {HTMLVideoElement}\n\t\t * @default 0\n\t\t **/\n\t\tthis._video = video;\n\t\t\n\t\t/**\n\t\t * @property _canvas\n\t\t * @protected\n\t\t * @type {HTMLCanvasElement}\n\t\t * @default 0\n\t\t **/\n\t\tthis._canvas = null;\n\t\t\n\t\t/**\n\t\t * @property _lastTime\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default -1\n\t\t **/\n\t\tthis._lastTime = -1;\n\t\t\n\t\tif (this.readyState < 2) { video.addEventListener(\"canplaythrough\", this._videoReady.bind(this)); } //once:true isn't supported everywhere, but its a non-critical optimization here.\n\t}\n\tvar p = VideoBuffer.prototype;\n\t\n\t\n// public methods:\n\t/**\n\t * Gets an HTML canvas element showing the current video frame, or the previous frame if in a seek / loop.\n\t * Primarily for use by {{#crossLink \"Bitmap\"}}{{/crossLink}}.\n\t * @method getImage\n\t **/\n\tp.getImage = function() {\n\t\tif (this.readyState < 2) { return; }\n\t\tvar canvas=this._canvas, video = this._video;\n\t\tif (!canvas) {\n\t\t\tcanvas = this._canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");\n\t\t\tcanvas.width = video.videoWidth;\n\t\t\tcanvas.height = video.videoHeight;\n\t\t}\n\t\tif (video.readyState >= 2 && video.currentTime !== this._lastTime) {\n\t\t\tvar ctx = canvas.getContext(\"2d\");\n\t\t\tctx.clearRect(0,0,canvas.width,canvas.height);\n\t\t\tctx.drawImage(video,0,0,canvas.width,canvas.height);\n\t\t\tthis._lastTime = video.currentTime;\n\t\t}\n\t\treturn canvas;\n\t};\n\t\n// private methods:\n\t/**\n\t * @method _videoReady\n\t * @protected\n\t **/\n\tp._videoReady = function() {\n\t\tthis.readyState = 2;\n\t};\n\n\n\tcreatejs.VideoBuffer = VideoBuffer;\n}());\n\n//##############################################################################\n// MouseEvent.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Passed as the parameter to all mouse/pointer/touch related events. For a listing of mouse events and their properties,\n\t * see the {{#crossLink \"DisplayObject\"}}{{/crossLink}} and {{#crossLink \"Stage\"}}{{/crossLink}} event listings.\n\t * @class MouseEvent\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @param {Number} stageX The normalized x position relative to the stage.\n\t * @param {Number} stageY The normalized y position relative to the stage.\n\t * @param {MouseEvent} nativeEvent The native DOM event related to this mouse event.\n\t * @param {Number} pointerID The unique id for the pointer.\n\t * @param {Boolean} primary Indicates whether this is the primary pointer in a multitouch environment.\n\t * @param {Number} rawX The raw x position relative to the stage.\n\t * @param {Number} rawY The raw y position relative to the stage.\n\t * @param {DisplayObject} relatedTarget The secondary target for the event.\n\t * @extends Event\n\t * @constructor\n\t **/\n\tfunction MouseEvent(type, bubbles, cancelable, stageX, stageY, nativeEvent, pointerID, primary, rawX, rawY, relatedTarget) {\n\t\tthis.Event_constructor(type, bubbles, cancelable);\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The normalized x position on the stage. This will always be within the range 0 to stage width.\n\t\t * @property stageX\n\t\t * @type Number\n\t\t*/\n\t\tthis.stageX = stageX;\n\t\n\t\t/**\n\t\t * The normalized y position on the stage. This will always be within the range 0 to stage height.\n\t\t * @property stageY\n\t\t * @type Number\n\t\t **/\n\t\tthis.stageY = stageY;\n\t\n\t\t/**\n\t\t * The raw x position relative to the stage. Normally this will be the same as the stageX value, unless\n\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n\t\t * @property rawX\n\t\t * @type Number\n\t\t*/\n\t\tthis.rawX = (rawX==null)?stageX:rawX;\n\t\n\t\t/**\n\t\t * The raw y position relative to the stage. Normally this will be the same as the stageY value, unless\n\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n\t\t * @property rawY\n\t\t * @type Number\n\t\t*/\n\t\tthis.rawY = (rawY==null)?stageY:rawY;\n\t\n\t\t/**\n\t\t * The native MouseEvent generated by the browser. The properties and API for this\n\t\t * event may differ between browsers. This property will be null if the\n\t\t * EaselJS property was not directly generated from a native MouseEvent.\n\t\t * @property nativeEvent\n\t\t * @type HtmlMouseEvent\n\t\t * @default null\n\t\t **/\n\t\tthis.nativeEvent = nativeEvent;\n\t\n\t\t/**\n\t\t * The unique id for the pointer (touch point or cursor). This will be either -1 for the mouse, or the system\n\t\t * supplied id value.\n\t\t * @property pointerID\n\t\t * @type {Number}\n\t\t */\n\t\tthis.pointerID = pointerID;\n\t\n\t\t/**\n\t\t * Indicates whether this is the primary pointer in a multitouch environment. This will always be true for the mouse.\n\t\t * For touch pointers, the first pointer in the current stack will be considered the primary pointer.\n\t\t * @property primary\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis.primary = !!primary;\n\t\t\n\t\t/**\n\t\t * The secondary target for the event, if applicable. This is used for mouseout/rollout\n\t\t * events to indicate the object that the mouse entered from, mouseover/rollover for the object the mouse exited,\n\t\t * and stagemousedown/stagemouseup events for the object that was the under the cursor, if any.\n\t\t * \n\t\t * Only valid interaction targets will be returned (ie. objects with mouse listeners or a cursor set).\n\t\t * @property relatedTarget\n\t\t * @type {DisplayObject}\n\t\t */\n\t\tthis.relatedTarget = relatedTarget;\n\t}\n\tvar p = createjs.extend(MouseEvent, createjs.Event);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n\t\n// getter / setters:\n\t/**\n\t * Returns the x position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n\t * @property localX\n\t * @type {Number}\n\t * @readonly\n\t */\n\tp._get_localX = function() {\n\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).x;\n\t};\n\t\n\t/**\n\t * Returns the y position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n\t * @property localY\n\t * @type {Number}\n\t * @readonly\n\t */\n\tp._get_localY = function() {\n\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).y;\n\t};\n\t\n\t/**\n\t * Indicates whether the event was generated by a touch input (versus a mouse input).\n\t * @property isTouch\n\t * @type {Boolean}\n\t * @readonly\n\t */\n\tp._get_isTouch = function() {\n\t\treturn this.pointerID !== -1;\n\t};\n\t\n\t\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tlocalX: { get: p._get_localX },\n\t\t\tlocalY: { get: p._get_localY },\n\t\t\tisTouch: { get: p._get_isTouch }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Returns a clone of the MouseEvent instance.\n\t * @method clone\n\t * @return {MouseEvent} a clone of the MouseEvent instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new MouseEvent(this.type, this.bubbles, this.cancelable, this.stageX, this.stageY, this.nativeEvent, this.pointerID, this.primary, this.rawX, this.rawY);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[MouseEvent (type=\"+this.type+\" stageX=\"+this.stageX+\" stageY=\"+this.stageY+\")]\";\n\t};\n\n\n\tcreatejs.MouseEvent = createjs.promote(MouseEvent, \"Event\");\n}());\n\n//##############################################################################\n// Matrix2D.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents an affine transformation matrix, and provides tools for constructing and concatenating matrices.\n\t *\n\t * This matrix can be visualized as:\n\t *\n\t * \t[ a  c  tx\n\t * \t  b  d  ty\n\t * \t  0  0  1  ]\n\t *\n\t * Note the locations of b and c.\n\t *\n\t * @class Matrix2D\n\t * @param {Number} [a=1] Specifies the a property for the new matrix.\n\t * @param {Number} [b=0] Specifies the b property for the new matrix.\n\t * @param {Number} [c=0] Specifies the c property for the new matrix.\n\t * @param {Number} [d=1] Specifies the d property for the new matrix.\n\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n\t * @constructor\n\t **/\n\tfunction Matrix2D(a, b, c, d, tx, ty) {\n\t\tthis.setValues(a,b,c,d,tx,ty);\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * Position (0, 0) in a 3x3 affine transformation matrix.\n\t\t * @property a\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (0, 1) in a 3x3 affine transformation matrix.\n\t\t * @property b\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (1, 0) in a 3x3 affine transformation matrix.\n\t\t * @property c\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (1, 1) in a 3x3 affine transformation matrix.\n\t\t * @property d\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (2, 0) in a 3x3 affine transformation matrix.\n\t\t * @property tx\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (2, 1) in a 3x3 affine transformation matrix.\n\t\t * @property ty\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Matrix2D.prototype;\n\n// constants:\n\t/**\n\t * Multiplier for converting degrees to radians. Used internally by Matrix2D.\n\t * @property DEG_TO_RAD\n\t * @static\n\t * @final\n\t * @type Number\n\t * @readonly\n\t **/\n\tMatrix2D.DEG_TO_RAD = Math.PI/180;\n\n\n// static public properties:\n\t/**\n\t * An identity matrix, representing a null transformation.\n\t * @property identity\n\t * @static\n\t * @type Matrix2D\n\t * @readonly\n\t **/\n\tMatrix2D.identity = null; // set at bottom of class definition.\n\t\n\n// public methods:\n\t/**\n\t * Sets the specified values on this instance. \n\t * @method setValues\n\t * @param {Number} [a=1] Specifies the a property for the new matrix.\n\t * @param {Number} [b=0] Specifies the b property for the new matrix.\n\t * @param {Number} [c=0] Specifies the c property for the new matrix.\n\t * @param {Number} [d=1] Specifies the d property for the new matrix.\n\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n\t * @return {Matrix2D} This instance. Useful for chaining method calls.\n\t*/\n\tp.setValues = function(a, b, c, d, tx, ty) {\n\t\t// don't forget to update docs in the constructor if these change:\n\t\tthis.a = (a == null) ? 1 : a;\n\t\tthis.b = b || 0;\n\t\tthis.c = c || 0;\n\t\tthis.d = (d == null) ? 1 : d;\n\t\tthis.tx = tx || 0;\n\t\tthis.ty = ty || 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Appends the specified matrix properties to this matrix. All parameters are required.\n\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n\t * @method append\n\t * @param {Number} a\n\t * @param {Number} b\n\t * @param {Number} c\n\t * @param {Number} d\n\t * @param {Number} tx\n\t * @param {Number} ty\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.append = function(a, b, c, d, tx, ty) {\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\t\tvar c1 = this.c;\n\t\tvar d1 = this.d;\n\t\tif (a != 1 || b != 0 || c != 0 || d != 1) {\n\t\t\tthis.a  = a1*a+c1*b;\n\t\t\tthis.b  = b1*a+d1*b;\n\t\t\tthis.c  = a1*c+c1*d;\n\t\t\tthis.d  = b1*c+d1*d;\n\t\t}\n\t\tthis.tx = a1*tx+c1*ty+this.tx;\n\t\tthis.ty = b1*tx+d1*ty+this.ty;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Prepends the specified matrix properties to this matrix.\n\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n\t * All parameters are required.\n\t * @method prepend\n\t * @param {Number} a\n\t * @param {Number} b\n\t * @param {Number} c\n\t * @param {Number} d\n\t * @param {Number} tx\n\t * @param {Number} ty\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prepend = function(a, b, c, d, tx, ty) {\n\t\tvar a1 = this.a;\n\t\tvar c1 = this.c;\n\t\tvar tx1 = this.tx;\n\n\t\tthis.a  = a*a1+c*this.b;\n\t\tthis.b  = b*a1+d*this.b;\n\t\tthis.c  = a*c1+c*this.d;\n\t\tthis.d  = b*c1+d*this.d;\n\t\tthis.tx = a*tx1+c*this.ty+tx;\n\t\tthis.ty = b*tx1+d*this.ty+ty;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Appends the specified matrix to this matrix.\n\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n\t * @method appendMatrix\n\t * @param {Matrix2D} matrix\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.appendMatrix = function(matrix) {\n\t\treturn this.append(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Prepends the specified matrix to this matrix.\n\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n\t * For example, you could calculate the combined transformation for a child object using:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar mtx = o.getMatrix();\n\t * \twhile (o = o.parent) {\n\t * \t\t// prepend each parent's transformation in turn:\n\t * \t\to.prependMatrix(o.getMatrix());\n\t * \t}\n\t * @method prependMatrix\n\t * @param {Matrix2D} matrix\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prependMatrix = function(matrix) {\n\t\treturn this.prepend(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Generates matrix properties from the specified display object transform properties, and appends them to this matrix.\n\t * For example, you can use this to generate a matrix representing the transformations of a display object:\n\t * \n\t * \tvar mtx = new createjs.Matrix2D();\n\t * \tmtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation);\n\t * @method appendTransform\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} scaleX\n\t * @param {Number} scaleY\n\t * @param {Number} rotation\n\t * @param {Number} skewX\n\t * @param {Number} skewY\n\t * @param {Number} regX Optional.\n\t * @param {Number} regY Optional.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.appendTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tif (rotation%360) {\n\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\n\t\t\tvar cos = Math.cos(r);\n\t\t\tvar sin = Math.sin(r);\n\t\t} else {\n\t\t\tcos = 1;\n\t\t\tsin = 0;\n\t\t}\n\n\t\tif (skewX || skewY) {\n\t\t\t// TODO: can this be combined into a single append operation?\n\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\n\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\n\t\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n\t\t} else {\n\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n\t\t}\n\t\t\n\t\tif (regX || regY) {\n\t\t\t// append the registration offset:\n\t\t\tthis.tx -= regX*this.a+regY*this.c; \n\t\t\tthis.ty -= regX*this.b+regY*this.d;\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Generates matrix properties from the specified display object transform properties, and prepends them to this matrix.\n\t * For example, you could calculate the combined transformation for a child object using:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar mtx = new createjs.Matrix2D();\n\t * \tdo  {\n\t * \t\t// prepend each parent's transformation in turn:\n\t * \t\tmtx.prependTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n\t * \t} while (o = o.parent);\n\t * \t\n\t * \tNote that the above example would not account for {{#crossLink \"DisplayObject/transformMatrix:property\"}}{{/crossLink}}\n\t * \tvalues. See {{#crossLink \"Matrix2D/prependMatrix\"}}{{/crossLink}} for an example that does.\n\t * @method prependTransform\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} scaleX\n\t * @param {Number} scaleY\n\t * @param {Number} rotation\n\t * @param {Number} skewX\n\t * @param {Number} skewY\n\t * @param {Number} regX Optional.\n\t * @param {Number} regY Optional.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prependTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tif (rotation%360) {\n\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\n\t\t\tvar cos = Math.cos(r);\n\t\t\tvar sin = Math.sin(r);\n\t\t} else {\n\t\t\tcos = 1;\n\t\t\tsin = 0;\n\t\t}\n\n\t\tif (regX || regY) {\n\t\t\t// prepend the registration offset:\n\t\t\tthis.tx -= regX; this.ty -= regY;\n\t\t}\n\t\tif (skewX || skewY) {\n\t\t\t// TODO: can this be combined into a single prepend operation?\n\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\n\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\n\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n\t\t\tthis.prepend(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n\t\t} else {\n\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a clockwise rotation transformation to the matrix.\n\t * @method rotate\n\t * @param {Number} angle The angle to rotate by, in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.rotate = function(angle) {\n\t\tangle = angle*Matrix2D.DEG_TO_RAD;\n\t\tvar cos = Math.cos(angle);\n\t\tvar sin = Math.sin(angle);\n\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\n\t\tthis.a = a1*cos+this.c*sin;\n\t\tthis.b = b1*cos+this.d*sin;\n\t\tthis.c = -a1*sin+this.c*cos;\n\t\tthis.d = -b1*sin+this.d*cos;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a skew transformation to the matrix.\n\t * @method skew\n\t * @param {Number} skewX The amount to skew horizontally in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n\t * @param {Number} skewY The amount to skew vertically in degrees.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t*/\n\tp.skew = function(skewX, skewY) {\n\t\tskewX = skewX*Matrix2D.DEG_TO_RAD;\n\t\tskewY = skewY*Matrix2D.DEG_TO_RAD;\n\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), 0, 0);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a scale transformation to the matrix.\n\t * @method scale\n\t * @param {Number} x The amount to scale horizontally. E.G. a value of 2 will double the size in the X direction, and 0.5 will halve it.\n\t * @param {Number} y The amount to scale vertically.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.scale = function(x, y) {\n\t\tthis.a *= x;\n\t\tthis.b *= x;\n\t\tthis.c *= y;\n\t\tthis.d *= y;\n\t\t//this.tx *= x;\n\t\t//this.ty *= y;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Translates the matrix on the x and y axes.\n\t * @method translate\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.translate = function(x, y) {\n\t\tthis.tx += this.a*x + this.c*y;\n\t\tthis.ty += this.b*x + this.d*y;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Sets the properties of the matrix to those of an identity matrix (one that applies a null transformation).\n\t * @method identity\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.identity = function() {\n\t\tthis.a = this.d = 1;\n\t\tthis.b = this.c = this.tx = this.ty = 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Inverts the matrix, causing it to perform the opposite transformation.\n\t * @method invert\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.invert = function() {\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\t\tvar c1 = this.c;\n\t\tvar d1 = this.d;\n\t\tvar tx1 = this.tx;\n\t\tvar n = a1*d1-b1*c1;\n\n\t\tthis.a = d1/n;\n\t\tthis.b = -b1/n;\n\t\tthis.c = -c1/n;\n\t\tthis.d = a1/n;\n\t\tthis.tx = (c1*this.ty-d1*tx1)/n;\n\t\tthis.ty = -(a1*this.ty-b1*tx1)/n;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns true if the matrix is an identity matrix.\n\t * @method isIdentity\n\t * @return {Boolean}\n\t **/\n\tp.isIdentity = function() {\n\t\treturn this.tx === 0 && this.ty === 0 && this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1;\n\t};\n\t\n\t/**\n\t * Returns true if this matrix is equal to the specified matrix (all property values are equal).\n\t * @method equals\n\t * @param {Matrix2D} matrix The matrix to compare.\n\t * @return {Boolean}\n\t **/\n\tp.equals = function(matrix) {\n\t\treturn this.tx === matrix.tx && this.ty === matrix.ty && this.a === matrix.a && this.b === matrix.b && this.c === matrix.c && this.d === matrix.d;\n\t};\n\n\t/**\n\t * Transforms a point according to this matrix.\n\t * @method transformPoint\n\t * @param {Number} x The x component of the point to transform.\n\t * @param {Number} y The y component of the point to transform.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a generic object with x/y properties will be returned.\n\t * @return {Point} This matrix. Useful for chaining method calls.\n\t **/\n\tp.transformPoint = function(x, y, pt) {\n\t\tpt = pt||{};\n\t\tpt.x = x*this.a+y*this.c+this.tx;\n\t\tpt.y = x*this.b+y*this.d+this.ty;\n\t\treturn pt;\n\t};\n\n\t/**\n\t * Decomposes the matrix into transform properties (x, y, scaleX, scaleY, and rotation). Note that these values\n\t * may not match the transform properties you used to generate the matrix, though they will produce the same visual\n\t * results.\n\t * @method decompose\n\t * @param {Object} target The object to apply the transform properties to. If null, then a new object will be returned.\n\t * @return {Object} The target, or a new generic object with the transform properties applied.\n\t*/\n\tp.decompose = function(target) {\n\t\t// TODO: it would be nice to be able to solve for whether the matrix can be decomposed into only scale/rotation even when scale is negative\n\t\tif (target == null) { target = {}; }\n\t\ttarget.x = this.tx;\n\t\ttarget.y = this.ty;\n\t\ttarget.scaleX = Math.sqrt(this.a * this.a + this.b * this.b);\n\t\ttarget.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);\n\n\t\tvar skewX = Math.atan2(-this.c, this.d);\n\t\tvar skewY = Math.atan2(this.b, this.a);\n\n\t\tvar delta = Math.abs(1-skewX/skewY);\n\t\tif (delta < 0.00001) { // effectively identical, can use rotation:\n\t\t\ttarget.rotation = skewY/Matrix2D.DEG_TO_RAD;\n\t\t\tif (this.a < 0 && this.d >= 0) {\n\t\t\t\ttarget.rotation += (target.rotation <= 0) ? 180 : -180;\n\t\t\t}\n\t\t\ttarget.skewX = target.skewY = 0;\n\t\t} else {\n\t\t\ttarget.skewX = skewX/Matrix2D.DEG_TO_RAD;\n\t\t\ttarget.skewY = skewY/Matrix2D.DEG_TO_RAD;\n\t\t}\n\t\treturn target;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified matrix to this matrix.\n\t * @method copy\n\t * @param {Matrix2D} matrix The matrix to copy properties from.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t*/\n\tp.copy = function(matrix) {\n\t\treturn this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Returns a clone of the Matrix2D instance.\n\t * @method clone\n\t * @return {Matrix2D} a clone of the Matrix2D instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Matrix2D (a=\"+this.a+\" b=\"+this.b+\" c=\"+this.c+\" d=\"+this.d+\" tx=\"+this.tx+\" ty=\"+this.ty+\")]\";\n\t};\n\n\t// this has to be populated after the class is defined:\n\tMatrix2D.identity = new Matrix2D();\n\n\n\tcreatejs.Matrix2D = Matrix2D;\n}());\n\n//##############################################################################\n// DisplayProps.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * Used for calculating and encapsulating display related properties.\n\t * @class DisplayProps\n\t * @param {Number} [visible=true] Visible value.\n\t * @param {Number} [alpha=1] Alpha value.\n\t * @param {Number} [shadow=null] A Shadow instance or null.\n\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n\t * @param {Number} [matrix] A transformation matrix. Defaults to a new identity matrix.\n\t * @constructor\n\t **/\n\tfunction DisplayProps(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.setValues(visible, alpha, shadow, compositeOperation, matrix);\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * Property representing the alpha that will be applied to a display object.\n\t\t * @property alpha\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Property representing the shadow that will be applied to a display object.\n\t\t * @property shadow\n\t\t * @type Shadow\n\t\t **/\n\t\n\t\t/**\n\t\t * Property representing the compositeOperation that will be applied to a display object.\n\t\t * You can find a list of valid composite operations at:\n\t\t * <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Compositing\">https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Compositing</a>\n\t\t * @property compositeOperation\n\t\t * @type String\n\t\t **/\n\t\t\n\t\t/**\n\t\t * Property representing the value for visible that will be applied to a display object.\n\t\t * @property visible\n\t\t * @type Boolean\n\t\t **/\n\t\t\n\t\t/**\n\t\t * The transformation matrix that will be applied to a display object.\n\t\t * @property matrix\n\t\t * @type Matrix2D\n\t\t **/\n\t}\n\tvar p = DisplayProps.prototype;\n\n// initialization:\n\t/**\n\t * Reinitializes the instance with the specified values.\n\t * @method setValues\n\t * @param {Number} [visible=true] Visible value.\n\t * @param {Number} [alpha=1] Alpha value.\n\t * @param {Number} [shadow=null] A Shadow instance or null.\n\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n\t * @param {Number} [matrix] A transformation matrix. Defaults to an identity matrix.\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function (visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.visible = visible == null ? true : !!visible;\n\t\tthis.alpha = alpha == null ? 1 : alpha;\n\t\tthis.shadow = shadow;\n\t\tthis.compositeOperation = compositeOperation;\n\t\tthis.matrix = matrix || (this.matrix&&this.matrix.identity()) || new createjs.Matrix2D();\n\t\treturn this;\n\t};\n\n// public methods:\n\t/**\n\t * Appends the specified display properties. This is generally used to apply a child's properties its parent's.\n\t * @method append\n\t * @param {Boolean} visible desired visible value\n\t * @param {Number} alpha desired alpha value\n\t * @param {Shadow} shadow desired shadow value\n\t * @param {String} compositeOperation desired composite operation value\n\t * @param {Matrix2D} [matrix] a Matrix2D instance\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.append = function(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.alpha *= alpha;\n\t\tthis.shadow = shadow || this.shadow;\n\t\tthis.compositeOperation = compositeOperation || this.compositeOperation;\n\t\tthis.visible = this.visible && visible;\n\t\tmatrix&&this.matrix.appendMatrix(matrix);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Prepends the specified display properties. This is generally used to apply a parent's properties to a child's.\n\t * For example, to get the combined display properties that would be applied to a child, you could use:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar props = new createjs.DisplayProps();\n\t * \tdo {\n\t * \t\t// prepend each parent's props in turn:\n\t * \t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation, o.getMatrix());\n\t * \t} while (o = o.parent);\n\t * \t\n\t * @method prepend\n\t * @param {Boolean} visible desired visible value\n\t * @param {Number} alpha desired alpha value\n\t * @param {Shadow} shadow desired shadow value\n\t * @param {String} compositeOperation desired composite operation value\n\t * @param {Matrix2D} [matrix] a Matrix2D instance\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.prepend = function(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.alpha *= alpha;\n\t\tthis.shadow = this.shadow || shadow;\n\t\tthis.compositeOperation = this.compositeOperation || compositeOperation;\n\t\tthis.visible = this.visible && visible;\n\t\tmatrix&&this.matrix.prependMatrix(matrix);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Resets this instance and its matrix to default values.\n\t * @method identity\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.identity = function() {\n\t\tthis.visible = true;\n\t\tthis.alpha = 1;\n\t\tthis.shadow = this.compositeOperation = null;\n\t\tthis.matrix.identity();\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a clone of the DisplayProps instance. Clones the associated matrix.\n\t * @method clone\n\t * @return {DisplayProps} a clone of the DisplayProps instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new DisplayProps(this.alpha, this.shadow, this.compositeOperation, this.visible, this.matrix.clone());\n\t};\n\n// private methods:\n\n\tcreatejs.DisplayProps = DisplayProps;\n})();\n\n//##############################################################################\n// Point.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents a point on a 2 dimensional x / y coordinate system.\n\t *\n\t * <h4>Example</h4>\n\t * \n\t *      var point = new createjs.Point(0, 100);\n\t * \n\t * @class Point\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @constructor\n\t **/\n\tfunction Point(x, y) {\n\t \tthis.setValues(x, y);\n\t \t\n\t \t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * X position.\n\t\t * @property x\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Y position.\n\t\t * @property y\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Point.prototype;\n\t\n// public methods:\n\t/** \n\t * Sets the specified values on this instance.\n\t * @method setValues\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @return {Point} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function(x, y) {\n\t\tthis.x = x||0;\n\t\tthis.y = y||0;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified point to this point.\n\t * @method copy\n\t * @param {Point} point The point to copy properties from.\n\t * @return {Point} This point. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.copy = function(point) {\n\t\tthis.x = point.x;\n\t\tthis.y = point.y;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Point instance.\n\t * @method clone\n\t * @return {Point} a clone of the Point instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Point(this.x, this.y);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Point (x=\"+this.x+\" y=\"+this.y+\")]\";\n\t};\n\t\n\t\n\tcreatejs.Point = Point;\n}());\n\n//##############################################################################\n// Rectangle.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents a rectangle as defined by the points (x, y) and (x+width, y+height).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var rect = new createjs.Rectangle(0, 0, 100, 100);\n\t *\n\t * @class Rectangle\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @param {Number} [width=0] The width of the Rectangle.\n\t * @param {Number} [height=0] The height of the Rectangle.\n\t * @constructor\n\t **/\n\tfunction Rectangle(x, y, width, height) {\n\t\tthis.setValues(x, y, width, height);\n\t\t\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * X position.\n\t\t * @property x\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Y position.\n\t\t * @property y\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Width.\n\t\t * @property width\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Height.\n\t\t * @property height\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Rectangle.prototype;\n\n// public methods:\n\t/** \n\t * Sets the specified values on this instance.\n\t * @method setValues\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @param {Number} [width=0] The width of the Rectangle.\n\t * @param {Number} [height=0] The height of the Rectangle.\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function(x, y, width, height) {\n\t\t// don't forget to update docs in the constructor if these change:\n\t\tthis.x = x||0;\n\t\tthis.y = y||0;\n\t\tthis.width = width||0;\n\t\tthis.height = height||0;\n\t\treturn this;\n\t};\n\t\n\t/** \n\t * Extends the rectangle's bounds to include the described point or rectangle.\n\t * @method extend\n\t * @param {Number} x X position of the point or rectangle.\n\t * @param {Number} y Y position of the point or rectangle.\n\t * @param {Number} [width=0] The width of the rectangle.\n\t * @param {Number} [height=0] The height of the rectangle.\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.extend = function(x, y, width, height) {\n\t\twidth = width||0;\n\t\theight = height||0;\n\t\tif (x+width > this.x+this.width) { this.width = x+width-this.x; }\n\t\tif (y+height > this.y+this.height) { this.height = y+height-this.y; }\n\t\tif (x < this.x) { this.width += this.x-x; this.x = x; }\n\t\tif (y < this.y) { this.height += this.y-y; this.y = y; }\n\t\treturn this;\n\t};\n\t\n\t/** \n\t * Adds the specified padding to the rectangle's bounds.\n\t * @method pad\n\t * @param {Number} top\n\t * @param {Number} left\n\t * @param {Number} bottom\n\t * @param {Number} right\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.pad = function(top, left, bottom, right) {\n\t\tthis.x -= left;\n\t\tthis.y -= top;\n\t\tthis.width += left+right;\n\t\tthis.height += top+bottom;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified rectangle to this rectangle.\n\t * @method copy\n\t * @param {Rectangle} rectangle The rectangle to copy properties from.\n\t * @return {Rectangle} This rectangle. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.copy = function(rectangle) {\n\t\treturn this.setValues(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n\t};\n\t\n\t/** \n\t * Returns true if this rectangle fully encloses the described point or rectangle.\n\t * @method contains\n\t * @param {Number} x X position of the point or rectangle.\n\t * @param {Number} y Y position of the point or rectangle.\n\t * @param {Number} [width=0] The width of the rectangle.\n\t * @param {Number} [height=0] The height of the rectangle.\n\t * @return {Boolean} True if the described point or rectangle is contained within this rectangle.\n\t*/\n\tp.contains = function(x, y, width, height) {\n\t\twidth = width||0;\n\t\theight = height||0;\n\t\treturn (x >= this.x && x+width <= this.x+this.width && y >= this.y && y+height <= this.y+this.height);\n\t};\n\t\n\t/** \n\t * Returns a new rectangle which contains this rectangle and the specified rectangle.\n\t * @method union\n\t * @param {Rectangle} rect The rectangle to calculate a union with.\n\t * @return {Rectangle} A new rectangle describing the union.\n\t*/\n\tp.union = function(rect) {\n\t\treturn this.clone().extend(rect.x, rect.y, rect.width, rect.height);\n\t};\n\t\n\t/** \n\t * Returns a new rectangle which describes the intersection (overlap) of this rectangle and the specified rectangle,\n\t * or null if they do not intersect.\n\t * @method intersection\n\t * @param {Rectangle} rect The rectangle to calculate an intersection with.\n\t * @return {Rectangle} A new rectangle describing the intersection or null.\n\t*/\n\tp.intersection = function(rect) {\n\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1+rect.width, y2 = y1+rect.height;\n\t\tif (this.x > x1) { x1 = this.x; }\n\t\tif (this.y > y1) { y1 = this.y; }\n\t\tif (this.x + this.width < x2) { x2 = this.x + this.width; }\n\t\tif (this.y + this.height < y2) { y2 = this.y + this.height; }\n\t\treturn (x2 <= x1 || y2 <= y1) ? null : new Rectangle(x1, y1, x2-x1, y2-y1);\n\t};\n\t\n\t/** \n\t * Returns true if the specified rectangle intersects (has any overlap) with this rectangle.\n\t * @method intersects\n\t * @param {Rectangle} rect The rectangle to compare.\n\t * @return {Boolean} True if the rectangles intersect.\n\t*/\n\tp.intersects = function(rect) {\n\t\treturn (rect.x <= this.x+this.width && this.x <= rect.x+rect.width && rect.y <= this.y+this.height && this.y <= rect.y + rect.height);\n\t};\n\t\n\t/** \n\t * Returns true if the width or height are equal or less than 0.\n\t * @method isEmpty\n\t * @return {Boolean} True if the rectangle is empty.\n\t*/\n\tp.isEmpty = function() {\n\t\treturn this.width <= 0 || this.height <= 0;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Rectangle instance.\n\t * @method clone\n\t * @return {Rectangle} a clone of the Rectangle instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Rectangle (x=\"+this.x+\" y=\"+this.y+\" width=\"+this.width+\" height=\"+this.height+\")]\";\n\t};\n\t\n\t\n\tcreatejs.Rectangle = Rectangle;\n}());\n\n//##############################################################################\n// ButtonHelper.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The ButtonHelper is a helper class to create interactive buttons from {{#crossLink \"MovieClip\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sprite\"}}{{/crossLink}} instances. This class will intercept mouse events from an object, and\n\t * automatically call {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}},\n\t * to the respective animation labels, add a pointer cursor, and allows the user to define a hit state frame.\n\t *\n\t * The ButtonHelper instance does not need to be added to the stage, but a reference should be maintained to prevent\n\t * garbage collection.\n\t * \n\t * Note that over states will not work unless you call {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var helper = new createjs.ButtonHelper(myInstance, \"out\", \"over\", \"down\", false, myInstance, \"hit\");\n\t *      myInstance.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *          // Click Happened.\n\t *      }\n\t *\n\t * @class ButtonHelper\n\t * @param {Sprite|MovieClip} target The instance to manage.\n\t * @param {String} [outLabel=\"out\"] The label or animation to go to when the user rolls out of the button.\n\t * @param {String} [overLabel=\"over\"] The label or animation to go to when the user rolls over the button.\n\t * @param {String} [downLabel=\"down\"] The label or animation to go to when the user presses the button.\n\t * @param {Boolean} [play=false] If the helper should call \"gotoAndPlay\" or \"gotoAndStop\" on the button when changing\n\t * states.\n\t * @param {DisplayObject} [hitArea] An optional item to use as the hit state for the button. If this is not defined,\n\t * then the button's visible states will be used instead. Note that the same instance as the \"target\" argument can be\n\t * used for the hitState.\n\t * @param {String} [hitLabel] The label or animation on the hitArea instance that defines the hitArea bounds. If this is\n\t * null, then the default state of the hitArea will be used. *\n\t * @constructor\n\t */\n\tfunction ButtonHelper(target, outLabel, overLabel, downLabel, play, hitArea, hitLabel) {\n\t\tif (!target.addEventListener) { return; }\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The target for this button helper.\n\t\t * @property target\n\t\t * @type MovieClip | Sprite\n\t\t * @readonly\n\t\t **/\n\t\tthis.target = target;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user mouses out of the target. Defaults to \"over\".\n\t\t * @property overLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.overLabel = overLabel == null ? \"over\" : overLabel;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user mouses over the target. Defaults to \"out\".\n\t\t * @property outLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.outLabel = outLabel == null ? \"out\" : outLabel;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user presses on the target. Defaults to \"down\".\n\t\t * @property downLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.downLabel = downLabel == null ? \"down\" : downLabel;\n\t\n\t\t/**\n\t\t * If true, then ButtonHelper will call gotoAndPlay, if false, it will use gotoAndStop. Default is false.\n\t\t * @property play\n\t\t * @default false\n\t\t * @type Boolean\n\t\t **/\n\t\tthis.play = play;\n\t\t\n\t\t\n\t//  private properties\n\t\t/**\n\t\t * @property _isPressed\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._isPressed = false;\n\t\n\t\t/**\n\t\t * @property _isOver\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._isOver = false;\n\t\n\t\t/**\n\t\t * @property _enabled\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._enabled = false;\n\t\t\n\t// setup:\n\t\ttarget.mouseChildren = false; // prevents issues when children are removed from the display list when state changes.\n\t\tthis.enabled = true;\n\t\tthis.handleEvent({});\n\t\tif (hitArea) {\n\t\t\tif (hitLabel) {\n\t\t\t\thitArea.actionsEnabled = false;\n\t\t\t\thitArea.gotoAndStop&&hitArea.gotoAndStop(hitLabel);\n\t\t\t}\n\t\t\ttarget.hitArea = hitArea;\n\t\t}\n\t}\n\tvar p = ButtonHelper.prototype;\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n\t * @method setEnabled\n\t * @param {Boolean} value The enabled property to set the instance to.\n\t * @[rptected\n\t * @protected\n\t **/\n\tp._setEnabled = function(value) {\n\t\tif (value == this._enabled) { return; }\n\t\tvar o = this.target;\n\t\tthis._enabled = value;\n\t\tif (value) {\n\t\t\to.cursor = \"pointer\";\n\t\t\to.addEventListener(\"rollover\", this);\n\t\t\to.addEventListener(\"rollout\", this);\n\t\t\to.addEventListener(\"mousedown\", this);\n\t\t\to.addEventListener(\"pressup\", this);\n\t\t\tif (o._reset) { o.__reset = o._reset; o._reset = this._reset;}\n\t\t} else {\n\t\t\to.cursor = null;\n\t\t\to.removeEventListener(\"rollover\", this);\n\t\t\to.removeEventListener(\"rollout\", this);\n\t\t\to.removeEventListener(\"mousedown\", this);\n\t\t\to.removeEventListener(\"pressup\", this);\n\t\t\tif (o.__reset) { o._reset = o.__reset; delete(o.__reset); }\n\t\t}\n\t};\n\t// ButtonHelper.setEnabled is @deprecated. Remove for 1.1+\n\tp.setEnabled = createjs.deprecate(p._setEnabled, \"ButtonHelper.setEnabled\");\n\n\t/**\n\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n\t * @method getEnabled\n\t * @protected\n\t * @return {Boolean}\n\t **/\n\tp._getEnabled = function() {\n\t\treturn this._enabled;\n\t};\n\t// ButtonHelper.getEnabled is @deprecated. Remove for 1.1+\n\tp.getEnabled = createjs.deprecate(p._getEnabled, \"ButtonHelper.getEnabled\");\n\n\t/**\n\t * Enables or disables the button functionality on the target.\n\t * @property enabled\n\t * @type {Boolean}\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tenabled: { get: p._getEnabled, set: p._setEnabled }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[ButtonHelper]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method handleEvent\n\t * @param {Object} evt The mouse event to handle.\n\t * @protected\n\t **/\n\tp.handleEvent = function(evt) {\n\t\tvar label, t = this.target, type = evt.type;\n\t\tif (type == \"mousedown\") {\n\t\t\tthis._isPressed = true;\n\t\t\tlabel = this.downLabel;\n\t\t} else if (type == \"pressup\") {\n\t\t\tthis._isPressed = false;\n\t\t\tlabel = this._isOver ? this.overLabel : this.outLabel;\n\t\t} else if (type == \"rollover\") {\n\t\t\tthis._isOver = true;\n\t\t\tlabel = this._isPressed ? this.downLabel : this.overLabel;\n\t\t} else { // rollout and default\n\t\t\tthis._isOver = false;\n\t\t\tlabel = this._isPressed ? this.overLabel : this.outLabel;\n\t\t}\n\t\tif (this.play) {\n\t\t\tt.gotoAndPlay&&t.gotoAndPlay(label);\n\t\t} else {\n\t\t\tt.gotoAndStop&&t.gotoAndStop(label);\n\t\t}\n\t};\n\t\n\t/**\n\t * Injected into target. Preserves the paused state through a reset.\n\t * @method _reset\n\t * @protected\n\t **/\n\tp._reset = function() {\n\t\t// TODO: explore better ways to handle this issue. This is hacky & disrupts object signatures.\n\t\tvar p = this.paused;\n\t\tthis.__reset();\n\t\tthis.paused = p;\n\t};\n\n\n\tcreatejs.ButtonHelper = ButtonHelper;\n}());\n\n//##############################################################################\n// Shadow.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * This class encapsulates the properties required to define a shadow to apply to a {{#crossLink \"DisplayObject\"}}{{/crossLink}}\n\t * via its <code>shadow</code> property.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myImage.shadow = new createjs.Shadow(\"#000000\", 5, 5, 10);\n\t *\n\t * @class Shadow\n\t * @constructor\n\t * @param {String} color The color of the shadow. This can be any valid CSS color value.\n\t * @param {Number} offsetX The x offset of the shadow in pixels.\n\t * @param {Number} offsetY The y offset of the shadow in pixels.\n\t * @param {Number} blur The size of the blurring effect.\n\t **/\n\tfunction Shadow(color, offsetX, offsetY, blur) {\n\t\t\n\t\t\n\t// public properties:\n\t\t/** \n\t\t * The color of the shadow. This can be any valid CSS color value.\n\t\t * @property color\n\t\t * @type String\n\t\t * @default null\n\t\t */\n\t\tthis.color = color||\"black\";\n\t\n\t\t/** The x offset of the shadow.\n\t\t * @property offsetX\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.offsetX = offsetX||0;\n\t\n\t\t/** The y offset of the shadow.\n\t\t * @property offsetY\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.offsetY = offsetY||0;\n\t\n\t\t/** The blur of the shadow.\n\t\t * @property blur\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.blur = blur||0;\n\t}\n\tvar p = Shadow.prototype;\n\n// static public properties:\n\t/**\n\t * An identity shadow object (all properties are set to 0).\n\t * @property identity\n\t * @type Shadow\n\t * @static\n\t * @final\n\t * @readonly\n\t **/\n\tShadow.identity = new Shadow(\"transparent\", 0, 0, 0);\n\n\n// public methods:\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Shadow]\";\n\t};\n\n\t/**\n\t * Returns a clone of this Shadow instance.\n\t * @method clone\n\t * @return {Shadow} A clone of the current Shadow instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Shadow(this.color, this.offsetX, this.offsetY, this.blur);\n\t};\n\t\n\n\tcreatejs.Shadow = Shadow;\n}());\n\n//##############################################################################\n// SpriteSheet.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Encapsulates the properties and methods associated with a sprite sheet. A sprite sheet is a series of images (usually\n\t * animation frames) combined into a larger image (or images). For example, an animation consisting of eight 100x100\n\t * images could be combined into a single 400x200 sprite sheet (4 frames across by 2 high).\n\t *\n\t * The data passed to the SpriteSheet constructor defines:\n\t * <ol>\n\t * \t<li> The source image or images to use.</li>\n\t * \t<li> The positions of individual image frames.</li>\n\t * \t<li> Sequences of frames that form named animations. Optional.</li>\n\t * \t<li> The target playback framerate. Optional.</li>\n\t * </ol>\n\t * <h3>SpriteSheet Format</h3>\n\t * SpriteSheets are an object with two required properties (`images` and `frames`), and two optional properties\n\t * (`framerate` and `animations`). This makes them easy to define in javascript code, or in JSON.\n\t *\n\t * <h4>images</h4>\n\t * An array of source images. Images can be either an HTMlimage\n\t * instance, or a uri to an image. The former is recommended to control preloading.\n\t *\n\t * \timages: [image1, \"path/to/image2.png\"],\n\t *\n\t * <h4>frames</h4>\n\t * Defines the individual frames. There are two supported formats for frame data:\n\t * When all of the frames are the same size (in a grid), use an object with `width`, `height`, `regX`, `regY`,\n\t * and `count` properties.\n\t *\n\t * <ul>\n\t *  <li>`width` & `height` are required and specify the dimensions of the frames</li>\n\t *  <li>`regX` & `regY` indicate the registration point or \"origin\" of the frames</li>\n\t *  <li>`spacing` indicate the spacing between frames</li>\n\t *  <li>`margin` specify the margin around the image(s)</li>\n\t *  <li>`count` allows you to specify the total number of frames in the spritesheet; if omitted, this will\n\t *  be calculated based on the dimensions of the source images and the frames. Frames will be assigned\n\t *  indexes based on their position in the source images (left to right, top to bottom).</li>\n\t * </ul>\n\t *\n\t *  \tframes: {width:64, height:64, count:20, regX: 32, regY:64, spacing:0, margin:0}\n\t *\n\t * If the frames are of different sizes, use an array of frame definitions. Each definition is itself an array\n\t * with 4 required and 3 optional entries, in the order:\n\t *\n\t * <ul>\n\t *  <li>The first four, `x`, `y`, `width`, and `height` are required and define the frame rectangle.</li>\n\t *  <li>The fifth, `imageIndex`, specifies the index of the source image (defaults to 0)</li>\n\t *  <li>The last two, `regX` and `regY` specify the registration point of the frame</li>\n\t * </ul>\n\t *\n\t * \tframes: [\n\t * \t\t// x, y, width, height, imageIndex*, regX*, regY*\n\t * \t\t[64, 0, 96, 64],\n\t * \t\t[0, 0, 64, 64, 1, 32, 32]\n\t * \t\t// etc.\n\t * \t]\n\t *\n\t * <h4>animations</h4>\n\t * Optional. An object defining sequences of frames to play as named animations. Each property corresponds to an\n\t * animation of the same name. Each animation must specify the frames to play, and may\n\t * also include a relative playback `speed` (ex. 2 would playback at double speed, 0.5 at half), and\n\t * the name of the `next` animation to sequence to after it completes.\n\t *\n\t * There are three formats supported for defining the frames in an animation, which can be mixed and matched as appropriate:\n\t * <ol>\n\t * \t<li>for a single frame animation, you can simply specify the frame index\n\t *\n\t * \t\tanimations: {\n\t * \t\t\tsit: 7\n\t * \t\t}\n\t *\n\t * </li>\n\t * <li>\n\t *      for an animation of consecutive frames, you can use an array with two required, and two optional entries\n\t * \t\tin the order: `start`, `end`, `next`, and `speed`. This will play the frames from start to end inclusive.\n\t *\n\t * \t\tanimations: {\n\t * \t\t\t// start, end, next*, speed*\n\t * \t\t\trun: [0, 8],\n\t * \t\t\tjump: [9, 12, \"run\", 2]\n\t * \t\t}\n\t *\n\t *  </li>\n\t *  <li>\n\t *     for non-consecutive frames, you can use an object with a `frames` property defining an array of frame\n\t *     indexes to play in order. The object can also specify `next` and `speed` properties.\n\t *\n\t * \t\tanimations: {\n\t * \t\t\twalk: {\n\t * \t\t\t\tframes: [1,2,3,3,2,1]\n\t * \t\t\t},\n\t * \t\t\tshoot: {\n\t * \t\t\t\tframes: [1,4,5,6],\n\t * \t\t\t\tnext: \"walk\",\n\t * \t\t\t\tspeed: 0.5\n\t * \t\t\t}\n\t * \t\t}\n\t *\n\t *  </li>\n\t * </ol>\n\t * <strong>Note:</strong> the `speed` property was added in EaselJS 0.7.0. Earlier versions had a `frequency`\n\t * property instead, which was the inverse of `speed`. For example, a value of \"4\" would be 1/4 normal speed in\n\t * earlier versions, but is 4x normal speed in EaselJS 0.7.0+.\n\t *\n\t * <h4>framerate</h4>\n\t * Optional. Indicates the default framerate to play this spritesheet at in frames per second. See\n\t * {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} for more information.\n\t *\n\t * \t\tframerate: 20\n\t *\n\t * Note that the Sprite framerate will only work if the stage update method is provided with the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event generated by the {{#crossLink \"Ticker\"}}{{/crossLink}}.\n\t *\n\t * \t\tcreatejs.Ticker.on(\"tick\", handleTick);\n\t * \t\tfunction handleTick(event) {\n\t *\t\t\tstage.update(event);\n\t *\t\t}\n\t *\n\t * <h3>Example</h3>\n\t * To define a simple sprite sheet, with a single image \"sprites.jpg\" arranged in a regular 50x50 grid with three\n\t * animations: \"stand\" showing the first frame, \"run\" looping frame 1-5 inclusive, and \"jump\" playing frame 6-8 and\n\t * sequencing back to run.\n\t *\n\t * \t\tvar data = {\n\t * \t\t\timages: [\"sprites.jpg\"],\n\t * \t\t\tframes: {width:50, height:50},\n\t * \t\t\tanimations: {\n\t * \t\t\t\tstand:0,\n\t * \t\t\t\trun:[1,5],\n\t * \t\t\t\tjump:[6,8,\"run\"]\n\t * \t\t\t}\n\t * \t\t};\n\t * \t\tvar spriteSheet = new createjs.SpriteSheet(data);\n\t * \t\tvar animation = new createjs.Sprite(spriteSheet, \"run\");\n\t *\n\t * <h3>Generating SpriteSheet Images</h3>\n\t * Spritesheets can be created manually by combining images in PhotoShop, and specifying the frame size or\n\t * coordinates manually, however there are a number of tools that facilitate this.\n\t * <ul>\n\t *     <li>Exporting SpriteSheets or HTML5 content from Adobe Flash/Animate supports the EaselJS SpriteSheet format.</li>\n\t *     <li>The popular <a href=\"https://www.codeandweb.com/texturepacker/easeljs\" target=\"_blank\">Texture Packer</a> has\n\t *     EaselJS support.\n\t *     <li>SWF animations in Adobe Flash/Animate can be exported to SpriteSheets using <a href=\"http://createjs.com/zoe\" target=\"_blank\">Zo&euml;</a></li>\n\t * </ul>\n\t *\n\t * <h3>Cross Origin Issues</h3>\n\t * <strong>Warning:</strong> Images loaded cross-origin will throw cross-origin security errors when interacted with\n\t * using:\n\t * <ul>\n\t *     <li>a mouse</li>\n\t *     <li>methods such as {{#crossLink \"Container/getObjectUnderPoint\"}}{{/crossLink}}</li>\n\t *     <li>Filters (see {{#crossLink \"Filter\"}}{{/crossLink}})</li>\n\t *     <li>caching (see {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}})</li>\n\t * </ul>\n\t * You can get around this by setting `crossOrigin` property on your images before passing them to EaselJS, or\n\t * setting the `crossOrigin` property on PreloadJS' LoadQueue or LoadItems.\n\t *\n\t * \t\tvar image = new Image();\n\t * \t\timg.crossOrigin=\"Anonymous\";\n\t * \t\timg.src = \"http://server-with-CORS-support.com/path/to/image.jpg\";\n\t *\n\t * If you pass string paths to SpriteSheets, they will not work cross-origin. The server that stores the image must\n\t * support cross-origin requests, or this will not work. For more information, check out\n\t * <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS\" target=\"_blank\">CORS overview on MDN</a>.\n\t *\n\t * @class SpriteSheet\n\t * @constructor\n\t * @param {Object} data An object describing the SpriteSheet data.\n\t * @extends EventDispatcher\n\t **/\n\tfunction SpriteSheet(data) {\n\t\tthis.EventDispatcher_constructor();\n\n\n\t\t// public properties:\n\t\t/**\n\t\t * Indicates whether all images are finished loading.\n\t\t * @property complete\n\t\t * @type Boolean\n\t\t * @readonly\n\t\t **/\n\t\tthis.complete = true;\n\n\t\t/**\n\t\t * Specifies the framerate to use by default for Sprite instances using the SpriteSheet. See the Sprite class\n\t\t * {{#crossLink \"Sprite/framerate:property\"}}{{/crossLink}} for more information.\n\t\t * @property framerate\n\t\t * @type Number\n\t\t **/\n\t\tthis.framerate = 0;\n\n\n\t\t// private properties:\n\t\t/**\n\t\t * @property _animations\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._animations = null;\n\n\t\t/**\n\t\t * @property _frames\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._frames = null;\n\n\t\t/**\n\t\t * @property _images\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._images = null;\n\n\t\t/**\n\t\t * @property _data\n\t\t * @protected\n\t\t * @type Object\n\t\t **/\n\t\tthis._data = null;\n\n\t\t/**\n\t\t * @property _loadCount\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._loadCount = 0;\n\n\t\t// only used for simple frame defs:\n\t\t/**\n\t\t * @property _frameHeight\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._frameHeight = 0;\n\n\t\t/**\n\t\t * @property _frameWidth\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._frameWidth = 0;\n\n\t\t/**\n\t\t * @property _numFrames\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._numFrames = 0;\n\n\t\t/**\n\t\t * @property _regX\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._regX = 0;\n\n\t\t/**\n\t\t * @property _regY\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._regY = 0;\n\n\t\t/**\n\t\t * @property _spacing\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._spacing = 0;\n\n\t\t/**\n\t\t * @property _margin\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._margin = 0;\n\n\t\t// setup:\n\t\tthis._parseData(data);\n\t}\n\tvar p = createjs.extend(SpriteSheet, createjs.EventDispatcher);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// events:\n\t/**\n\t * Dispatched when all images are loaded.  Note that this only fires if the images\n\t * were not fully loaded when the sprite sheet was initialized. You should check the complete property\n\t * to prior to adding a listener. Ex.\n\t *\n\t * \tvar sheet = new createjs.SpriteSheet(data);\n\t * \tif (!sheet.complete) {\n\t * \t\t// not preloaded, listen for the complete event:\n\t * \t\tsheet.addEventListener(\"complete\", handler);\n\t * \t}\n\t *\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when getFrame is called with a valid frame index. This is primarily intended for use by {{#crossLink \"SpriteSheetBuilder\"}}{{/crossLink}}\n\t * when doing on-demand rendering.\n\t * @event getframe\n\t * @param {Number} index The frame index.\n\t * @param {Object} frame The frame object that getFrame will return.\n\t */\n\n\t/**\n\t * Dispatched when an image encounters an error. A SpriteSheet will dispatch an error event for each image that\n\t * encounters an error, and will still dispatch a {{#crossLink \"SpriteSheet/complete:event\"}}{{/crossLink}}\n\t * event once all images are finished processing, even if an error is encountered.\n\t * @event error\n\t * @param {String} src The source of the image that failed to load.\n\t * @since 0.8.2\n\t */\n\n\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"SpriteSheet/animations:property\"}}{{/crossLink}} property instead.\n\t * @method _getAnimations\n\t * @protected\n\t * @return {Array}\n\t **/\n\tp._getAnimations = function() {\n\t\treturn this._animations.slice();\n\t};\n\t// SpriteSheet.getAnimations is @deprecated. Remove for 1.1+\n\tp.getAnimations = createjs.deprecate(p._getAnimations, \"SpriteSheet.getAnimations\");\n\n\t/**\n\t * Returns an array of all available animation names available on this sprite sheet as strings.\n\t * @property animations\n\t * @type {Array}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tanimations: { get: p._getAnimations }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns the total number of frames in the specified animation, or in the whole sprite\n\t * sheet if the animation param is omitted. Returns 0 if the spritesheet relies on calculated frame counts, and\n\t * the images have not been fully loaded.\n\t * @method getNumFrames\n\t * @param {String} animation The name of the animation to get a frame count for.\n\t * @return {Number} The number of frames in the animation, or in the entire sprite sheet if the animation param is omitted.\n\t */\n\tp.getNumFrames = function(animation) {\n\t\tif (animation == null) {\n\t\t\treturn this._frames ? this._frames.length : this._numFrames || 0;\n\t\t} else {\n\t\t\tvar data = this._data[animation];\n\t\t\tif (data == null) { return 0; }\n\t\t\telse { return data.frames.length; }\n\t\t}\n\t};\n\n\t/**\n\t * Returns an object defining the specified animation. The returned object contains:<UL>\n\t * \t<li>frames: an array of the frame ids in the animation</li>\n\t * \t<li>speed: the playback speed for this animation</li>\n\t * \t<li>name: the name of the animation</li>\n\t * \t<li>next: the default animation to play next. If the animation loops, the name and next property will be the\n\t * \tsame.</li>\n\t * </UL>\n\t * @method getAnimation\n\t * @param {String} name The name of the animation to get.\n\t * @return {Object} a generic object with frames, speed, name, and next properties.\n\t **/\n\tp.getAnimation = function(name) {\n\t\treturn this._data[name];\n\t};\n\n\t/**\n\t * Returns an object specifying the image and source rect of the specified frame. The returned object has:<UL>\n\t * \t<li>an image property holding a reference to the image object in which the frame is found</li>\n\t * \t<li>a rect property containing a Rectangle instance which defines the boundaries for the frame within that\n\t * \timage.</li>\n\t * \t<li> A regX and regY property corresponding to the regX/Y values for the frame.\n\t * </UL>\n\t * @method getFrame\n\t * @param {Number} frameIndex The index of the frame.\n\t * @return {Object} a generic object with image and rect properties. Returns null if the frame does not exist.\n\t **/\n\tp.getFrame = function(frameIndex) {\n\t\tvar frame;\n\t\tif (this._frames && (frame=this._frames[frameIndex])) { return frame; }\n\t\treturn null;\n\t};\n\n\t/**\n\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the specified frame relative\n\t * to the origin. For example, a 90 x 70 frame with a regX of 50 and a regY of 40 would return:\n\t *\n\t * \t[x=-50, y=-40, width=90, height=70]\n\t *\n\t * @method getFrameBounds\n\t * @param {Number} frameIndex The index of the frame.\n\t * @param {Rectangle} [rectangle] A Rectangle instance to copy the values into. By default a new instance is created.\n\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully loaded.\n\t **/\n\tp.getFrameBounds = function(frameIndex, rectangle) {\n\t\tvar frame = this.getFrame(frameIndex);\n\t\treturn frame ? (rectangle||new createjs.Rectangle()).setValues(-frame.regX, -frame.regY, frame.rect.width, frame.rect.height) : null;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[SpriteSheet]\";\n\t};\n\n\t/**\n\t * SpriteSheet cannot be cloned. A SpriteSheet can be shared by multiple Sprite instances without cloning it.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"SpriteSheet cannot be cloned.\")\n\t};\n\n// private methods:\n\t/**\n\t * @method _parseData\n\t * @param {Object} data An object describing the SpriteSheet data.\n\t * @protected\n\t **/\n\tp._parseData = function(data) {\n\t\tvar i,l,o,a;\n\t\tif (data == null) { return; }\n\n\t\tthis.framerate = data.framerate||0;\n\n\t\t// parse images:\n\t\tif (data.images && (l=data.images.length) > 0) {\n\t\t\ta = this._images = [];\n\t\t\tfor (i=0; i<l; i++) {\n\t\t\t\tvar img = data.images[i];\n\t\t\t\tif (typeof img == \"string\") {\n\t\t\t\t\tvar src = img;\n\t\t\t\t\timg = document.createElement(\"img\");\n\t\t\t\t\timg.src = src;\n\t\t\t\t}\n\t\t\t\ta.push(img);\n\t\t\t\tif (!img.getContext && !img.naturalWidth) {\n\t\t\t\t\tthis._loadCount++;\n\t\t\t\t\tthis.complete = false;\n\t\t\t\t\t(function(o, src) { img.onload = function() { o._handleImageLoad(src); } })(this, src);\n\t\t\t\t\t(function(o, src) { img.onerror = function() { o._handleImageError(src); } })(this, src);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// parse frames:\n\t\tif (data.frames == null) { // nothing\n\t\t} else if (Array.isArray(data.frames)) {\n\t\t\tthis._frames = [];\n\t\t\ta = data.frames;\n\t\t\tfor (i=0,l=a.length;i<l;i++) {\n\t\t\t\tvar arr = a[i];\n\t\t\t\tthis._frames.push({image:this._images[arr[4]?arr[4]:0], rect:new createjs.Rectangle(arr[0],arr[1],arr[2],arr[3]), regX:arr[5]||0, regY:arr[6]||0 });\n\t\t\t}\n\t\t} else {\n\t\t\to = data.frames;\n\t\t\tthis._frameWidth = o.width;\n\t\t\tthis._frameHeight = o.height;\n\t\t\tthis._regX = o.regX||0;\n\t\t\tthis._regY = o.regY||0;\n\t\t\tthis._spacing = o.spacing||0;\n\t\t\tthis._margin = o.margin||0;\n\t\t\tthis._numFrames = o.count;\n\t\t\tif (this._loadCount == 0) { this._calculateFrames(); }\n\t\t}\n\n\t\t// parse animations:\n\t\tthis._animations = [];\n\t\tif ((o=data.animations) != null) {\n\t\t\tthis._data = {};\n\t\t\tvar name;\n\t\t\tfor (name in o) {\n\t\t\t\tvar anim = {name:name};\n\t\t\t\tvar obj = o[name];\n\t\t\t\tif (typeof obj == \"number\") { // single frame\n\t\t\t\t\ta = anim.frames = [obj];\n\t\t\t\t} else if (Array.isArray(obj)) { // simple\n\t\t\t\t\tif (obj.length == 1) { anim.frames = [obj[0]]; }\n\t\t\t\t\telse {\n\t\t\t\t\t\tanim.speed = obj[3];\n\t\t\t\t\t\tanim.next = obj[2];\n\t\t\t\t\t\ta = anim.frames = [];\n\t\t\t\t\t\tfor (i=obj[0];i<=obj[1];i++) {\n\t\t\t\t\t\t\ta.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else { // complex\n\t\t\t\t\tanim.speed = obj.speed;\n\t\t\t\t\tanim.next = obj.next;\n\t\t\t\t\tvar frames = obj.frames;\n\t\t\t\t\ta = anim.frames = (typeof frames == \"number\") ? [frames] : frames.slice(0);\n\t\t\t\t}\n\t\t\t\tif (anim.next === true || anim.next === undefined) { anim.next = name; } // loop\n\t\t\t\tif (anim.next === false || (a.length < 2 && anim.next == name)) { anim.next = null; } // stop\n\t\t\t\tif (!anim.speed) { anim.speed = 1; }\n\t\t\t\tthis._animations.push(name);\n\t\t\t\tthis._data[name] = anim;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleImageLoad\n\t * @protected\n\t **/\n\tp._handleImageLoad = function(src) {\n\t\tif (--this._loadCount == 0) {\n\t\t\tthis._calculateFrames();\n\t\t\tthis.complete = true;\n\t\t\tthis.dispatchEvent(\"complete\");\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleImageError\n\t * @protected\n\t */\n\tp._handleImageError = function (src) {\n\t\tvar errorEvent = new createjs.Event(\"error\");\n\t\terrorEvent.src = src;\n\t\tthis.dispatchEvent(errorEvent);\n\n\t\t// Complete is still dispatched.\n\t\tif (--this._loadCount == 0) {\n\t\t\tthis.dispatchEvent(\"complete\");\n\t\t}\n\t};\n\n\t/**\n\t * @method _calculateFrames\n\t * @protected\n\t **/\n\tp._calculateFrames = function() {\n\t\tif (this._frames || this._frameWidth == 0) { return; }\n\n\t\tthis._frames = [];\n\n\t\tvar maxFrames = this._numFrames || 100000; // if we go over this, something is wrong.\n\t\tvar frameCount = 0, frameWidth = this._frameWidth, frameHeight = this._frameHeight;\n\t\tvar spacing = this._spacing, margin = this._margin;\n\t\t\n\t\timgLoop:\n\t\tfor (var i=0, imgs=this._images; i<imgs.length; i++) {\n\t\t\tvar img = imgs[i], imgW = (img.width||img.naturalWidth), imgH = (img.height||img.naturalHeight);\n\n\t\t\tvar y = margin;\n\t\t\twhile (y <= imgH-margin-frameHeight) {\n\t\t\t\tvar x = margin;\n\t\t\t\twhile (x <= imgW-margin-frameWidth) {\n\t\t\t\t\tif (frameCount >= maxFrames) { break imgLoop; }\n\t\t\t\t\tframeCount++;\n\t\t\t\t\tthis._frames.push({\n\t\t\t\t\t\t\timage: img,\n\t\t\t\t\t\t\trect: new createjs.Rectangle(x, y, frameWidth, frameHeight),\n\t\t\t\t\t\t\tregX: this._regX,\n\t\t\t\t\t\t\tregY: this._regY\n\t\t\t\t\t\t});\n\t\t\t\t\tx += frameWidth+spacing;\n\t\t\t\t}\n\t\t\t\ty += frameHeight+spacing;\n\t\t\t}\n\t\t}\n\t\tthis._numFrames = frameCount;\n\t};\n\n\n\tcreatejs.SpriteSheet = createjs.promote(SpriteSheet, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// Graphics.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The Graphics class exposes an easy to use API for generating vector drawing instructions and drawing them to a\n\t * specified context. Note that you can use Graphics without any dependency on the EaselJS framework by calling {{#crossLink \"Graphics/draw\"}}{{/crossLink}}\n\t * directly, or it can be used with the {{#crossLink \"Shape\"}}{{/crossLink}} object to draw vector graphics within the\n\t * context of an EaselJS display list.\n\t *\n\t * There are two approaches to working with Graphics object: calling methods on a Graphics instance (the \"Graphics API\"), or\n\t * instantiating Graphics command objects and adding them to the graphics queue via {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n\t * The former abstracts the latter, simplifying beginning and ending paths, fills, and strokes.\n\t *\n\t *      var g = new createjs.Graphics();\n\t *      g.setStrokeStyle(1);\n\t *      g.beginStroke(\"#000000\");\n\t *      g.beginFill(\"red\");\n\t *      g.drawCircle(0,0,30);\n\t *\n\t * All drawing methods in Graphics return the Graphics instance, so they can be chained together. For example,\n\t * the following line of code would generate the instructions to draw a rectangle with a red stroke and blue fill:\n\t *\n\t *      myGraphics.beginStroke(\"red\").beginFill(\"blue\").drawRect(20, 20, 100, 50);\n\t *\n\t * Each graphics API call generates a command object (see below). The last command to be created can be accessed via\n\t * {{#crossLink \"Graphics/command:property\"}}{{/crossLink}}:\n\t *\n\t *      var fillCommand = myGraphics.beginFill(\"red\").command;\n\t *      // ... later, update the fill style/color:\n\t *      fillCommand.style = \"blue\";\n\t *      // or change it to a bitmap fill:\n\t *      fillCommand.bitmap(myImage);\n\t *\n\t * For more direct control of rendering, you can instantiate and append command objects to the graphics queue directly. In this case, you\n\t * need to manage path creation manually, and ensure that fill/stroke is applied to a defined path:\n\t *\n\t *      // start a new path. Graphics.beginCmd is a reusable BeginPath instance:\n\t *      myGraphics.append(createjs.Graphics.beginCmd);\n\t *      // we need to define the path before applying the fill:\n\t *      var circle = new createjs.Graphics.Circle(0,0,30);\n\t *      myGraphics.append(circle);\n\t *      // fill the path we just defined:\n\t *      var fill = new createjs.Graphics.Fill(\"red\");\n\t *      myGraphics.append(fill);\n\t *\n\t * These approaches can be used together, for example to insert a custom command:\n\t *\n\t *      myGraphics.beginFill(\"red\");\n\t *      var customCommand = new CustomSpiralCommand(etc);\n\t *      myGraphics.append(customCommand);\n\t *      myGraphics.beginFill(\"blue\");\n\t *      myGraphics.drawCircle(0, 0, 30);\n\t *\n\t * See {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more info on creating custom commands.\n\t *\n\t * <h4>Tiny API</h4>\n\t * The Graphics class also includes a \"tiny API\", which is one or two-letter methods that are shortcuts for all of the\n\t * Graphics methods. These methods are great for creating compact instructions, and is used by the Toolkit for CreateJS\n\t * to generate readable code. All tiny methods are marked as protected, so you can view them by enabling protected\n\t * descriptions in the docs.\n\t *\n\t * <table>\n\t *     <tr><td><b>Tiny</b></td><td><b>Method</b></td><td><b>Tiny</b></td><td><b>Method</b></td></tr>\n\t *     <tr><td>mt</td><td>{{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} </td>\n\t *     <td>lt</td> <td>{{#crossLink \"Graphics/lineTo\"}}{{/crossLink}}</td></tr>\n\t *     <tr><td>a/at</td><td>{{#crossLink \"Graphics/arc\"}}{{/crossLink}} / {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} </td>\n\t *     <td>bt</td><td>{{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>qt</td><td>{{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} (also curveTo)</td>\n\t *     <td>r</td><td>{{#crossLink \"Graphics/rect\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>cp</td><td>{{#crossLink \"Graphics/closePath\"}}{{/crossLink}} </td>\n\t *     <td>c</td><td>{{#crossLink \"Graphics/clear\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>f</td><td>{{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} </td>\n\t *     <td>lf</td><td>{{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rf</td><td>{{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} </td>\n\t *     <td>bf</td><td>{{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>ef</td><td>{{#crossLink \"Graphics/endFill\"}}{{/crossLink}} </td>\n\t *     <td>ss / sd</td><td>{{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} / {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>s</td><td>{{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} </td>\n\t *     <td>ls</td><td>{{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rs</td><td>{{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} </td>\n\t *     <td>bs</td><td>{{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>es</td><td>{{#crossLink \"Graphics/endStroke\"}}{{/crossLink}} </td>\n\t *     <td>dr</td><td>{{#crossLink \"Graphics/drawRect\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rr</td><td>{{#crossLink \"Graphics/drawRoundRect\"}}{{/crossLink}} </td>\n\t *     <td>rc</td><td>{{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>dc</td><td>{{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} </td>\n\t *     <td>de</td><td>{{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>dp</td><td>{{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} </td>\n\t *     <td>p</td><td>{{#crossLink \"Graphics/decodePath\"}}{{/crossLink}} </td></tr>\n\t * </table>\n\t *\n\t * Here is the above example, using the tiny API instead.\n\t *\n\t *      myGraphics.s(\"red\").f(\"blue\").r(20, 20, 100, 50);\n\t *\n\t * @class Graphics\n\t * @constructor\n\t **/\n\tfunction Graphics() {\n\n\n\t// public properties\n\t\t/**\n\t\t * Holds a reference to the last command that was created or appended. For example, you could retain a reference\n\t\t * to a Fill command in order to dynamically update the color later by using:\n\t\t *\n\t\t * \t\tvar myFill = myGraphics.beginFill(\"red\").command;\n\t\t * \t\t// update color later:\n\t\t * \t\tmyFill.style = \"yellow\";\n\t\t *\n\t\t * @property command\n\t\t * @type Object\n\t\t **/\n\t\tthis.command = null;\n\n\n\t// private properties\n\t\t/**\n\t\t * @property _stroke\n\t\t * @protected\n\t\t * @type {Stroke}\n\t\t **/\n\t\tthis._stroke = null;\n\n\t\t/**\n\t\t * @property _strokeStyle\n\t\t * @protected\n\t\t * @type {StrokeStyle}\n\t\t **/\n\t\tthis._strokeStyle = null;\n\t\t\n\t\t/**\n\t\t * @property _oldStrokeStyle\n\t\t * @protected\n\t\t * @type {StrokeStyle}\n\t\t **/\n\t\tthis._oldStrokeStyle = null;\n\t\t\n\t\t/**\n\t\t * @property _strokeDash\n\t\t * @protected\n\t\t * @type {StrokeDash}\n\t\t **/\n\t\tthis._strokeDash = null;\n\t\t\n\t\t/**\n\t\t * @property _oldStrokeDash\n\t\t * @protected\n\t\t * @type {StrokeDash}\n\t\t **/\n\t\tthis._oldStrokeDash = null;\n\n\t\t/**\n\t\t * @property _strokeIgnoreScale\n\t\t * @protected\n\t\t * @type Boolean\n\t\t **/\n\t\tthis._strokeIgnoreScale = false;\n\n\t\t/**\n\t\t * @property _fill\n\t\t * @protected\n\t\t * @type {Fill}\n\t\t **/\n\t\tthis._fill = null;\n\n\t\t/**\n\t\t * @property _instructions\n\t\t * @protected\n\t\t * @type {Array}\n\t\t **/\n\t\tthis._instructions = [];\n\n\t\t/**\n\t\t * Indicates the last instruction index that was committed.\n\t\t * @property _commitIndex\n\t\t * @protected\n\t\t * @type {Number}\n\t\t **/\n\t\tthis._commitIndex = 0;\n\n\t\t/**\n\t\t * Uncommitted instructions.\n\t\t * @property _activeInstructions\n\t\t * @protected\n\t\t * @type {Array}\n\t\t **/\n\t\tthis._activeInstructions = [];\n\n\t\t/**\n\t\t * This indicates that there have been changes to the activeInstruction list since the last updateInstructions call.\n\t\t * @property _dirty\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis._dirty = false;\n\n\t\t/**\n\t\t * Index to draw from if a store operation has happened.\n\t\t * @property _storeIndex\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._storeIndex = 0;\n\n\t// setup:\n\t\tthis.clear();\n\t}\n\tvar p = Graphics.prototype;\n\tvar G = Graphics; // shortcut\n\n// static public methods:\n\t/**\n\t * Returns a CSS compatible color string based on the specified RGB numeric color values in the format\n\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\". For example,\n\t *\n\t *      createjs.Graphics.getRGB(50, 100, 150, 0.5);\n\t *      // Returns \"rgba(50,100,150,0.5)\"\n\t *\n\t * It also supports passing a single hex color value as the first param, and an optional alpha value as the second\n\t * param. For example,\n\t *\n\t *      createjs.Graphics.getRGB(0xFF00FF, 0.2);\n\t *      // Returns \"rgba(255,0,255,0.2)\"\n\t *\n\t * @method getRGB\n\t * @static\n\t * @param {Number} r The red component for the color, between 0 and 0xFF (255).\n\t * @param {Number} g The green component for the color, between 0 and 0xFF (255).\n\t * @param {Number} b The blue component for the color, between 0 and 0xFF (255).\n\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n\t * @return {String} A CSS compatible color string based on the specified RGB numeric color values in the format\n\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\".\n\t **/\n\tGraphics.getRGB = function(r, g, b, alpha) {\n\t\tif (r != null && b == null) {\n\t\t\talpha = g;\n\t\t\tb = r&0xFF;\n\t\t\tg = r>>8&0xFF;\n\t\t\tr = r>>16&0xFF;\n\t\t}\n\t\tif (alpha == null) {\n\t\t\treturn \"rgb(\"+r+\",\"+g+\",\"+b+\")\";\n\t\t} else {\n\t\t\treturn \"rgba(\"+r+\",\"+g+\",\"+b+\",\"+alpha+\")\";\n\t\t}\n\t};\n\n\t/**\n\t * Returns a CSS compatible color string based on the specified HSL numeric color values in the format \"hsla(360,100,100,1.0)\",\n\t * or if alpha is null then in the format \"hsl(360,100,100)\".\n\t *\n\t *      createjs.Graphics.getHSL(150, 100, 70);\n\t *      // Returns \"hsl(150,100,70)\"\n\t *\n\t * @method getHSL\n\t * @static\n\t * @param {Number} hue The hue component for the color, between 0 and 360.\n\t * @param {Number} saturation The saturation component for the color, between 0 and 100.\n\t * @param {Number} lightness The lightness component for the color, between 0 and 100.\n\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n\t * @return {String} A CSS compatible color string based on the specified HSL numeric color values in the format\n\t * \"hsla(360,100,100,1.0)\", or if alpha is null then in the format \"hsl(360,100,100)\".\n\t **/\n\tGraphics.getHSL = function(hue, saturation, lightness, alpha) {\n\t\tif (alpha == null) {\n\t\t\treturn \"hsl(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%)\";\n\t\t} else {\n\t\t\treturn \"hsla(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%,\"+alpha+\")\";\n\t\t}\n\t};\n\n\n// static properties:\n\t/**\n\t * A reusable instance of {{#crossLink \"Graphics/BeginPath\"}}{{/crossLink}} to avoid\n\t * unnecessary instantiation.\n\t * @property beginCmd\n\t * @type {Graphics.BeginPath}\n\t * @static\n\t **/\n\t // defined at the bottom of this file.\n\n\t/**\n\t * Map of Base64 characters to values. Used by {{#crossLink \"Graphics/decodePath\"}}{{/crossLink}}.\n\t * @property BASE_64\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Object}\n\t **/\n\tGraphics.BASE_64 = {\"A\":0,\"B\":1,\"C\":2,\"D\":3,\"E\":4,\"F\":5,\"G\":6,\"H\":7,\"I\":8,\"J\":9,\"K\":10,\"L\":11,\"M\":12,\"N\":13,\"O\":14,\"P\":15,\"Q\":16,\"R\":17,\"S\":18,\"T\":19,\"U\":20,\"V\":21,\"W\":22,\"X\":23,\"Y\":24,\"Z\":25,\"a\":26,\"b\":27,\"c\":28,\"d\":29,\"e\":30,\"f\":31,\"g\":32,\"h\":33,\"i\":34,\"j\":35,\"k\":36,\"l\":37,\"m\":38,\"n\":39,\"o\":40,\"p\":41,\"q\":42,\"r\":43,\"s\":44,\"t\":45,\"u\":46,\"v\":47,\"w\":48,\"x\":49,\"y\":50,\"z\":51,\"0\":52,\"1\":53,\"2\":54,\"3\":55,\"4\":56,\"5\":57,\"6\":58,\"7\":59,\"8\":60,\"9\":61,\"+\":62,\"/\":63};\n\n\t/**\n\t * Maps numeric values for the caps parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n\t * \"butt\", 1 to \"round\", and 2 to \"square\".\n\t * For example, to set the line caps to \"square\":\n\t *\n\t *      myGraphics.ss(16, 2);\n\t *\n\t * @property STROKE_CAPS_MAP\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Array}\n\t **/\n\tGraphics.STROKE_CAPS_MAP = [\"butt\", \"round\", \"square\"];\n\n\t/**\n\t * Maps numeric values for the joints parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n\t * \"miter\", 1 to \"round\", and 2 to \"bevel\".\n\t * For example, to set the line joints to \"bevel\":\n\t *\n\t *      myGraphics.ss(16, 0, 2);\n\t *\n\t * @property STROKE_JOINTS_MAP\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Array}\n\t **/\n\tGraphics.STROKE_JOINTS_MAP = [\"miter\", \"round\", \"bevel\"];\n\n\t/**\n\t * @property _ctx\n\t * @static\n\t * @protected\n\t * @type {CanvasRenderingContext2D}\n\t **/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():ww&&document.createElement(\"canvas\"));\n\tif (canvas.getContext) {\n\t\tGraphics._ctx = canvas.getContext(\"2d\");\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\n\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Graphics/instructions:property\"}}{{/crossLink}} property instead.\n\t * @method _getInstructions\n\t * @protected\n\t * @return {Array} The instructions array, useful for chaining\n\t **/\n\tp._getInstructions = function() {\n\t\tthis._updateInstructions();\n\t\treturn this._instructions;\n\t};\n\t// Graphics.getInstructions is @deprecated. Remove for 1.1+\n\tp.getInstructions = createjs.deprecate(p._getInstructions, \"Graphics.getInstructions\");\n\n\t/**\n\t * Returns the graphics instructions array. Each entry is a graphics command object (ex. Graphics.Fill, Graphics.Rect)\n\t * Modifying the returned array directly is not recommended, and is likely to result in unexpected behaviour.\n\t *\n\t * This property is mainly intended for introspection of the instructions (ex. for graphics export).\n\t * @property instructions\n\t * @type {Array}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tinstructions: { get: p._getInstructions }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns true if this Graphics instance has no drawing commands.\n\t * @method isEmpty\n\t * @return {Boolean} Returns true if this Graphics instance has no drawing commands.\n\t **/\n\tp.isEmpty = function() {\n\t\treturn !(this._instructions.length || this._activeInstructions.length);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Object} data Optional data that is passed to graphics command exec methods. When called from a Shape instance, the shape passes itself as the data parameter. This can be used by custom graphic commands to insert contextual data.\n\t **/\n\tp.draw = function(ctx, data) {\n\t\tthis._updateInstructions();\n\t\tvar instr = this._instructions;\n\t\tfor (var i=this._storeIndex, l=instr.length; i<l; i++) {\n\t\t\tinstr[i].exec(ctx, data);\n\t\t}\n\t};\n\n\t/**\n\t * Draws only the path described for this Graphics instance, skipping any non-path instructions, including fill and\n\t * stroke descriptions. Used for <code>DisplayObject.mask</code> to draw the clipping path, for example.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method drawAsPath\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t **/\n\tp.drawAsPath = function(ctx) {\n\t\tthis._updateInstructions();\n\t\tvar instr, instrs = this._instructions;\n\t\tfor (var i=this._storeIndex, l=instrs.length; i<l; i++) {\n\t\t\t// the first command is always a beginPath command.\n\t\t\tif ((instr = instrs[i]).path !== false) { instr.exec(ctx); }\n\t\t}\n\t};\n\n\n// public methods that map directly to context 2D calls:\n\t/**\n\t * Moves the drawing point to the specified position. A tiny API method \"mt\" also exists.\n\t * @method moveTo\n\t * @param {Number} x The x coordinate the drawing point should move to.\n\t * @param {Number} y The y coordinate the drawing point should move to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n\t * @chainable\n\t **/\n\tp.moveTo = function(x, y) {\n\t\treturn this.append(new G.MoveTo(x,y), true);\n\t};\n\n\t/**\n\t * Draws a line from the current drawing point to the specified position, which become the new current drawing\n\t * point. Note that you *must* call {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} before the first `lineTo()`.\n\t * A tiny API method \"lt\" also exists.\n\t *\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#complex-shapes-(paths)\">\n\t * whatwg spec</a>.\n\t * @method lineTo\n\t * @param {Number} x The x coordinate the drawing point should draw to.\n\t * @param {Number} y The y coordinate the drawing point should draw to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.lineTo = function(x, y) {\n\t\treturn this.append(new G.LineTo(x,y));\n\t};\n\n\t/**\n\t * Draws an arc with the specified control points and radius.  For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arcto\">\n\t * whatwg spec</a>. A tiny API method \"at\" also exists.\n\t * @method arcTo\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.arcTo = function(x1, y1, x2, y2, radius) {\n\t\treturn this.append(new G.ArcTo(x1, y1, x2, y2, radius));\n\t};\n\n\t/**\n\t * Draws an arc defined by the radius, startAngle and endAngle arguments, centered at the position (x, y). For\n\t * example, to draw a full circle with a radius of 20 centered at (100, 100):\n\t *\n\t *      arc(100, 100, 20, 0, Math.PI*2);\n\t *\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arc\">whatwg spec</a>.\n\t * A tiny API method \"a\" also exists.\n\t * @method arc\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle Measured in radians.\n\t * @param {Number} endAngle Measured in radians.\n\t * @param {Boolean} anticlockwise\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\n\t\treturn this.append(new G.Arc(x, y, radius, startAngle, endAngle, anticlockwise));\n\t};\n\n\t/**\n\t * Draws a quadratic curve from the current drawing point to (x, y) using the control point (cpx, cpy). For detailed\n\t * information, read the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-quadraticcurveto\">\n\t * whatwg spec</a>. A tiny API method \"qt\" also exists.\n\t * @method quadraticCurveTo\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.quadraticCurveTo = function(cpx, cpy, x, y) {\n\t\treturn this.append(new G.QuadraticCurveTo(cpx, cpy, x, y));\n\t};\n\n\t/**\n\t * Draws a bezier curve from the current drawing point to (x, y) using the control points (cp1x, cp1y) and (cp2x,\n\t * cp2y). For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-beziercurveto\">\n\t * whatwg spec</a>. A tiny API method \"bt\" also exists.\n\t * @method bezierCurveTo\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.bezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n\t\treturn this.append(new G.BezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y));\n\t};\n\n\t/**\n\t * Draws a rectangle at (x, y) with the specified width and height using the current fill and/or stroke.\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-rect\">\n\t * whatwg spec</a>. A tiny API method \"r\" also exists.\n\t * @method rect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.rect = function(x, y, w, h) {\n\t\treturn this.append(new G.Rect(x, y, w, h));\n\t};\n\n\t/**\n\t * Closes the current path, effectively drawing a line from the current drawing point to the first drawing point specified\n\t * since the fill or stroke was last set. A tiny API method \"cp\" also exists.\n\t * @method closePath\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.closePath = function() {\n\t\treturn this._activeInstructions.length ? this.append(new G.ClosePath()) : this;\n\t};\n\n\n// public methods that roughly map to Adobe Flash/Animate graphics APIs:\n\t/**\n\t * Clears all drawing instructions, effectively resetting this Graphics instance. Any line and fill styles will need\n\t * to be redefined to draw shapes following a clear call. A tiny API method \"c\" also exists.\n\t * @method clear\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.clear = function() {\n\t\tthis._instructions.length = this._activeInstructions.length = this._commitIndex = 0;\n\t\tthis._strokeStyle = this._oldStrokeStyle = this._stroke = this._fill = this._strokeDash = this._oldStrokeDash = null;\n\t\tthis._dirty = this._strokeIgnoreScale = false;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Begins a fill with the specified color. This ends the current sub-path. A tiny API method \"f\" also exists.\n\t * @method beginFill\n\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no fill.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginFill = function(color) {\n\t\treturn this._setFill(color ? new G.Fill(color) : null);\n\t};\n\n\t/**\n\t * Begins a linear gradient fill defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n\t * square to display it:\n\t *\n\t *      myGraphics.beginLinearGradientFill([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n\t *\n\t * A tiny API method \"lf\" also exists.\n\t * @method beginLinearGradientFill\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n\t * drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n\t * the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginLinearGradientFill = function(colors, ratios, x0, y0, x1, y1) {\n\t\treturn this._setFill(new G.Fill().linearGradient(colors, ratios, x0, y0, x1, y1));\n\t};\n\n\t/**\n\t * Begins a radial gradient fill. This ends the current sub-path. For example, the following code defines a red to\n\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a circle to display it:\n\t *\n\t *      myGraphics.beginRadialGradientFill([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50).drawCircle(100, 100, 50);\n\t *\n\t * A tiny API method \"rf\" also exists.\n\t * @method beginRadialGradientFill\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginRadialGradientFill = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\treturn this._setFill(new G.Fill().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n\t};\n\n\t/**\n\t * Begins a pattern fill using the specified image. This ends the current sub-path. A tiny API method \"bf\" also\n\t * exists.\n\t * @method beginBitmapFill\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n\t * will be applied relative to the parent transform.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginBitmapFill = function(image, repetition, matrix) {\n\t\treturn this._setFill(new G.Fill(null,matrix).bitmap(image, repetition));\n\t};\n\n\t/**\n\t * Ends the current sub-path, and begins a new one with no fill. Functionally identical to <code>beginFill(null)</code>.\n\t * A tiny API method \"ef\" also exists.\n\t * @method endFill\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.endFill = function() {\n\t\treturn this.beginFill();\n\t};\n\n\t/**\n\t * Sets the stroke style. Like all drawing methods, this can be chained, so you can define\n\t * the stroke style and color in a single line of code like so:\n\t *\n\t * \tmyGraphics.setStrokeStyle(8,\"round\").beginStroke(\"#F00\");\n\t *\n\t * A tiny API method \"ss\" also exists.\n\t * @method setStrokeStyle\n\t * @param {Number} thickness The width of the stroke.\n\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n\t * the tiny API.\n\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n\t * for use with the tiny API.\n\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n\t * controls at what point a mitered joint will be clipped.\n\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n\t * of active transformations.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.setStrokeStyle = function(thickness, caps, joints, miterLimit, ignoreScale) {\n\t\tthis._updateInstructions(true);\n\t\tthis._strokeStyle = this.command = new G.StrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\n\n\t\t// ignoreScale lives on Stroke, not StrokeStyle, so we do a little trickery:\n\t\tif (this._stroke) { this._stroke.ignoreScale = ignoreScale; }\n\t\tthis._strokeIgnoreScale = ignoreScale;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Sets or clears the stroke dash pattern.\n\t *\n\t * \tmyGraphics.setStrokeDash([20, 10], 0);\n\t *\n\t * A tiny API method `sd` also exists.\n\t * @method setStrokeDash\n\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n\t * For example, `[20,10]` would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n\t * Passing null or an empty array will clear the existing stroke dash.\n\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.setStrokeDash = function(segments, offset) {\n\t\tthis._updateInstructions(true);\n\t\tthis._strokeDash = this.command = new G.StrokeDash(segments, offset);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Begins a stroke with the specified color. This ends the current sub-path. A tiny API method \"s\" also exists.\n\t * @method beginStroke\n\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no stroke.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginStroke = function(color) {\n\t\treturn this._setStroke(color ? new G.Stroke(color) : null);\n\t};\n\n\t/**\n\t * Begins a linear gradient stroke defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n\t * square to display it:\n\t *\n\t *      myGraphics.setStrokeStyle(10).\n\t *          beginLinearGradientStroke([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n\t *\n\t * A tiny API method \"ls\" also exists.\n\t * @method beginLinearGradientStroke\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginLinearGradientStroke = function(colors, ratios, x0, y0, x1, y1) {\n\t\treturn this._setStroke(new G.Stroke().linearGradient(colors, ratios, x0, y0, x1, y1));\n\t};\n\n\t/**\n\t * Begins a radial gradient stroke. This ends the current sub-path. For example, the following code defines a red to\n\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a rectangle to display it:\n\t *\n\t *      myGraphics.setStrokeStyle(10)\n\t *          .beginRadialGradientStroke([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50)\n\t *          .drawRect(50, 90, 150, 110);\n\t *\n\t * A tiny API method \"rs\" also exists.\n\t * @method beginRadialGradientStroke\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n\t * to 100%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginRadialGradientStroke = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\treturn this._setStroke(new G.Stroke().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n\t};\n\n\t/**\n\t * Begins a pattern fill using the specified image. This ends the current sub-path. Note that unlike bitmap fills,\n\t * strokes do not currently support a matrix parameter due to limitations in the canvas API. A tiny API method \"bs\"\n\t * also exists.\n\t * @method beginBitmapStroke\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginBitmapStroke = function(image, repetition) {\n\t\t// NOTE: matrix is not supported for stroke because transforms on strokes also affect the drawn stroke width.\n\t\treturn this._setStroke(new G.Stroke().bitmap(image, repetition));\n\t};\n\n\t/**\n\t * Ends the current sub-path, and begins a new one with no stroke. Functionally identical to <code>beginStroke(null)</code>.\n\t * A tiny API method \"es\" also exists.\n\t * @method endStroke\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.endStroke = function() {\n\t\treturn this.beginStroke();\n\t};\n\n\t/**\n\t * Maps the familiar ActionScript <code>curveTo()</code> method to the functionally similar {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}}\n\t * method.\n\t * @method curveTo\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.curveTo = p.quadraticCurveTo;\n\n\t/**\n\t *\n\t * Maps the familiar ActionScript <code>drawRect()</code> method to the functionally similar {{#crossLink \"Graphics/rect\"}}{{/crossLink}}\n\t * method.\n\t * @method drawRect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRect = p.rect;\n\n\t/**\n\t * Draws a rounded rectangle with all corners with the specified radius.\n\t * @method drawRoundRect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radius Corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRoundRect = function(x, y, w, h, radius) {\n\t\treturn this.drawRoundRectComplex(x, y, w, h, radius, radius, radius, radius);\n\t};\n\n\t/**\n\t * Draws a rounded rectangle with different corner radii. Supports positive and negative corner radii. A tiny API\n\t * method \"rc\" also exists.\n\t * @method drawRoundRectComplex\n\t * @param {Number} x The horizontal coordinate to draw the round rect.\n\t * @param {Number} y The vertical coordinate to draw the round rect.\n\t * @param {Number} w The width of the round rect.\n\t * @param {Number} h The height of the round rect.\n\t * @param {Number} radiusTL Top left corner radius.\n\t * @param {Number} radiusTR Top right corner radius.\n\t * @param {Number} radiusBR Bottom right corner radius.\n\t * @param {Number} radiusBL Bottom left corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRoundRectComplex = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n\t\treturn this.append(new G.RoundRect(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL));\n\t};\n\n\t/**\n\t * Draws a circle with the specified radius at (x, y).\n\t *\n\t *      var g = new createjs.Graphics();\n\t *\t    g.setStrokeStyle(1);\n\t *\t    g.beginStroke(createjs.Graphics.getRGB(0,0,0));\n\t *\t    g.beginFill(createjs.Graphics.getRGB(255,0,0));\n\t *\t    g.drawCircle(0,0,3);\n\t *\n\t *\t    var s = new createjs.Shape(g);\n\t *\t\ts.x = 100;\n\t *\t\ts.y = 100;\n\t *\n\t *\t    stage.addChild(s);\n\t *\t    stage.update();\n\t *\n\t * A tiny API method \"dc\" also exists.\n\t * @method drawCircle\n\t * @param {Number} x x coordinate center point of circle.\n\t * @param {Number} y y coordinate center point of circle.\n\t * @param {Number} radius Radius of circle.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawCircle = function(x, y, radius) {\n\t\treturn this.append(new G.Circle(x, y, radius));\n\t};\n\n\t/**\n\t * Draws an ellipse (oval) with a specified width (w) and height (h). Similar to {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}},\n\t * except the width and height can be different. A tiny API method \"de\" also exists.\n\t * @method drawEllipse\n\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from center.\n\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from the center.\n\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n\t * number.\n\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawEllipse = function(x, y, w, h) {\n\t\treturn this.append(new G.Ellipse(x, y, w, h));\n\t};\n\n\t/**\n\t * Draws a star if pointSize is greater than 0, or a regular polygon if pointSize is 0 with the specified number of\n\t * points. For example, the following code will draw a familiar 5 pointed star shape centered at 100, 100 and with a\n\t * radius of 50:\n\t *\n\t *      myGraphics.beginFill(\"#FF0\").drawPolyStar(100, 100, 50, 5, 0.6, -90);\n\t *      // Note: -90 makes the first point vertical\n\t *\n\t * A tiny API method \"dp\" also exists.\n\t *\n\t * @method drawPolyStar\n\t * @param {Number} x Position of the center of the shape.\n\t * @param {Number} y Position of the center of the shape.\n\t * @param {Number} radius The outer radius of the shape.\n\t * @param {Number} sides The number of points on the star or sides on the polygon.\n\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n\t * directly to the right of the center.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawPolyStar = function(x, y, radius, sides, pointSize, angle) {\n\t\treturn this.append(new G.PolyStar(x, y, radius, sides, pointSize, angle));\n\t};\n\n\t/**\n\t * Appends a graphics command object to the graphics queue. Command objects expose an \"exec\" method\n\t * that accepts two parameters: the Context2D to operate on, and an arbitrary data object passed into\n\t * {{#crossLink \"Graphics/draw\"}}{{/crossLink}}. The latter will usually be the Shape instance that called draw.\n\t *\n\t * This method is used internally by Graphics methods, such as drawCircle, but can also be used directly to insert\n\t * built-in or custom graphics commands. For example:\n\t *\n\t * \t\t// attach data to our shape, so we can access it during the draw:\n\t * \t\tmyShape.color = \"red\";\n\t *\n\t * \t\t// append a Circle command object:\n\t * \t\tmyShape.graphics.append(new createjs.Graphics.Circle(50, 50, 30));\n\t *\n\t * \t\t// append a custom command object with an exec method that sets the fill style\n\t * \t\t// based on the shape's data, and then fills the circle.\n\t * \t\tmyShape.graphics.append({exec:function(ctx, shape) {\n\t * \t\t\tctx.fillStyle = shape.color;\n\t * \t\t\tctx.fill();\n\t * \t\t}});\n\t *\n\t * @method append\n\t * @param {Object} command A graphics command object exposing an \"exec\" method.\n\t * @param {boolean} clean The clean param is primarily for internal use. A value of true indicates that a command does not generate a path that should be stroked or filled.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.append = function(command, clean) {\n\t\tthis._activeInstructions.push(command);\n\t\tthis.command = command;\n\t\tif (!clean) { this._dirty = true; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Decodes a compact encoded path string into a series of draw instructions.\n\t * This format is not intended to be human readable, and is meant for use by authoring tools.\n\t * The format uses a base64 character set, with each character representing 6 bits, to define a series of draw\n\t * commands.\n\t *\n\t * Each command is comprised of a single \"header\" character followed by a variable number of alternating x and y\n\t * position values. Reading the header bits from left to right (most to least significant): bits 1 to 3 specify the\n\t * type of operation (0-moveTo, 1-lineTo, 2-quadraticCurveTo, 3-bezierCurveTo, 4-closePath, 5-7 unused). Bit 4\n\t * indicates whether position values use 12 bits (2 characters) or 18 bits (3 characters), with a one indicating the\n\t * latter. Bits 5 and 6 are currently unused.\n\t *\n\t * Following the header is a series of 0 (closePath), 2 (moveTo, lineTo), 4 (quadraticCurveTo), or 6 (bezierCurveTo)\n\t * parameters. These parameters are alternating x/y positions represented by 2 or 3 characters (as indicated by the\n\t * 4th bit in the command char). These characters consist of a 1 bit sign (1 is negative, 0 is positive), followed\n\t * by an 11 (2 char) or 17 (3 char) bit integer value. All position values are in tenths of a pixel. Except in the\n\t * case of move operations which are absolute, this value is a delta from the previous x or y position (as\n\t * appropriate).\n\t *\n\t * For example, the string \"A3cAAMAu4AAA\" represents a line starting at -150,0 and ending at 150,0.\n\t * <br />A - bits 000000. First 3 bits (000) indicate a moveTo operation. 4th bit (0) indicates 2 chars per\n\t * parameter.\n\t * <br />n0 - 110111011100. Absolute x position of -150.0px. First bit indicates a negative value, remaining bits\n\t * indicate 1500 tenths of a pixel.\n\t * <br />AA - 000000000000. Absolute y position of 0.\n\t * <br />I - 001100. First 3 bits (001) indicate a lineTo operation. 4th bit (1) indicates 3 chars per parameter.\n\t * <br />Au4 - 000000101110111000. An x delta of 300.0px, which is added to the previous x value of -150.0px to\n\t * provide an absolute position of +150.0px.\n\t * <br />AAA - 000000000000000000. A y delta value of 0.\n\t *\n\t * A tiny API method \"p\" also exists.\n\t * @method decodePath\n\t * @param {String} str The path string to decode.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.decodePath = function(str) {\n\t\tvar instructions = [this.moveTo, this.lineTo, this.quadraticCurveTo, this.bezierCurveTo, this.closePath];\n\t\tvar paramCount = [2, 2, 4, 6, 0];\n\t\tvar i=0, l=str.length;\n\t\tvar params = [];\n\t\tvar x=0, y=0;\n\t\tvar base64 = Graphics.BASE_64;\n\n\t\twhile (i<l) {\n\t\t\tvar c = str.charAt(i);\n\t\t\tvar n = base64[c];\n\t\t\tvar fi = n>>3; // highest order bits 1-3 code for operation.\n\t\t\tvar f = instructions[fi];\n\t\t\t// check that we have a valid instruction & that the unused bits are empty:\n\t\t\tif (!f || (n&3)) { throw(\"bad path data (@\"+i+\"): \"+c); }\n\t\t\tvar pl = paramCount[fi];\n\t\t\tif (!fi) { x=y=0; } // move operations reset the position.\n\t\t\tparams.length = 0;\n\t\t\ti++;\n\t\t\tvar charCount = (n>>2&1)+2;  // 4th header bit indicates number size for this operation.\n\t\t\tfor (var p=0; p<pl; p++) {\n\t\t\t\tvar num = base64[str.charAt(i)];\n\t\t\t\tvar sign = (num>>5) ? -1 : 1;\n\t\t\t\tnum = ((num&31)<<6)|(base64[str.charAt(i+1)]);\n\t\t\t\tif (charCount == 3) { num = (num<<6)|(base64[str.charAt(i+2)]); }\n\t\t\t\tnum = sign*num/10;\n\t\t\t\tif (p%2) { x = (num += x); }\n\t\t\t\telse { y = (num += y); }\n\t\t\t\tparams[p] = num;\n\t\t\t\ti += charCount;\n\t\t\t}\n\t\t\tf.apply(this,params);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Stores all graphics commands so they won't be executed in future draws. Calling store() a second time adds to\n\t * the existing store. This also affects `drawAsPath()`.\n\t *\n\t * This is useful in cases where you are creating vector graphics in an iterative manner (ex. generative art), so\n\t * that only new graphics need to be drawn (which can provide huge performance benefits), but you wish to retain all\n\t * of the vector instructions for later use (ex. scaling, modifying, or exporting).\n\t *\n\t * Note that calling store() will force the active path (if any) to be ended in a manner similar to changing\n\t * the fill or stroke.\n\t *\n\t * For example, consider a application where the user draws lines with the mouse. As each line segment (or collection of\n\t * segments) are added to a Shape, it can be rasterized using {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}},\n\t * and then stored, so that it can be redrawn at a different scale when the application is resized, or exported to SVG.\n\t *\n\t * \t// set up cache:\n\t * \tmyShape.cache(0,0,500,500,scale);\n\t *\n\t * \t// when the user drags, draw a new line:\n\t * \tmyShape.graphics.moveTo(oldX,oldY).lineTo(newX,newY);\n\t * \t// then draw it into the existing cache:\n\t * \tmyShape.updateCache(\"source-over\");\n\t * \t// store the new line, so it isn't redrawn next time:\n\t * \tmyShape.store();\n\t *\n\t * \t// then, when the window resizes, we can re-render at a different scale:\n\t * \t// first, unstore all our lines:\n\t * \tmyShape.unstore();\n\t * \t// then cache using the new scale:\n\t * \tmyShape.cache(0,0,500,500,newScale);\n\t * \t// finally, store the existing commands again:\n\t * \tmyShape.store();\n\t *\n\t * @method store\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.store = function() {\n\t\tthis._updateInstructions(true);\n\t\tthis._storeIndex = this._instructions.length;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Unstores any graphics commands that were previously stored using {{#crossLink \"Graphics/store\"}}{{/crossLink}}\n\t * so that they will be executed in subsequent draw calls.\n\t *\n\t * @method unstore\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.unstore = function() {\n\t\tthis._storeIndex = 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a clone of this Graphics instance. Note that the individual command objects are not cloned.\n\t * @method clone\n\t * @return {Graphics} A clone of the current Graphics instance.\n\t **/\n\tp.clone = function() {\n\t\tvar o = new Graphics();\n\t\to.command = this.command;\n\t\to._stroke = this._stroke;\n\t\to._strokeStyle = this._strokeStyle;\n\t\to._strokeDash = this._strokeDash;\n\t\to._strokeIgnoreScale = this._strokeIgnoreScale;\n\t\to._fill = this._fill;\n\t\to._instructions = this._instructions.slice();\n\t\to._commitIndex = this._commitIndex;\n\t\to._activeInstructions = this._activeInstructions.slice();\n\t\to._dirty = this._dirty;\n\t\to._storeIndex = this._storeIndex;\n\t\treturn o;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Graphics]\";\n\t};\n\n\n// tiny API:\n\t/**\n\t * Shortcut to moveTo.\n\t * @method mt\n\t * @param {Number} x The x coordinate the drawing point should move to.\n\t * @param {Number} y The y coordinate the drawing point should move to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n\t * @chainable\n\t * @protected\n\t **/\n\tp.mt = p.moveTo;\n\n\t/**\n\t * Shortcut to lineTo.\n\t * @method lt\n\t * @param {Number} x The x coordinate the drawing point should draw to.\n\t * @param {Number} y The y coordinate the drawing point should draw to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.lt = p.lineTo;\n\n\t/**\n\t * Shortcut to arcTo.\n\t * @method at\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.at = p.arcTo;\n\n\t/**\n\t * Shortcut to bezierCurveTo.\n\t * @method bt\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bt = p.bezierCurveTo;\n\n\t/**\n\t * Shortcut to quadraticCurveTo / curveTo.\n\t * @method qt\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t * @chainable\n\t **/\n\tp.qt = p.quadraticCurveTo;\n\n\t/**\n\t * Shortcut to arc.\n\t * @method a\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle Measured in radians.\n\t * @param {Number} endAngle Measured in radians.\n\t * @param {Boolean} anticlockwise\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @protected\n\t * @chainable\n\t **/\n\tp.a = p.arc;\n\n\t/**\n\t * Shortcut to rect.\n\t * @method r\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.r = p.rect;\n\n\t/**\n\t * Shortcut to closePath.\n\t * @method cp\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.cp = p.closePath;\n\n\t/**\n\t * Shortcut to clear.\n\t * @method c\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.c = p.clear;\n\n\t/**\n\t * Shortcut to beginFill.\n\t * @method f\n\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no fill.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.f = p.beginFill;\n\n\t/**\n\t * Shortcut to beginLinearGradientFill.\n\t * @method lf\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n\t * drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n\t * the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.lf = p.beginLinearGradientFill;\n\n\t/**\n\t * Shortcut to beginRadialGradientFill.\n\t * @method rf\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rf = p.beginRadialGradientFill;\n\n\t/**\n\t * Shortcut to beginBitmapFill.\n\t * @method bf\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern.\n\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n\t * will be applied relative to the parent transform.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bf = p.beginBitmapFill;\n\n\t/**\n\t * Shortcut to endFill.\n\t * @method ef\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ef = p.endFill;\n\n\t/**\n\t * Shortcut to setStrokeStyle.\n\t * @method ss\n\t * @param {Number} thickness The width of the stroke.\n\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n\t * the tiny API.\n\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n\t * for use with the tiny API.\n\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n\t * controls at what point a mitered joint will be clipped.\n\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n\t * of active transformations.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ss = p.setStrokeStyle;\n\t\n\t/**\n\t * Shortcut to setStrokeDash.\n\t * @method sd\n\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n\t * For example, [20,10] would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n\t * Passing null or an empty array will clear any existing dash.\n\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.sd = p.setStrokeDash;\n\n\t/**\n\t * Shortcut to beginStroke.\n\t * @method s\n\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no stroke.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.s = p.beginStroke;\n\n\t/**\n\t * Shortcut to beginLinearGradientStroke.\n\t * @method ls\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ls = p.beginLinearGradientStroke;\n\n\t/**\n\t * Shortcut to beginRadialGradientStroke.\n\t * @method rs\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n\t * to 100%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rs = p.beginRadialGradientStroke;\n\n\t/**\n\t * Shortcut to beginBitmapStroke.\n\t * @method bs\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern.\n\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bs = p.beginBitmapStroke;\n\n\t/**\n\t * Shortcut to endStroke.\n\t * @method es\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.es = p.endStroke;\n\n\t/**\n\t * Shortcut to drawRect.\n\t * @method dr\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dr = p.drawRect;\n\n\t/**\n\t * Shortcut to drawRoundRect.\n\t * @method rr\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radius Corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rr = p.drawRoundRect;\n\n\t/**\n\t * Shortcut to drawRoundRectComplex.\n\t * @method rc\n\t * @param {Number} x The horizontal coordinate to draw the round rect.\n\t * @param {Number} y The vertical coordinate to draw the round rect.\n\t * @param {Number} w The width of the round rect.\n\t * @param {Number} h The height of the round rect.\n\t * @param {Number} radiusTL Top left corner radius.\n\t * @param {Number} radiusTR Top right corner radius.\n\t * @param {Number} radiusBR Bottom right corner radius.\n\t * @param {Number} radiusBL Bottom left corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rc = p.drawRoundRectComplex;\n\n\t/**\n\t * Shortcut to drawCircle.\n\t * @method dc\n\t * @param {Number} x x coordinate center point of circle.\n\t * @param {Number} y y coordinate center point of circle.\n\t * @param {Number} radius Radius of circle.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dc = p.drawCircle;\n\n\t/**\n\t * Shortcut to drawEllipse.\n\t * @method de\n\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from center.\n\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from the center.\n\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n\t * number.\n\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.de = p.drawEllipse;\n\n\t/**\n\t * Shortcut to drawPolyStar.\n\t * @method dp\n\t * @param {Number} x Position of the center of the shape.\n\t * @param {Number} y Position of the center of the shape.\n\t * @param {Number} radius The outer radius of the shape.\n\t * @param {Number} sides The number of points on the star or sides on the polygon.\n\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n\t * directly to the right of the center.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dp = p.drawPolyStar;\n\n\t/**\n\t * Shortcut to decodePath.\n\t * @method p\n\t * @param {String} str The path string to decode.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.p = p.decodePath;\n\n\n// private methods:\n\t/**\n\t * @method _updateInstructions\n\t * @param commit\n\t * @protected\n\t **/\n\tp._updateInstructions = function(commit) {\n\t\tvar instr = this._instructions, active = this._activeInstructions, commitIndex = this._commitIndex;\n\n\t\tif (this._dirty && active.length) {\n\t\t\tinstr.length = commitIndex; // remove old, uncommitted commands\n\t\t\tinstr.push(Graphics.beginCmd);\n\n\t\t\tvar l = active.length, ll = instr.length;\n\t\t\tinstr.length = ll+l;\n\t\t\tfor (var i=0; i<l; i++) { instr[i+ll] = active[i]; }\n\n\t\t\tif (this._fill) { instr.push(this._fill); }\n\t\t\tif (this._stroke) {\n\t\t\t\t// doesn't need to be re-applied if it hasn't changed.\n\t\t\t\tif (this._strokeDash !== this._oldStrokeDash) {\n\t\t\t\t\tinstr.push(this._strokeDash);\n\t\t\t\t}\n\t\t\t\tif (this._strokeStyle !== this._oldStrokeStyle) {\n\t\t\t\t\tinstr.push(this._strokeStyle);\n\t\t\t\t}\n\t\t\t\tif (commit) {\n\t\t\t\t\tthis._oldStrokeStyle = this._strokeStyle;\n\t\t\t\t\tthis._oldStrokeDash = this._strokeDash;\n\t\t\t\t}\n\t\t\t\tinstr.push(this._stroke);\n\t\t\t}\n\n\t\t\tthis._dirty = false;\n\t\t}\n\n\t\tif (commit) {\n\t\t\tactive.length = 0;\n\t\t\tthis._commitIndex = instr.length;\n\t\t}\n\t};\n\n\t/**\n\t * @method _setFill\n\t * @param fill\n\t * @protected\n\t **/\n\tp._setFill = function(fill) {\n\t\tthis._updateInstructions(true);\n\t\tthis.command = this._fill = fill;\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method _setStroke\n\t * @param stroke\n\t * @protected\n\t **/\n\tp._setStroke = function(stroke) {\n\t\tthis._updateInstructions(true);\n\t\tif (this.command = this._stroke = stroke) {\n\t\t\tstroke.ignoreScale = this._strokeIgnoreScale;\n\t\t}\n\t\treturn this;\n\t};\n\n// Command Objects:\n\t/**\n\t * @namespace Graphics\n\t */\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/lineTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class LineTo\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.LineTo = function(x, y) {\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.lineTo(this.x,this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class MoveTo\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx\n\t */\n\t(G.MoveTo = function(x, y) {\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.moveTo(this.x, this.y); };\n\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class ArcTo\n\t * @constructor\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t **/\n\t/**\n\t * @property x1\n\t * @type Number\n\t */\n\t/**\n\t * @property y1\n\t * @type Number\n\t */\n\t/**\n\t * @property x2\n\t * @type Number\n\t */\n\t/**\n\t * @property y2\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.ArcTo = function(x1, y1, x2, y2, radius) {\n\t\tthis.x1 = x1; this.y1 = y1;\n\t\tthis.x2 = x2; this.y2 = y2;\n\t\tthis.radius = radius;\n\t}).prototype.exec = function(ctx) { ctx.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/arc\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Arc\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle\n\t * @param {Number} endAngle\n\t * @param {Number} anticlockwise\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * @property startAngle\n\t * @type Number\n\t */\n\t/**\n\t * @property endAngle\n\t * @type Number\n\t */\n\t/**\n\t * @property anticlockwise\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t\tthis.startAngle = startAngle; this.endAngle = endAngle;\n\t\tthis.anticlockwise = !!anticlockwise;\n\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, this.startAngle, this.endAngle, this.anticlockwise); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class QuadraticCurveTo\n\t * @constructor\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property cpx\n\t * @type Number\n\t */\n\t/**\n\t * @property cpy\n\t * @type Number\n\t */\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.QuadraticCurveTo = function(cpx, cpy, x, y) {\n\t\tthis.cpx = cpx; this.cpy = cpy;\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.quadraticCurveTo(this.cpx, this.cpy, this.x, this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class BezierCurveTo\n\t * @constructor\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property cp1x\n\t * @type Number\n\t */\n\t/**\n\t * @property cp1y\n\t * @type Number\n\t */\n\t/**\n\t * @property cp2x\n\t * @type Number\n\t */\n\t/**\n\t * @property cp2y\n\t * @type Number\n\t */\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.BezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n\t\tthis.cp1x = cp1x; this.cp1y = cp1y;\n\t\tthis.cp2x = cp2x; this.cp2y = cp2y;\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.bezierCurveTo(this.cp1x, this.cp1y, this.cp2x, this.cp2y, this.x, this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/rect\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Rect\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Rect = function(x, y, w, h) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t}).prototype.exec = function(ctx) { ctx.rect(this.x, this.y, this.w, this.h); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/closePath\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class ClosePath\n\t * @constructor\n\t **/\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.ClosePath = function() {\n\t}).prototype.exec = function(ctx) { ctx.closePath(); };\n\n\t/**\n\t * Graphics command object to begin a new path. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class BeginPath\n\t * @constructor\n\t **/\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.BeginPath = function() {\n\t}).prototype.exec = function(ctx) { ctx.beginPath(); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Fill\n\t * @constructor\n\t * @param {Object} style A valid Context2D fillStyle.\n\t * @param {Matrix2D} matrix\n\t **/\n\t/**\n\t * A valid Context2D fillStyle.\n\t * @property style\n\t * @type Object\n\t */\n\t/**\n\t * @property matrix\n\t * @type Matrix2D\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.Fill = function(style, matrix) {\n\t\tthis.style = style;\n\t\tthis.matrix = matrix;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tif (!this.style) { return; }\n\t\tctx.fillStyle = this.style;\n\t\tvar mtx = this.matrix;\n\t\tif (mtx) { ctx.save(); ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty); }\n\t\tctx.fill();\n\t\tif (mtx) { ctx.restore(); }\n\t};\n\t/**\n\t * Creates a linear gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} for more information.\n\t * @method linearGradient\n\t * @param {Array} colors\n\t *\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.linearGradient = function(colors, ratios, x0, y0, x1, y1) {\n\t\tvar o = this.style =  Graphics._ctx.createLinearGradient(x0, y0, x1, y1);\n\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\n\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, x1:x1, y1:y1, type:\"linear\"};\n\t\treturn this;\n\t};\n\t/**\n\t * Creates a radial gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} for more information.\n\t * @method radialGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} r0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} r1\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.radialGradient = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\tvar o = this.style =  Graphics._ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\n\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, r0:r0, x1:x1, y1:y1, r1:r1, type:\"radial\"};\n\t\treturn this;\n\t};\n\t/**\n\t * Creates a bitmap fill style and assigns it to the {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} for more information.\n\t * @method bitmap\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image  Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.bitmap = function(image, repetition) {\n\t\tif (image.naturalWidth || image.getContext || image.readyState >= 2) {\n\t\t\tvar o = this.style = Graphics._ctx.createPattern(image, repetition || \"\");\n\t\t\to.props = {image: image, repetition: repetition, type: \"bitmap\"};\n\t\t}\n\t\treturn this;\n\t};\n\tp.path = false;\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Stroke\n\t * @constructor\n\t * @param {Object} style A valid Context2D fillStyle.\n\t * @param {Boolean} ignoreScale\n\t **/\n\t/**\n\t * A valid Context2D strokeStyle.\n\t * @property style\n\t * @type Object\n\t */\n\t/**\n\t * @property ignoreScale\n\t * @type Boolean\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.Stroke = function(style, ignoreScale) {\n\t\tthis.style = style;\n\t\tthis.ignoreScale = ignoreScale;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tif (!this.style) { return; }\n\t\tctx.strokeStyle = this.style;\n\t\tif (this.ignoreScale) { ctx.save(); ctx.setTransform(1,0,0,1,0,0); }\n\t\tctx.stroke();\n\t\tif (this.ignoreScale) { ctx.restore(); }\n\t};\n\t/**\n\t * Creates a linear gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} for more information.\n\t * @method linearGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.linearGradient = G.Fill.prototype.linearGradient;\n\t/**\n\t * Creates a radial gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} for more information.\n\t * @method radialGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} r0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} r1\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.radialGradient = G.Fill.prototype.radialGradient;\n\t/**\n\t * Creates a bitmap fill style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} for more information.\n\t * @method bitmap\n\t * @param {HTMLImageElement} image\n\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.bitmap = G.Fill.prototype.bitmap;\n\tp.path = false;\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class StrokeStyle\n\t * @constructor\n\t * @param {Number} width\n\t * @param {String} [caps=butt]\n\t * @param {String} [joints=miter]\n\t * @param {Number} [miterLimit=10]\n\t * @param {Boolean} [ignoreScale=false]\n\t **/\n\t/**\n\t * @property width\n\t * @type Number\n\t */\n\t/**\n\t * One of: butt, round, square\n\t * @property caps\n\t * @type String\n\t */\n\t/**\n\t * One of: round, bevel, miter\n\t * @property joints\n\t * @type String\n\t */\n\t/**\n\t * @property miterLimit\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.StrokeStyle = function(width, caps, joints, miterLimit, ignoreScale) {\n\t\tthis.width = width;\n\t\tthis.caps = caps;\n\t\tthis.joints = joints;\n\t\tthis.miterLimit = miterLimit;\n\t\tthis.ignoreScale = ignoreScale;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tctx.lineWidth = (this.width == null ? \"1\" : this.width);\n\t\tctx.lineCap = (this.caps == null ? \"butt\" : (isNaN(this.caps) ? this.caps : Graphics.STROKE_CAPS_MAP[this.caps]));\n\t\tctx.lineJoin = (this.joints == null ? \"miter\" : (isNaN(this.joints) ? this.joints : Graphics.STROKE_JOINTS_MAP[this.joints]));\n\t\tctx.miterLimit = (this.miterLimit == null ? \"10\" : this.miterLimit);\n\t\tctx.ignoreScale = (this.ignoreScale == null ? false : this.ignoreScale);\n\t};\n\tp.path = false;\n\t\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class StrokeDash\n\t * @constructor\n\t * @param {Array} [segments]\n\t * @param {Number} [offset=0]\n\t **/\n\t/**\n\t * @property segments\n\t * @type Array\n\t */\n\t/**\n\t * @property offset\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.StrokeDash = function(segments, offset) {\n\t\tthis.segments = segments;\n\t\tthis.offset = offset||0;\n\t}).prototype.exec = function(ctx) {\n\t\tif (ctx.setLineDash) { // feature detection.\n\t\t\tctx.setLineDash(this.segments|| G.StrokeDash.EMPTY_SEGMENTS); // instead of [] to reduce churn.\n\t\t\tctx.lineDashOffset = this.offset||0;\n\t\t}\n\t};\n\t/**\n\t * The default value for segments (ie. no dash).\n\t * @property EMPTY_SEGMENTS\n\t * @static\n\t * @final\n\t * @readonly\n\t * @protected\n\t * @type {Array}\n\t **/\n\tG.StrokeDash.EMPTY_SEGMENTS = [];\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class RoundRect\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radiusTL\n\t * @param {Number} radiusTR\n\t * @param {Number} radiusBR\n\t * @param {Number} radiusBL\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusTL\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusTR\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusBR\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusBL\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.RoundRect = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t\tthis.radiusTL = radiusTL; this.radiusTR = radiusTR;\n\t\tthis.radiusBR = radiusBR; this.radiusBL = radiusBL;\n\t}).prototype.exec = function(ctx) {\n\t\tvar max = (w<h?w:h)/2;\n\t\tvar mTL=0, mTR=0, mBR=0, mBL=0;\n\t\tvar x = this.x, y = this.y, w = this.w, h = this.h;\n\t\tvar rTL = this.radiusTL, rTR = this.radiusTR, rBR = this.radiusBR, rBL = this.radiusBL;\n\n\t\tif (rTL < 0) { rTL *= (mTL=-1); }\n\t\tif (rTL > max) { rTL = max; }\n\t\tif (rTR < 0) { rTR *= (mTR=-1); }\n\t\tif (rTR > max) { rTR = max; }\n\t\tif (rBR < 0) { rBR *= (mBR=-1); }\n\t\tif (rBR > max) { rBR = max; }\n\t\tif (rBL < 0) { rBL *= (mBL=-1); }\n\t\tif (rBL > max) { rBL = max; }\n\n\t\tctx.moveTo(x+w-rTR, y);\n\t\tctx.arcTo(x+w+rTR*mTR, y-rTR*mTR, x+w, y+rTR, rTR);\n\t\tctx.lineTo(x+w, y+h-rBR);\n\t\tctx.arcTo(x+w+rBR*mBR, y+h+rBR*mBR, x+w-rBR, y+h, rBR);\n\t\tctx.lineTo(x+rBL, y+h);\n\t\tctx.arcTo(x-rBL*mBL, y+h+rBL*mBL, x, y+h-rBL, rBL);\n\t\tctx.lineTo(x, y+rTL);\n\t\tctx.arcTo(x-rTL*mTL, y-rTL*mTL, x+rTL, y, rTL);\n\t\tctx.closePath();\n\t};\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Circle\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Circle = function(x, y, radius) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Ellipse\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Ellipse = function(x, y, w, h) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t}).prototype.exec = function(ctx) {\n\t\tvar x = this.x, y = this.y;\n\t\tvar w = this.w, h = this.h;\n\n\t\tvar k = 0.5522848;\n\t\tvar ox = (w / 2) * k;\n\t\tvar oy = (h / 2) * k;\n\t\tvar xe = x + w;\n\t\tvar ye = y + h;\n\t\tvar xm = x + w / 2;\n\t\tvar ym = y + h / 2;\n\n\t\tctx.moveTo(x, ym);\n\t\tctx.bezierCurveTo(x, ym-oy, xm-ox, y, xm, y);\n\t\tctx.bezierCurveTo(xm+ox, y, xe, ym-oy, xe, ym);\n\t\tctx.bezierCurveTo(xe, ym+oy, xm+ox, ye, xm, ye);\n\t\tctx.bezierCurveTo(xm-ox, ye, x, ym+oy, x, ym);\n\t};\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class PolyStar\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} sides\n\t * @param {Number} pointSize\n\t * @param {Number} angle\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * @property sides\n\t * @type Number\n\t */\n\t/**\n\t * @property pointSize\n\t * @type Number\n\t */\n\t/**\n\t * @property angle\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.PolyStar = function(x, y, radius, sides, pointSize, angle) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t\tthis.sides = sides;\n\t\tthis.pointSize = pointSize;\n\t\tthis.angle = angle;\n\t}).prototype.exec = function(ctx) {\n\t\tvar x = this.x, y = this.y;\n\t\tvar radius = this.radius;\n\t\tvar angle = (this.angle||0)/180*Math.PI;\n\t\tvar sides = this.sides;\n\t\tvar ps = 1-(this.pointSize||0);\n\t\tvar a = Math.PI/sides;\n\n\t\tctx.moveTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\n\t\tfor (var i=0; i<sides; i++) {\n\t\t\tangle += a;\n\t\t\tif (ps != 1) {\n\t\t\t\tctx.lineTo(x+Math.cos(angle)*radius*ps, y+Math.sin(angle)*radius*ps);\n\t\t\t}\n\t\t\tangle += a;\n\t\t\tctx.lineTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\n\t\t}\n\t\tctx.closePath();\n\t};\n\n\t// docced above.\n\tGraphics.beginCmd = new G.BeginPath(); // so we don't have to instantiate multiple instances.\n\n\n\tcreatejs.Graphics = Graphics;\n}());\n\n//##############################################################################\n// DisplayObject.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * DisplayObject is an abstract class that should not be constructed directly. Instead construct subclasses such as\n\t * {{#crossLink \"Container\"}}{{/crossLink}}, {{#crossLink \"Bitmap\"}}{{/crossLink}}, and {{#crossLink \"Shape\"}}{{/crossLink}}.\n\t * DisplayObject is the base class for all display classes in the EaselJS library. It defines the core properties and\n\t * methods that are shared between all display objects, such as transformation properties (x, y, scaleX, scaleY, etc),\n\t * caching, and mouse handlers.\n\t * @class DisplayObject\n\t * @extends EventDispatcher\n\t * @constructor\n\t **/\n\tfunction DisplayObject() {\n\t\tthis.EventDispatcher_constructor();\n\n\n\t// public properties:\n\t\t/**\n\t\t * The alpha (transparency) for this display object. 0 is fully transparent, 1 is fully opaque.\n\t\t * @property alpha\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.alpha = 1;\n\n\t\t/**\n\t\t * If a cache is active, this returns the canvas that holds the image of this display object. See {{#crossLink \"DisplayObject/cache:method\"}}{{/crossLink}}\n\t\t * for more information. Use this to display the result of a cache. This will be a HTMLCanvasElement unless special cache rules have been deliberately enabled for this cache.\n\t\t * @property cacheCanvas\n\t\t * @type {HTMLCanvasElement | Object}\n\t\t * @default null\n\t\t * @readonly\n\t\t **/\n\t\tthis.cacheCanvas = null;\n\n\t\t/**\n\t\t * If a cache has been made, this returns the class that is managing the cacheCanvas and its properties. See {{#crossLink \"BitmapCache\"}}{{/crossLink}}\n\t\t * for more information. Use this to control, inspect, and change the cache. In special circumstances this may be a modified or subclassed BitmapCache.\n\t\t * @property bitmapCache\n\t\t * @type {BitmapCache}\n\t\t * @default null\n\t\t * @readonly\n\t\t **/\n\t\tthis.bitmapCache = null;\n\n\t\t/**\n\t\t * Unique ID for this display object. Makes display objects easier for some uses.\n\t\t * @property id\n\t\t * @type {Number}\n\t\t * @default -1\n\t\t **/\n\t\tthis.id = createjs.UID.get();\n\n\t\t/**\n\t\t * Indicates whether to include this object when running mouse interactions. Setting this to `false` for children\n\t\t * of a {{#crossLink \"Container\"}}{{/crossLink}} will cause events on the Container to not fire when that child is\n\t\t * clicked. Setting this property to `false` does not prevent the {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}\n\t\t * method from returning the child.\n\t\t *\n\t\t * <strong>Note:</strong> In EaselJS 0.7.0, the mouseEnabled property will not work properly with nested Containers. Please\n\t\t * check out the latest NEXT version in <a href=\"https://github.com/CreateJS/EaselJS/tree/master/lib\">GitHub</a> for an updated version with this issue resolved. The fix will be\n\t\t * provided in the next release of EaselJS.\n\t\t * @property mouseEnabled\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t **/\n\t\tthis.mouseEnabled = true;\n\n\t\t/**\n\t\t * If false, the tick will not run on this display object (or its children). This can provide some performance benefits.\n\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, and DOMElement display properties).\n\t\t * @property tickEnabled\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.tickEnabled = true;\n\n\t\t/**\n\t\t * An optional name for this display object. Included in {{#crossLink \"DisplayObject/toString\"}}{{/crossLink}} . Useful for\n\t\t * debugging.\n\t\t * @property name\n\t\t * @type {String}\n\t\t * @default null\n\t\t **/\n\t\tthis.name = null;\n\n\t\t/**\n\t\t * A reference to the {{#crossLink \"Container\"}}{{/crossLink}} or {{#crossLink \"Stage\"}}{{/crossLink}} object that\n\t\t * contains this display object, or null if it has not been added\n\t\t * to one.\n\t\t * @property parent\n\t\t * @final\n\t\t * @type {Container}\n\t\t * @default null\n\t\t * @readonly\n\t\t **/\n\t\tthis.parent = null;\n\n\t\t/**\n\t\t * The left offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate\n\t\t * around its center, you would set regX and {{#crossLink \"DisplayObject/regY:property\"}}{{/crossLink}} to 50.\n\t\t * Cached object's registration points should be set based on pre-cache conditions, not cached size.\n\t\t * @property regX\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.regX = 0;\n\n\t\t/**\n\t\t * The y offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate around\n\t\t * its center, you would set {{#crossLink \"DisplayObject/regX:property\"}}{{/crossLink}} and regY to 50.\n\t\t * Cached object's registration points should be set based on pre-cache conditions, not cached size.\n\t\t * @property regY\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.regY = 0;\n\n\t\t/**\n\t\t * The rotation in degrees for this display object.\n\t\t * @property rotation\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.rotation = 0;\n\n\t\t/**\n\t\t * The factor to stretch this display object horizontally. For example, setting scaleX to 2 will stretch the display\n\t\t * object to twice its nominal width. To horizontally flip an object, set the scale to a negative number.\n\t\t * @property scaleX\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.scaleX = 1;\n\n\t\t/**\n\t\t * The factor to stretch this display object vertically. For example, setting scaleY to 0.5 will stretch the display\n\t\t * object to half its nominal height. To vertically flip an object, set the scale to a negative number.\n\t\t * @property scaleY\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.scaleY = 1;\n\n\t\t/**\n\t\t * The factor to skew this display object horizontally.\n\t\t * @property skewX\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.skewX = 0;\n\n\t\t/**\n\t\t * The factor to skew this display object vertically.\n\t\t * @property skewY\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.skewY = 0;\n\n\t\t/**\n\t\t * A shadow object that defines the shadow to render on this display object. Set to `null` to remove a shadow. If\n\t\t * null, this property is inherited from the parent container.\n\t\t * @property shadow\n\t\t * @type {Shadow}\n\t\t * @default null\n\t\t **/\n\t\tthis.shadow = null;\n\n\t\t/**\n\t\t * Indicates whether this display object should be rendered to the canvas and included when running the Stage\n\t\t * {{#crossLink \"Stage/getObjectsUnderPoint\"}}{{/crossLink}} method.\n\t\t * @property visible\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t **/\n\t\tthis.visible = true;\n\n\t\t/**\n\t\t * The x (horizontal) position of the display object, relative to its parent.\n\t\t * @property x\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.x = 0;\n\n\t\t/** The y (vertical) position of the display object, relative to its parent.\n\t\t * @property y\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.y = 0;\n\n\t\t/**\n\t\t * If set, defines the transformation for this display object, overriding all other transformation properties\n\t\t * (x, y, rotation, scale, skew).\n\t\t * @property transformMatrix\n\t\t * @type {Matrix2D}\n\t\t * @default null\n\t\t **/\n\t\tthis.transformMatrix = null;\n\n\t\t/**\n\t\t * The composite operation indicates how the pixels of this display object will be composited with the elements\n\t\t * behind it. If `null`, this property is inherited from the parent container. For more information, read the\n\t\t * <a href=\"https://html.spec.whatwg.org/multipage/scripting.html#dom-context-2d-globalcompositeoperation\">\n\t\t * whatwg spec on compositing</a>. For a list of supported compositeOperation value, visit\n\t\t * <a href=\"https://drafts.fxtf.org/compositing/\">the W3C draft on Compositing and Blending</a>.\n\t\t * @property compositeOperation\n\t\t * @type {String}\n\t\t * @default null\n\t\t **/\n\t\tthis.compositeOperation = null;\n\n\t\t/**\n\t\t * Indicates whether the display object should be drawn to a whole pixel when\n\t\t * {{#crossLink \"Stage/snapToPixelEnabled\"}}{{/crossLink}} is true. To enable/disable snapping on whole\n\t\t * categories of display objects, set this value on the prototype (Ex. Text.prototype.snapToPixel = true).\n\t\t * @property snapToPixel\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t **/\n\t\tthis.snapToPixel = true;\n\n\t\t/**\n\t\t * An array of Filter objects to apply to this display object. Filters are only applied / updated when {{#crossLink \"cache\"}}{{/crossLink}}\n\t\t * or {{#crossLink \"updateCache\"}}{{/crossLink}} is called on the display object, and only apply to the area that is\n\t\t * cached.\n\t\t * @property filters\n\t\t * @type {Array}\n\t\t * @default null\n\t\t **/\n\t\tthis.filters = null;\n\n\t\t/**\n\t\t * A Shape instance that defines a vector mask (clipping path) for this display object.  The shape's transformation\n\t\t * will be applied relative to the display object's parent coordinates (as if it were a child of the parent).\n\t\t * @property mask\n\t\t * @type {Shape}\n\t\t * @default null\n\t\t */\n\t\tthis.mask = null;\n\n\t\t/**\n\t\t * A display object that will be tested when checking mouse interactions or testing {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}.\n\t\t * The hit area will have its transformation applied relative to this display object's coordinate space (as though\n\t\t * the hit test object were a child of this display object and relative to its regX/Y). The hitArea will be tested\n\t\t * using only its own `alpha` value regardless of the alpha value on the target display object, or the target's\n\t\t * ancestors (parents).\n\t\t * \n\t\t * If set on a {{#crossLink \"Container\"}}{{/crossLink}}, children of the Container will not receive mouse events.\n\t\t * This is similar to setting {{#crossLink \"mouseChildren\"}}{{/crossLink}} to false.\n\t\t *\n\t\t * Note that hitArea is NOT currently used by the `hitTest()` method, nor is it supported for {{#crossLink \"Stage\"}}{{/crossLink}}.\n\t\t * @property hitArea\n\t\t * @type {DisplayObject}\n\t\t * @default null\n\t\t */\n\t\tthis.hitArea = null;\n\n\t\t/**\n\t\t * A CSS cursor (ex. \"pointer\", \"help\", \"text\", etc) that will be displayed when the user hovers over this display\n\t\t * object. You must enable mouseover events using the {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}} method to\n\t\t * use this property. Setting a non-null cursor on a Container will override the cursor set on its descendants.\n\t\t * @property cursor\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.cursor = null;\n\n\n\t// private properties:\n\t\t/**\n\t\t * Moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}\n\t\t * @property _cacheScale\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @deprecated\n\t\t **/\n\n\t\t/**\n\t\t * Moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}\n\t\t * @property _cacheDataURLID\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @deprecated\n\t\t */\n\n\t\t/**\n\t\t * Moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}\n\t\t * @property _cacheDataURL\n\t\t * @protected\n\t\t * @type {String}\n\t\t * @default null\n\t\t * @deprecated\n\t\t */\n\n\t\t/**\n\t\t * @property _props\n\t\t * @protected\n\t\t * @type {DisplayObject}\n\t\t * @default null\n\t\t **/\n\t\tthis._props = new createjs.DisplayProps();\n\n\t\t/**\n\t\t * @property _rectangle\n\t\t * @protected\n\t\t * @type {Rectangle}\n\t\t * @default null\n\t\t **/\n\t\tthis._rectangle = new createjs.Rectangle();\n\n\t\t/**\n\t\t * @property _bounds\n\t\t * @protected\n\t\t * @type {Rectangle}\n\t\t * @default null\n\t\t **/\n\t\tthis._bounds = null;\n\n\t\t/**\n\t\t * Where StageGL should look for required display properties, matters only for leaf display objects. Containers\n\t\t * or cached objects won't use this property, it's for native display of terminal elements.\n\t\t * @property _webGLRenderStyle\n\t\t * @protected\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis._webGLRenderStyle = DisplayObject._StageGL_NONE;\n\t}\n\tvar p = createjs.extend(DisplayObject, createjs.EventDispatcher);\n\n// static properties:\n\t/**\n\t * Listing of mouse event names. Used in _hasMouseEventListener.\n\t * @property _MOUSE_EVENTS\n\t * @protected\n\t * @static\n\t * @type {Array}\n\t **/\n\tDisplayObject._MOUSE_EVENTS = [\"click\",\"dblclick\",\"mousedown\",\"mouseout\",\"mouseover\",\"pressmove\",\"pressup\",\"rollout\",\"rollover\"];\n\n\t/**\n\t * Suppresses errors generated when using features like hitTest, mouse events, and {{#crossLink \"getObjectsUnderPoint\"}}{{/crossLink}}\n\t * with cross domain content.\n\t * @property suppressCrossDomainErrors\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tDisplayObject.suppressCrossDomainErrors = false;\n\n\t/**\n\t * @property _snapToPixelEnabled\n\t * @protected\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tDisplayObject._snapToPixelEnabled = false; // stage.snapToPixelEnabled is temporarily copied here during a draw to provide global access.\n\n\t/**\n\t * Enum like property for determining StageGL render lookup, i.e. where to expect properties.\n\t * @property _StageGL_NONE\n\t * @protected\n\t * @static\n\t * @type {number}\n\t */\n\tDisplayObject._StageGL_NONE = 0;\n\n\t/**\n\t * Enum like property for determining StageGL render lookup, i.e. where to expect properties.\n\t * @property _StageGL_SPRITE\n\t * @protected\n\t * @static\n\t * @type {number}\n\t */\n\tDisplayObject._StageGL_SPRITE = 1;\n\n\t/**\n\t * Enum like property for determining StageGL render lookup, i.e. where to expect properties.\n\t * @property _StageGL_BITMAP\n\t * @protected\n\t * @static\n\t * @type {number}\n\t */\n\tDisplayObject._StageGL_BITMAP = 2;\n\n\t/**\n\t * @property _hitTestCanvas\n\t * @type {HTMLCanvasElement | Object}\n\t * @static\n\t * @protected\n\t **/\n\t/**\n\t * @property _hitTestContext\n\t * @type {CanvasRenderingContext2D}\n\t * @static\n\t * @protected\n\t **/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():ww&&document.createElement(\"canvas\")); // prevent errors on load in browsers without canvas.\n\tif (canvas.getContext) {\n\t\tDisplayObject._hitTestCanvas = canvas;\n\t\tDisplayObject._hitTestContext = canvas.getContext(\"2d\");\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\n// events:\n\t/**\n\t * Dispatched when the user presses their left mouse button over the display object. See the \n\t * {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event mousedown\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user presses their left mouse button and then releases it while over the display object.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event click\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user double clicks their left mouse button over this display object.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event dblclick\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user's mouse enters this display object. This event must be enabled using \n\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event mouseover\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user's mouse leaves this display object. This event must be enabled using \n\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event mouseout\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * This event is similar to {{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}, with the following\n\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n\t * aggregate of their content.\n\t * \n\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n\t * shapeA and then directly on to shapeB. With a listener for {{#crossLink \"mouseover:event\"}}{{/crossLink}} on\n\t * myContainer, two events would be received, each targeting a child element:<OL>\n\t * <LI>when the mouse enters shapeA (target=shapeA)</LI>\n\t * <LI>when the mouse enters shapeB (target=shapeB)</LI>\n\t * </OL>\n\t * However, with a listener for \"rollover\" instead, only a single event is received when the mouse first enters\n\t * the aggregate myContainer content (target=myContainer).\n\t * \n\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event rollover\n\t * @since 0.7.0\n\t */\n\n\t/**\n\t * This event is similar to {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}, with the following\n\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n\t * aggregate of their content.\n\t * \n\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n\t * shapeA, then directly on to shapeB, then off both. With a listener for {{#crossLink \"mouseout:event\"}}{{/crossLink}}\n\t * on myContainer, two events would be received, each targeting a child element:<OL>\n\t * <LI>when the mouse leaves shapeA (target=shapeA)</LI>\n\t * <LI>when the mouse leaves shapeB (target=shapeB)</LI>\n\t * </OL>\n\t * However, with a listener for \"rollout\" instead, only a single event is received when the mouse leaves\n\t * the aggregate myContainer content (target=myContainer).\n\t * \n\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event rollout\n\t * @since 0.7.0\n\t */\n\n\t/**\n\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressmove\n\t * event will be generated on that object whenever the mouse moves until the mouse press is released. This can be\n\t * useful for dragging and similar operations.\n\t *\n\t * **Please note** that if the initial mouse target from a `mousedown` event is removed from the stage after being pressed\n\t * (e.g. during a `pressmove` event), a `pressmove` event is still generated. However since it is no longer in the\n\t * display list, the event can not bubble. This means that previous ancestors (parent containers) will not receive\n\t * the event, and therefore can not re-dispatch it. If you intend to listen for `{{#crossLink \"DisplayObject/pressup:event\"}}{{/crossLink}}`\n\t * or `pressmove` on a dynamic object (such as a {{#crossLink \"MovieClip\"}}{{/crossLink}} or {{#crossLink \"Container\"}}{{/crossLink}}),\n\t * then ensure you set {{#crossLink \"Container/mouseChildren:property\"}}{{/crossLink}} to `false`.\n\t * @event pressmove\n\t * @since 0.7.0\n\t */\n\n\t/**\n\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressup event\n\t * will be generated on that object when that mouse press is released. This can be useful for dragging and similar\n\t * operations.\n\t *\n\t * **Please note** that if the initial mouse target from a `mousedown` event is removed from the stage after being pressed\n\t * (e.g. during a `pressmove` event), a `pressup` event is still generated. However since it is no longer in the\n\t * display list, the event can not bubble. This means that previous ancestors (parent containers) will not receive\n\t * the event, and therefore can not re-dispatch it. If you intend to listen for `{{#crossLink \"DisplayObject/pressmove:event\"}}{{/crossLink}}`\n\t * or `pressup` on a dynamic object (such as a {{#crossLink \"MovieClip\"}}{{/crossLink}} or {{#crossLink \"Container\"}}{{/crossLink}}),\n\t * then ensure you set {{#crossLink \"Container/mouseChildren:property\"}}{{/crossLink}} to `false`.\n\t * @event pressup\n\t * @since 0.7.0\n\t */\n\n\t/**\n\t * Dispatched when the display object is added to a parent container.\n\t * @event added\n\t */\n\n\t/**\n\t * Dispatched when the display object is removed from its parent container.\n\t * @event removed\n\t */\n\n\t/**\n\t * Dispatched on each display object on a stage whenever the stage updates. This occurs immediately before the\n\t * rendering (draw) pass. When {{#crossLink \"Stage/update\"}}{{/crossLink}} is called, first all display objects on\n\t * the stage dispatch the tick event, then all of the display objects are drawn to stage. Children will have their\n\t * {{#crossLink \"tick:event\"}}{{/crossLink}} event dispatched in order of their depth prior to the event being\n\t * dispatched on their parent.\n\t * @event tick\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Array} params An array containing any arguments that were passed to the Stage.update() method. For\n\t *      example if you called stage.update(\"hello\"), then the params would be [\"hello\"].\n\t * @since 0.6.0\n\t */\n\n\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"DisplayObject/stage:property\"}}{{/crossLink}} property instead.\n\t * @method _getStage\n\t * @protected\n\t * @return {Stage}\n\t **/\n\tp._getStage = function() {\n\t\t// uses dynamic access to avoid circular dependencies;\n\t\tvar o = this, _Stage = createjs[\"Stage\"];\n\t\twhile (o.parent) { o = o.parent; }\n\t\tif (o instanceof _Stage) { return o; }\n\t\treturn null;\n\t};\n\t// DisplayObject.getStage is @deprecated. Remove for 1.1+\n\tp.getStage = createjs.deprecate(p._getStage, \"DisplayObject.getStage\");\n\n\t/**\n\t * Returns the Stage instance that this display object will be rendered on, or null if it has not been added to one.\n\t * @property stage\n\t * @type {Stage}\n\t * @readonly\n\t **/\n\n\t/**\n\t * Returns an ID number that uniquely identifies the current cache for this display object. This can be used to\n\t * determine if the cache has changed since a previous check.\n\t * Moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}\n\t * @property cacheID\n\t * @deprecated\n\t * @type {Number}\n\t * @default 0\n\t */\n\n\t/**\n\t * Set both the {{#crossLink \"DisplayObject/scaleX:property\"}}{{/crossLink}} and the {{#crossLink \"DisplayObject/scaleY\"}}{{/crossLink}}\n\t * property to the same value. Note that when you get the value, if the `scaleX` and `scaleY` are different values,\n\t * it will return only the `scaleX`.\n\t * @property scaleX\n\t * @type {Number}\n\t * @default 1\n\t */\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tstage: { get: p._getStage },\n\t\t\tcacheID: {\n\t\t\t\tget: function(){ return this.bitmapCache && this.bitmapCache.cacheID },\n\t\t\t\tset: function(a){ this.bitmapCache && (this.bitmapCache.cacheID = a) }\n\t\t\t},\n\t\t\tscale: {\n\t\t\t\tget: function() { return this.scaleX; },\n\t\t\t\tset: function(scale) { this.scaleX = this.scaleY = scale; },\n\t\t\t}\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns <code>true</code> if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tvar cache = this.bitmapCache;\n\t\tif(cache && !ignoreCache) {\n\t\t\treturn cache.draw(ctx);\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Applies this display object's transformation, alpha, globalCompositeOperation, clipping path (mask), and shadow\n\t * to the specified context. This is typically called prior to {{#crossLink \"DisplayObject/draw\"}}{{/crossLink}}.\n\t * @method updateContext\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D to update.\n\t **/\n\tp.updateContext = function(ctx) {\n\t\tvar o=this, mask=o.mask, mtx= o._props.matrix;\n\t\t\n\t\tif (mask && mask.graphics && !mask.graphics.isEmpty()) {\n\t\t\tmask.getMatrix(mtx);\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n\t\t\t\n\t\t\tmask.graphics.drawAsPath(ctx);\n\t\t\tctx.clip();\n\t\t\t\n\t\t\tmtx.invert();\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n\t\t}\n\t\t\n\t\tthis.getMatrix(mtx);\n\t\tvar tx = mtx.tx, ty = mtx.ty;\n\t\tif (DisplayObject._snapToPixelEnabled && o.snapToPixel) {\n\t\t\ttx = tx + (tx < 0 ? -0.5 : 0.5) | 0;\n\t\t\tty = ty + (ty < 0 ? -0.5 : 0.5) | 0;\n\t\t}\n\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, tx, ty);\n\t\tctx.globalAlpha *= o.alpha;\n\t\tif (o.compositeOperation) { ctx.globalCompositeOperation = o.compositeOperation; }\n\t\tif (o.shadow) { this._applyShadow(ctx, o.shadow); }\n\t};\n\n\t/**\n\t * Draws the display object into a new element, which is then used for subsequent draws. Intended for complex content\n\t * that does not change frequently (ex. a Container with many children that do not move, or a complex vector Shape),\n\t * this can provide for much faster rendering because the content does not need to be re-rendered each tick. The\n\t * cached display object can be moved, rotated, faded, etc freely, however if its content changes, you must manually\n\t * update the cache by calling <code>updateCache()</code> again. You must specify the cached area via the x, y, w,\n\t * and h parameters. This defines the rectangle that will be rendered and cached using this display object's coordinates.\n\t *\n\t * <h4>Example</h4>\n\t * For example if you defined a Shape that drew a circle at 0, 0 with a radius of 25:\n\t *\n\t *      var shape = new createjs.Shape();\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n\t *      shape.cache(-25, -25, 50, 50);\n\t *\n\t * Note that filters need to be defined <em>before</em> the cache is applied or you will have to call updateCache after\n\t * application. Check out the {{#crossLink \"Filter\"}}{{/crossLink}} class for more information. Some filters\n\t * (ex. BlurFilter) may not work as expected in conjunction with the scale param.\n\t * \n\t * Usually, the resulting cacheCanvas will have the dimensions width * scale, height * scale, however some filters (ex. BlurFilter)\n\t * will add padding to the canvas dimensions.\n\t *\n\t * In previous versions caching was handled on DisplayObject but has since been moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}.\n\t * This allows for easier interaction and alternate cache methods like WebGL with {{#crossLink \"StageGL\"}}{{/crossLink}}.\n\t * For more information on the options object, see the BitmapCache {{#crossLink \"BitmapCache/define\"}}{{/crossLink}}.\n\t *\n\t * @method cache\n\t * @param {Number} x The x coordinate origin for the cache region.\n\t * @param {Number} y The y coordinate origin for the cache region.\n\t * @param {Number} width The width of the cache region.\n\t * @param {Number} height The height of the cache region.\n\t * @param {Number} [scale=1] The scale at which the cache will be created. For example, if you cache a vector shape using\n\t * \tmyShape.cache(0,0,100,100,2) then the resulting cacheCanvas will be 200x200 px. This lets you scale and rotate\n\t * \tcached elements with greater fidelity. Default is 1.\n\t * @param {Object} [options=undefined] Specify additional parameters for the cache logic\n\t **/\n\tp.cache = function(x, y, width, height, scale, options) {\n\t\tif(!this.bitmapCache){\n\t\t\tthis.bitmapCache = new createjs.BitmapCache();\n\t\t}\n\t\tthis.bitmapCache.define(this, x, y, width, height, scale, options);\n\t};\n\n\t/**\n\t * Redraws the display object to its cache. Calling updateCache without an active cache will throw an error.\n\t * If compositeOperation is null the current cache will be cleared prior to drawing. Otherwise the display object\n\t * will be drawn over the existing cache using the specified compositeOperation.\n\t *\n\t * <h4>Example</h4>\n\t * Clear the current graphics of a cached shape, draw some new instructions, and then update the cache. The new line\n\t * will be drawn on top of the old one.\n\t *\n\t *      // Not shown: Creating the shape, and caching it.\n\t *      shapeInstance.clear();\n\t *      shapeInstance.setStrokeStyle(3).beginStroke(\"#ff0000\").moveTo(100, 100).lineTo(200,200);\n\t *      shapeInstance.updateCache();\n\t *\n\t * In previous versions caching was handled on DisplayObject but has since been moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}.\n\t * This allows for easier interaction and alternate cache methods like WebGL and {{#crossLink \"StageGL\"}}{{/crossLink}}.\n\t *\n\t * @method updateCache\n\t * @param {String} compositeOperation The compositeOperation to use, or null to clear the cache and redraw it.\n\t * <a href=\"https://html.spec.whatwg.org/multipage/scripting.html#dom-context-2d-globalcompositeoperation\">\n\t * whatwg spec on compositing</a>.\n\t **/\n\tp.updateCache = function(compositeOperation) {\n\t\tif(!this.bitmapCache) {\n\t\t\tthrow \"cache() must be called before updateCache()\";\n\t\t}\n\t\tthis.bitmapCache.update(compositeOperation);\n\t};\n\n\t/**\n\t * Clears the current cache. See {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} for more information.\n\t * @method uncache\n\t **/\n\tp.uncache = function() {\n\t\tif(this.bitmapCache) {\n\t\t\tthis.bitmapCache.release();\n\t\t\tthis.bitmapCache = undefined;\n\t\t}\n\t};\n\n\t/**\n\t * Returns a data URL for the cache, or null if this display object is not cached.\n\t * Only generated if the cache has changed, otherwise returns last result.\n\t * @method getCacheDataURL\n\t * @return {String} The image data url for the cache.\n\t **/\n\tp.getCacheDataURL = function() {\n\t\treturn this.bitmapCache?this.bitmapCache.getDataURL():null;\n\t};\n\n\t/**\n\t * Transforms the specified x and y position from the coordinate space of the display object\n\t * to the global (stage) coordinate space. For example, this could be used to position an HTML label\n\t * over a specific point on a nested display object. Returns a Point instance with x and y properties\n\t * correlating to the transformed coordinates on the stage.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.x = 300;\n\t *      displayObject.y = 200;\n\t *      stage.addChild(displayObject);\n\t *      var point = displayObject.localToGlobal(100, 100);\n\t *      // Results in x=400, y=300\n\t *\n\t * @method localToGlobal\n\t * @param {Number} x The x position in the source display object to transform.\n\t * @param {Number} y The y position in the source display object to transform.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t * @return {Point} A Point instance with x and y properties correlating to the transformed coordinates\n\t * on the stage.\n\t **/\n\tp.localToGlobal = function(x, y, pt) {\n\t\treturn this.getConcatenatedMatrix(this._props.matrix).transformPoint(x,y, pt||new createjs.Point());\n\t};\n\n\t/**\n\t * Transforms the specified x and y position from the global (stage) coordinate space to the\n\t * coordinate space of the display object. For example, this could be used to determine\n\t * the current mouse position within the display object. Returns a Point instance with x and y properties\n\t * correlating to the transformed position in the display object's coordinate space.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.x = 300;\n\t *      displayObject.y = 200;\n\t *      stage.addChild(displayObject);\n\t *      var point = displayObject.globalToLocal(100, 100);\n\t *      // Results in x=-200, y=-100\n\t *\n\t * @method globalToLocal\n\t * @param {Number} x The x position on the stage to transform.\n\t * @param {Number} y The y position on the stage to transform.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t * @return {Point} A Point instance with x and y properties correlating to the transformed position in the\n\t * display object's coordinate space.\n\t **/\n\tp.globalToLocal = function(x, y, pt) {\n\t\treturn this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(x,y, pt||new createjs.Point());\n\t};\n\n\t/**\n\t * Transforms the specified x and y position from the coordinate space of this display object to the coordinate\n\t * space of the target display object. Returns a Point instance with x and y properties correlating to the\n\t * transformed position in the target's coordinate space. Effectively the same as using the following code with\n\t * {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n\t *\n\t *      var pt = this.localToGlobal(x, y);\n\t *      pt = target.globalToLocal(pt.x, pt.y);\n\t *\n\t * @method localToLocal\n\t * @param {Number} x The x position in the source display object to transform.\n\t * @param {Number} y The y position on the source display object to transform.\n\t * @param {DisplayObject} target The target display object to which the coordinates will be transformed.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t * @return {Point} Returns a Point instance with x and y properties correlating to the transformed position\n\t * in the target's coordinate space.\n\t **/\n\tp.localToLocal = function(x, y, target, pt) {\n\t\tpt = this.localToGlobal(x, y, pt);\n\t\treturn target.globalToLocal(pt.x, pt.y, pt);\n\t};\n\n\t/**\n\t * Shortcut method to quickly set the transform properties on the display object. All parameters are optional.\n\t * Omitted parameters will have the default value set.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.setTransform(100, 100, 2, 2);\n\t *\n\t * @method setTransform\n\t * @param {Number} [x=0] The horizontal translation (x position) in pixels\n\t * @param {Number} [y=0] The vertical translation (y position) in pixels\n\t * @param {Number} [scaleX=1] The horizontal scale, as a percentage of 1\n\t * @param {Number} [scaleY=1] the vertical scale, as a percentage of 1\n\t * @param {Number} [rotation=0] The rotation, in degrees\n\t * @param {Number} [skewX=0] The horizontal skew factor\n\t * @param {Number} [skewY=0] The vertical skew factor\n\t * @param {Number} [regX=0] The horizontal registration point in pixels\n\t * @param {Number} [regY=0] The vertical registration point in pixels\n\t * @return {DisplayObject} Returns this instance. Useful for chaining commands.\n\t * @chainable\n\t*/\n\tp.setTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t\tthis.scaleX = scaleX == null ? 1 : scaleX;\n\t\tthis.scaleY = scaleY == null ? 1 : scaleY;\n\t\tthis.rotation = rotation || 0;\n\t\tthis.skewX = skewX || 0;\n\t\tthis.skewY = skewY || 0;\n\t\tthis.regX = regX || 0;\n\t\tthis.regY = regY || 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a matrix based on this object's current transform.\n\t * @method getMatrix\n\t * @param {Matrix2D} matrix Optional. A Matrix2D object to populate with the calculated values. If null, a new\n\t * Matrix object is returned.\n\t * @return {Matrix2D} A matrix representing this display object's transform.\n\t **/\n\tp.getMatrix = function(matrix) {\n\t\tvar o = this, mtx = matrix&&matrix.identity() || new createjs.Matrix2D();\n\t\treturn o.transformMatrix ?  mtx.copy(o.transformMatrix) : mtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n\t};\n\n\t/**\n\t * Generates a Matrix2D object representing the combined transform of the display object and all of its\n\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}). This can\n\t * be used to transform positions between coordinate spaces, such as with {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n\t * @method getConcatenatedMatrix\n\t * @param {Matrix2D} [matrix] A {{#crossLink \"Matrix2D\"}}{{/crossLink}} object to populate with the calculated values.\n\t * If null, a new Matrix2D object is returned.\n\t * @return {Matrix2D} The combined matrix.\n\t **/\n\tp.getConcatenatedMatrix = function(matrix) {\n\t\tvar o = this, mtx = this.getMatrix(matrix);\n\t\twhile (o = o.parent) {\n\t\t\tmtx.prependMatrix(o.getMatrix(o._props.matrix));\n\t\t}\n\t\treturn mtx;\n\t};\n\n\t/**\n\t * Generates a DisplayProps object representing the combined display properties of the  object and all of its\n\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}).\n\t * @method getConcatenatedDisplayProps\n\t * @param {DisplayProps} [props] A {{#crossLink \"DisplayProps\"}}{{/crossLink}} object to populate with the calculated values.\n\t * If null, a new DisplayProps object is returned.\n\t * @return {DisplayProps} The combined display properties.\n\t **/\n\tp.getConcatenatedDisplayProps = function(props) {\n\t\tprops = props ? props.identity() : new createjs.DisplayProps();\n\t\tvar o = this, mtx = o.getMatrix(props.matrix); \n\t\tdo {\n\t\t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation);\n\t\t\t\n\t\t\t// we do this to avoid problems with the matrix being used for both operations when o._props.matrix is passed in as the props param.\n\t\t\t// this could be simplified (ie. just done as part of the prepend above) if we switched to using a pool.\n\t\t\tif (o != this) { mtx.prependMatrix(o.getMatrix(o._props.matrix)); }\n\t\t} while (o = o.parent);\n\t\treturn props;\n\t};\n\n\t/**\n\t * Tests whether the display object intersects the specified point in local coordinates (ie. draws a pixel with alpha > 0 at\n\t * the specified position). This ignores the alpha, shadow, hitArea, mask, and compositeOperation of the display object.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      stage.addEventListener(\"stagemousedown\", handleMouseDown);\n\t *      function handleMouseDown(event) {\n\t *          var hit = myShape.hitTest(event.stageX, event.stageY);\n\t *      }\n\t *\n\t * Please note that shape-to-shape collision is not currently supported by EaselJS.\n\t * @method hitTest\n\t * @param {Number} x The x position to check in the display object's local coordinates.\n\t * @param {Number} y The y position to check in the display object's local coordinates.\n\t * @return {Boolean} A Boolean indicating whether a visible portion of the DisplayObject intersect the specified\n\t * local Point.\n\t*/\n\tp.hitTest = function(x, y) {\n\t\tvar ctx = DisplayObject._hitTestContext;\n\t\tctx.setTransform(1, 0, 0, 1, -x, -y);\n\t\tthis.draw(ctx);\n\n\t\tvar hit = this._testHit(ctx);\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.clearRect(0, 0, 2, 2);\n\t\treturn hit;\n\t};\n\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var myGraphics = new createjs.Graphics().beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n\t *      var shape = stage.addChild(new Shape()).set({graphics:myGraphics, x:100, y:100, alpha:0.5});\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the DisplayObject instance.\n\t * @return {DisplayObject} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a rectangle representing this object's bounds in its local coordinate system (ie. with no transformation).\n\t * Objects that have been cached will return the bounds of the cache.\n\t * \n\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n\t * bounds.\n\t * \n\t * <table>\n\t * \t<tr><td><b>All</b></td><td>\n\t * \t\tAll display objects support setting bounds manually using setBounds(). Likewise, display objects that\n\t * \t\thave been cached using cache() will return the bounds of their cache. Manual and cache bounds will override\n\t * \t\tthe automatic calculations listed below.\n\t * \t</td></tr>\n\t * \t<tr><td><b>Bitmap</b></td><td>\n\t * \t\tReturns the width and height of the sourceRect (if specified) or image, extending from (x=0,y=0).\n\t * \t</td></tr>\n\t * \t<tr><td><b>Sprite</b></td><td>\n\t * \t\tReturns the bounds of the current frame. May have non-zero x/y if a frame registration point was specified\n\t * \t\tin the spritesheet data. See also {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}}\n\t * \t</td></tr>\n\t * \t<tr><td><b>Container</b></td><td>\n\t * \t\tReturns the aggregate (combined) bounds of all children that return a non-null value from getBounds().\n\t * \t</td></tr>\n\t * \t<tr><td><b>Shape</b></td><td>\n\t * \t\tDoes not currently support automatic bounds calculations. Use setBounds() to manually define bounds.\n\t * \t</td></tr>\n\t * \t<tr><td><b>Text</b></td><td>\n\t * \t\tReturns approximate bounds. Horizontal values (x/width) are quite accurate, but vertical values (y/height) are\n\t * \t\tnot, especially when using textBaseline values other than \"top\".\n\t * \t</td></tr>\n\t * \t<tr><td><b>BitmapText</b></td><td>\n\t * \t\tReturns approximate bounds. Values will be more accurate if spritesheet frame registration points are close\n\t * \t\tto (x=0,y=0).\n\t * \t</td></tr>\n\t* </table>\n\t * \n\t * Bounds can be expensive to calculate for some objects (ex. text, or containers with many children), and\n\t * are recalculated each time you call getBounds(). You can prevent recalculation on static objects by setting the\n\t * bounds explicitly:\n\t * \n\t * \tvar bounds = obj.getBounds();\n\t * \tobj.setBounds(bounds.x, bounds.y, bounds.width, bounds.height);\n\t * \t// getBounds will now use the set values, instead of recalculating\n\t * \n\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n\t * values if you need to retain it.\n\t * \n\t * \tvar myBounds = obj.getBounds().clone();\n\t * \t// OR:\n\t * \tmyRect.copy(obj.getBounds());\n\t * \n\t * @method getBounds\n\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this\n\t * object.\n\t **/\n\tp.getBounds = function() {\n\t\tif (this._bounds) { return this._rectangle.copy(this._bounds); }\n\t\tvar cacheCanvas = this.cacheCanvas;\n\t\tif (cacheCanvas) {\n\t\t\tvar scale = this._cacheScale;\n\t\t\treturn this._rectangle.setValues(this._cacheOffsetX, this._cacheOffsetY, cacheCanvas.width/scale, cacheCanvas.height/scale);\n\t\t}\n\t\treturn null;\n\t};\n\n\t/**\n\t * Returns a rectangle representing this object's bounds in its parent's coordinate system (ie. with transformations applied).\n\t * Objects that have been cached will return the transformed bounds of the cache.\n\t * \n\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n\t * bounds.\n\t * \n\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n\t * values if you need to retain it.\n\t * \n\t * Container instances calculate aggregate bounds for all children that return bounds via getBounds.\n\t * @method getTransformedBounds\n\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this object.\n\t **/\n\tp.getTransformedBounds = function() {\n\t\treturn this._getBounds();\n\t};\n\n\t/**\n\t * Allows you to manually specify the bounds of an object that either cannot calculate their own bounds (ex. Shape &\n\t * Text) for future reference, or so the object can be included in Container bounds. Manually set bounds will always\n\t * override calculated bounds.\n\t * \n\t * The bounds should be specified in the object's local (untransformed) coordinates. For example, a Shape instance\n\t * with a 25px radius circle centered at 0,0 would have bounds of (-25, -25, 50, 50).\n\t * @method setBounds\n\t * @param {Number} x The x origin of the bounds. Pass null to remove the manual bounds.\n\t * @param {Number} y The y origin of the bounds.\n\t * @param {Number} width The width of the bounds.\n\t * @param {Number} height The height of the bounds.\n\t **/\n\tp.setBounds = function(x, y, width, height) {\n\t\tif (x == null) { this._bounds = x; return; }\n\t\tthis._bounds = (this._bounds || new createjs.Rectangle()).setValues(x, y, width, height);\n\t};\n\n\t/**\n\t * Returns a clone of this DisplayObject. Some properties that are specific to this instance's current context are\n\t * reverted to their defaults (for example .parent). Caches are not maintained across clones, and some elements\n\t * are copied by reference (masks, individual filter instances, hit area)\n\t * @method clone\n\t * @return {DisplayObject} A clone of the current DisplayObject instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new DisplayObject());\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[DisplayObject (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * Called before the object gets drawn and is a chance to ensure the display state of the object is correct.\n\t * Mostly used by {{#crossLink \"MovieClip\"}}{{/crossLink}} and {{#crossLink \"BitmapText\"}}{{/crossLink}} to\n\t * correct their internal state and children prior to being drawn.\n\t *\n\t * Is manually called via draw in a {{#crossLink \"Stage\"}}{{/crossLink}} but is automatically called when\n\t * present in a {{#crossLink \"StageGL\"}}{{/crossLink}} instance.\n\t *\n\t * @method _updateState\n\t * @default null\n\t */\n\tp._updateState = null;\n\n\t// separated so it can be used more easily in subclasses:\n\t/**\n\t * @method _cloneProps\n\t * @param {DisplayObject} o The DisplayObject instance which will have properties from the current DisplayObject\n\t * instance copied into.\n\t * @return {DisplayObject} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\to.alpha = this.alpha;\n\t\to.mouseEnabled = this.mouseEnabled;\n\t\to.tickEnabled = this.tickEnabled;\n\t\to.name = this.name;\n\t\to.regX = this.regX;\n\t\to.regY = this.regY;\n\t\to.rotation = this.rotation;\n\t\to.scaleX = this.scaleX;\n\t\to.scaleY = this.scaleY;\n\t\to.shadow = this.shadow;\n\t\to.skewX = this.skewX;\n\t\to.skewY = this.skewY;\n\t\to.visible = this.visible;\n\t\to.x  = this.x;\n\t\to.y = this.y;\n\t\to.compositeOperation = this.compositeOperation;\n\t\to.snapToPixel = this.snapToPixel;\n\t\to.filters = this.filters==null?null:this.filters.slice(0);\n\t\to.mask = this.mask;\n\t\to.hitArea = this.hitArea;\n\t\to.cursor = this.cursor;\n\t\to._bounds = this._bounds;\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _applyShadow\n\t * @protected\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {Shadow} shadow\n\t **/\n\tp._applyShadow = function(ctx, shadow) {\n\t\tshadow = shadow || Shadow.identity;\n\t\tctx.shadowColor = shadow.color;\n\t\tctx.shadowOffsetX = shadow.offsetX;\n\t\tctx.shadowOffsetY = shadow.offsetY;\n\t\tctx.shadowBlur = shadow.blur;\n\t};\n\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * @protected\n\t **/\n\tp._tick = function(evtObj) {\n\t\t// because tick can be really performance sensitive, check for listeners before calling dispatchEvent.\n\t\tvar ls = this._listeners;\n\t\tif (ls && ls[\"tick\"]) {\n\t\t\t// reset & reuse the event object to avoid construction / GC costs:\n\t\t\tevtObj.target = null;\n\t\t\tevtObj.propagationStopped = evtObj.immediatePropagationStopped = false;\n\t\t\tthis.dispatchEvent(evtObj);\n\t\t}\n\t};\n\n\t/**\n\t * @method _testHit\n\t * @protected\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @return {Boolean}\n\t **/\n\tp._testHit = function(ctx) {\n\t\ttry {\n\t\t\tvar hit = ctx.getImageData(0, 0, 1, 1).data[3] > 1;\n\t\t} catch (e) {\n\t\t\tif (!DisplayObject.suppressCrossDomainErrors) {\n\t\t\t\tthrow \"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.\";\n\t\t\t}\n\t\t}\n\t\treturn hit;\n\t};\n\n\t/**\n\t * @method _getBounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getBounds = function(matrix, ignoreTransform){\n\t\treturn this._transformBounds(this.getBounds(), matrix, ignoreTransform);\n\t};\n\n\t/**\n\t * @method _transformBounds\n\t * @param {Rectangle} bounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._transformBounds = function(bounds, matrix, ignoreTransform) {\n\t\tif (!bounds) { return bounds; }\n\t\tvar x = bounds.x, y = bounds.y, width = bounds.width, height = bounds.height, mtx = this._props.matrix;\n\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n\t\t\n\t\tif (x || y) { mtx.appendTransform(0,0,1,1,0,0,0,-x,-y); } // TODO: simplify this.\n\t\tif (matrix) { mtx.prependMatrix(matrix); }\n\t\t\n\t\tvar x_a = width*mtx.a, x_b = width*mtx.b;\n\t\tvar y_c = height*mtx.c, y_d = height*mtx.d;\n\t\tvar tx = mtx.tx, ty = mtx.ty;\n\t\t\n\t\tvar minX = tx, maxX = tx, minY = ty, maxY = ty;\n\n\t\tif ((x = x_a + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\tif ((x = x_a + y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\tif ((x = y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\n\t\tif ((y = x_b + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\tif ((y = x_b + y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\tif ((y = y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\n\t\treturn bounds.setValues(minX, minY, maxX-minX, maxY-minY);\n\t};\n\n\t/**\n\t * Indicates whether the display object has any mouse event listeners or a cursor.\n\t * @method _isMouseOpaque\n\t * @return {Boolean}\n\t * @protected\n\t **/\n\tp._hasMouseEventListener = function() {\n\t\tvar evts = DisplayObject._MOUSE_EVENTS;\n\t\tfor (var i= 0, l=evts.length; i<l; i++) {\n\t\t\tif (this.hasEventListener(evts[i])) { return true; }\n\t\t}\n\t\treturn !!this.cursor;\n\t};\n\n\tcreatejs.DisplayObject = createjs.promote(DisplayObject, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// Container.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\t\n\n// constructor:\n/**\n * A Container is a nestable display list that allows you to work with compound display elements. For  example you could\n * group arm, leg, torso and head {{#crossLink \"Bitmap\"}}{{/crossLink}} instances together into a Person Container, and\n * transform them as a group, while still being able to move the individual parts relative to each other. Children of\n * containers have their <code>transform</code> and <code>alpha</code> properties concatenated with their parent\n * Container.\n *\n * For example, a {{#crossLink \"Shape\"}}{{/crossLink}} with x=100 and alpha=0.5, placed in a Container with <code>x=50</code>\n * and <code>alpha=0.7</code> will be rendered to the canvas at <code>x=150</code> and <code>alpha=0.35</code>.\n * Containers have some overhead, so you generally shouldn't create a Container to hold a single child.\n *\n * <h4>Example</h4>\n *\n *      var container = new createjs.Container();\n *      container.addChild(bitmapInstance, shapeInstance);\n *      container.x = 100;\n *\n * @class Container\n * @extends DisplayObject\n * @constructor\n **/\n\tfunction Container() {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The array of children in the display list. You should usually use the child management methods such as\n\t\t * {{#crossLink \"Container/addChild\"}}{{/crossLink}}, {{#crossLink \"Container/removeChild\"}}{{/crossLink}},\n\t\t * {{#crossLink \"Container/swapChildren\"}}{{/crossLink}}, etc, rather than accessing this directly, but it is\n\t\t * included for advanced uses.\n\t\t * @property children\n\t\t * @type Array\n\t\t * @default null\n\t\t **/\n\t\tthis.children = [];\n\t\t\n\t\t/**\n\t\t * Indicates whether the children of this container are independently enabled for mouse/pointer interaction.\n\t\t * If false, the children will be aggregated under the container - for example, a click on a child shape would\n\t\t * trigger a click event on the container.\n\t\t * @property mouseChildren\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.mouseChildren = true;\n\t\t\n\t\t/**\n\t\t * If false, the tick will not be propagated to children of this Container. This can provide some performance benefits.\n\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n\t\t * @property tickChildren\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.tickChildren = true;\n\t}\n\tvar p = createjs.extend(Container, createjs.DisplayObject);\n\t\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Container/numChildren:property\"}}{{/crossLink}} property instead.\n\t * @method _getNumChildren\n\t * @protected\n\t * @return {Number}\n\t **/\n\tp._getNumChildren = function() {\n\t\treturn this.children.length;\n\t};\n\t// Container.getNumChildren is @deprecated. Remove for 1.1+\n\tp.getNumChildren = createjs.deprecate(p._getNumChildren, \"Container.getNumChildren\");\n\n\t/**\n\t * Returns the number of children in the container.\n\t * @property numChildren\n\t * @type {Number}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tnumChildren: { get: p._getNumChildren }\n\t\t});\n\t} catch (e) {}\n\t\n\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Container; // TODO: deprecated.\n\t\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || this.children.length;\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\t\n\t\t// this ensures we don't have issues with display list changes that occur during a draw:\n\t\tvar list = this.children.slice();\n\t\tfor (var i=0,l=list.length; i<l; i++) {\n\t\t\tvar child = list[i];\n\t\t\tif (!child.isVisible()) { continue; }\n\t\t\t\n\t\t\t// draw the child:\n\t\t\tctx.save();\n\t\t\tchild.updateContext(ctx);\n\t\t\tchild.draw(ctx);\n\t\t\tctx.restore();\n\t\t}\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * Adds a child to the top of the display list.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tcontainer.addChild(bitmapInstance);\n\t *\n\t * You can also add multiple children at once:\n\t *\n\t * \t\tcontainer.addChild(bitmapInstance, shapeInstance, textInstance);\n\t *\n\t * @method addChild\n\t * @param {DisplayObject} child The display object to add.\n\t * @return {DisplayObject} The child that was added, or the last child if multiple children were added.\n\t **/\n\tp.addChild = function(child) {\n\t\tif (child == null) { return child; }\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tfor (var i=0; i<l; i++) { this.addChild(arguments[i]); }\n\t\t\treturn arguments[l-1];\n\t\t}\n\t\t// Note: a lot of duplication with addChildAt, but push is WAY faster than splice.\n\t\tvar par=child.parent, silent = par === this;\n\t\tpar&&par._removeChildAt(createjs.indexOf(par.children, child), silent);\n\t\tchild.parent = this;\n\t\tthis.children.push(child);\n\t\tif (!silent) { child.dispatchEvent(\"added\"); }\n\t\treturn child;\n\t};\n\n\t/**\n\t * Adds a child to the display list at the specified index, bumping children at equal or greater indexes up one, and\n\t * setting its parent to this Container.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      addChildAt(child1, index);\n\t *\n\t * You can also add multiple children, such as:\n\t *\n\t *      addChildAt(child1, child2, ..., index);\n\t *\n\t * The index must be between 0 and numChildren. For example, to add myShape under otherShape in the display list,\n\t * you could use:\n\t *\n\t *      container.addChildAt(myShape, container.getChildIndex(otherShape));\n\t *\n\t * This would also bump otherShape's index up by one. Fails silently if the index is out of range.\n\t *\n\t * @method addChildAt\n\t * @param {DisplayObject} child The display object to add.\n\t * @param {Number} index The index to add the child at.\n\t * @return {DisplayObject} Returns the last child that was added, or the last child if multiple children were added.\n\t **/\n\tp.addChildAt = function(child, index) {\n\t\tvar l = arguments.length;\n\t\tvar indx = arguments[l-1]; // can't use the same name as the index param or it replaces arguments[1]\n\t\tif (indx < 0 || indx > this.children.length) { return arguments[l-2]; }\n\t\tif (l > 2) {\n\t\t\tfor (var i=0; i<l-1; i++) { this.addChildAt(arguments[i], indx+i); }\n\t\t\treturn arguments[l-2];\n\t\t}\n\t\tvar par=child.parent, silent = par === this;\n\t\tpar&&par._removeChildAt(createjs.indexOf(par.children, child), silent);\n\t\tchild.parent = this;\n\t\tthis.children.splice(index, 0, child);\n\t\tif (!silent) { child.dispatchEvent(\"added\"); }\n\t\treturn child;\n\t};\n\n\t/**\n\t * Removes the specified child from the display list. Note that it is faster to use removeChildAt() if the index is\n\t * already known.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      container.removeChild(child);\n\t *\n\t * You can also remove multiple children:\n\t *\n\t *      removeChild(child1, child2, ...);\n\t *\n\t * Returns true if the child (or children) was removed, or false if it was not in the display list.\n\t * @method removeChild\n\t * @param {DisplayObject} child The child to remove.\n\t * @return {Boolean} true if the child (or children) was removed, or false if it was not in the display list.\n\t **/\n\tp.removeChild = function(child) {\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tvar good = true;\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeChild(arguments[i]); }\n\t\t\treturn good;\n\t\t}\n\t\treturn this._removeChildAt(createjs.indexOf(this.children, child));\n\t};\n\n\t/**\n\t * Removes the child at the specified index from the display list, and sets its parent to null.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      container.removeChildAt(2);\n\t *\n\t * You can also remove multiple children:\n\t *\n\t *      container.removeChild(2, 7, ...)\n\t *\n\t * Returns true if the child (or children) was removed, or false if any index was out of range.\n\t * @method removeChildAt\n\t * @param {Number} index The index of the child to remove.\n\t * @return {Boolean} true if the child (or children) was removed, or false if any index was out of range.\n\t **/\n\tp.removeChildAt = function(index) {\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tvar a = [];\n\t\t\tfor (var i=0; i<l; i++) { a[i] = arguments[i]; }\n\t\t\ta.sort(function(a, b) { return b-a; });\n\t\t\tvar good = true;\n\t\t\tfor (var i=0; i<l; i++) { good = good && this._removeChildAt(a[i]); }\n\t\t\treturn good;\n\t\t}\n\t\treturn this._removeChildAt(index);\n\t};\n\n\t/**\n\t * Removes all children from the display list.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \tcontainer.removeAllChildren();\n\t *\n\t * @method removeAllChildren\n\t **/\n\tp.removeAllChildren = function() {\n\t\tvar kids = this.children;\n\t\twhile (kids.length) { this._removeChildAt(0); }\n\t};\n\n\t/**\n\t * Returns the child at the specified index.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      container.getChildAt(2);\n\t *\n\t * @method getChildAt\n\t * @param {Number} index The index of the child to return.\n\t * @return {DisplayObject} The child at the specified index. Returns null if there is no child at the index.\n\t **/\n\tp.getChildAt = function(index) {\n\t\treturn this.children[index];\n\t};\n\t\n\t/**\n\t * Returns the child with the specified name.\n\t * @method getChildByName\n\t * @param {String} name The name of the child to return.\n\t * @return {DisplayObject} The child with the specified name.\n\t **/\n\tp.getChildByName = function(name) {\n\t\tvar kids = this.children;\n\t\tfor (var i=0,l=kids.length;i<l;i++) {\n\t\t\tif(kids[i].name == name) { return kids[i]; }\n\t\t}\n\t\treturn null;\n\t};\n\n\t/**\n\t * Performs an array sort operation on the child list.\n\t *\n\t * <h4>Example: Display children with a higher y in front.</h4>\n\t * \n\t *      var sortFunction = function(obj1, obj2, options) {\n\t *          if (obj1.y > obj2.y) { return 1; }\n\t *          if (obj1.y < obj2.y) { return -1; }\n\t *          return 0;\n\t *      }\n\t *      container.sortChildren(sortFunction);\n\t *\n\t * @method sortChildren\n\t * @param {Function} sortFunction the function to use to sort the child list. See JavaScript's <code>Array.sort</code>\n\t * documentation for details.\n\t **/\n\tp.sortChildren = function(sortFunction) {\n\t\tthis.children.sort(sortFunction);\n\t};\n\n\t/**\n\t * Returns the index of the specified child in the display list, or -1 if it is not in the display list.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var index = container.getChildIndex(child);\n\t *\n\t * @method getChildIndex\n\t * @param {DisplayObject} child The child to return the index of.\n\t * @return {Number} The index of the specified child. -1 if the child is not found.\n\t **/\n\tp.getChildIndex = function(child) {\n\t\treturn createjs.indexOf(this.children, child);\n\t};\n\t\n\t/**\n\t * Swaps the children at the specified indexes. Fails silently if either index is out of range.\n\t * @method swapChildrenAt\n\t * @param {Number} index1\n\t * @param {Number} index2\n\t **/\n\tp.swapChildrenAt = function(index1, index2) {\n\t\tvar kids = this.children;\n\t\tvar o1 = kids[index1];\n\t\tvar o2 = kids[index2];\n\t\tif (!o1 || !o2) { return; }\n\t\tkids[index1] = o2;\n\t\tkids[index2] = o1;\n\t};\n\t\n\t/**\n\t * Swaps the specified children's depth in the display list. Fails silently if either child is not a child of this\n\t * Container.\n\t * @method swapChildren\n\t * @param {DisplayObject} child1\n\t * @param {DisplayObject} child2\n\t **/\n\tp.swapChildren = function(child1, child2) {\n\t\tvar kids = this.children;\n\t\tvar index1,index2;\n\t\tfor (var i=0,l=kids.length;i<l;i++) {\n\t\t\tif (kids[i] == child1) { index1 = i; }\n\t\t\tif (kids[i] == child2) { index2 = i; }\n\t\t\tif (index1 != null && index2 != null) { break; }\n\t\t}\n\t\tif (i==l) { return; } // TODO: throw error?\n\t\tkids[index1] = child2;\n\t\tkids[index2] = child1;\n\t};\n\t\n\t/**\n\t * Changes the depth of the specified child. Fails silently if the child is not a child of this container, or the index is out of range.\n\t * @param {DisplayObject} child\n\t * @param {Number} index  \n\t * @method setChildIndex\n\t **/\n\tp.setChildIndex = function(child, index) {\n\t\tvar kids = this.children, l=kids.length;\n\t\tif (child.parent != this || index < 0 || index >= l) { return; }\n\t\tfor (var i=0;i<l;i++) {\n\t\t\tif (kids[i] == child) { break; }\n\t\t}\n\t\tif (i==l || i == index) { return; }\n\t\tkids.splice(i,1);\n\t\tkids.splice(index,0,child);\n\t};\n\n\t/**\n\t * Returns true if the specified display object either is this container or is a descendent (child, grandchild, etc)\n\t * of this container.\n\t * @method contains\n\t * @param {DisplayObject} child The DisplayObject to be checked.\n\t * @return {Boolean} true if the specified display object either is this container or is a descendent.\n\t **/\n\tp.contains = function(child) {\n\t\twhile (child) {\n\t\t\tif (child == this) { return true; }\n\t\t\tchild = child.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Tests whether the display object intersects the specified local point (ie. draws a pixel with alpha > 0 at the\n\t * specified position). This ignores the alpha, shadow and compositeOperation of the display object, and all\n\t * transform properties including regX/Y.\n\t * @method hitTest\n\t * @param {Number} x The x position to check in the display object's local coordinates.\n\t * @param {Number} y The y position to check in the display object's local coordinates.\n\t * @return {Boolean} A Boolean indicating whether there is a visible section of a DisplayObject that overlaps the specified\n\t * coordinates.\n\t **/\n\tp.hitTest = function(x, y) {\n\t\t// TODO: optimize to use the fast cache check where possible.\n\t\treturn (this.getObjectUnderPoint(x, y) != null);\n\t};\n\n\t/**\n\t * Returns an array of all display objects under the specified coordinates that are in this container's display\n\t * list. This routine ignores any display objects with {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n\t * set to `false`. The array will be sorted in order of visual depth, with the top-most display object at index 0.\n\t * This uses shape based hit detection, and can be an expensive operation to run, so it is best to use it carefully.\n\t * For example, if testing for objects under the mouse, test on tick (instead of on {{#crossLink \"DisplayObject/mousemove:event\"}}{{/crossLink}}),\n\t * and only if the mouse's position has changed.\n\t * \n\t * <ul>\n\t *     <li>By default (mode=0) this method evaluates all display objects.</li>\n\t *     <li>By setting the `mode` parameter to `1`, the {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n\t * \t\tand {{#crossLink \"mouseChildren:property\"}}{{/crossLink}} properties will be respected.</li>\n\t * \t   <li>Setting the `mode` to `2` additionally excludes display objects that do not have active mouse event\n\t * \t   \tlisteners or a {{#crossLink \"DisplayObject:cursor:property\"}}{{/crossLink}} property. That is, only objects\n\t * \t   \tthat would normally intercept mouse interaction will be included. This can significantly improve performance\n\t * \t   \tin some cases by reducing the number of display objects that need to be tested.</li>\n\t * </li>\n\t * \n\t * This method accounts for both {{#crossLink \"DisplayObject/hitArea:property\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/mask:property\"}}{{/crossLink}}.\n\t * @method getObjectsUnderPoint\n\t * @param {Number} x The x position in the container to test.\n\t * @param {Number} y The y position in the container to test.\n\t * @param {Number} [mode=0] The mode to use to determine which display objects to include. 0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n\t * @return {Array} An Array of DisplayObjects under the specified coordinates.\n\t **/\n\tp.getObjectsUnderPoint = function(x, y, mode) {\n\t\tvar arr = [];\n\t\tvar pt = this.localToGlobal(x, y);\n\t\tthis._getObjectsUnderPoint(pt.x, pt.y, arr, mode>0, mode==1);\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Similar to {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}, but returns only the top-most display\n\t * object. This runs significantly faster than <code>getObjectsUnderPoint()</code>, but is still potentially an expensive\n\t * operation. See {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}} for more information.\n\t * @method getObjectUnderPoint\n\t * @param {Number} x The x position in the container to test.\n\t * @param {Number} y The y position in the container to test.\n\t * @param {Number} mode The mode to use to determine which display objects to include.  0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n\t * @return {DisplayObject} The top-most display object under the specified coordinates.\n\t **/\n\tp.getObjectUnderPoint = function(x, y, mode) {\n\t\tvar pt = this.localToGlobal(x, y);\n\t\treturn this._getObjectsUnderPoint(pt.x, pt.y, null, mode>0, mode==1);\n\t};\n\t\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\treturn this._getBounds(null, true);\n\t};\n\t\n\t\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getTransformedBounds = function() {\n\t\treturn this._getBounds();\n\t};\n\n\t/**\n\t * Returns a clone of this Container. Some properties that are specific to this instance's current context are\n\t * reverted to their defaults (for example .parent).\n\t * @method clone\n\t * @param {Boolean} [recursive=false] If true, all of the descendants of this container will be cloned recursively. If false, the\n\t * properties of the container will be cloned, but the new instance will not have any children.\n\t * @return {Container} A clone of the current Container instance.\n\t **/\n\tp.clone = function(recursive) {\n\t\tvar o = this._cloneProps(new Container());\n\t\tif (recursive) { this._cloneChildren(o); }\n\t\treturn o;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Container (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * @protected\n\t **/\n\tp._tick = function(evtObj) {\n\t\tif (this.tickChildren) {\n\t\t\tfor (var i=this.children.length-1; i>=0; i--) {\n\t\t\t\tvar child = this.children[i];\n\t\t\t\tif (child.tickEnabled && child._tick) { child._tick(evtObj); }\n\t\t\t}\n\t\t}\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\t\n\t/**\n\t * Recursively clones all children of this container, and adds them to the target container.\n\t * @method cloneChildren\n\t * @protected\n\t * @param {Container} o The target container.\n\t **/\n\tp._cloneChildren = function(o) {\n\t\tif (o.children.length) { o.removeAllChildren(); }\n\t\tvar arr = o.children;\n\t\tfor (var i=0, l=this.children.length; i<l; i++) {\n\t\t\tvar clone = this.children[i].clone(true);\n\t\t\tclone.parent = o;\n\t\t\tarr.push(clone);\n\t\t}\n\t};\n\t\n\t/**\n\t * Removes the child at the specified index from the display list, and sets its parent to null.\n\t * Used by `removeChildAt`, `addChild`, and `addChildAt`.\n\t * @method removeChildAt\n\t * @protected\n\t * @param {Number} index The index of the child to remove.\n\t * @param {Boolean} [silent] Prevents dispatch of `removed` event if true.\n\t * @return {Boolean} true if the child (or children) was removed, or false if any index was out of range.\n\t **/\n\tp._removeChildAt = function(index, silent) {\n\t\tif (index < 0 || index > this.children.length-1) { return false; }\n\t\tvar child = this.children[index];\n\t\tif (child) { child.parent = null; }\n\t\tthis.children.splice(index, 1);\n\t\tif (!silent) { child.dispatchEvent(\"removed\"); }\n\t\treturn true;\n\t};\n\n\t/**\n\t * @method _getObjectsUnderPoint\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Array} arr\n\t * @param {Boolean} mouse If true, it will respect mouse interaction properties like mouseEnabled, mouseChildren, and active listeners.\n\t * @param {Boolean} activeListener If true, there is an active mouse event listener on a parent object.\n\t * @param {Number} currentDepth Indicates the current depth of the search.\n\t * @return {DisplayObject}\n\t * @protected\n\t **/\n\tp._getObjectsUnderPoint = function(x, y, arr, mouse, activeListener, currentDepth) {\n\t\tcurrentDepth = currentDepth || 0;\n\t\tif (!currentDepth && !this._testMask(this, x, y)) { return null; }\n\t\tvar mtx, ctx = createjs.DisplayObject._hitTestContext;\n\t\tactiveListener = activeListener || (mouse&&this._hasMouseEventListener());\n\n\t\t// draw children one at a time, and check if we get a hit:\n\t\tvar children = this.children, l = children.length;\n\t\tfor (var i=l-1; i>=0; i--) {\n\t\t\tvar child = children[i];\n\t\t\tvar hitArea = child.hitArea;\n\t\t\tif (!child.visible || (!hitArea && !child.isVisible()) || (mouse && !child.mouseEnabled)) { continue; }\n\t\t\tif (!hitArea && !this._testMask(child, x, y)) { continue; }\n\t\t\t\n\t\t\t// if a child container has a hitArea then we only need to check its hitAre2a, so we can treat it as a normal DO:\n\t\t\tif (!hitArea && child instanceof Container) {\n\t\t\t\tvar result = child._getObjectsUnderPoint(x, y, arr, mouse, activeListener, currentDepth+1);\n\t\t\t\tif (!arr && result) { return (mouse && !this.mouseChildren) ? this : result; }\n\t\t\t} else {\n\t\t\t\tif (mouse && !activeListener && !child._hasMouseEventListener()) { continue; }\n\t\t\t\t\n\t\t\t\t// TODO: can we pass displayProps forward, to avoid having to calculate this backwards every time? It's kind of a mixed bag. When we're only hunting for DOs with event listeners, it may not make sense.\n\t\t\t\tvar props = child.getConcatenatedDisplayProps(child._props);\n\t\t\t\tmtx = props.matrix;\n\t\t\t\t\n\t\t\t\tif (hitArea) {\n\t\t\t\t\tmtx.appendMatrix(hitArea.getMatrix(hitArea._props.matrix));\n\t\t\t\t\tprops.alpha = hitArea.alpha;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tctx.globalAlpha = props.alpha;\n\t\t\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\n\t\t\t\t(hitArea||child).draw(ctx);\n\t\t\t\tif (!this._testHit(ctx)) { continue; }\n\t\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\t\tctx.clearRect(0, 0, 2, 2);\n\t\t\t\tif (arr) { arr.push(child); }\n\t\t\t\telse { return (mouse && !this.mouseChildren) ? this : child; }\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\t\n\t/**\n\t * @method _testMask\n\t * @param {DisplayObject} target\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Boolean} Indicates whether the x/y is within the masked region.\n\t * @protected\n\t **/\n\tp._testMask = function(target, x, y) {\n\t\tvar mask = target.mask;\n\t\tif (!mask || !mask.graphics || mask.graphics.isEmpty()) { return true; }\n\t\t\n\t\tvar mtx = this._props.matrix, parent = target.parent;\n\t\tmtx = parent ? parent.getConcatenatedMatrix(mtx) : mtx.identity();\n\t\tmtx = mask.getMatrix(mask._props.matrix).prependMatrix(mtx);\n\t\t\n\t\tvar ctx = createjs.DisplayObject._hitTestContext;\n\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\n\t\t\n\t\t// draw the mask as a solid fill:\n\t\tmask.graphics.drawAsPath(ctx);\n\t\tctx.fillStyle = \"#000\";\n\t\tctx.fill();\n\t\t\n\t\tif (!this._testHit(ctx)) { return false; }\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.clearRect(0, 0, 2, 2);\n\t\t\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * @method _getBounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getBounds = function(matrix, ignoreTransform) {\n\t\tvar bounds = this.DisplayObject_getBounds();\n\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\n\t\t\n\t\tvar mtx = this._props.matrix;\n\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n\t\tif (matrix) { mtx.prependMatrix(matrix); }\n\t\t\n\t\tvar l = this.children.length, rect=null;\n\t\tfor (var i=0; i<l; i++) {\n\t\t\tvar child = this.children[i];\n\t\t\tif (!child.visible || !(bounds = child._getBounds(mtx))) { continue; }\n\t\t\tif (rect) { rect.extend(bounds.x, bounds.y, bounds.width, bounds.height); }\n\t\t\telse { rect = bounds.clone(); }\n\t\t}\n\t\treturn rect;\n\t};\n\n\n\tcreatejs.Container = createjs.promote(Container, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Stage.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * A stage is the root level {{#crossLink \"Container\"}}{{/crossLink}} for a display list. Each time its {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n\t * method is called, it will render its display list to its target canvas.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a stage, adds a child to it, then uses {{#crossLink \"Ticker\"}}{{/crossLink}} to update the child\n\t * and redraw the stage using {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t *\n\t *      var stage = new createjs.Stage(\"canvasElementId\");\n\t *      var image = new createjs.Bitmap(\"imagePath.png\");\n\t *      stage.addChild(image);\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          image.x += 10;\n\t *          stage.update();\n\t *      }\n\t *\n\t * @class Stage\n\t * @extends Container\n\t * @constructor\n\t * @param {HTMLCanvasElement | String | Object} canvas A canvas object that the Stage will render to, or the string id\n\t * of a canvas object in the current document.\n\t **/\n\tfunction Stage(canvas) {\n\t\tthis.Container_constructor();\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * Indicates whether the stage should automatically clear the canvas before each render. You can set this to <code>false</code>\n\t\t * to manually control clearing (for generative art, or when pointing multiple stages at the same canvas for\n\t\t * example).\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var stage = new createjs.Stage(\"canvasId\");\n\t\t *      stage.autoClear = false;\n\t\t *\n\t\t * @property autoClear\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.autoClear = true;\n\t\n\t\t/**\n\t\t * The canvas the stage will render to. Multiple stages can share a single canvas, but you must disable autoClear for all but the\n\t\t * first stage that will be ticked (or they will clear each other's render).\n\t\t *\n\t\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n\t\t * new canvas or mouse events will not work as expected. For example:\n\t\t *\n\t\t *      myStage.enableDOMEvents(false);\n\t\t *      myStage.canvas = anotherCanvas;\n\t\t *      myStage.enableDOMEvents(true);\n\t\t *\n\t\t * @property canvas\n\t\t * @type HTMLCanvasElement | Object\n\t\t **/\n\t\tthis.canvas = (typeof canvas == \"string\") ? ww&&document.getElementById(canvas) : canvas;\n\t\n\t\t/**\n\t\t * The current mouse X position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n\t\t * position over the canvas, and mouseInBounds will be set to false.\n\t\t * @property mouseX\n\t\t * @type Number\n\t\t * @readonly\n\t\t **/\n\t\tthis.mouseX = 0;\n\t\n\t\t/**\n\t\t * The current mouse Y position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n\t\t * position over the canvas, and mouseInBounds will be set to false.\n\t\t * @property mouseY\n\t\t * @type Number\n\t\t * @readonly\n\t\t **/\n\t\tthis.mouseY = 0;\n\t\n\t\t/**\n\t\t * Specifies the area of the stage to affect when calling update. This can be use to selectively\n\t\t * re-draw specific regions of the canvas. If null, the whole canvas area is drawn.\n\t\t * @property drawRect\n\t\t * @type {Rectangle}\n\t\t */\n\t\tthis.drawRect = null;\n\t\n\t\t/**\n\t\t * Indicates whether display objects should be rendered on whole pixels. You can set the\n\t\t * {{#crossLink \"DisplayObject/snapToPixel\"}}{{/crossLink}} property of\n\t\t * display objects to false to enable/disable this behaviour on a per instance basis.\n\t\t * @property snapToPixelEnabled\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.snapToPixelEnabled = false;\n\t\n\t\t/**\n\t\t * Indicates whether the mouse is currently within the bounds of the canvas.\n\t\t * @property mouseInBounds\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.mouseInBounds = false;\n\t\n\t\t/**\n\t\t * If true, tick callbacks will be called on all display objects on the stage prior to rendering to the canvas.\n\t\t * @property tickOnUpdate\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.tickOnUpdate = true;\n\t\n\t\t/**\n\t\t * If true, mouse move events will continue to be called when the mouse leaves the target canvas. See\n\t\t * {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}}, and {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t\t * x/y/rawX/rawY.\n\t\t * @property mouseMoveOutside\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.mouseMoveOutside = false;\n\t\t\n\t\t\n\t\t/**\n\t\t * Prevents selection of other elements in the html page if the user clicks and drags, or double clicks on the canvas.\n\t\t * This works by calling `preventDefault()` on any mousedown events (or touch equivalent) originating on the canvas.\n\t\t * @property preventSelection\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.preventSelection = true;\n\t\n\t\t/**\n\t\t * The hitArea property is not supported for Stage.\n\t\t * @property hitArea\n\t\t * @type {DisplayObject}\n\t\t * @default null\n\t\t */\n\t\t \n\t\t \n\t// private properties:\n\t\t/**\n\t\t * Holds objects with data for each active pointer id. Each object has the following properties:\n\t\t * x, y, event, target, overTarget, overX, overY, inBounds, posEvtObj (native event that last updated position)\n\t\t * @property _pointerData\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._pointerData = {};\n\t\n\t\t/**\n\t\t * Number of active pointers.\n\t\t * @property _pointerCount\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._pointerCount = 0;\n\t\n\t\t/**\n\t\t * The ID of the primary pointer.\n\t\t * @property _primaryPointerID\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._primaryPointerID = null;\n\t\n\t\t/**\n\t\t * @property _mouseOverIntervalID\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._mouseOverIntervalID = null;\n\t\t\n\t\t/**\n\t\t * @property _nextStage\n\t\t * @protected\n\t\t * @type Stage\n\t\t **/\n\t\tthis._nextStage = null;\n\t\t\n\t\t/**\n\t\t * @property _prevStage\n\t\t * @protected\n\t\t * @type Stage\n\t\t **/\n\t\tthis._prevStage = null;\n\t\t\n\t\t\n\t// initialize:\n\t\tthis.enableDOMEvents(true);\n\t}\n\tvar p = createjs.extend(Stage, createjs.Container);\n\n// events:\n\t/**\n\t * Dispatched when the user moves the mouse over the canvas.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event stagemousemove\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user presses their left mouse button on the canvas. See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event stagemousedown\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user the user presses somewhere on the stage, then releases the mouse button anywhere that the page can detect it (this varies slightly between browsers).\n\t * You can use {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}} to check whether the mouse is currently within the stage bounds.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event stagemouseup\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the mouse moves from within the canvas area (mouseInBounds == true) to outside it (mouseInBounds == false).\n\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event mouseleave\n\t * @since 0.7.0\n\t */\n\n\t/**\n\t * Dispatched when the mouse moves into the canvas area (mouseInBounds == false) from outside it (mouseInBounds == true).\n\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event mouseenter\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately before the tick event is propagated through the display list.\n\t * You can call preventDefault on the event object to cancel propagating the tick event.\n\t * @event tickstart\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately after the tick event is propagated through the display list. Does not fire if\n\t * tickOnUpdate is false. Precedes the \"drawstart\" event.\n\t * @event tickend\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately before the canvas is cleared and the display list is drawn to it.\n\t * You can call preventDefault on the event object to cancel the draw.\n\t * @event drawstart\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately after the display list is drawn to the canvas and the canvas context is restored.\n\t * @event drawend\n\t * @since 0.7.0\n\t */\n\n\t \n// getter / setters:\n\t/**\n\t * Specifies a target stage that will have mouse / touch interactions relayed to it after this stage handles them.\n\t * This can be useful in cases where you have multiple layered canvases and want user interactions\n\t * events to pass through. For example, this would relay mouse events from topStage to bottomStage:\n\t *\n\t *      topStage.nextStage = bottomStage;\n\t *\n\t * To disable relaying, set nextStage to null.\n\t * \n\t * MouseOver, MouseOut, RollOver, and RollOut interactions are also passed through using the mouse over settings\n\t * of the top-most stage, but are only processed if the target stage has mouse over interactions enabled.\n\t * Considerations when using roll over in relay targets:<OL>\n\t * <LI> The top-most (first) stage must have mouse over interactions enabled (via enableMouseOver)</LI>\n\t * <LI> All stages that wish to participate in mouse over interaction must enable them via enableMouseOver</LI>\n\t * <LI> All relay targets will share the frequency value of the top-most stage</LI>\n\t * </OL>\n\t * To illustrate, in this example the targetStage would process mouse over interactions at 10hz (despite passing\n\t * 30 as it's desired frequency):\n\t * \ttopStage.nextStage = targetStage;\n\t * \ttopStage.enableMouseOver(10);\n\t * \ttargetStage.enableMouseOver(30);\n\t * \n\t * If the target stage's canvas is completely covered by this stage's canvas, you may also want to disable its\n\t * DOM events using:\n\t * \n\t *\ttargetStage.enableDOMEvents(false);\n\t * \n\t * @property nextStage\n\t * @type {Stage}\n\t **/\n\tp._get_nextStage = function() {\n\t\treturn this._nextStage;\n\t};\n\tp._set_nextStage = function(value) {\n\t\tif (this._nextStage) { this._nextStage._prevStage = null; }\n\t\tif (value) { value._prevStage = this; }\n\t\tthis._nextStage = value;\n\t};\n\t\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tnextStage: { get: p._get_nextStage, set: p._set_nextStage }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Each time the update method is called, the stage will call {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false,\n\t * and then render the display list to the canvas.\n\t *\n\t * @method update\n\t * @param {Object} [props] Props object to pass to `tick()`. Should usually be a {{#crossLink \"Ticker\"}}{{/crossLink}} event object, or similar object with a delta property.\n\t **/\n\tp.update = function(props) {\n\t\tif (!this.canvas) { return; }\n\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\tif (this.dispatchEvent(\"drawstart\", false, true) === false) { return; }\n\t\tcreatejs.DisplayObject._snapToPixelEnabled = this.snapToPixelEnabled;\n\t\tvar r = this.drawRect, ctx = this.canvas.getContext(\"2d\");\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tif (this.autoClear) {\n\t\t\tif (r) { ctx.clearRect(r.x, r.y, r.width, r.height); }\n\t\t\telse { ctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1); }\n\t\t}\n\t\tctx.save();\n\t\tif (this.drawRect) {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(r.x, r.y, r.width, r.height);\n\t\t\tctx.clip();\n\t\t}\n\t\tthis.updateContext(ctx);\n\t\tthis.draw(ctx, false);\n\t\tctx.restore();\n\t\tthis.dispatchEvent(\"drawend\");\n\t};\n\t\n\t/**\n\t * Propagates a tick event through the display list. This is automatically called by {{#crossLink \"Stage/update\"}}{{/crossLink}}\n\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false.\n\t *\n\t * If a props object is passed to `tick()`, then all of its properties will be copied to the event object that is\n\t * propagated to listeners.\n\t *\n\t * Some time-based features in EaselJS (for example {{#crossLink \"Sprite/framerate\"}}{{/crossLink}} require that\n\t * a {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} event object (or equivalent object with a delta property) be\n\t * passed as the `props` parameter to `tick()`. For example:\n\t *\n\t * \tTicker.on(\"tick\", handleTick);\n\t * \tfunction handleTick(evtObj) {\n\t * \t\t// clone the event object from Ticker, and add some custom data to it:\n\t * \t\tvar evt = evtObj.clone().set({greeting:\"hello\", name:\"world\"});\n\t * \t\t\n\t * \t\t// pass it to stage.update():\n\t * \t\tmyStage.update(evt); // subsequently calls tick() with the same param\n\t * \t}\n\t * \t\n\t * \t// ...\n\t * \tmyDisplayObject.on(\"tick\", handleDisplayObjectTick);\n\t * \tfunction handleDisplayObjectTick(evt) {\n\t * \t\tconsole.log(evt.delta); // the delta property from the Ticker tick event object\n\t * \t\tconsole.log(evt.greeting, evt.name); // custom data: \"hello world\"\n\t * \t}\n\t * \n\t * @method tick\n\t * @param {Object} [props] An object with properties that should be copied to the event object. Should usually be a Ticker event object, or similar object with a delta property.\n\t **/\n\tp.tick = function(props) {\n\t\tif (!this.tickEnabled || this.dispatchEvent(\"tickstart\", false, true) === false) { return; }\n\t\tvar evtObj = new createjs.Event(\"tick\");\n\t\tif (props) {\n\t\t\tfor (var n in props) {\n\t\t\t\tif (props.hasOwnProperty(n)) { evtObj[n] = props[n]; }\n\t\t\t}\n\t\t}\n\t\tthis._tick(evtObj);\n\t\tthis.dispatchEvent(\"tickend\");\n\t};\n\n\t/**\n\t * Default event handler that calls the Stage {{#crossLink \"Stage/update\"}}{{/crossLink}} method when a {{#crossLink \"DisplayObject/tick:event\"}}{{/crossLink}}\n\t * event is received. This allows you to register a Stage instance as a event listener on {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t * directly, using:\n\t *\n\t *      Ticker.addEventListener(\"tick\", myStage);\n\t *\n\t * Note that if you subscribe to ticks using this pattern, then the tick event object will be passed through to\n\t * display object tick handlers, instead of <code>delta</code> and <code>paused</code> parameters.\n\t * @property handleEvent\n\t * @type Function\n\t **/\n\tp.handleEvent = function(evt) {\n\t\tif (evt.type == \"tick\") { this.update(evt); }\n\t};\n\n\t/**\n\t * Clears the target canvas. Useful if {{#crossLink \"Stage/autoClear:property\"}}{{/crossLink}} is set to `false`.\n\t * @method clear\n\t **/\n\tp.clear = function() {\n\t\tif (!this.canvas) { return; }\n\t\tvar ctx = this.canvas.getContext(\"2d\");\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1);\n\t};\n\n\t/**\n\t * Returns a data url that contains a Base64-encoded image of the contents of the stage. The returned data url can\n\t * be specified as the src value of an image element.\n\t * @method toDataURL\n\t * @param {String} [backgroundColor] The background color to be used for the generated image. Any valid CSS color\n\t * value is allowed. The default value is a transparent background.\n\t * @param {String} [mimeType=\"image/png\"] The MIME type of the image format to be create. The default is \"image/png\". If an unknown MIME type\n\t * is passed in, or if the browser does not support the specified MIME type, the default value will be used.\n\t * @return {String} a Base64 encoded image.\n\t **/\n\tp.toDataURL = function(backgroundColor, mimeType) {\n\t\tvar data, ctx = this.canvas.getContext('2d'), w = this.canvas.width, h = this.canvas.height;\n\n\t\tif (backgroundColor) {\n\t\t\tdata = ctx.getImageData(0, 0, w, h);\n\t\t\tvar compositeOperation = ctx.globalCompositeOperation;\n\t\t\tctx.globalCompositeOperation = \"destination-over\";\n\t\t\t\n\t\t\tctx.fillStyle = backgroundColor;\n\t\t\tctx.fillRect(0, 0, w, h);\n\t\t}\n\n\t\tvar dataURL = this.canvas.toDataURL(mimeType||\"image/png\");\n\n\t\tif(backgroundColor) {\n\t\t\tctx.putImageData(data, 0, 0);\n\t\t\tctx.globalCompositeOperation = compositeOperation;\n\t\t}\n\n\t\treturn dataURL;\n\t};\n\n\t/**\n\t * Enables or disables (by passing a frequency of 0) mouse over ({{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}) and roll over events ({{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}) for this stage's display list. These events can\n\t * be expensive to generate, so they are disabled by default. The frequency of the events can be controlled\n\t * independently of mouse move events via the optional `frequency` parameter.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var stage = new createjs.Stage(\"canvasId\");\n\t *      stage.enableMouseOver(10); // 10 updates per second\n\t *\n\t * @method enableMouseOver\n\t * @param {Number} [frequency=20] Optional param specifying the maximum number of times per second to broadcast\n\t * mouse over/out events. Set to 0 to disable mouse over events completely. Maximum is 50. A lower frequency is less\n\t * responsive, but uses less CPU.\n\t **/\n\tp.enableMouseOver = function(frequency) {\n\t\tif (this._mouseOverIntervalID) {\n\t\t\tclearInterval(this._mouseOverIntervalID);\n\t\t\tthis._mouseOverIntervalID = null;\n\t\t\tif (frequency == 0) {\n\t\t\t\tthis._testMouseOver(true);\n\t\t\t}\n\t\t}\n\t\tif (frequency == null) { frequency = 20; }\n\t\telse if (frequency <= 0) { return; }\n\t\tvar o = this;\n\t\tthis._mouseOverIntervalID = setInterval(function(){ o._testMouseOver(); }, 1000/Math.min(50,frequency));\n\t};\n\n\t/**\n\t * Enables or disables the event listeners that stage adds to DOM elements (window, document and canvas). It is good\n\t * practice to disable events when disposing of a Stage instance, otherwise the stage will continue to receive\n\t * events from the page.\n\t *\n\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n\t * new canvas or mouse events will not work as expected. For example:\n\t *\n\t *      myStage.enableDOMEvents(false);\n\t *      myStage.canvas = anotherCanvas;\n\t *      myStage.enableDOMEvents(true);\n\t *\n\t * @method enableDOMEvents\n\t * @param {Boolean} [enable=true] Indicates whether to enable or disable the events. Default is true.\n\t **/\n\tp.enableDOMEvents = function(enable) {\n\t\tif (enable == null) { enable = true; }\n\t\tvar n, o, ls = this._eventListeners;\n\t\tif (!enable && ls) {\n\t\t\tfor (n in ls) {\n\t\t\t\to = ls[n];\n\t\t\t\to.t.removeEventListener(n, o.f, false);\n\t\t\t}\n\t\t\tthis._eventListeners = null;\n\t\t} else if (enable && !ls && this.canvas) {\n\t\t\tvar t = window.addEventListener ? window : document;\n\t\t\tvar _this = this;\n\t\t\tls = this._eventListeners = {};\n\t\t\tls[\"mouseup\"] = {t:t, f:function(e) { _this._handleMouseUp(e)} };\n\t\t\tls[\"mousemove\"] = {t:t, f:function(e) { _this._handleMouseMove(e)} };\n\t\t\tls[\"dblclick\"] = {t:this.canvas, f:function(e) { _this._handleDoubleClick(e)} };\n\t\t\tls[\"mousedown\"] = {t:this.canvas, f:function(e) { _this._handleMouseDown(e)} };\n\n\t\t\tfor (n in ls) {\n\t\t\t\to = ls[n];\n\t\t\t\to.t.addEventListener(n, o.f, false);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Stage instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"Stage cannot be cloned.\");\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Stage (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _getElementRect\n\t * @protected\n\t * @param {HTMLElement} e\n\t **/\n\tp._getElementRect = function(e) {\n\t\tvar bounds;\n\t\ttry { bounds = e.getBoundingClientRect(); } // this can fail on disconnected DOM elements in IE9\n\t\tcatch (err) { bounds = {top: e.offsetTop, left: e.offsetLeft, width:e.offsetWidth, height:e.offsetHeight}; }\n\n\t\tvar offX = (window.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || document.body.clientLeft || 0);\n\t\tvar offY = (window.pageYOffset || document.scrollTop || 0) - (document.clientTop  || document.body.clientTop  || 0);\n\n\t\tvar styles = window.getComputedStyle ? getComputedStyle(e,null) : e.currentStyle; // IE <9 compatibility.\n\t\tvar padL = parseInt(styles.paddingLeft)+parseInt(styles.borderLeftWidth);\n\t\tvar padT = parseInt(styles.paddingTop)+parseInt(styles.borderTopWidth);\n\t\tvar padR = parseInt(styles.paddingRight)+parseInt(styles.borderRightWidth);\n\t\tvar padB = parseInt(styles.paddingBottom)+parseInt(styles.borderBottomWidth);\n\n\t\t// note: in some browsers bounds properties are read only.\n\t\treturn {\n\t\t\tleft: bounds.left+offX+padL,\n\t\t\tright: bounds.right+offX-padR,\n\t\t\ttop: bounds.top+offY+padT,\n\t\t\tbottom: bounds.bottom+offY-padB\n\t\t}\n\t};\n\n\t/**\n\t * @method _getPointerData\n\t * @protected\n\t * @param {Number} id\n\t **/\n\tp._getPointerData = function(id) {\n\t\tvar data = this._pointerData[id];\n\t\tif (!data) { data = this._pointerData[id] = {x:0,y:0}; }\n\t\treturn data;\n\t};\n\n\t/**\n\t * @method _handleMouseMove\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseMove = function(e) {\n\t\tif(!e){ e = window.event; }\n\t\tthis._handlePointerMove(-1, e, e.pageX, e.pageY);\n\t};\n\n\t/**\n\t * @method _handlePointerMove\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerMove = function(id, e, pageX, pageY, owner) {\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\tif (!this.canvas) { return; }\n\t\tvar nextStage=this._nextStage, o=this._getPointerData(id);\n\n\t\tvar inBounds = o.inBounds;\n\t\tthis._updatePointerPosition(id, e, pageX, pageY);\n\t\tif (inBounds || o.inBounds || this.mouseMoveOutside) {\n\t\t\tif (id === -1 && o.inBounds == !inBounds) {\n\t\t\t\tthis._dispatchMouseEvent(this, (inBounds ? \"mouseleave\" : \"mouseenter\"), false, id, o, e);\n\t\t\t}\n\t\t\t\n\t\t\tthis._dispatchMouseEvent(this, \"stagemousemove\", false, id, o, e);\n\t\t\tthis._dispatchMouseEvent(o.target, \"pressmove\", true, id, o, e);\n\t\t}\n\t\t\n\t\tnextStage&&nextStage._handlePointerMove(id, e, pageX, pageY, null);\n\t};\n\n\t/**\n\t * @method _updatePointerPosition\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t **/\n\tp._updatePointerPosition = function(id, e, pageX, pageY) {\n\t\tvar rect = this._getElementRect(this.canvas);\n\t\tpageX -= rect.left;\n\t\tpageY -= rect.top;\n\n\t\tvar w = this.canvas.width;\n\t\tvar h = this.canvas.height;\n\t\tpageX /= (rect.right-rect.left)/w;\n\t\tpageY /= (rect.bottom-rect.top)/h;\n\t\tvar o = this._getPointerData(id);\n\t\tif (o.inBounds = (pageX >= 0 && pageY >= 0 && pageX <= w-1 && pageY <= h-1)) {\n\t\t\to.x = pageX;\n\t\t\to.y = pageY;\n\t\t} else if (this.mouseMoveOutside) {\n\t\t\to.x = pageX < 0 ? 0 : (pageX > w-1 ? w-1 : pageX);\n\t\t\to.y = pageY < 0 ? 0 : (pageY > h-1 ? h-1 : pageY);\n\t\t}\n\n\t\to.posEvtObj = e;\n\t\to.rawX = pageX;\n\t\to.rawY = pageY;\n\n\t\tif (id === this._primaryPointerID || id === -1) {\n\t\t\tthis.mouseX = o.x;\n\t\t\tthis.mouseY = o.y;\n\t\t\tthis.mouseInBounds = o.inBounds;\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleMouseUp\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseUp = function(e) {\n\t\tthis._handlePointerUp(-1, e, false);\n\t};\n\n\t/**\n\t * @method _handlePointerUp\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Boolean} clear\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerUp = function(id, e, clear, owner) {\n\t\tvar nextStage = this._nextStage, o = this._getPointerData(id);\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\n\t\tvar target=null, oTarget = o.target;\n\t\tif (!owner && (oTarget || nextStage)) { target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\n\t\t\n\t\tif (o.down) { this._dispatchMouseEvent(this, \"stagemouseup\", false, id, o, e, target); o.down = false; }\n\t\t\n\t\tif (target == oTarget) { this._dispatchMouseEvent(oTarget, \"click\", true, id, o, e); }\n\t\tthis._dispatchMouseEvent(oTarget, \"pressup\", true, id, o, e);\n\t\t\n\t\tif (clear) {\n\t\t\tif (id==this._primaryPointerID) { this._primaryPointerID = null; }\n\t\t\tdelete(this._pointerData[id]);\n\t\t} else { o.target = null; }\n\t\t\n\t\tnextStage&&nextStage._handlePointerUp(id, e, clear, owner || target && this);\n\t};\n\n\t/**\n\t * @method _handleMouseDown\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseDown = function(e) {\n\t\tthis._handlePointerDown(-1, e, e.pageX, e.pageY);\n\t};\n\n\t/**\n\t * @method _handlePointerDown\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerDown = function(id, e, pageX, pageY, owner) {\n\t\tif (this.preventSelection) { e.preventDefault(); }\n\t\tif (this._primaryPointerID == null || id === -1) { this._primaryPointerID = id; } // mouse always takes over.\n\t\t\n\t\tif (pageY != null) { this._updatePointerPosition(id, e, pageX, pageY); }\n\t\tvar target = null, nextStage = this._nextStage, o = this._getPointerData(id);\n\t\tif (!owner) { target = o.target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\n\n\t\tif (o.inBounds) { this._dispatchMouseEvent(this, \"stagemousedown\", false, id, o, e, target); o.down = true; }\n\t\tthis._dispatchMouseEvent(target, \"mousedown\", true, id, o, e);\n\t\t\n\t\tnextStage&&nextStage._handlePointerDown(id, e, pageX, pageY, owner || target && this);\n\t};\n\n\t/**\n\t * @method _testMouseOver\n\t * @param {Boolean} clear If true, clears the mouseover / rollover (ie. no target)\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t * @param {Stage} eventTarget The stage that the cursor is actively over.\n\t * @protected\n\t **/\n\tp._testMouseOver = function(clear, owner, eventTarget) {\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\n\t\tvar nextStage = this._nextStage;\n\t\tif (!this._mouseOverIntervalID) {\n\t\t\t// not enabled for mouseover, but should still relay the event.\n\t\t\tnextStage&&nextStage._testMouseOver(clear, owner, eventTarget);\n\t\t\treturn;\n\t\t}\n\t\tif (this.stage.canvas) {\n\t\tvar o = this._getPointerData(-1);\n\t\t// only update if the mouse position has changed. This provides a lot of optimization, but has some trade-offs.\n\t\tif (!o || (!clear && this.mouseX == this._mouseOverX && this.mouseY == this._mouseOverY && this.mouseInBounds)) { return; }\n\t\t\n\t\tvar e = o.posEvtObj;\n\t\tvar isEventTarget = eventTarget || e&&(e.target == this.canvas);\n\t\tvar target=null, common = -1, cursor=\"\", t, i, l;\n\t\t\n\t\tif (!owner && (clear || this.mouseInBounds && isEventTarget)) {\n\t\t\ttarget = this._getObjectsUnderPoint(this.mouseX, this.mouseY, null, true);\n\t\t\tthis._mouseOverX = this.mouseX;\n\t\t\tthis._mouseOverY = this.mouseY;\n\t\t}\n\n\t\tvar oldList = this._mouseOverTarget||[];\n\t\tvar oldTarget = oldList[oldList.length-1];\n\t\tvar list = this._mouseOverTarget = [];\n\n\t\t// generate ancestor list and check for cursor:\n\t\tt = target;\n\t\twhile (t) {\n\t\t\tlist.unshift(t);\n\t\t\tif (!cursor) { cursor = t.cursor; }\n\t\t\tt = t.parent;\n\t\t}\n\t\tthis.canvas.style.cursor = cursor;\n\t\tif (!owner && eventTarget) { eventTarget.canvas.style.cursor = cursor; }\n\n\t\t// find common ancestor:\n\t\tfor (i=0,l=list.length; i<l; i++) {\n\t\t\tif (list[i] != oldList[i]) { break; }\n\t\t\tcommon = i;\n\t\t}\n\n\t\tif (oldTarget != target) {\n\t\t\tthis._dispatchMouseEvent(oldTarget, \"mouseout\", true, -1, o, e, target);\n\t\t}\n\n\t\tfor (i=oldList.length-1; i>common; i--) {\n\t\t\tthis._dispatchMouseEvent(oldList[i], \"rollout\", false, -1, o, e, target);\n\t\t}\n\n\t\tfor (i=list.length-1; i>common; i--) {\n\t\t\tthis._dispatchMouseEvent(list[i], \"rollover\", false, -1, o, e, oldTarget);\n\t\t}\n\n\t\tif (oldTarget != target) {\n\t\t\tthis._dispatchMouseEvent(target, \"mouseover\", true, -1, o, e, oldTarget);\n\t\t}\n\t\t}\n\t\t\n\t\tnextStage&&nextStage._testMouseOver(clear, owner || target && this, eventTarget || isEventTarget && this);\n\t};\n\n\t/**\n\t * @method _handleDoubleClick\n\t * @protected\n\t * @param {MouseEvent} e\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handleDoubleClick = function(e, owner) {\n\t\tvar target=null, nextStage=this._nextStage, o=this._getPointerData(-1);\n\t\tif (!owner) {\n\t\t\ttarget = this._getObjectsUnderPoint(o.x, o.y, null, true);\n\t\t\tthis._dispatchMouseEvent(target, \"dblclick\", true, -1, o, e);\n\t\t}\n\t\tnextStage&&nextStage._handleDoubleClick(e, owner || target && this);\n\t};\n\n\t/**\n\t * @method _dispatchMouseEvent\n\t * @protected\n\t * @param {DisplayObject} target\n\t * @param {String} type\n\t * @param {Boolean} bubbles\n\t * @param {Number} pointerId\n\t * @param {Object} o\n\t * @param {MouseEvent} [nativeEvent]\n\t * @param {DisplayObject} [relatedTarget]\n\t **/\n\tp._dispatchMouseEvent = function(target, type, bubbles, pointerId, o, nativeEvent, relatedTarget) {\n\t\t// TODO: might be worth either reusing MouseEvent instances, or adding a willTrigger method to avoid GC.\n\t\tif (!target || (!bubbles && !target.hasEventListener(type))) { return; }\n\t\t/*\n\t\t// TODO: account for stage transformations?\n\t\tthis._mtx = this.getConcatenatedMatrix(this._mtx).invert();\n\t\tvar pt = this._mtx.transformPoint(o.x, o.y);\n\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, pt.x, pt.y, nativeEvent, pointerId, pointerId==this._primaryPointerID || pointerId==-1, o.rawX, o.rawY);\n\t\t*/\n\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, o.x, o.y, nativeEvent, pointerId, pointerId === this._primaryPointerID || pointerId === -1, o.rawX, o.rawY, relatedTarget);\n\t\ttarget.dispatchEvent(evt);\n\t};\n\n\n\tcreatejs.Stage = createjs.promote(Stage, \"Container\");\n}());\n\n//##############################################################################\n// StageGL.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/*\n * README IF EDITING:\n * Terminology for developers:\n *\n * Vertex: a point that help defines a shape, 3 per triangle. Usually has an x,y,z but can have more/less info.\n * Vertex Property: a piece of information attached to the vertex like a vector3 containing x,y,z\n * Index/Indices: used in groups of 3 to define a triangle, points to vertices by their index in an array (some render\n * \t\tmodes do not use these)\n * Card: a group of 2 triangles used to display a rectangular image\n * U/V: common names for the [0-1] texture co-ordinates on an image\n * Batch: a single call to the renderer, best done as little as possible so multiple cards are put into a single batch\n * Buffer: WebGL array data\n * Program/Shader: For every vertex we run the Vertex shader. The results are used per pixel by the Fragment shader. When\n * \t\tcombined and paired these are a shader \"program\"\n * Texture: WebGL representation of image data and associated extra information\n * Slot: A space on the GPU into which textures can be loaded for use in a batch, using \"ActiveTexture\" switches texture slot.\n */\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * A StageGL instance is the root level {{#crossLink \"Container\"}}{{/crossLink}} for an WebGL-optimized display list,\n\t * which is used in place of the usual {{#crossLink \"Stage\"}}{{/crossLink}}. This class should behave identically to\n\t * a {{#crossLink \"Stage\"}}{{/crossLink}} except for WebGL-specific functionality.\n\t *\n\t * Each time the {{#crossLink \"Stage/tick\"}}{{/crossLink}} method is called, the display list is rendered to the\n\t * target &lt;canvas/&gt; instance, ignoring non-WebGL-compatible display objects. On devices and browsers that don't\n\t * support WebGL, content will automatically be rendered to canvas 2D context instead.\n\t *\n\t * <h4>Limitations</h4>\n\t * - {{#crossLink \"Shape\"}}{{/crossLink}}, {{#crossLink \"Shadow\"}}{{/crossLink}}, and {{#crossLink \"Text\"}}{{/crossLink}}\n\t * \tare not rendered when added to the display list.\n\t * - To display something StageGL cannot render, {{#crossLink \"displayObject/cache\"}}{{/crossLink}} the object.\n\t *\tCaches can be rendered regardless of source.\n\t * - Images are wrapped as a webGL \"Texture\". Each graphics card has a limit to its concurrent Textures, too many \n\t * Textures will noticeably slow performance.\n\t * - Each cache counts as an individual Texture. As such {{#crossLink \"SpriteSheet\"}}{{/crossLink}} and \n\t * {{#crossLink \"SpriteSheetBuilder\"}}{{/crossLink}} are recommended practices to help keep texture counts low.\n\t * - To use any image node (DOM Image/Canvas Element) between multiple StageGL instances it must be a \n\t * {{#crossLink \"Bitmap/clone\"}}{{/crossLink}}, otherwise the GPU texture loading and tracking will get confused.\n\t * - to avoid an up/down scaled render you must call {{#crossLink \"StageGL/updateViewport\"}}{{/crossLink}} if you\n\t * resize your canvas after making a StageGL instance, this will properly size the WebGL context stored in memory.\n\t * - Best performance in demanding scenarios will come from manual management of texture memory, but it is handled\n\t * automatically by default. See {{#crossLink \"StageGL/releaseTexture\"}}{{/crossLink}} for details.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a StageGL instance, adds a child to it, then uses the EaselJS {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t * to update the child and redraw the stage.\n\t *\n\t *      var stage = new createjs.StageGL(\"canvasElementId\");\n\t *\n\t *      var image = new createjs.Bitmap(\"imagePath.png\");\n\t *      stage.addChild(image);\n\t *\n\t *      createjs.Ticker.on(\"tick\", handleTick);\n\t *\n\t *      function handleTick(event) {\n\t *          image.x += 10;\n\t *          stage.update();\n\t *      }\n\t *\n\t * <h4>Notes</h4>\n\t * - StageGL is not currently included in the minified version of EaselJS.\n\t * - {{#crossLink \"SpriteContainer\"}}{{/crossLink}} (the previous approach to WebGL with EaselJS) has been deprecated.\n\t * - Earlier versions of WebGL support in EaselJS (SpriteStage and SpriteContainer) had hard limitations on images\n\t * \tper container, which have been solved.\n\t *\n\t * @class StageGL\n\t * @extends Stage\n\t * @constructor\n\t * @param {HTMLCanvasElement | String | Object} canvas A canvas object that StageGL will render to, or the string id\n\t *  of a canvas object in the current DOM.\n\t * @param {Object} options All the option parameters in a reference object, some are not supported by some browsers.\n\t * @param {Boolean} [options.preserveBuffer=false] If `true`, the canvas is NOT auto-cleared by WebGL (the spec\n\t *  discourages setting this to `true`). This is useful if you want persistent draw effects.\n\t * @param {Boolean} [options.antialias=false] Specifies whether or not the browser's WebGL implementation should try\n\t *  to perform anti-aliasing. This will also enable linear pixel sampling on power-of-two textures (smoother images).\n\t * @param {Boolean} [options.transparent=false] If `true`, the canvas is transparent. This is <strong>very</strong>\n\t * expensive, and should be used with caution.\n\t * @param {Boolean} [options.premultiply=false] Alters color handling. If `true`, this assumes the shader must\n\t * account for pre-multiplied alpha. This can help avoid visual halo effects with some assets, but may also cause\n\t * problems with other assets.\n\t * @param {Integer} [options.autoPurge=1200] How often the system should automatically dump unused textures with\n\t * `purgeTextures(autoPurge)` every `autoPurge/2` draws. See {{#crossLink \"StageGL/purgeTextures\"}}{{/crossLink}} for more\n\t * information.\n\t */\n\tfunction StageGL(canvas, options) {\n\t\tthis.Stage_constructor(canvas);\n\n\t\tif (options !== undefined) {\n\t\t\tif (typeof options !== \"object\"){ throw(\"Invalid options object\"); }\n\t\t\tvar premultiply = options.premultiply;\n\t\t\tvar transparent = options.transparent;\n\t\t\tvar antialias = options.antialias;\n\t\t\tvar preserveBuffer = options.preserveBuffer;\n\t\t\tvar autoPurge = options.autoPurge;\n\t\t}\n\n// public properties:\n\t\t/**\n\t\t * Console log potential issues and problems. This is designed to have <em>minimal</em> performance impact, so\n\t\t * if extensive debugging information is required, this may be inadequate. See {{#crossLink \"WebGLInspector\"}}{{/crossLink}}\n\t\t * @property vocalDebug\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.vocalDebug = false;\n\n// private properties:\n\t\t/**\n\t\t * Specifies whether or not the canvas is auto-cleared by WebGL. The WebGL spec discourages `true`.\n\t\t * If true, the canvas is NOT auto-cleared by WebGL. Used when the canvas context is created and requires\n\t\t * context re-creation to update.\n\t\t * @property _preserveBuffer\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis._preserveBuffer = preserveBuffer||false;\n\n\t\t/**\n\t\t * Specifies whether or not the browser's WebGL implementation should try to perform anti-aliasing.\n\t\t * @property _antialias\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis._antialias = antialias||false;\n\n\t\t/**\n\t\t * Specifies whether or not the browser's WebGL implementation should be transparent.\n\t\t * @property _transparent\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis._transparent = transparent||false;\n\n\t\t/**\n\t\t * Specifies whether or not StageGL is handling colours as premultiplied alpha.\n\t\t * @property _premultiply\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis._premultiply = premultiply||false;\n\n\t\t/**\n\t\t * Internal value of {{#crossLink \"StageGL/autoPurge\"}}{{/crossLink}}\n\t\t * @property _autoPurge\n\t\t * @protected\n\t\t * @type {Integer}\n\t\t * @default null\n\t\t */\n\t\tthis._autoPurge = undefined;\n\t\tthis.autoPurge = autoPurge;\t//getter/setter handles setting the real value and validating\n\n\t\t/**\n\t\t * The width in px of the drawing surface saved in memory.\n\t\t * @property _viewportWidth\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._viewportWidth = 0;\n\n\t\t/**\n\t\t * The height in px of the drawing surface saved in memory.\n\t\t * @property _viewportHeight\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._viewportHeight = 0;\n\n\t\t/**\n\t\t * A 2D projection matrix used to convert WebGL's viewspace into canvas co-ordinates. Regular canvas display\n\t\t * uses Top-Left values of [0,0] where WebGL uses a Center [0,0] Top-Right [1,1] (euclidean) system.\n\t\t * @property _projectionMatrix\n\t\t * @protected\n\t\t * @type {Float32Array}\n\t\t * @default null\n\t\t */\n\t\tthis._projectionMatrix = null;\n\n\t\t/**\n\t\t * The current WebGL canvas context. Often shorthanded to just \"gl\" in many parts of the code.\n\t\t * @property _webGLContext\n\t\t * @protected\n\t\t * @type {WebGLRenderingContext}\n\t\t * @default null\n\t\t */\n\t\tthis._webGLContext = null;\n\n\t\t/**\n\t\t * The color to use when the WebGL canvas has been cleared. May appear as a background color. Defaults to grey.\n\t\t * @property _clearColor\n\t\t * @protected\n\t\t * @type {Object}\n\t\t * @default {r: 0.50, g: 0.50, b: 0.50, a: 0.00}\n\t\t */\n\t\tthis._clearColor = {r: 0.50, g: 0.50, b: 0.50, a: 0.00};\n\n\t\t/**\n\t\t * The maximum number of cards (aka a single sprite) that can be drawn in one draw call. Use getter/setters to\n\t\t * modify otherwise internal buffers may be incorrect sizes.\n\t\t * @property _maxCardsPerBatch\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default StageGL.DEFAULT_MAX_BATCH_SIZE (10000)\n\t\t */\n\t\tthis._maxCardsPerBatch = StageGL.DEFAULT_MAX_BATCH_SIZE;\t\t\t\t\t\t\t\t\t\t\t\t\t\t//TODO: write getter/setters for this\n\n\t\t/**\n\t\t * The shader program used to draw the current batch.\n\t\t * @property _activeShader\n\t\t * @protected\n\t\t * @type {WebGLProgram}\n\t\t * @default null\n\t\t */\n\t\tthis._activeShader = null;\n\n\t\t/**\n\t\t * The vertex position data for the current draw call.\n\t\t * @property _vertices\n\t\t * @protected\n\t\t * @type {Float32Array}\n\t\t * @default null\n\t\t */\n\t\tthis._vertices = null;\n\n\t\t/**\n\t\t * The WebGL buffer attached to {{#crossLink \"StageGL/_vertices:property\"}}{{/crossLink}}.\n\t\t * @property _vertexPositionBuffer\n\t\t * @protected\n\t\t * @type {WebGLBuffer}\n\t\t * @default null\n\t\t */\n\t\tthis._vertexPositionBuffer = null;\n\n\t\t/**\n\t\t * The vertex U/V data for the current draw call.\n\t\t * @property _uvs\n\t\t * @protected\n\t\t * @type {Float32Array}\n\t\t * @default null\n\t\t */\n\t\tthis._uvs = null;\n\n\t\t/**\n\t\t * The WebGL buffer attached to {{#crossLink \"StageGL/_uvs:property\"}}{{/crossLink}}.\n\t\t * @property _uvPositionBuffer\n\t\t * @protected\n\t\t * @type {WebGLBuffer}\n\t\t * @default null\n\t\t */\n\t\tthis._uvPositionBuffer = null;\n\n\t\t/**\n\t\t * The vertex indices data for the current draw call.\n\t\t * @property _indices\n\t\t * @protected\n\t\t * @type {Float32Array}\n\t\t * @default null\n\t\t */\n\t\tthis._indices = null;\n\n\t\t/**\n\t\t * The WebGL buffer attached to {{#crossLink \"StageGL/_indices:property\"}}{{/crossLink}}.\n\t\t * @property _textureIndexBuffer\n\t\t * @protected\n\t\t * @type {WebGLBuffer}\n\t\t * @default null\n\t\t */\n\t\tthis._textureIndexBuffer = null;\n\n\t\t/**\n\t\t * The vertices data for the current draw call.\n\t\t * @property _alphas\n\t\t * @protected\n\t\t * @type {Float32Array}\n\t\t * @default null\n\t\t */\n\t\tthis._alphas = null;\n\n\t\t/**\n\t\t * The WebGL buffer attached to {{#crossLink \"StageGL/_alphas:property\"}}{{/crossLink}}.\n\t\t * @property _alphaBuffer\n\t\t * @protected\n\t\t * @type {WebGLBuffer}\n\t\t * @default null\n\t\t */\n\t\tthis._alphaBuffer = null;\n\n\t\t/**\n\t\t * An index based lookup of every WebGL Texture currently in use.\n\t\t * @property _drawTexture\n\t\t * @protected\n\t\t * @type {Array}\n\t\t */\n\t\tthis._textureDictionary = [];\n\n\t\t/**\n\t\t * A string based lookup hash of which index a texture is stored at in the dictionary. The lookup string is\n\t\t * often the src url.\n\t\t * @property _textureIDs\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._textureIDs = {};\n\n\t\t/**\n\t\t * An array of all the textures currently loaded into the GPU. The index in the array matches the GPU index.\n\t\t * @property _batchTextures\n\t\t * @protected\n\t\t * @type {Array}\n\t\t */\n\t\tthis._batchTextures = [];\n\n\t\t/**\n\t\t * An array of all the simple filler textures used to prevent issues with missing textures in a batch.\n\t\t * @property _baseTextures\n\t\t * @protected\n\t\t * @type {Array}\n\t\t */\n\t\tthis._baseTextures = [];\n\n\t\t/**\n\t\t * The number of concurrent textures the GPU can handle. This value is dynamically set from WebGL during initialization\n\t\t * via `gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS)`. The WebGL spec states that the lowest guaranteed value is 8,\n\t\t * but it could be higher. Do not set this value higher than the value returned by the GPU. Setting it lower will\n\t\t * probably reduce performance, but may be advisable to reserve slots for custom filter work.\n\t\t * NOTE: Can also act as a length for {{#crossLink \"StageGL/_batchTextures:property\"}}.\n\t\t * @property _batchTextureCount\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 8\n\t\t */\n\t\tthis._batchTextureCount = 8;\n\n\t\t/**\n\t\t * The location at which the last texture was inserted into a GPU slot in {{#crossLink \"StageGL/_batchTextures:property\"}}{{/crossLink}}.\n\t\t * Manual control of this variable can yield improvements in performance by intelligently replacing textures\n\t\t * inside a batch to reduce texture re-load. It is impossible to write automated general use code, as it requires\n\t\t * display list look ahead inspection and/or render foreknowledge.\n\t\t * @property _lastTextureInsert\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default -1\n\t\t */\n\t\tthis._lastTextureInsert = -1;\n\n\t\t/**\n\t\t * The current batch being drawn, A batch consists of a call to `drawElements` on the GPU. Many of these calls\n\t\t * can occur per draw.\n\t\t * @property _batchId\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._batchID = 0;\n\n\t\t/**\n\t\t * The current draw being performed, may contain multiple batches. Comparing to {{#crossLink \"StageGL/_batchID:property\"}}{{/crossLink}}\n\t\t * can reveal batching efficiency.\n\t\t * @property _drawID\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._drawID = 0;\n\n\t\t/**\n\t\t * Used to prevent textures in certain GPU slots from being replaced by an insert.\n\t\t * @property _slotBlackList\n\t\t * @protected\n\t\t * @type {Array}\n\t\t */\n\t\tthis._slotBlacklist = [];\n\n\t\t/**\n\t\t * Used to prevent nested draw calls from accidentally overwriting drawing information by tracking depth.\n\t\t * @property _isDrawing\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._isDrawing = 0;\n\n\t\t/**\n\t\t * Used to ensure every canvas used as a texture source has a unique ID.\n\t\t * @property _lastTrackedCanvas\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._lastTrackedCanvas = 0;\n\n\t\t/**\n\t\t * Controls whether final rendering output of a {{#crossLink \"cacheDraw\"}}{{/crossLink}} is the canvas or a render\n\t\t * texture. See the {{#crossLink \"cache\"}}{{/crossLink}} function modifications for full implications and discussion.\n\t\t * @property isCacheControlled\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @todo LM: is this supposed to be _isCacheControlled since its private?\n\t\t */\n\t\tthis.isCacheControlled = false;\n\n\t\t/**\n\t\t * Used to counter-position the object being cached so it aligns with the cache surface. Additionally ensures\n\t\t * that all rendering starts with a top level container.\n\t\t * @property _cacheContainer\n\t\t * @protected\n\t\t * @type {Container}\n\t\t * @default An instance of an EaselJS Container.\n\t\t */\n\t\tthis._cacheContainer = new createjs.Container();\n\n\t\t// and begin\n\t\tthis._initializeWebGL();\n\t}\n\tvar p = createjs.extend(StageGL, createjs.Stage);\n\n// static methods:\n\t/**\n\t * Calculate the U/V co-ordinate based info for sprite frames. Instead of pixel count it uses a 0-1 space. Also includes\n\t * the ability to get info back for a specific frame, or only calculate that one frame.\n\t *\n\t *     //generate UV rects for all entries\n\t *     StageGL.buildUVRects( spriteSheetA );\n\t *     //generate all, fetch the first\n\t *     var firstFrame = StageGL.buildUVRects( spriteSheetB, 0 );\n\t *     //generate the rect for just a single frame for performance's sake\n\t *     var newFrame = StageGL.buildUVRects( dynamicSpriteSheet, newFrameIndex, true );\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method buildUVRects\n\t * @param  {SpriteSheet} spritesheet The spritesheet to find the frames on\n\t * @param  {int} [target=-1] The index of the frame to return\n\t * @param  {Boolean} [onlyTarget=false] Whether \"target\" is the only frame that gets calculated\n\t * @static\n\t * @return {Object} the target frame if supplied and present or a generic frame {t, l, b, r}\n\t */\n\tStageGL.buildUVRects = function (spritesheet, target, onlyTarget) {\n\t\tif (!spritesheet || !spritesheet._frames) { return null; }\n\t\tif (target === undefined) { target = -1; }\n\t\tif (onlyTarget === undefined) { onlyTarget = false; }\n\n\t\tvar start = (target != -1 && onlyTarget)?(target):(0);\n\t\tvar end = (target != -1 && onlyTarget)?(target+1):(spritesheet._frames.length);\n\t\tfor (var i=start; i<end; i++) {\n\t\t\tvar f = spritesheet._frames[i];\n\t\t\tif (f.uvRect || f.image.width <= 0 || f.image.height <= 0) { continue; }\n\n\t\t\tvar r = f.rect;\n\t\t\tf.uvRect = {\n\t\t\t\tt: r.y / f.image.height,\n\t\t\t\tl: r.x / f.image.width,\n\t\t\t\tb: (r.y + r.height) / f.image.height,\n\t\t\t\tr: (r.x + r.width) / f.image.width\n\t\t\t};\n\t\t}\n\n\t\treturn spritesheet._frames[(target != -1) ? target : 0].uvRect || {t:0, l:0, b:1, r:1};\n\t};\n\n\t/**\n\t * Test a context to see if it has WebGL enabled on it.\n\t * @method isWebGLActive\n\t * @param {CanvasContext} ctx The context to test\n\t * @static\n\t * @return {Boolean} Whether WebGL is enabled\n\t */\n\tStageGL.isWebGLActive = function (ctx) {\n\t\treturn ctx &&\n\t\t\tctx instanceof WebGLRenderingContext &&\n\t\t\ttypeof WebGLRenderingContext !== 'undefined';\n\t};\n\n// static properties:\n\t/**\n\t * The number of properties defined per vertex (x, y, textureU, textureV, textureIndex, alpha)\n\t * @property VERTEX_PROPERTY_COUNT\n\t * @static\n\t * @final\n\t * @type {Number}\n\t * @default 6\n\t * @readonly\n\t */\n\tStageGL.VERTEX_PROPERTY_COUNT = 6;\n\n\t/**\n\t * The number of triangle indices it takes to form a Card. 3 per triangle, 2 triangles.\n\t * @property INDICIES_PER_CARD\n\t * @static\n\t * @final\n\t * @type {Number}\n\t * @default 6\n\t * @readonly\n\t */\n\tStageGL.INDICIES_PER_CARD = 6;\n\n\t/**\n\t * The default value for the maximum number of cards we want to process in a batch. See\n\t * {{#crossLink \"StageGL/WEBGL_MAX_INDEX_NUM:property\"}}{{/crossLink}} for a hard limit.\n\t * @property DEFAULT_MAX_BATCH_SIZE\n\t * @static\n\t * @final\n\t * @type {Number}\n\t * @default 10000\n\t * @readonly\n\t */\n\tStageGL.DEFAULT_MAX_BATCH_SIZE = 10000;\n\n\t/**\n\t * The maximum size WebGL allows for element index numbers. Uses a 16 bit unsigned integer. It takes 6 indices to\n\t * make a unique card.\n\t * @property WEBGL_MAX_INDEX_NUM\n\t * @static\n\t * @final\n\t * @type {Number}\n\t * @default 65536\n\t * @readonly\n\t */\n\tStageGL.WEBGL_MAX_INDEX_NUM = Math.pow(2, 16);\n\n\t/**\n\t * Default U/V rect for dealing with full coverage from an image source.\n\t * @property UV_RECT\n\t * @static\n\t * @final\n\t * @type {Object}\n\t * @default {t:0, l:0, b:1, r:1}\n\t * @readonly\n\t */\n\tStageGL.UV_RECT = {t:0, l:0, b:1, r:1};\n\n\ttry {\n\t\t/**\n\t\t * Vertex positions for a card that covers the entire render. Used with render targets primarily.\n\t\t * @property COVER_VERT\n\t\t * @static\n\t\t * @final\n\t\t * @type {Float32Array}\n\t\t * @readonly\n\t\t */\n\t\tStageGL.COVER_VERT = new Float32Array([\n\t\t\t-1,\t\t 1,\t\t//TL\n\t\t\t1,\t\t 1,\t\t//TR\n\t\t\t-1,\t\t-1,\t\t//BL\n\t\t\t1,\t\t 1,\t\t//TR\n\t\t\t1,\t\t-1,\t\t//BR\n\t\t\t-1,\t\t-1\t\t//BL\n\t\t]);\n\n\t\t/**\n\t\t * U/V for {{#crossLink \"StageGL/COVER_VERT:property\"}}{{/crossLink}}.\n\t\t * @property COVER_UV\n\t\t * @static\n\t\t * @final\n\t\t * @type {Float32Array}\n\t\t * @readonly\n\t\t */\n\t\tStageGL.COVER_UV = new Float32Array([\n\t\t\t 0,\t\t 0,\t\t//TL\n\t\t\t 1,\t\t 0,\t\t//TR\n\t\t\t 0,\t\t 1,\t\t//BL\n\t\t\t 1,\t\t 0,\t\t//TR\n\t\t\t 1,\t\t 1,\t\t//BR\n\t\t\t 0,\t\t 1\t\t//BL\n\t\t]);\n\n\t\t/**\n\t\t * Flipped U/V for {{#crossLink \"StageGL:COVER_VERT:property\"}}{{/crossLink}}.\n\t\t * @property COVER_UV_FLIP\n\t\t * @static\n\t\t * @final\n\t\t * @type {Float32Array}\n\t\t * @readonly\n\t\t */\n\t\tStageGL.COVER_UV_FLIP = new Float32Array([\n\t\t\t 0,\t\t 1,\t\t//TL\n\t\t\t 1,\t\t 1,\t\t//TR\n\t\t\t 0,\t\t 0,\t\t//BL\n\t\t\t 1,\t\t 1,\t\t//TR\n\t\t\t 1,\t\t 0,\t\t//BR\n\t\t\t 0,\t\t 0\t\t//BL\n\t\t]);\n\t} catch(e) { /* Breaking in older browsers, but those browsers wont run StageGL so no recovery or warning needed */ }\n\n\t/**\n\t * Portion of the shader that contains the \"varying\" properties required in both vertex and fragment shaders. The\n\t * regular shader is designed to render all expected objects. Shader code may contain templates that are replaced\n\t * pre-compile.\n\t * @property REGULAR_VARYING_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.REGULAR_VARYING_HEADER = (\n\t\t\"precision mediump float;\" +\n\t\t\"varying vec2 vTextureCoord;\" +\n\t\t\"varying lowp float indexPicker;\" +\n\t\t\"varying lowp float alphaValue;\"\n\t);\n\n\t/**\n\t * Actual full header for the vertex shader. Includes the varying header. The regular shader is designed to render\n\t * all expected objects. Shader code may contain templates that are replaced pre-compile.\n\t * @property REGULAR_VERTEX_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.REGULAR_VERTEX_HEADER = (\n\t\tStageGL.REGULAR_VARYING_HEADER +\n\t\t\"attribute vec2 vertexPosition;\" +\n\t\t\"attribute vec2 uvPosition;\" +\n\t\t\"attribute lowp float textureIndex;\" +\n\t\t\"attribute lowp float objectAlpha;\" +\n\t\t\"uniform mat4 pMatrix;\"\n\t);\n\n\t/**\n\t * Actual full header for the fragment shader. Includes the varying header. The regular shader is designed to render\n\t * all expected objects. Shader code may contain templates that are replaced pre-compile.\n\t * @property REGULAR_FRAGMENT_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.REGULAR_FRAGMENT_HEADER = (\n\t\tStageGL.REGULAR_VARYING_HEADER +\n\t\t\"uniform sampler2D uSampler[{{count}}];\"\n\t);\n\n\t/**\n\t * Body of the vertex shader. The regular shader is designed to render all expected objects. Shader code may contain\n\t * templates that are replaced pre-compile.\n\t * @property REGULAR_VERTEX_BODY\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.REGULAR_VERTEX_BODY  = (\n\t\t\"void main(void) {\" +\n\t\t\t//DHG TODO: This doesn't work. Must be something wrong with the hand built matrix see js... bypass for now\n\t\t\t//vertexPosition, round if flag\n\t\t\t//\"gl_Position = pMatrix * vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);\" +\n\t\t\t\"gl_Position = vec4(\"+\n\t\t\t\t\"(vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],\" +\n\t\t\t\t\"(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],\" +\n\t\t\t\t\"pMatrix[3][2],\" +\n\t\t\t\t\"1.0\" +\n\t\t\t\");\" +\n\t\t\t\"alphaValue = objectAlpha;\" +\n\t\t\t\"indexPicker = textureIndex;\" +\n\t\t\t\"vTextureCoord = uvPosition;\" +\n\t\t\"}\"\n\t);\n\n\t/**\n\t * Body of the fragment shader. The regular shader is designed to render all expected objects. Shader code may\n\t * contain templates that are replaced pre-compile.\n\t * @property REGULAR_FRAGMENT_BODY\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.REGULAR_FRAGMENT_BODY = (\n\t\t\"void main(void) {\" +\n\t\t\t\"vec4 color = vec4(1.0, 0.0, 0.0, 1.0);\" +\n\n\t\t\t\"if (indexPicker <= 0.5) {\" +\n\t\t\t\t\"color = texture2D(uSampler[0], vTextureCoord);\" +\n\t\t\t\t\"{{alternates}}\" +\n\t\t\t\"}\" +\n\n\t\t\t\"{{fragColor}}\" +\n\t\t\"}\"\n\t);\n\tStageGL.REGULAR_FRAG_COLOR_NORMAL = (\n\t\t\"gl_FragColor = vec4(color.rgb, color.a * alphaValue);\"\n\t);\n\tStageGL.REGULAR_FRAG_COLOR_PREMULTIPLY = (\n\t\t\"if(color.a > 0.0035) {\" +\t\t// 1/255 = 0.0039, so ignore any value below 1 because it's probably noise\n\t\t\t\"gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);\" +\n\t\t\"} else {\" +\n\t\t\t\"gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\" +\n\t\t\"}\"\n\t);\n\n\t//TODO: DHG: a real particle shader\n\t/**\n\t * @property PARTICLE_VERTEX_BODY\n\t * @todo\n\t * @final\n\t * @static\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.PARTICLE_VERTEX_BODY = (\n\t\tStageGL.REGULAR_VERTEX_BODY\n\t);\n\t/**\n\t * @property PARTICLE_FRAGMENT_BODY\n\t * @todo\n\t * @final\n\t * @static\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.PARTICLE_FRAGMENT_BODY = (\n\t\tStageGL.REGULAR_FRAGMENT_BODY\n\t);\n\n\t/**\n\t * Portion of the shader that contains the \"varying\" properties required in both vertex and fragment shaders. The\n\t * cover shader is designed to be a simple vertex/uv only texture render that covers the render surface. Shader\n\t * code may contain templates that are replaced pre-compile.\n\t * @property COVER_VARYING_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.COVER_VARYING_HEADER = (\n\t\t\"precision mediump float;\" +\n\n\t\t\"varying highp vec2 vRenderCoord;\" +\n\t\t\"varying highp vec2 vTextureCoord;\"\n\t);\n\n\t/**\n\t * Actual full header for the vertex shader. Includes the varying header. The cover shader is designed to be a\n\t * simple vertex/uv only texture render that covers the render surface. Shader code may contain templates that are\n\t * replaced pre-compile.\n\t * @property COVER_VERTEX_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.COVER_VERTEX_HEADER = (\n\t\tStageGL.COVER_VARYING_HEADER +\n\t\t\"attribute vec2 vertexPosition;\" +\n\t\t\"attribute vec2 uvPosition;\" +\n\t\t\"uniform float uUpright;\"\n\t);\n\n\t/**\n\t * Actual full header for the fragment shader. Includes the varying header. The cover shader is designed to be a\n\t * simple vertex/uv only texture render that covers the render surface. Shader code may contain templates that are\n\t * replaced pre-compile.\n\t * @property COVER_FRAGMENT_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.COVER_FRAGMENT_HEADER = (\n\t\tStageGL.COVER_VARYING_HEADER +\n\t\t\"uniform sampler2D uSampler;\"\n\t);\n\n\t/**\n\t * Body of the vertex shader. The cover shader is designed to be a simple vertex/uv only texture render that covers\n\t * the render surface. Shader code may contain templates that are replaced pre-compile.\n\t * @property COVER_VERTEX_BODY\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.COVER_VERTEX_BODY  = (\n\t\t\"void main(void) {\" +\n\t\t\t\"gl_Position = vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);\" +\n\t\t\t\"vRenderCoord = uvPosition;\" +\n\t\t\t\"vTextureCoord = vec2(uvPosition.x, abs(uUpright - uvPosition.y));\" +\n\t\t\"}\"\n\t);\n\n\t/**\n\t * Body of the fragment shader. The cover shader is designed to be a simple vertex/uv only texture render that\n\t * covers the render surface. Shader code may contain templates that are replaced pre-compile.\n\t * @property COVER_FRAGMENT_BODY\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.COVER_FRAGMENT_BODY = (\n\t\t\"void main(void) {\" +\n\t\t\t\"vec4 color = texture2D(uSampler, vRenderCoord);\" +\n\t\t\t\"gl_FragColor = color;\" +\n\t\t\"}\"\n\t);\n\n// events:\n\t/**\n\t * Dispatched each update immediately before the canvas is cleared and the display list is drawn to it. You can call\n\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} on the event to cancel the draw.\n\t * @event drawstart\n\t */\n\n\t/**\n\t * Dispatched each update immediately after the display list is drawn to the canvas and the canvas context is restored.\n\t * @event drawend\n\t */\n\n// getter / setters:\n\tp._get_isWebGL = function () {\n\t\treturn !!this._webGLContext;\n\t};\n\n\tp._set_autoPurge = function (value) {\n\t\tvalue = isNaN(value)?1200:value;\n\t\tif (value != -1) {\n\t\t\tvalue = value<10?10:value;\n\t\t}\n\t\tthis._autoPurge = value;\n\t};\n\tp._get_autoPurge = function () {\n\t\treturn Number(this._autoPurge);\n\t};\n\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\t/**\n\t\t\t * Indicates whether WebGL is being used for rendering. For example, this would be `false` if WebGL is not\n\t\t\t * supported in the browser.\n\t\t\t * @property isWebGL\n\t\t\t * @type {Boolean}\n\t\t\t * @readonly\n\t\t\t */\n\t\t\tisWebGL: { get: p._get_isWebGL },\n\n\t\t\t/**\n\t\t\t * Specifies whether or not StageGL is automatically purging unused textures. Higher numbers purge less\n\t\t\t * often. Values below 10 are upgraded to 10, and -1 disables this feature.\n\t\t\t * @property autoPurge\n\t\t\t * @protected\n\t\t\t * @type {Integer}\n\t\t\t * @default 1000\n\t\t\t */\n\t\t\tautoPurge: { get: p._get_autoPurge, set: p._set_autoPurge }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// constructor methods:\n\t/**\n\t * Create and properly initialize the WebGL instance.\n\t * @method _initializeWebGL\n\t * @protected\n\t * @return {WebGLRenderingContext}\n\t */\n\tp._initializeWebGL = function () {\n\t\tif (this.canvas) {\n\t\t\tif (!this._webGLContext || this._webGLContext.canvas !== this.canvas) {\n\t\t\t\t// A context hasn't been defined yet,\n\t\t\t\t// OR the defined context belongs to a different canvas, so reinitialize.\n\n\t\t\t\t// defaults and options\n\t\t\t\tvar options = {\n\t\t\t\t\tdepth: false, // Disable the depth buffer as it isn't used.\n\t\t\t\t\talpha: this._transparent, // Make the canvas background transparent.\n\t\t\t\t\tstencil: true,\n\t\t\t\t\tantialias: this._antialias,\n\t\t\t\t\tpremultipliedAlpha: this._premultiply, // Assume the drawing buffer contains colors with premultiplied alpha.\n\t\t\t\t\tpreserveDrawingBuffer: this._preserveBuffer\n\t\t\t\t};\n\n\t\t\t\tvar gl = this._webGLContext = this._fetchWebGLContext(this.canvas, options);\n\t\t\t\tif (!gl) { return null; }\n\n\t\t\t\tthis.updateSimultaneousTextureCount(gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS));\n\t\t\t\tthis._maxTextureSlots = gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\n\t\t\t\tthis._createBuffers(gl);\n\t\t\t\tthis._initTextures(gl);\n\n\t\t\t\tgl.disable(gl.DEPTH_TEST);\n\t\t\t\tgl.enable(gl.BLEND);\n\t\t\t\tgl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\t\t\t\tgl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this._premultiply);\n\t\t\t\t//gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n\n\t\t\t\tthis._webGLContext.clearColor(this._clearColor.r, this._clearColor.g, this._clearColor.b, this._clearColor.a);\n\t\t\t\tthis.updateViewport(this._viewportWidth || this.canvas.width, this._viewportHeight || this.canvas.height);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._webGLContext = null;\n\t\t}\n\t\treturn this._webGLContext;\n\t};\n\n// public methods:\n\t/**\n\t * Docced in superclass\n\t */\n\tp.update = function (props) {\n\t\tif (!this.canvas) { return; }\n\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\tthis.dispatchEvent(\"drawstart\");\n\t\tif (this.autoClear) { this.clear(); }\n\n\t\tif (this._webGLContext) {\n\t\t\t// Use WebGL.\n\t\t\tthis._batchDraw(this, this._webGLContext);\n\t\t\tif (this._autoPurge != -1 && !(this._drawID%((this._autoPurge/2)|0))) {\n\t\t\t\tthis.purgeTextures(this._autoPurge);\n\t\t\t}\n\t\t} else {\n\t\t\t// Use 2D.\n\t\t\tvar ctx = this.canvas.getContext(\"2d\");\n\t\t\tctx.save();\n\t\t\tthis.updateContext(ctx);\n\t\t\tthis.draw(ctx, false);\n\t\t\tctx.restore();\n\t\t}\n\t\tthis.dispatchEvent(\"drawend\");\n\t};\n\n\t/**\n\t * Docced in superclass\n\t */\n\tp.clear = function () {\n\t\tif (!this.canvas) { return; }\n\t\tif (StageGL.isWebGLActive(this._webGLContext)) {\n\t\t\tvar gl = this._webGLContext;\n\t\t\tvar cc = this._clearColor;\n\t\t\tvar adjust = this._transparent ? cc.a : 1.0;\n\t\t\t// Use WebGL settings; adjust for pre multiplied alpha appropriate to scenario\n\t\t\tthis._webGLContext.clearColor(cc.r * adjust, cc.g * adjust, cc.b * adjust, adjust);\n\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\tthis._webGLContext.clearColor(cc.r, cc.g, cc.b, cc.a);\n\t\t} else {\n\t\t\t// Use 2D.\n\t\t\tthis.Stage_clear();\n\t\t}\n\t};\n\n\t/**\n\t * Draws the stage into the supplied context if possible. Many WebGL properties only exist on their context. As such\n\t * you cannot share contexts among many StageGLs and each context requires a unique StageGL instance. Contexts that\n\t * don't match the context managed by this StageGL will be treated as a 2D context.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D | WebGLRenderingContext} context The context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For\n\t *  example, used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @return {Boolean} If the draw was handled by this function\n\t */\n\tp.draw = function (context, ignoreCache) {\n\t\tif (context === this._webGLContext && StageGL.isWebGLActive(this._webGLContext)) {\n\t\t\tvar gl = this._webGLContext;\n\t\t\tthis._batchDraw(this, gl, ignoreCache);\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn this.Stage_draw(context, ignoreCache);\n\t\t}\n\t};\n\n\t/**\n\t * Draws the target into the correct context, be it a canvas or Render Texture using WebGL.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method cacheDraw\n\t * @param {DisplayObject} target The object we're drawing into cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @param {Array} filters The filters we're drawing into cache.\n\t * @param {BitmapCache} manager The BitmapCache instance looking after the cache\n\t * @return {Boolean} If the draw was handled by this function\n\t */\n\tp.cacheDraw = function (target, filters, manager) {\n\t\tif (StageGL.isWebGLActive(this._webGLContext)) {\n\t\t\tvar gl = this._webGLContext;\n\t\t\tthis._cacheDraw(gl, target, filters, manager);\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Blocks, or frees a texture \"slot\" on the GPU. Can be useful if you are overflowing textures. When overflowing\n\t * textures they are re-uploaded to the GPU every time they're encountered, this can be expensive with large textures.\n\t * By blocking the slot you reduce available slots, potentially increasing draw calls, but mostly you prevent a\n\t * texture being re-uploaded if it would have moved slots due to overflow.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * For example, block the slot a background image is stored in so there is less re-loading of that image.\n\t * @method protectTextureSlot\n\t * @param  {Number} id The slot to be affected\n\t * @param  {Boolean} [lock=false] Whether this slot is the one being locked.\n\t */\n\tp.protectTextureSlot = function (id, lock) {\n\t\tif (id > this._maxTextureSlots || id < 0) {\n\t\t\tthrow \"Slot outside of acceptable range\";\n\t\t}\n\t\tthis._slotBlacklist[id] = !!lock;\n\t};\n\n\t/**\n\t * Render textures can't draw into themselves so any item being used for renderTextures needs two to alternate between.\n\t * This function creates, gets, and toggles the render surface between the two.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method getTargetRenderTexture\n\t * @param  {DisplayObject} target The object associated with the render textures, usually a cached object.\n\t * @param  {Number} w The width to create the texture at.\n\t * @param  {Number} h The height to create the texture at.\n\t * @return {Objet}\n\t * @todo fill in return type\n\t */\n\tp.getTargetRenderTexture = function (target, w, h) {\n\t\tvar result, toggle = false;\n\t\tvar gl = this._webGLContext;\n\t\tif (target.__lastRT !== undefined && target.__lastRT === target.__rtA) { toggle = true; }\n\t\tif (!toggle) {\n\t\t\tif (target.__rtA === undefined) {\n\t\t\t\ttarget.__rtA = this.getRenderBufferTexture(w, h);\n\t\t\t} else {\n\t\t\t\tif (w != target.__rtA._width || h != target.__rtA._height) {\n\t\t\t\t\tthis.resizeTexture(target.__rtA, w, h);\n\t\t\t\t}\n\t\t\t\tthis.setTextureParams(gl);\n\t\t\t}\n\t\t\tresult = target.__rtA;\n\t\t} else {\n\t\t\tif (target.__rtB === undefined) {\n\t\t\t\ttarget.__rtB = this.getRenderBufferTexture(w, h);\n\t\t\t} else {\n\t\t\t\tif (w != target.__rtB._width || h != target.__rtB._height) {\n\t\t\t\t\tthis.resizeTexture(target.__rtB, w, h);\n\t\t\t\t}\n\t\t\t\tthis.setTextureParams(gl);\n\t\t\t}\n\t\t\tresult = target.__rtB;\n\t\t}\n\t\tif (!result) {\n\t\t\tthrow \"Problems creating render textures, known causes include using too much VRAM by not releasing WebGL texture instances\";\n\t\t}\n\t\ttarget.__lastRT = result;\n\t\treturn result;\n\t};\n\n\t/**\n\t * For every image encountered StageGL registers and tracks it automatically. This tracking can cause memory leaks \n\t * if not purged. StageGL, by default, automatically purges them. This does have a cost and may unfortunately find\n\t * false positives. This function is for manual management of this memory instead of the automatic system controlled\n\t * by the {{#crossLink \"StageGL/autoPurge:property\"}}{{/crossLink}} property.\n\t *\n\t * This function will recursively remove all textures found on the object, its children, cache, etc. It will uncache \n\t * objects and remove any texture it finds REGARDLESS of whether it is currently in use elsewhere. It is up to the\n\t * developer to ensure that a texture in use is not removed.\n\t *\n\t * Textures in use, or to be used again shortly, should not be removed. This is simply for performance reasons.\n\t * Removing a texture in use will cause the texture to have to be re-uploaded slowing rendering.\n\t * @method releaseTexture\n\t * @param  {DisplayObject | Texture | Image | Canvas} item An object that used the texture to be discarded.\n\t */\n\tp.releaseTexture = function (item) {\n\t\tvar i, l;\n\t\tif (!item) { return; }\n\n\t\t// this is a container object\n\t\tif (item.children) {\n\t\t\tfor (i = 0, l = item.children.length; i < l; i++) {\n\t\t\t\tthis.releaseTexture(item.children[i]);\n\t\t\t}\n\t\t}\n\n\t\t// this has a cache canvas\n\t\tif (item.cacheCanvas) {\n\t\t\titem.uncache();\n\t\t}\n\n\t\tvar foundImage = undefined;\n\t\tif (item._storeID !== undefined) {\n\t\t\t// this is a texture itself\n\t\t\tif (item === this._textureDictionary[item._storeID]) {\n\t\t\t\tthis._killTextureObject(item);\n\t\t\t\titem._storeID = undefined;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// this is an image or canvas\n\t\t\tfoundImage = item;\n\t\t} else if (item._webGLRenderStyle === 2) {\n\t\t\t// this is a Bitmap class\n\t\t\tfoundImage = item.image;\n\t\t} else if (item._webGLRenderStyle === 1) {\n\t\t\t// this is a SpriteSheet, we can't tell which image we used from the list easily so remove them all!\n\t\t\tfor (i = 0, l = item.spriteSheet._images.length; i < l; i++) {\n\t\t\t\tthis.releaseTexture(item.spriteSheet._images[i]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// did we find anything\n\t\tif (foundImage === undefined) {\n\t\t\tif (this.vocalDebug) {\n\t\t\t\tconsole.log(\"No associated texture found on release\");\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// remove it\n\t\tthis._killTextureObject(this._textureDictionary[foundImage._storeID]);\n\t\tfoundImage._storeID = undefined;\n\t};\n\n\t/**\n\t * Similar to {{#crossLink \"releaseTexture\"}}{{/crossLink}}, but this function differs by searching for textures to\n\t * release. It works by assuming that it can purge any texture which was last used more than \"count\" draw calls ago.\n\t * Because this process is unaware of the objects and whether they may be used on your stage, false positives can\n\t * occur. It is recommended to manually manage your memory with {{#crossLink \"StageGL/releaseTexture\"}}{{/crossLink}},\n\t * however, there are many use cases where this is simpler and error-free. This process is also run by default under\n\t * the hood to prevent leaks. To disable it see the {{#crossLink \"StageGL/autoPurge:property\"}}{{/crossLink}} property.\n\t * @method purgeTextures\n\t * @param {Number} [count=100] How many renders ago the texture was last used\n\t */\n\tp.purgeTextures = function (count) {\n\t\tif (count == undefined){ count = 100; }\n\n\t\tvar dict = this._textureDictionary;\n\t\tvar l = dict.length;\n\t\tfor (var i= 0; i<l; i++) {\n\t\t\tvar item = dict[i];\n\t\t\tif (!item) { continue; }\n\t\t\tif (item._drawID + count <= this._drawID) {\t// use draw not batch as draw is more indicative of time\n\t\t\t\tthis._killTextureObject(item);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Try to set the max textures the system can handle. It should default to the hardware maximum, and lower values\n\t * may limit performance. Some devices have been known to mis-report their max textures, or you may need a standard\n\t * baseline cross devices for testing. Barring the previous suggestions, there is little need to call this function\n\t * as the library will automatically try to find the best value.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method updateSimultaneousTextureCount\n\t * @param {Number} [count=1] The number of textures intended for simultaneous loading.\n\t */\n\tp.updateSimultaneousTextureCount = function (count) {\n\t\t// TODO: DHG: make sure API works in all instances, may be some issues with buffers etc I haven't foreseen\n\t\tvar gl = this._webGLContext;\n\t\tvar success = false;\n\n\t\tif (count < 1 || isNaN(count)) { count = 1; }\n\t\tthis._batchTextureCount = count;\n\n\t\twhile (!success) {\n\t\t\ttry {\n\t\t\t\tthis._activeShader = this._fetchShaderProgram(gl);\n\t\t\t\tsuccess = true;\n\t\t\t} catch(e) {\n\t\t\t\tif (this._batchTextureCount == 1) {\n\t\t\t\t\tthrow \"Cannot compile shader \" + e;\n\t\t\t\t}\n\n\t\t\t\tthis._batchTextureCount -= 4;\n\t\t\t\tif (this._batchTextureCount < 1) { this._batchTextureCount = 1; }\n\n\t\t\t\tif (this.vocalDebug) {\n\t\t\t\t\tconsole.log(\"Reducing desired texture count due to errors: \" + this._batchTextureCount);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Update the WebGL viewport. Note that this does <strong>not</strong> update the canvas element's width/height, but\n\t * the render surface's instead. This is necessary after manually resizing the canvas element on the DOM to avoid a\n\t * up/down scaled render.\n\t * @method updateViewport\n\t * @param {Integer} width The width of the render surface in pixels.\n\t * @param {Integer} height The height of the render surface in pixels.\n\t */\n\tp.updateViewport = function (width, height) {\n\t\tthis._viewportWidth = width|0;\n\t\tthis._viewportHeight = height|0;\n\t\tvar gl = this._webGLContext;\n\n\t\tif (gl) {\n\t\t\tgl.viewport(0, 0, this._viewportWidth, this._viewportHeight);\n\n\t\t\t// WebGL works with a -1,1 space on its screen. It also follows Y-Up\n\t\t\t// we need to flip the y, scale and then translate the co-ordinates to match this\n\t\t\t// additionally we offset into they Y so the polygons are inside the camera's \"clipping\" plane\n\t\t\tthis._projectionMatrix = new Float32Array([\n\t\t\t\t2 / this._viewportWidth,\t0,\t\t\t\t\t\t\t\t0,\t\t\t\t\t\t\t0,\n\t\t\t\t0,\t\t\t\t\t\t\t-2 / this._viewportHeight,\t\t1,\t\t\t\t\t\t\t0,\n\t\t\t\t0,\t\t\t\t\t\t\t0,\t\t\t\t\t\t\t\t1,\t\t\t\t\t\t\t0,\n\t\t\t\t-1,\t\t\t\t\t\t\t1,\t\t\t\t\t\t\t\t0.1,\t\t\t\t\t\t0\n\t\t\t]);\n\t\t\t// create the flipped version for use with render texture flipping\n\t\t\t// DHG: this would be a slice/clone but some platforms don't offer them for Float32Array\n\t\t\tthis._projectionMatrixFlip = new Float32Array([0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0]);\n\t\t\tthis._projectionMatrixFlip.set(this._projectionMatrix);\n\t\t\tthis._projectionMatrixFlip[5] *= -1;\n\t\t\tthis._projectionMatrixFlip[13] *= -1;\n\t\t}\n\t};\n\n\t/**\n\t * Fetches the shader compiled and set up to work with the provided filter/object. The shader is compiled on first\n\t * use and returned on subsequent calls.\n\t * @method getFilterShader\n\t * @param  {Filter|Object} filter The object which will provide the information needed to construct the filter shader.\n\t * @return {WebGLProgram}\n\t */\n\tp.getFilterShader = function (filter) {\n\t\tif (!filter) { filter = this; }\n\n\t\tvar gl = this._webGLContext;\n\t\tvar targetShader = this._activeShader;\n\n\t\tif (filter._builtShader) {\n\t\t\ttargetShader = filter._builtShader;\n\t\t\tif (filter.shaderParamSetup) {\n\t\t\t\tgl.useProgram(targetShader);\n\t\t\t\tfilter.shaderParamSetup(gl, this, targetShader);\n\t\t\t}\n\t\t} else {\n\t\t\ttry {\n\t\t\t\ttargetShader = this._fetchShaderProgram(\n\t\t\t\t\tgl, \"filter\",\n\t\t\t\t\tfilter.VTX_SHADER_BODY, filter.FRAG_SHADER_BODY,\n\t\t\t\t\tfilter.shaderParamSetup && filter.shaderParamSetup.bind(filter)\n\t\t\t\t);\n\t\t\t\tfilter._builtShader = targetShader;\n\t\t\t\ttargetShader._name = filter.toString();\n\t\t\t} catch (e) {\n\t\t\t\tconsole && console.log(\"SHADER SWITCH FAILURE\", e);\n\t\t\t}\n\t\t}\n\t\treturn targetShader;\n\t};\n\n\t/**\n\t * Returns a base texture that has no image or data loaded. Not intended for loading images. It may return `null`\n\t * in some error cases, and trying to use a \"null\" texture can cause renders to fail.\n\t * @method getBaseTexture\n\t * @param  {uint} [w=1] The width of the texture in pixels, defaults to 1\n\t * @param  {uint} [h=1] The height of the texture in pixels, defaults to 1\n\t */\n\tp.getBaseTexture = function (w, h) {\n\t\tvar width = Math.ceil(w > 0 ? w : 1) || 1;\n\t\tvar height = Math.ceil(h > 0 ? h : 1) || 1;\n\n\t\tvar gl = this._webGLContext;\n\t\tvar texture = gl.createTexture();\n\t\tthis.resizeTexture(texture, width, height);\n\t\tthis.setTextureParams(gl, false);\n\n\t\treturn texture;\n\t};\n\n\t/**\n\t * Resizes a supplied texture element. May generate invalid textures in some error cases such as; when the texture\n\t * is too large, when an out of texture memory error occurs, or other error scenarios. Trying to use an invalid texture\n\t * can cause renders to hard stop on some devices. Check the WebGL bound texture after running this function.\n\t *\n\t * NOTE: The supplied texture must have been made with the WebGL \"texImage2D\" function, all default APIs in StageGL\n\t * use this, so this note only matters for library developers and plugins.\n\t *\n\t * @protected\n\t * @method resizeTexture\n\t * @param  {WebGLTexture} texture The GL Texture to be modified.\n\t * @param  {uint} [width=1] The width of the texture in pixels, defaults to 1\n\t * @param  {uint} [height=1] The height of the texture in pixels, defaults to 1\n\t */\n\tp.resizeTexture = function (texture, width,height) {\n\t\tvar gl = this._webGLContext;\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D,\t\t\t\t// target\n\t\t\t0,\t\t\t\t\t\t\t// level of detail\n\t\t\tgl.RGBA,\t\t\t\t\t// internal format\n\t\t\twidth, height, 0,\t\t\t// width, height, border (only for array/null sourced textures)\n\t\t\tgl.RGBA,\t\t\t\t\t// format (match internal format)\n\t\t\tgl.UNSIGNED_BYTE,\t\t\t// type of texture(pixel color depth)\n\t\t\tnull\t\t\t\t\t\t// image data, we can do null because we're doing array data\n\t\t);\n\t\ttexture.width = width;\n\t\ttexture.height = height;\n\t};\n\n\t/**\n\t * Returns a base texture (see {{#crossLink \"StageGL/getBaseTexture\"}}{{/crossLink}}) for details. Also includes an\n\t * attached and linked render buffer in `texture._frameBuffer`. RenderTextures can be thought of as an internal\n\t * canvas on the GPU that can be drawn to.\n\t * @method getRenderBufferTexture\n\t * @param  {Number} w The width of the texture in pixels.\n\t * @param  {Number} h The height of the texture in pixels.\n\t * @return {Texture} the basic texture instance with a render buffer property.\n\t */\n\tp.getRenderBufferTexture = function (w, h) {\n\t\tvar gl = this._webGLContext;\n\n\t\t// get the texture\n\t\tvar renderTexture = this.getBaseTexture(w, h);\n\t\tif (!renderTexture) { return null; }\n\n\t\t// get the frame buffer\n\t\tvar frameBuffer = gl.createFramebuffer();\n\t\tif (!frameBuffer) { return null; }\n\n\t\t// set its width and height for spoofing as an image\n\t\trenderTexture.width = w;\n\t\trenderTexture.height = h;\n\n\t\t// attach frame buffer to texture and provide cross links to look up each other\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, renderTexture, 0);\n\t\tframeBuffer._renderTexture = renderTexture;\n\t\trenderTexture._frameBuffer = frameBuffer;\n\n\t\t// these keep track of themselves simply to reduce complexity of some lookup code\n\t\trenderTexture._storeID = this._textureDictionary.length;\n\t\tthis._textureDictionary[renderTexture._storeID] = renderTexture;\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\treturn renderTexture;\n\t};\n\n\t/**\n\t * Common utility function used to apply the correct texture processing parameters for the bound texture.\n\t * @method setTextureParams\n\t * @param  {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param  {Boolean} [isPOT=false] Marks whether the texture is \"Power of Two\", this may allow better quality AA.\n\t */\n\tp.setTextureParams = function (gl, isPOT) {\n\t\tif (isPOT && this._antialias) {\n\t\t\t//non POT linear works in some devices, but performance is NOT good, investigate\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\t} else {\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\t\t}\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t};\n\n\t/**\n\t * Changes the webGL clear, aka \"background\" color to the provided value. A transparent clear is recommended, as\n\t * non-transparent colours may create undesired boxes around some visuals.\n\t *\n\t * The clear color will also be used for filters and other \"render textures\". The stage background will ignore the\n\t * transparency value and display a solid color normally. For the stage to recognize and use transparency it must be\n\t * created with the transparent flag set to `true` (see {{#crossLink \"StageGL/constructor\"}}{{/crossLink}})).\n\t *\n\t * Using \"transparent white\" to demonstrate, the valid data formats are as follows:\n\t * <ul>\n\t *     <li>\"#FFF\"</li>\n\t *     <li>\"#FFFFFF\"</li>\n\t *     <li>\"#FFFFFF00\"</li>\n\t *     <li>\"rgba(255,255,255,0.0)\"</li>\n\t * </ul>\n\t * @method setClearColor\n\t * @param {String|int} [color=0x00000000] The new color to use as the background\n\t */\n\tp.setClearColor = function (color) {\n\t\tvar r, g, b, a, output;\n\n\t\tif (typeof color == \"string\") {\n\t\t\tif (color.indexOf(\"#\") == 0) {\n\t\t\t\tif (color.length == 4) {\n\t\t\t\t\tcolor = \"#\" + color.charAt(1)+color.charAt(1) + color.charAt(2)+color.charAt(2) + color.charAt(3)+color.charAt(3)\n\t\t\t\t}\n\t\t\t\tr = Number(\"0x\"+color.slice(1, 3))/255;\n\t\t\t\tg = Number(\"0x\"+color.slice(3, 5))/255;\n\t\t\t\tb = Number(\"0x\"+color.slice(5, 7))/255;\n\t\t\t\ta = Number(\"0x\"+color.slice(7, 9))/255;\n\t\t\t} else if (color.indexOf(\"rgba(\") == 0) {\n\t\t\t\toutput = color.slice(5, -1).split(\",\");\n\t\t\t\tr = Number(output[0])/255;\n\t\t\t\tg = Number(output[1])/255;\n\t\t\t\tb = Number(output[2])/255;\n\t\t\t\ta = Number(output[3]);\n\t\t\t}\n\t\t} else {\t// >>> is an unsigned shift which is what we want as 0x80000000 and up are negative values\n\t\t\tr = ((color & 0xFF000000) >>> 24)/255;\n\t\t\tg = ((color & 0x00FF0000) >>> 16)/255;\n\t\t\tb = ((color & 0x0000FF00) >>> 8)/255;\n\t\t\ta = (color & 0x000000FF)/255;\n\t\t}\n\n\t\tthis._clearColor.r = r || 0;\n\t\tthis._clearColor.g = g || 0;\n\t\tthis._clearColor.b = b || 0;\n\t\tthis._clearColor.a = a || 0;\n\n\t\tif (!this._webGLContext) { return; }\n\t\tthis._webGLContext.clearColor(this._clearColor.r, this._clearColor.g, this._clearColor.b, this._clearColor.a);\n\t};\n\n\t/**\n\t * docced in subclass\n\t */\n\tp.toString = function () {\n\t\treturn \"[StageGL (name=\"+  this.name +\")]\";\n\t};\n\n// private methods:\n\t/**\n\t * Sets up and returns the WebGL context for the canvas. May return undefined in error scenarios. These can include \n\t * situations where the canvas element already has a context, 2D or GL.\n\t * @param  {Canvas} canvas The DOM canvas element to attach to\n\t * @param  {Object} options The options to be handed into the WebGL object, see WebGL spec\n\t * @method _fetchWebGLContext\n\t * @protected\n\t * @return {WebGLRenderingContext} The WebGL context, may return undefined in error scenarios\n\t */\n\tp._fetchWebGLContext = function (canvas, options) {\n\t\tvar gl;\n\n\t\ttry {\n\t\t\tgl = canvas.getContext(\"webgl\", options) || canvas.getContext(\"experimental-webgl\", options);\n\t\t} catch (e) {\n\t\t\t// don't do anything in catch, null check will handle it\n\t\t}\n\n\t\tif (!gl) {\n\t\t\tvar msg = \"Could not initialize WebGL\";\n\t\t\tconsole.error?console.error(msg):console.log(msg);\n\t\t} else {\n\t\t\tgl.viewportWidth = canvas.width;\n\t\t\tgl.viewportHeight = canvas.height;\n\t\t}\n\n\t\treturn gl;\n\t};\n\n\t/**\n\t * Create the completed Shader Program from the vertex and fragment shaders. Allows building of custom shaders for\n\t * filters. Once compiled, shaders are saved so. If the Shader code requires dynamic alterations re-run this function\n\t * to generate a new shader.\n\t * @method _fetchShaderProgram\n\t * @param  {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param  {String} [shaderName=\"regular\"] Working values: \"regular\", \"override\", and \"filter\". Which type of shader to build.\n\t * Filter and override both accept the custom params. Regular and override have all features. Filter is a special case reduced feature shader meant to be over-ridden.\n\t * @param  {String} [customVTX] Extra vertex shader information to replace a regular draw, see \n\t * {{#crossLink \"StageGL/COVER_VERTEX_BODY\"}}{{/crossLink}} for default and {{#crossLink \"Filter\"}}{{/crossLink}} for examples.\n\t * @param  {String} [customFRAG] Extra fragment shader information to replace a regular draw, see \n\t * {{#crossLink \"StageGL/COVER_FRAGMENT_BODY\"}}{{/crossLink}} for default and {{#crossLink \"Filter\"}}{{/crossLink}} for examples.\n\t * @param  {Function} [shaderParamSetup] Function to run so custom shader parameters can get applied for the render.\n\t * @protected\n\t * @return {WebGLProgram} The compiled and linked shader\n\t */\n\tp._fetchShaderProgram = function (gl, shaderName, customVTX, customFRAG, shaderParamSetup) {\n\t\tgl.useProgram(null);\t\t// safety to avoid collisions\n\n\t\t// build the correct shader string out of the right headers and bodies\n\t\tvar targetFrag, targetVtx;\n\t\tswitch (shaderName) {\n\t\t\tcase \"filter\":\n\t\t\t\ttargetVtx = StageGL.COVER_VERTEX_HEADER + (customVTX || StageGL.COVER_VERTEX_BODY);\n\t\t\t\ttargetFrag = StageGL.COVER_FRAGMENT_HEADER + (customFRAG || StageGL.COVER_FRAGMENT_BODY);\n\t\t\t\tbreak;\n\t\t\tcase \"particle\": //TODO\n\t\t\t\ttargetVtx = StageGL.REGULAR_VERTEX_HEADER + StageGL.PARTICLE_VERTEX_BODY;\n\t\t\t\ttargetFrag = StageGL.REGULAR_FRAGMENT_HEADER + StageGL.PARTICLE_FRAGMENT_BODY;\n\t\t\t\tbreak;\n\t\t\tcase \"override\":\n\t\t\t\ttargetVtx = StageGL.REGULAR_VERTEX_HEADER + (customVTX || StageGL.REGULAR_VERTEX_BODY);\n\t\t\t\ttargetFrag = StageGL.REGULAR_FRAGMENT_HEADER + (customFRAG || StageGL.REGULAR_FRAGMENT_BODY);\n\t\t\t\tbreak;\n\t\t\tcase \"regular\":\n\t\t\tdefault:\n\t\t\t\ttargetVtx = StageGL.REGULAR_VERTEX_HEADER + StageGL.REGULAR_VERTEX_BODY;\n\t\t\t\ttargetFrag = StageGL.REGULAR_FRAGMENT_HEADER + StageGL.REGULAR_FRAGMENT_BODY;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// create the separate vars\n\t\tvar vertexShader = this._createShader(gl, gl.VERTEX_SHADER, targetVtx);\n\t\tvar fragmentShader = this._createShader(gl, gl.FRAGMENT_SHADER, targetFrag);\n\n\t\t// link them together\n\t\tvar shaderProgram = gl.createProgram();\n\t\tgl.attachShader(shaderProgram, vertexShader);\n\t\tgl.attachShader(shaderProgram, fragmentShader);\n\t\tgl.linkProgram(shaderProgram);\n\t\tshaderProgram._type = shaderName;\n\n\t\t// check compile status\n\t\tif (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n\t\t\tgl.useProgram(this._activeShader);\n\t\t\tthrow gl.getProgramInfoLog(shaderProgram);\n\t\t}\n\n\t\t// set up the parameters on the shader\n\t\tgl.useProgram(shaderProgram);\n\t\tswitch (shaderName) {\n\t\t\tcase \"filter\":\n\t\t\t\t// get the places in memory the shader is stored so we can feed information into them\n\t\t\t\t// then save it off on the shader because it's so tied to the shader itself\n\t\t\t\tshaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, \"vertexPosition\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\n\n\t\t\t\tshaderProgram.uvPositionAttribute = gl.getAttribLocation(shaderProgram, \"uvPosition\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.uvPositionAttribute);\n\n\t\t\t\tshaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, \"uSampler\");\n\t\t\t\tgl.uniform1i(shaderProgram.samplerUniform, 0);\n\n\t\t\t\tshaderProgram.uprightUniform = gl.getUniformLocation(shaderProgram, \"uUpright\");\n\t\t\t\tgl.uniform1f(shaderProgram.uprightUniform, 0);\n\n\t\t\t\t// if there's some custom attributes be sure to hook them up\n\t\t\t\tif (shaderParamSetup) {\n\t\t\t\t\tshaderParamSetup(gl, this, shaderProgram);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"override\":\n\t\t\tcase \"particle\":\n\t\t\tcase \"regular\":\n\t\t\tdefault:\n\t\t\t\t// get the places in memory the shader is stored so we can feed information into them\n\t\t\t\t// then save it off on the shader because it's so tied to the shader itself\n\t\t\t\tshaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, \"vertexPosition\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\n\n\t\t\t\tshaderProgram.uvPositionAttribute = gl.getAttribLocation(shaderProgram, \"uvPosition\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.uvPositionAttribute);\n\n\t\t\t\tshaderProgram.textureIndexAttribute = gl.getAttribLocation(shaderProgram, \"textureIndex\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.textureIndexAttribute);\n\n\t\t\t\tshaderProgram.alphaAttribute = gl.getAttribLocation(shaderProgram, \"objectAlpha\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.alphaAttribute);\n\n\t\t\t\tvar samplers = [];\n\t\t\t\tfor (var i = 0; i < this._batchTextureCount; i++) {\n\t\t\t\t\tsamplers[i] = i;\n\t\t\t\t}\n\n\t\t\t\tshaderProgram.samplerData = samplers;\n\t\t\t\tshaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, \"uSampler\");\n\t\t\t\tgl.uniform1iv(shaderProgram.samplerUniform, samplers);\n\n\t\t\t\tshaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, \"pMatrix\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tgl.useProgram(this._activeShader);\n\t\treturn shaderProgram;\n\t};\n\n\t/**\n\t * Creates a shader from the specified string replacing templates. Template items are defined via `{{` `key` `}}``.\n\t * @method _createShader\n\t * @param  {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param  {Number} type The type of shader to create. gl.VERTEX_SHADER | gl.FRAGMENT_SHADER\n\t * @param  {String} str The definition for the shader.\n\t * @return {WebGLShader}\n\t * @protected\n\t */\n\tp._createShader = function (gl, type, str) {\n\t\t// inject the static number\n\t\tstr = str.replace(/{{count}}/g, this._batchTextureCount);\n\n\t\t// resolve issue with no dynamic samplers by creating correct samplers in if else chain\n\t\t// TODO: WebGL 2.0 does not need this support\n\t\tvar insert = \"\";\n\t\tfor (var i = 1; i<this._batchTextureCount; i++) {\n\t\t\tinsert += \"} else if (indexPicker <= \"+ i +\".5) { color = texture2D(uSampler[\"+ i +\"], vTextureCoord);\";\n\t\t}\n\t\tstr = str.replace(/{{alternates}}/g, insert);\n\t\tstr = str.replace(/{{fragColor}}/g, this._premultiply ? StageGL.REGULAR_FRAG_COLOR_PREMULTIPLY : StageGL.REGULAR_FRAG_COLOR_NORMAL);\n\n\t\t// actually compile the shader\n\t\tvar shader = gl.createShader(type);\n\t\tgl.shaderSource(shader, str);\n\t\tgl.compileShader(shader);\n\n\t\t// check compile status\n\t\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\t\tthrow gl.getShaderInfoLog(shader);\n\t\t}\n\n\t\treturn shader;\n\t};\n\n\t/**\n\t * Sets up the necessary vertex property buffers, including position and U/V.\n\t * @method _createBuffers\n\t * @param {WebGLRenderingContext} gl\n\t * @protected\n\t */\n\tp._createBuffers = function (gl) {\n\t\tvar groupCount = this._maxCardsPerBatch * StageGL.INDICIES_PER_CARD;\n\t\tvar groupSize, i, l;\n\n\t\t// INFO:\n\t\t// all buffers are created using this pattern\n\t\t// create a WebGL buffer\n\t\t// attach it to context\n\t\t// figure out how many parts it has to an entry\n\t\t// fill it with empty data to reserve the memory\n\t\t// attach the empty data to the GPU\n\t\t// track the sizes on the buffer object\n\n\t\t// INFO:\n\t\t// a single buffer may be optimal in some situations and would be approached like this,\n\t\t// currently not implemented due to lack of need and potential complications with drawCover\n\n\t\t// var vertexBuffer = this._vertexBuffer = gl.createBuffer();\n\t\t// gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n\t\t// groupSize = 2 + 2 + 1 + 1; //x/y, u/v, index, alpha\n\t\t// var vertexData = this._vertexData = new Float32Array(groupCount * groupSize);\n\t\t// for (i=0; i<vertexData.length; i+=groupSize) {\n\t\t// \tvertexData[i+0] = vertexData[i+1] = 0;\n\t\t// \tvertexData[i+2] = vertexData[i+3] = 0.5;\n\t\t// \tvertexData[i+4] = 0;\n\t\t// \tvertexData[i+5] = 1;\n\t\t// }\n\t\t// vertexBuffer.itemSize = groupSize;\n\t\t// vertexBuffer.numItems = groupCount;\n\t\t// TODO bechmark and test using unified buffer\n\n\t\t// the actual position information\n\t\tvar vertexPositionBuffer = this._vertexPositionBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexPositionBuffer);\n\t\tgroupSize = 2;\n\t\tvar vertices = this._vertices = new Float32Array(groupCount * groupSize);\n\t\tfor (i=0, l=vertices.length; i<l; i+=groupSize) { vertices[i] = vertices[i+1] = 0; }\n\t\tgl.bufferData(gl.ARRAY_BUFFER, vertices, gl.DYNAMIC_DRAW);\n\t\tvertexPositionBuffer.itemSize = groupSize;\n\t\tvertexPositionBuffer.numItems = groupCount;\n\n\t\t// where on the texture it gets its information\n\t\tvar uvPositionBuffer = this._uvPositionBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, uvPositionBuffer);\n\t\tgroupSize = 2;\n\t\tvar uvs = this._uvs = new Float32Array(groupCount * groupSize);\n\t\tfor (i=0, l=uvs.length; i<l; i+=groupSize) { uvs[i] = uvs[i+1] = 0; }\n\t\tgl.bufferData(gl.ARRAY_BUFFER, uvs, gl.DYNAMIC_DRAW);\n\t\tuvPositionBuffer.itemSize = groupSize;\n\t\tuvPositionBuffer.numItems = groupCount;\n\n\t\t// what texture it should use\n\t\tvar textureIndexBuffer = this._textureIndexBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, textureIndexBuffer);\n\t\tgroupSize = 1;\n\t\tvar indices = this._indices = new Float32Array(groupCount * groupSize);\n\t\tfor (i=0, l=indices.length; i<l; i++) { indices[i] = 0; }\n\t\tgl.bufferData(gl.ARRAY_BUFFER, indices, gl.DYNAMIC_DRAW);\n\t\ttextureIndexBuffer.itemSize = groupSize;\n\t\ttextureIndexBuffer.numItems = groupCount;\n\n\t\t// what alpha it should have\n\t\tvar alphaBuffer = this._alphaBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, alphaBuffer);\n\t\tgroupSize = 1;\n\t\tvar alphas = this._alphas = new Float32Array(groupCount * groupSize);\n\t\tfor (i=0, l=alphas.length; i<l; i++) { alphas[i] = 1; }\n\t\tgl.bufferData(gl.ARRAY_BUFFER, alphas, gl.DYNAMIC_DRAW);\n\t\talphaBuffer.itemSize = groupSize;\n\t\talphaBuffer.numItems = groupCount;\n\t};\n\n\t/**\n\t * Do all the setup steps for textures in the system.\n\t * @method _initTextures\n\t * @protected\n\t */\n\tp._initTextures = function () {\n\t\t//TODO: DHG: add a cleanup routine in here in case this happens mid stream\n\n\t\t// reset counters\n\t\tthis._lastTextureInsert = -1;\n\n\t\t// clear containers\n\t\tthis._textureDictionary = [];\n\t\tthis._textureIDs = {};\n\t\tthis._baseTextures = [];\n\t\tthis._batchTextures = [];\n\n\t\t// fill in blanks as it helps the renderer be stable while textures are loading and reduces need for safety code\n\t\tfor (var i=0; i<this._batchTextureCount;i++) {\n\t\t\tvar tex = this.getBaseTexture();\n\t\t\tthis._baseTextures[i] = this._batchTextures[i] = tex;\n\t\t\tif (!tex) {\n\t\t\t\tthrow \"Problems creating basic textures, known causes include using too much VRAM by not releasing WebGL texture instances\";\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Load a specific texture, accounting for potential delay, as it might not be preloaded.\n\t * @method _loadTextureImage\n\t * @param {WebGLRenderingContext} gl\n\t * @param {Image} image Actual image to be loaded\n\t * @return {WebGLTexture} The resulting Texture object\n\t * @protected\n\t */\n\tp._loadTextureImage = function (gl, image) {\n\t\tvar src = image.src;\n\n\t\tif (!src) {\n\t\t\t// one time canvas property setup\n\t\t\timage._isCanvas = true;\n\t\t\tsrc = image.src = \"canvas_\" + this._lastTrackedCanvas++;\n\t\t}\n\n\t\t// put the texture into our storage system\n\t\tvar storeID = this._textureIDs[src];\n\t\tif (storeID === undefined) {\n\t\t\tstoreID = this._textureIDs[src] = this._textureDictionary.length;\n\t\t}\n\t\tif (this._textureDictionary[storeID] === undefined) {\n\t\t\tthis._textureDictionary[storeID] = this.getBaseTexture();\n\t\t}\n\n\t\tvar texture = this._textureDictionary[storeID];\n\n\t\tif (texture) {\n\t\t\t// get texture params all set up\n\t\t\ttexture._batchID = this._batchID;\n\t\t\ttexture._storeID = storeID;\n\t\t\ttexture._imageData = image;\n\t\t\tthis._insertTextureInBatch(gl, texture);\n\n\t\t\t// get the data into the texture or wait for it to load\n\t\t\timage._storeID = storeID;\n\t\t\tif (image.complete || image.naturalWidth || image._isCanvas) {\t// is it already loaded\n\t\t\t\tthis._updateTextureImageData(gl, image);\n\t\t\t} else  {\n\t\t\t\timage.addEventListener(\"load\", this._updateTextureImageData.bind(this, gl, image));\n\t\t\t}\n\t\t} else {\n\t\t\t// we really really should have a texture, try to recover the error by using a saved empty texture so we don't crash\n\t\t\tvar msg = \"Problem creating desired texture, known causes include using too much VRAM by not releasing WebGL texture instances\";\n\t\t\t(console.error && console.error(msg)) || console.log(msg);\n\n\t\t\ttexture = this._baseTextures[0];\n\t\t\ttexture._batchID = this._batchID;\n\t\t\ttexture._storeID = -1;\n\t\t\ttexture._imageData = texture;\n\t\t\tthis._insertTextureInBatch(gl, texture);\n\t\t}\n\n\t\treturn texture;\n\t};\n\n\t/**\n\t * Necessary to upload the actual image data to the GPU. Without this the texture will be blank. Called automatically\n\t * in most cases due to loading and caching APIs. Flagging an image source with `_invalid = true` will trigger this\n\t * next time the image is rendered.\n\t * @param {WebGLRenderingContext} gl\n\t * @param {Image | Canvas} image The image data to be uploaded\n\t * @protected\n\t */\n\tp._updateTextureImageData = function (gl, image) {\n\t\t// the bitwise & is intentional, cheap exponent 2 check\n\t\tvar isNPOT = (image.width & image.width-1) || (image.height & image.height-1);\n\t\tvar texture = this._textureDictionary[image._storeID];\n\n\t\tgl.activeTexture(gl.TEXTURE0 + texture._activeIndex);\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\n\t\ttexture.isPOT = !isNPOT;\n\t\tthis.setTextureParams(gl, texture.isPOT);\n\n\t\ttry {\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n\t\t} catch(e) {\n\t\t\tvar errString = \"\\nAn error has occurred. This is most likely due to security restrictions on WebGL images with local or cross-domain origins\";\n\t\t\tif(console.error) {\n\t\t\t\t//TODO: LM: I recommend putting this into a log function internally, since you do it so often, and each is implemented differently.\n\t\t\t\tconsole.error(errString);\n\t\t\t\tconsole.error(e);\n\t\t\t} else if (console) {\n\t\t\t\tconsole.log(errString);\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t}\n\n\t\timage._invalid = false;\n\n\t\ttexture._w = image.width;\n\t\ttexture._h = image.height;\n\n\t\tif (this.vocalDebug) {\n\t\t\tif (isNPOT) {\n\t\t\t\tconsole.warn(\"NPOT(Non Power of Two) Texture: \"+ image.src);\n\t\t\t}\n\t\t\tif (image.width > gl.MAX_TEXTURE_SIZE || image.height > gl.MAX_TEXTURE_SIZE){\n\t\t\t\tconsole && console.error(\"Oversized Texture: \"+ image.width+\"x\"+image.height +\" vs \"+ gl.MAX_TEXTURE_SIZE +\"max\");\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Adds the texture to a spot in the current batch, forcing a draw if no spots are free.\n\t * @method _insertTextureInBatch\n\t * @param {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param {WebGLTexture} texture The texture to be inserted.\n\t * @protected\n\t */\n\tp._insertTextureInBatch = function (gl, texture) {\n\t\t// if it wasn't used last batch\n\t\tif (this._batchTextures[texture._activeIndex] !== texture) {\n\t\t\t// we've got to find it a a spot.\n\t\t\tvar found = -1;\n\t\t\tvar start = (this._lastTextureInsert+1) % this._batchTextureCount;\n\t\t\tvar look = start;\n\t\t\tdo {\n\t\t\t\tif (this._batchTextures[look]._batchID != this._batchID && !this._slotBlacklist[look]) {\n\t\t\t\t\tfound = look;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlook = (look+1) % this._batchTextureCount;\n\t\t\t} while (look !== start);\n\n\t\t\t// we couldn't find anywhere for it go, meaning we're maxed out\n\t\t\tif (found === -1) {\n\t\t\t\tthis.batchReason = \"textureOverflow\";\n\t\t\t\tthis._drawBuffers(gl);\t\t// <------------------------------------------------------------------------\n\t\t\t\tthis.batchCardCount = 0;\n\t\t\t\tfound = start;\n\t\t\t}\n\n\t\t\t// lets put it into that spot\n\t\t\tthis._batchTextures[found] = texture;\n\t\t\ttexture._activeIndex = found;\n\t\t\tvar image = texture._imageData;\n\t\t\tif (image && image._invalid && texture._drawID !== undefined) {\n\t\t\t\tthis._updateTextureImageData(gl, image);\n\t\t\t} else {\n\t\t\t\tgl.activeTexture(gl.TEXTURE0 + found);\n\t\t\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\t\t\tthis.setTextureParams(gl);\n\t\t\t}\n\t\t\tthis._lastTextureInsert = found;\n\t\t} else {\n\t\t\tvar image = texture._imageData;\n\t\t\tif (texture._storeID != undefined && image && image._invalid) {\n\t\t\t\tthis._updateTextureImageData(gl, image);\n\t\t\t}\n\t\t}\n\n\t\ttexture._drawID = this._drawID;\n\t\ttexture._batchID = this._batchID;\n\t};\n\n\t/**\n\t * Remove and clean the texture, expects a texture and is inflexible. Mostly for internal use, recommended to call \n\t * {{#crossLink \"StageGL/releaseTexture\"}}{{/crossLink}} instead as it will call this with the correct texture object(s).\n\t * Note: Testing shows this may not happen immediately, have to wait frames for WebGL to have actually adjust memory.\n\t * @method _killTextureObject\n\t * @param {Texture} tex The texture to be cleaned out\n\t * @protected\n\t */\n\tp._killTextureObject = function (tex) {\n\t\tif (!tex) { return; }\n\t\tvar gl = this._webGLContext;\n\n\t\t// remove linkage\n\t\tif (tex._storeID !== undefined && tex._storeID >= 0) {\n\t\t\tthis._textureDictionary[tex._storeID] = undefined;\n\t\t\tfor (var n in this._textureIDs) {\n\t\t\t\tif (this._textureIDs[n] == tex._storeID) { delete this._textureIDs[n]; }\n\t\t\t}\n\t\t\tif(tex._imageData) { tex._imageData._storeID = undefined; }\n\t\t\ttex._imageData = tex._storeID = undefined;\n\t\t}\n\n\t\t// make sure to drop it out of an active slot\n\t\tif (tex._activeIndex !== undefined && this._batchTextures[tex._activeIndex] === tex) {\n\t\t\tthis._batchTextures[tex._activeIndex] = this._baseTextures[tex._activeIndex];\n\t\t}\n\n\t\t// remove buffers if present\n\t\ttry {\n\t\t\tif (tex._frameBuffer) { gl.deleteFramebuffer(tex._frameBuffer); }\n\t\t\ttex._frameBuffer = undefined;\n\t\t} catch(e) {\n\t\t\t/* suppress delete errors because it's already gone or didn't need deleting probably */\n\t\t\tif (this.vocalDebug) { console.log(e); }\n\t\t}\n\n\t\t// remove entry\n\t\ttry {\n\t\t\tgl.deleteTexture(tex);\n\t\t} catch(e) {\n\t\t\t/* suppress delete errors because it's already gone or didn't need deleting probably */\n\t\t\tif (this.vocalDebug) { console.log(e); }\n\t\t}\n\t};\n\n\t/**\n\t * Store or restore current batch textures into a backup array\n\t * @method _backupBatchTextures\n\t * @param {Boolean} restore Perform a restore instead of a store.\n\t * @param {Array} [target=this._backupTextures] Where to perform the backup, defaults to internal backup.\n\t * @protected\n\t */\n\tp._backupBatchTextures = function (restore, target) {\n\t\tvar gl = this._webGLContext;\n\n\t\tif (!this._backupTextures) { this._backupTextures = []; }\n\t\tif (target === undefined) { target = this._backupTextures; }\n\n\t\tfor (var i=0; i<this._batchTextureCount; i++) {\n\t\t\tgl.activeTexture(gl.TEXTURE0 + i);\n\t\t\tif (restore) {\n\t\t\t\tthis._batchTextures[i] = target[i];\n\t\t\t} else {\n\t\t\t\ttarget[i] = this._batchTextures[i];\n\t\t\t\tthis._batchTextures[i] = this._baseTextures[i];\n\t\t\t}\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, this._batchTextures[i]);\n\t\t\tthis.setTextureParams(gl, this._batchTextures[i].isPOT);\n\t\t}\n\n\t\tif (restore && target === this._backupTextures) { this._backupTextures = []; }\n\t};\n\n\t/**\n\t * Begin the drawing process for a regular render.\n\t * @method _batchDraw\n\t * @param {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param {Stage || Container} sceneGraph {{#crossLink \"Container\"}}{{/crossLink}} object with all that needs to rendered, preferably a Stage.\n\t * @param {Boolean} ignoreCache\n\t * @protected\n\t */\n\tp._batchDraw = function (sceneGraph, gl, ignoreCache) {\n\t\tif (this._isDrawing > 0) {\n\t\t\tthis._drawBuffers(gl);\n\t\t}\n\t\tthis._isDrawing++;\n\t\tthis._drawID++;\n\n\t\tthis.batchCardCount = 0;\n\t\tthis.depth = 0;\n\n\t\tthis._appendToBatchGroup(sceneGraph, gl, new createjs.Matrix2D(), this.alpha, ignoreCache);\n\n\t\tthis.batchReason = \"drawFinish\";\n\t\tthis._drawBuffers(gl);\t\t\t\t\t\t\t\t// <--------------------------------------------------------\n\t\tthis._isDrawing--;\n\t};\n\n\t/**\n\t * Perform the drawing process to fill a specific cache texture, including applying filters.\n\t * @method _cacheDraw\n\t * @param {DisplayObject} target The object we're drawing into the cache. For example, used for drawing the cache\n\t * (to prevent it from simply drawing an existing cache back into itself).\n\t * @param {Array} filters The filters we're drawing into cache.\n\t * @param {BitmapCache} manager The BitmapCache instance looking after the cache\n\t * @protected\n\t */\n\tp._cacheDraw = function (gl, target, filters, manager) {\n\t\t/*\n\t\tImplicitly there are 4 modes to this function: filtered-sameContext, filtered-uniqueContext, sameContext, uniqueContext.\n\t\tEach situation must be handled slightly differently as 'sameContext' or 'uniqueContext' define how the output works,\n\t\tone drawing directly into the main context and the other drawing into a stored renderTexture respectively.\n\t\tWhen the draw is a 'filtered' draw, the filters are applied sequentially and will draw into saved textures repeatedly.\n\t\tOnce the final filter is done the final output is treated depending upon whether it is a same or unique context.\n\t\tThe internal complexity comes from reducing over-draw, shared code, and issues like textures needing to be flipped\n\t\tsometimes when written to render textures.\n\t\t*/\n\t\tvar renderTexture;\n\t\tvar shaderBackup = this._activeShader;\n\t\tvar blackListBackup = this._slotBlacklist;\n\t\tvar lastTextureSlot = this._maxTextureSlots-1;\n\t\tvar wBackup = this._viewportWidth, hBackup = this._viewportHeight;\n\n\t\t// protect the last slot so that we have somewhere to bind the renderTextures so it doesn't get upset\n\t\tthis.protectTextureSlot(lastTextureSlot, true);\n\n\t\t// create offset container for drawing item\n\t\tvar mtx = target.getMatrix();\n\t\tmtx = mtx.clone();\n\t\tmtx.scale(1/manager.scale, 1/manager.scale);\n\t\tmtx = mtx.invert();\n\t\tmtx.translate(-manager.offX/manager.scale*target.scaleX, -manager.offY/manager.scale*target.scaleY);\n\t\tvar container = this._cacheContainer;\n\t\tcontainer.children = [target];\n\t\tcontainer.transformMatrix = mtx;\n\n\t\tthis._backupBatchTextures(false);\n\n\t\tif (filters && filters.length) {\n\t\t\tthis._drawFilters(target, filters, manager);\n\t\t} else {\n\t\t\t// is this for another stage or mine?\n\t\t\tif (this.isCacheControlled) {\n\t\t\t\t// draw item to canvas\t\t\t\tI -> C\n\t\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\t\tthis._batchDraw(container, gl, true);\n\t\t\t} else {\n\t\t\t\tgl.activeTexture(gl.TEXTURE0 + lastTextureSlot);\n\t\t\t\ttarget.cacheCanvas = this.getTargetRenderTexture(target, manager._drawWidth, manager._drawHeight);\n\t\t\t\trenderTexture = target.cacheCanvas;\n\n\t\t\t\t// draw item to render texture\t\tI -> T\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTexture._frameBuffer);\n\t\t\t\tthis.updateViewport(manager._drawWidth, manager._drawHeight);\n\t\t\t\tthis._projectionMatrix = this._projectionMatrixFlip;\n\t\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\t\tthis._batchDraw(container, gl, true);\n\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\t\tthis.updateViewport(wBackup, hBackup);\n\t\t\t}\n\t\t}\n\n\t\tthis._backupBatchTextures(true);\n\n\t\tthis.protectTextureSlot(lastTextureSlot, false);\n\t\tthis._activeShader = shaderBackup;\n\t\tthis._slotBlacklist = blackListBackup;\n\t};\n\n\t/**\n\t * Sub portion of _cacheDraw, split off for readability. Do not call independently.\n\t * @method _drawFilters\n\t * @param {DisplayObject} target The object we're drawing with a filter.\n\t * @param {Array} filters The filters we're drawing into cache.\n\t * @param {BitmapCache} manager The BitmapCache instance looking after the cache\n\t */\n\tp._drawFilters = function (target, filters, manager) {\n\t\tvar gl = this._webGLContext;\n\t\tvar renderTexture;\n\t\tvar lastTextureSlot = this._maxTextureSlots-1;\n\t\tvar wBackup = this._viewportWidth, hBackup = this._viewportHeight;\n\n\t\tvar container = this._cacheContainer;\n\t\tvar filterCount = filters.length;\n\n\t\t// we don't know which texture slot we're dealing with previously and we need one out of the way\n\t\t// once we're using that slot activate it so when we make and bind our RenderTexture it's safe there\n\t\tgl.activeTexture(gl.TEXTURE0 + lastTextureSlot);\n\t\trenderTexture = this.getTargetRenderTexture(target, manager._drawWidth, manager._drawHeight);\n\n\t\t// draw item to render texture\t\tI -> T\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTexture._frameBuffer);\n\t\tthis.updateViewport(manager._drawWidth, manager._drawHeight);\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\tthis._batchDraw(container, gl, true);\n\n\t\t// bind the result texture to slot 0 as all filters and cover draws assume original content is in slot 0\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, renderTexture);\n\t\tthis.setTextureParams(gl);\n\n\t\tvar flipY = false;\n\t\tvar i = 0, filter = filters[i];\n\t\tdo { // this is safe because we wouldn't be in apply filters without a filter count of at least 1\n\n\t\t\t// swap to correct shader\n\t\t\tthis._activeShader = this.getFilterShader(filter);\n\t\t\tif (!this._activeShader) { continue; }\n\n\t\t\t// now the old result is stored in slot 0, make a new render texture\n\t\t\tgl.activeTexture(gl.TEXTURE0 + lastTextureSlot);\n\t\t\trenderTexture = this.getTargetRenderTexture(target, manager._drawWidth, manager._drawHeight);\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTexture._frameBuffer);\n\n\t\t\t// draw result to render texture\tR -> T\n\t\t\tgl.viewport(0, 0, manager._drawWidth, manager._drawHeight);\n\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\tthis._drawCover(gl, flipY);\n\n\t\t\t// bind the result texture to slot 0 as all filters and cover draws assume original content is in slot 0\n\t\t\tgl.activeTexture(gl.TEXTURE0);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, renderTexture);\n\t\t\tthis.setTextureParams(gl);\n\n\t\t\t// use flipping to keep things upright, things already cancel out on a single filter\n\t\t\t// this needs to be here as multiPass is not accurate to _this_ frame until after shader acquisition\n\t\t\tif (filterCount > 1 || filters[0]._multiPass) {\n\t\t\t\tflipY = !flipY;\n\t\t\t}\n\n\t\t\t// work through the multipass if it's there, otherwise move on\n\t\t\tfilter = filter._multiPass !== null ? filter._multiPass : filters[++i];\n\t\t} while (filter);\n\n\t\t// is this for another stage or mine\n\t\tif (this.isCacheControlled) {\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\tthis.updateViewport(wBackup, hBackup);\n\n\t\t\t// draw result to canvas\t\t\tR -> C\n\t\t\tthis._activeShader = this.getFilterShader(this);\n\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\tthis._drawCover(gl, flipY);\n\t\t} else {\n\t\t\t//TODO: DHG: this is less than ideal. A flipped initial render for this circumstance might help. Adjust the perspective matrix?\n\t\t\tif (flipY) {\n\t\t\t\tgl.activeTexture(gl.TEXTURE0 + lastTextureSlot);\n\t\t\t\trenderTexture = this.getTargetRenderTexture(target, manager._drawWidth, manager._drawHeight);\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTexture._frameBuffer);\n\n\t\t\t\tthis._activeShader = this.getFilterShader(this);\n\t\t\t\tgl.viewport(0, 0, manager._drawWidth, manager._drawHeight);\n\t\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\t\tthis._drawCover(gl, !flipY);\n\t\t\t}\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\tthis.updateViewport(wBackup, hBackup);\n\n\t\t\t// make sure the last texture is the active thing to draw\n\t\t\ttarget.cacheCanvas = renderTexture;\n\t\t}\n\t};\n\n\t/**\n\t * Add all the contents of a container to the pending buffers, called recursively on each container. This may\n\t * trigger a draw if a buffer runs out of space. This is the main workforce of the render loop.\n\t * @method _appendToBatchGroup\n\t * @param {Container} container The {{#crossLink \"Container\"}}{{/crossLink}} that contains everything to be drawn.\n\t * @param {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param {Matrix2D} concatMtx The effective (concatenated) transformation matrix when beginning this container\n\t * @param {Number} concatAlpha The effective (concatenated) alpha when beginning this container\n\t * @param {Boolean} ignoreCache Don't use an element's cache during this draw\n\t * @protected\n\t */\n\tp._appendToBatchGroup = function (container, gl, concatMtx, concatAlpha, ignoreCache) {\n\t\t// sort out shared properties\n\t\tif (!container._glMtx) { container._glMtx = new createjs.Matrix2D(); }\n\t\tvar cMtx = container._glMtx;\n\t\tcMtx.copy(concatMtx);\n\t\tif (container.transformMatrix) {\n\t\t\tcMtx.appendMatrix(container.transformMatrix);\n\t\t} else {\n\t\t\tcMtx.appendTransform(\n\t\t\t\tcontainer.x, container.y,\n\t\t\t\tcontainer.scaleX, container.scaleY,\n\t\t\t\tcontainer.rotation, container.skewX, container.skewY,\n\t\t\t\tcontainer.regX, container.regY\n\t\t\t);\n\t\t}\n\n\t\t// sub components of figuring out the position an object holds\n\t\tvar subL, subT, subR, subB;\n\n\t\t// actually apply its data to the buffers\n\t\tvar l = container.children.length;\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tvar item = container.children[i];\n\n\t\t\tif (!(item.visible && concatAlpha)) { continue; }\n\t\t\tif (!item.cacheCanvas || ignoreCache) {\n\t\t\t\tif (item._updateState){\n\t\t\t\t\titem._updateState();\n\t\t\t\t}\n\t\t\t\tif (item.children) {\n\t\t\t\t\tthis._appendToBatchGroup(item, gl, cMtx, item.alpha * concatAlpha);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// check for overflowing batch, if yes then force a render\n\t\t\t// TODO: DHG: consider making this polygon count dependant for things like vector draws\n\t\t\tif (this.batchCardCount+1 > this._maxCardsPerBatch) {\n\t\t\t\tthis.batchReason = \"vertexOverflow\";\n\t\t\t\tthis._drawBuffers(gl);\t\t\t\t\t// <------------------------------------------------------------\n\t\t\t\tthis.batchCardCount = 0;\n\t\t\t}\n\n\t\t\t// keep track of concatenated position\n\t\t\tif (!item._glMtx) { item._glMtx = new createjs.Matrix2D(); }\n\t\t\tvar iMtx = item._glMtx;\n\t\t\tiMtx.copy(cMtx);\n\t\t\tif (item.transformMatrix) {\n\t\t\t\tiMtx.appendMatrix(item.transformMatrix);\n\t\t\t} else {\n\t\t\t\tiMtx.appendTransform(\n\t\t\t\t\titem.x, item.y,\n\t\t\t\t\titem.scaleX, item.scaleY,\n\t\t\t\t\titem.rotation, item.skewX, item.skewY,\n\t\t\t\t\titem.regX, item.regY\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tvar uvRect, texIndex, image, frame, texture, src;\n\t\t\tvar useCache = item.cacheCanvas && !ignoreCache;\n\n\t\t\tif (item._webGLRenderStyle === 2 || useCache) {\t\t\t// BITMAP / Cached Canvas\n\t\t\t\timage = (ignoreCache?false:item.cacheCanvas) || item.image;\n\t\t\t} else if (item._webGLRenderStyle === 1) {\t\t\t\t\t\t\t\t\t\t\t// SPRITE\n\t\t\t\tframe = item.spriteSheet.getFrame(item.currentFrame);\t//TODO: Faster way?\n\t\t\t\tif (frame === null) { continue; }\n\t\t\t\timage = frame.image;\n\t\t\t} else {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// MISC (DOM objects render themselves later)\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar uvs = this._uvs;\n\t\t\tvar vertices = this._vertices;\n\t\t\tvar texI = this._indices;\n\t\t\tvar alphas = this._alphas;\n\n\t\t\t// calculate texture\n\t\t\tif (!image) { continue; }\n\t\t\tif (image._storeID === undefined) {\n\t\t\t\t// this texture is new to us so load it and add it to the batch\n\t\t\t\ttexture = this._loadTextureImage(gl, image);\n\t\t\t\tthis._insertTextureInBatch(gl, texture);\n\t\t\t} else {\n\t\t\t\t// fetch the texture (render textures know how to look themselves up to simplify this logic)\n\t\t\t\ttexture = this._textureDictionary[image._storeID];\n\t\t\t\tif (!texture){\n\t\t\t\t\tif (this.vocalDebug){ console.log(\"Texture should not be looked up while not being stored.\"); }\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// put it in the batch if needed\n\t\t\t\tif (texture._batchID !== this._batchID) {\n\t\t\t\t\tthis._insertTextureInBatch(gl, texture);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttexIndex = texture._activeIndex;\n\n\t\t\tif (item._webGLRenderStyle === 2 || useCache) {\t\t\t// BITMAP / Cached Canvas\n\t\t\t\tif (!useCache && item.sourceRect) {\n\t\t\t\t\t// calculate uvs\n\t\t\t\t\tif (!item._uvRect) { item._uvRect = {}; }\n\t\t\t\t\tsrc = item.sourceRect;\n\t\t\t\t\tuvRect = item._uvRect;\n\t\t\t\t\tuvRect.t = (src.y)/image.height;\n\t\t\t\t\tuvRect.l = (src.x)/image.width;\n\t\t\t\t\tuvRect.b = (src.y + src.height)/image.height;\n\t\t\t\t\tuvRect.r = (src.x + src.width)/image.width;\n\n\t\t\t\t\t// calculate vertices\n\t\t\t\t\tsubL = 0;\t\t\t\t\t\t\tsubT = 0;\n\t\t\t\t\tsubR = src.width+subL;\t\t\t\tsubB = src.height+subT;\n\t\t\t\t} else {\n\t\t\t\t\t// calculate uvs\n\t\t\t\t\tuvRect = StageGL.UV_RECT;\n\t\t\t\t\t// calculate vertices\n\t\t\t\t\tif (useCache) {\n\t\t\t\t\t\tsrc = item.bitmapCache;\n\t\t\t\t\t\tsubL = src.x+(src._filterOffX/src.scale);\tsubT = src.y+(src._filterOffY/src.scale);\n\t\t\t\t\t\tsubR = (src._drawWidth/src.scale)+subL;\t\tsubB = (src._drawHeight/src.scale)+subT;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsubL = 0;\t\t\t\t\t\tsubT = 0;\n\t\t\t\t\t\tsubR = image.width+subL;\t\tsubB = image.height+subT;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (item._webGLRenderStyle === 1) {\t\t\t\t\t\t\t\t\t\t\t// SPRITE\n\t\t\t\tvar rect = frame.rect;\n\n\t\t\t\t// calculate uvs\n\t\t\t\tuvRect = frame.uvRect;\n\t\t\t\tif (!uvRect) {\n\t\t\t\t\tuvRect = StageGL.buildUVRects(item.spriteSheet, item.currentFrame, false);\n\t\t\t\t}\n\n\t\t\t\t// calculate vertices\n\t\t\t\tsubL = -frame.regX;\t\t\t\t\t\t\t\tsubT = -frame.regY;\n\t\t\t\tsubR = rect.width-frame.regX;\t\t\t\t\tsubB = rect.height-frame.regY;\n\t\t\t}\n\n\t\t\t// These must be calculated here else a forced draw might happen after they're set\n\t\t\tvar offV1 = this.batchCardCount*StageGL.INDICIES_PER_CARD;\t\t// offset for 1 component vectors\n\t\t\tvar offV2 = offV1*2;\t\t\t\t\t\t\t\t\t\t\t// offset for 2 component vectors\n\n\t\t\t//DHG: See Matrix2D.transformPoint for why this math specifically\n\t\t\t// apply vertices\n\t\t\tvertices[offV2] =\t\tsubL *iMtx.a + subT *iMtx.c +iMtx.tx;\t\tvertices[offV2+1] =\t\tsubL *iMtx.b + subT *iMtx.d +iMtx.ty;\n\t\t\tvertices[offV2+2] =\t\tsubL *iMtx.a + subB *iMtx.c +iMtx.tx;\t\tvertices[offV2+3] =\t\tsubL *iMtx.b + subB *iMtx.d +iMtx.ty;\n\t\t\tvertices[offV2+4] =\t\tsubR *iMtx.a + subT *iMtx.c +iMtx.tx;\t\tvertices[offV2+5] =\t\tsubR *iMtx.b + subT *iMtx.d +iMtx.ty;\n\t\t\tvertices[offV2+6] =\t\tvertices[offV2+2];\t\t\t\t\t\t\tvertices[offV2+7] =\t\tvertices[offV2+3];\n\t\t\tvertices[offV2+8] =\t\tvertices[offV2+4];\t\t\t\t\t\t\tvertices[offV2+9] =\t\tvertices[offV2+5];\n\t\t\tvertices[offV2+10] =\tsubR *iMtx.a + subB *iMtx.c +iMtx.tx;\t\tvertices[offV2+11] =\tsubR *iMtx.b + subB *iMtx.d +iMtx.ty;\n\n\t\t\t// apply uvs\n\t\t\tuvs[offV2] =\tuvRect.l;\t\t\tuvs[offV2+1] =\tuvRect.t;\n\t\t\tuvs[offV2+2] =\tuvRect.l;\t\t\tuvs[offV2+3] =\tuvRect.b;\n\t\t\tuvs[offV2+4] =\tuvRect.r;\t\t\tuvs[offV2+5] =\tuvRect.t;\n\t\t\tuvs[offV2+6] =\tuvRect.l;\t\t\tuvs[offV2+7] =\tuvRect.b;\n\t\t\tuvs[offV2+8] =\tuvRect.r;\t\t\tuvs[offV2+9] =\tuvRect.t;\n\t\t\tuvs[offV2+10] =\tuvRect.r;\t\t\tuvs[offV2+11] =\tuvRect.b;\n\n\t\t\t// apply texture\n\t\t\ttexI[offV1] = texI[offV1+1] = texI[offV1+2] = texI[offV1+3] = texI[offV1+4] = texI[offV1+5] = texIndex;\n\n\t\t\t// apply alpha\n\t\t\talphas[offV1] = alphas[offV1+1] = alphas[offV1+2] = alphas[offV1+3] = alphas[offV1+4] = alphas[offV1+5] = item.alpha * concatAlpha;\n\n\t\t\tthis.batchCardCount++;\n\t\t}\n\t};\n\n\t/**\n\t * Draws all the currently defined cards in the buffer to the render surface.\n\t * @method _drawBuffers\n\t * @param {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @protected\n\t */\n\tp._drawBuffers = function (gl) {\n\t\tif (this.batchCardCount <= 0) { return; }\t// prevents error logs on stages filled with un-renederable content.\n\n\t\tif (this.vocalDebug) {\n\t\t\tconsole.log(\"Draw[\"+ this._drawID +\":\"+ this._batchID +\"] : \"+ this.batchReason);\n\t\t}\n\t\tvar shaderProgram = this._activeShader;\n\t\tvar vertexPositionBuffer = this._vertexPositionBuffer;\n\t\tvar textureIndexBuffer = this._textureIndexBuffer;\n\t\tvar uvPositionBuffer = this._uvPositionBuffer;\n\t\tvar alphaBuffer = this._alphaBuffer;\n\n\t\tgl.useProgram(shaderProgram);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexPositionBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, vertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, this._vertices);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, textureIndexBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.textureIndexAttribute, textureIndexBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, this._indices);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, uvPositionBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.uvPositionAttribute, uvPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, this._uvs);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, alphaBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.alphaAttribute, alphaBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, this._alphas);\n\n\t\tgl.uniformMatrix4fv(shaderProgram.pMatrixUniform, gl.FALSE, this._projectionMatrix);\n\n\t\tfor (var i = 0; i < this._batchTextureCount; i++) {\n\t\t\tvar texture = this._batchTextures[i];\n\t\t\tgl.activeTexture(gl.TEXTURE0 + i);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\t\tthis.setTextureParams(gl, texture.isPOT);\n\t\t}\n\n\t\tgl.drawArrays(gl.TRIANGLES, 0, this.batchCardCount*StageGL.INDICIES_PER_CARD);\n\t\tthis._batchID++;\n\t};\n\n\t/**\n\t * Draws a card that covers the entire render surface. Mainly used for filters.\n\t * @method _drawBuffers\n\t * @param {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param {Boolean} flipY Covers are used for things like RenderTextures and because of 3D vs Canvas space this can\n\t * end up meaning the `y` space sometimes requires flipping in the render.\n\t * @protected\n\t */\n\tp._drawCover = function (gl, flipY) {\n\t\tif (this._isDrawing > 0) {\n\t\t\tthis._drawBuffers(gl);\n\t\t}\n\n\t\tif (this.vocalDebug) {\n\t\t\tconsole.log(\"Draw[\"+ this._drawID +\":\"+ this._batchID +\"] : \"+ \"Cover\");\n\t\t}\n\t\tvar shaderProgram = this._activeShader;\n\t\tvar vertexPositionBuffer = this._vertexPositionBuffer;\n\t\tvar uvPositionBuffer = this._uvPositionBuffer;\n\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\tgl.useProgram(shaderProgram);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexPositionBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, vertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, StageGL.COVER_VERT);\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, uvPositionBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.uvPositionAttribute, uvPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, flipY?StageGL.COVER_UV_FLIP:StageGL.COVER_UV);\n\n\t\tgl.uniform1i(shaderProgram.samplerUniform, 0);\n\t\tgl.uniform1f(shaderProgram.uprightUniform, flipY?0:1);\n\n\t\tgl.drawArrays(gl.TRIANGLES, 0, StageGL.INDICIES_PER_CARD);\n\t};\n\n\tcreatejs.StageGL = createjs.promote(StageGL, \"Stage\");\n}());\n\n//##############################################################################\n// Bitmap.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\n\t/**\n\t * A Bitmap represents an Image, Canvas, or Video in the display list. A Bitmap can be instantiated using an existing\n\t * HTML element, or a string.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \tvar bitmap = new createjs.Bitmap(\"imagePath.jpg\");\n\t *\n\t * <strong>Notes:</strong>\n\t * <ol>\n\t * \t<li>When using a video source that may loop or seek, use a {{#crossLink \"VideoBuffer\"}}{{/crossLink}} object to\n\t * \t prevent blinking / flashing.\n\t * \t<li>When a string path or image tag that is not yet loaded is used, the stage may need to be redrawn before it\n\t * \t will be displayed.</li>\n\t * \t<li>Bitmaps with an SVG source currently will not respect an alpha value other than 0 or 1. To get around this,\n\t * \tthe Bitmap can be cached.</li>\n\t * \t<li>Bitmaps with an SVG source will taint the canvas with cross-origin data, which prevents interactivity. This\n\t * \thappens in all browsers except recent Firefox builds.</li>\n\t * \t<li>Images loaded cross-origin will throw cross-origin security errors when interacted with using a mouse, using\n\t * \tmethods such as `getObjectUnderPoint`, or using filters, or caching. You can get around this by setting\n\t * \t`crossOrigin` flags on your images before passing them to EaselJS, eg: `img.crossOrigin=\"Anonymous\";`</li>\n\t * </ol>\n\t *\n\t * @class Bitmap\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {CanvasImageSource | String | Object} imageOrUri The source image to display. This can be a CanvasImageSource\n\t * (image, video, canvas), an object with a `getImage` method that returns a CanvasImageSource, or a string URL to an image.\n\t * If the latter, a new Image instance with the URL as its src will be used.\n\t **/\n\tfunction Bitmap(imageOrUri) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The source image to display. This can be a CanvasImageSource\n\t\t * (image, video, canvas), an object with a `getImage` method that returns a CanvasImageSource, or a string URL to an image.\n\t\t * If the latter, a new Image instance with the URL as its src will be used.\n\t\t * @property image\n\t\t * @type CanvasImageSource | Object\n\t\t **/\n\t\tif (typeof imageOrUri == \"string\") {\n\t\t\tthis.image = document.createElement(\"img\");\n\t\t\tthis.image.src = imageOrUri;\n\t\t} else {\n\t\t\tthis.image = imageOrUri;\n\t\t}\n\t\n\t\t/**\n\t\t * Specifies an area of the source image to draw. If omitted, the whole image will be drawn.\n\t\t * Notes:\n\t\t * <ul>\n\t\t *     <li>that video sources must have a width / height set to work correctly with `sourceRect`</li>\n\t\t *     <li>Cached objects will ignore the `sourceRect` property</li>\n\t\t * </ul>\n\t\t * @property sourceRect\n\t\t * @type Rectangle\n\t\t * @default null\n\t\t */\n\t\tthis.sourceRect = null;\n\n\t// private properties:\n\t\t/**\n\t\t * Docced in superclass.\n\t\t */\n\t\tthis._webGLRenderStyle = createjs.DisplayObject._StageGL_BITMAP;\n\t}\n\tvar p = createjs.extend(Bitmap, createjs.DisplayObject);\n\t\n\t\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Bitmap; // TODO: deprecated.\n\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar image = this.image;\n\t\tvar hasContent = this.cacheCanvas || (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tvar img = this.image, rect = this.sourceRect;\n\t\tif (img.getImage) { img = img.getImage(); }\n\t\tif (!img) { return true; }\n\t\tif (rect) {\n\t\t\t// some browsers choke on out of bound values, so we'll fix them:\n\t\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1 + rect.width, y2 = y1 + rect.height, x = 0, y = 0, w = img.width, h = img.height;\n\t\t\tif (x1 < 0) { x -= x1; x1 = 0; }\n\t\t\tif (x2 > w) { x2 = w; }\n\t\t\tif (y1 < 0) { y -= y1; y1 = 0; }\n\t\t\tif (y2 > h) { y2 = h; }\n\t\t\tctx.drawImage(img, x1, y1, x2-x1, y2-y1, x, y, x2-x1, y2-y1);\n\t\t} else {\n\t\t\tctx.drawImage(img, 0, 0);\n\t\t}\n\t\treturn true;\n\t};\n\t\n\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n\t//Bitmap. This is why they have no method implementations.\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method cache\n\t **/\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method updateCache\n\t **/\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method uncache\n\t **/\n\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\tvar rect = this.DisplayObject_getBounds();\n\t\tif (rect) { return rect; }\n\t\tvar image = this.image, o = this.sourceRect || image;\n\t\tvar hasContent = (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\n\t\treturn hasContent ? this._rectangle.setValues(0, 0, o.width, o.height) : null;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Bitmap instance.\n\t * @method clone\n\t * @param {Boolean} node Whether the underlying dom element should be cloned as well.\n\t * @return {Bitmap} a clone of the Bitmap instance.\n\t **/\n\tp.clone = function(node) {\n\t\tvar image = this.image;\n\t\tif(image && node){ image = image.cloneNode(); }\n\t\tvar o = new Bitmap(image);\n\t\tif (this.sourceRect) { o.sourceRect = this.sourceRect.clone(); }\n\t\tthis._cloneProps(o);\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Bitmap (name=\"+  this.name +\")]\";\n\t};\n\n\t\n\tcreatejs.Bitmap = createjs.promote(Bitmap, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Sprite.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Displays a frame or sequence of frames (ie. an animation) from a SpriteSheet instance. A sprite sheet is a series of\n\t * images (usually animation frames) combined into a single image. For example, an animation consisting of 8 100x100\n\t * images could be combined into a 400x200 sprite sheet (4 frames across by 2 high). You can display individual frames,\n\t * play frames as an animation, and even sequence animations together.\n\t *\n\t * See the {{#crossLink \"SpriteSheet\"}}{{/crossLink}} class for more information on setting up frames and animations.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var instance = new createjs.Sprite(spriteSheet);\n\t *      instance.gotoAndStop(\"frameName\");\n\t *\n\t * Until {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} is called,\n\t * only the first defined frame defined in the sprite sheet will be displayed.\n\t *\n\t * @class Sprite\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to play back. This includes the source image(s), frame\n\t * dimensions, and frame data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n\t * @param {String|Number} [frameOrAnimation] The frame number or animation to play initially.\n\t **/\n\tfunction Sprite(spriteSheet, frameOrAnimation) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The frame index that will be drawn when draw is called. Note that with some {{#crossLink \"SpriteSheet\"}}{{/crossLink}}\n\t\t * definitions, this will advance non-sequentially. This will always be an integer value.\n\t\t * @property currentFrame\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @readonly\n\t\t **/\n\t\tthis.currentFrame = 0;\n\t\n\t\t/**\n\t\t * Returns the name of the currently playing animation.\n\t\t * @property currentAnimation\n\t\t * @type {String}\n\t\t * @final\n\t\t * @readonly\n\t\t **/\n\t\tthis.currentAnimation = null;\n\t\n\t\t/**\n\t\t * Prevents the animation from advancing each tick automatically. For example, you could create a sprite\n\t\t * sheet of icons, set paused to true, and display the appropriate icon by setting <code>currentFrame</code>.\n\t\t * @property paused\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis.paused = true;\n\t\n\t\t/**\n\t\t * The SpriteSheet instance to play back. This includes the source image, frame dimensions, and frame\n\t\t * data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n\t\t * @property spriteSheet\n\t\t * @type {SpriteSheet}\n\t\t * @readonly\n\t\t **/\n\t\tthis.spriteSheet = spriteSheet;\n\t\n\t\t/**\n\t\t * Specifies the current frame index within the currently playing animation. When playing normally, this will increase\n\t\t * from 0 to n-1, where n is the number of frames in the current animation.\n\t\t *\n\t\t * This could be a non-integer value if\n\t\t * using time-based playback (see {{#crossLink \"Sprite/framerate\"}}{{/crossLink}}, or if the animation's speed is\n\t\t * not an integer.\n\t\t * @property currentAnimationFrame\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.currentAnimationFrame = 0;\n\t\n\t\t/**\n\t\t * By default Sprite instances advance one frame per tick. Specifying a framerate for the Sprite (or its related\n\t\t * SpriteSheet) will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n\t\t * framerate.\n\t\t *\n\t\t * For example, if a Sprite with a framerate of 10 is placed on a Stage being updated at 40fps, then the Sprite will\n\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n\t\t * vary slightly between frames.\n\t\t *\n\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t * @property framerate\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.framerate = 0;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * Current animation object.\n\t\t * @property _animation\n\t\t * @protected\n\t\t * @type {Object}\n\t\t * @default null\n\t\t **/\n\t\tthis._animation = null;\n\t\n\t\t/**\n\t\t * Current frame index.\n\t\t * @property _currentFrame\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default null\n\t\t **/\n\t\tthis._currentFrame = null;\n\t\t\n\t\t/**\n\t\t * Skips the next auto advance. Used by gotoAndPlay to avoid immediately jumping to the next frame\n\t\t * @property _skipAdvance\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis._skipAdvance = false;\n\n\t\t/**\n\t\t * Docced in superclass.\n\t\t */\n\t\tthis._webGLRenderStyle = createjs.DisplayObject._StageGL_SPRITE;\n\n\t\tif (frameOrAnimation != null) { this.gotoAndPlay(frameOrAnimation); }\n\t}\n\tvar p = createjs.extend(Sprite, createjs.DisplayObject);\n\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Sprite; // TODO: Deprecated. This is for backwards support of Flash/Animate spritesheet export.\n\n\n// events:\n\t/**\n\t * Dispatched when an animation reaches its ends.\n\t * @event animationend\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {String} name The name of the animation that just ended.\n\t * @param {String} next The name of the next animation that will be played, or null. This will be the same as name if the animation is looping.\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * Dispatched any time the current frame changes. For example, this could be due to automatic advancement on a tick,\n\t * or calling gotoAndPlay() or gotoAndStop().\n\t * @event change\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t */\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || this.spriteSheet.complete;\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis._normalizeFrame();\n\t\tvar o = this.spriteSheet.getFrame(this._currentFrame|0);\n\t\tif (!o) { return false; }\n\t\tvar rect = o.rect;\n\t\tif (rect.width && rect.height) { ctx.drawImage(o.image, rect.x, rect.y, rect.width, rect.height, -o.regX, -o.regY, rect.width, rect.height); }\n\t\treturn true;\n\t};\n\n\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n\t//Bitmap. This is why they have no method implementations.\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method cache\n\t **/\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method updateCache\n\t **/\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method uncache\n\t **/\n\n\t/**\n\t * Play (unpause) the current animation. The Sprite will be paused if either {{#crossLink \"Sprite/stop\"}}{{/crossLink}}\n\t * or {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} is called. Single frame animations will remain\n\t * unchanged.\n\t * @method play\n\t **/\n\tp.play = function() {\n\t\tthis.paused = false;\n\t};\n\n\t/**\n\t * Stop playing a running animation. The Sprite will be playing if {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}\n\t * is called. Note that calling {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} or {{#crossLink \"Sprite/play\"}}{{/crossLink}}\n\t * will resume playback.\n\t * @method stop\n\t **/\n\tp.stop = function() {\n\t\tthis.paused = true;\n\t};\n\n\t/**\n\t * Sets paused to false and plays the specified animation name, named frame, or frame number.\n\t * @method gotoAndPlay\n\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n\t * and begin playing.\n\t **/\n\tp.gotoAndPlay = function(frameOrAnimation) {\n\t\tthis.paused = false;\n\t\tthis._skipAdvance = true;\n\t\tthis._goto(frameOrAnimation);\n\t};\n\n\t/**\n\t * Sets paused to true and seeks to the specified animation name, named frame, or frame number.\n\t * @method gotoAndStop\n\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n\t * and stop.\n\t **/\n\tp.gotoAndStop = function(frameOrAnimation) {\n\t\tthis.paused = true;\n\t\tthis._goto(frameOrAnimation);\n\t};\n\n\t/**\n\t * Advances the playhead. This occurs automatically each tick by default.\n\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set on the Sprite\n\t * or its SpriteSheet.\n\t * @method advance\n\t*/\n\tp.advance = function(time) {\n\t\tvar fps = this.framerate || this.spriteSheet.framerate;\n\t\tvar t = (fps && time != null) ? time/(1000/fps) : 1;\n\t\tthis._normalizeFrame(t);\n\t};\n\t\n\t/**\n\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the current frame relative to\n\t * the origin. For example, a 90 x 70 frame with <code>regX=50</code> and <code>regY=40</code> would return a\n\t * rectangle with [x=-50, y=-40, width=90, height=70]. This ignores transformations on the display object.\n\t *\n\t * Also see the SpriteSheet {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}} method.\n\t * @method getBounds\n\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully\n\t * loaded.\n\t **/\n\tp.getBounds = function() {\n\t\t// TODO: should this normalizeFrame?\n\t\treturn this.DisplayObject_getBounds() || this.spriteSheet.getFrameBounds(this.currentFrame, this._rectangle);\n\t};\n\n\t/**\n\t * Returns a clone of the Sprite instance. Note that the same SpriteSheet is shared between cloned\n\t * instances.\n\t * @method clone\n\t * @return {Sprite} a clone of the Sprite instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new Sprite(this.spriteSheet));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Sprite (name=\"+  this.name +\")]\";\n\t};\n\n// private methods:\n\t/**\n\t * @method _cloneProps\n\t * @param {Sprite} o\n\t * @return {Sprite} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.DisplayObject__cloneProps(o);\n\t\to.currentFrame = this.currentFrame;\n\t\to.currentAnimation = this.currentAnimation;\n\t\to.paused = this.paused;\n\t\to.currentAnimationFrame = this.currentAnimationFrame;\n\t\to.framerate = this.framerate;\n\t\t\n\t\to._animation = this._animation;\n\t\to._currentFrame = this._currentFrame;\n\t\to._skipAdvance = this._skipAdvance;\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * Advances the <code>currentFrame</code> if paused is not true. This is called automatically when the {{#crossLink \"Stage\"}}{{/crossLink}}\n\t * ticks.\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * @protected\n\t * @method _tick\n\t **/\n\tp._tick = function(evtObj) {\n\t\tif (!this.paused) {\n\t\t\tif (!this._skipAdvance) { this.advance(evtObj&&evtObj.delta); }\n\t\t\tthis._skipAdvance = false;\n\t\t}\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\n\n\t/**\n\t * Normalizes the current frame, advancing animations and dispatching callbacks as appropriate.\n\t * @protected\n\t * @method _normalizeFrame\n\t **/\n\tp._normalizeFrame = function(frameDelta) {\n\t\tframeDelta = frameDelta || 0;\n\t\tvar animation = this._animation;\n\t\tvar paused = this.paused;\n\t\tvar frame = this._currentFrame;\n\t\tvar l;\n\t\t\n\t\tif (animation) {\n\t\t\tvar speed = animation.speed || 1;\n\t\t\tvar animFrame = this.currentAnimationFrame;\n\t\t\tl = animation.frames.length;\n\t\t\tif (animFrame + frameDelta * speed >= l) {\n\t\t\t\tvar next = animation.next;\n\t\t\t\tif (this._dispatchAnimationEnd(animation, frame, paused, next, l - 1)) {\n\t\t\t\t\t// something changed in the event stack, so we shouldn't make any more changes here.\n\t\t\t\t\treturn;\n\t\t\t\t} else if (next) {\n\t\t\t\t\t// sequence. Automatically calls _normalizeFrame again with the remaining frames.\n\t\t\t\t\treturn this._goto(next, frameDelta - (l - animFrame) / speed);\n\t\t\t\t} else {\n\t\t\t\t\t// end.\n\t\t\t\t\tthis.paused = true;\n\t\t\t\t\tanimFrame = animation.frames.length - 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tanimFrame += frameDelta * speed;\n\t\t\t}\n\t\t\tthis.currentAnimationFrame = animFrame;\n\t\t\tthis._currentFrame = animation.frames[animFrame | 0]\n\t\t} else {\n\t\t\tframe = (this._currentFrame += frameDelta);\n\t\t\tl = this.spriteSheet.getNumFrames();\n\t\t\tif (frame >= l && l > 0) {\n\t\t\t\tif (!this._dispatchAnimationEnd(animation, frame, paused, l - 1)) {\n\t\t\t\t\t// looped.\n\t\t\t\t\tif ((this._currentFrame -= l) >= l) { return this._normalizeFrame(); }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tframe = this._currentFrame | 0;\n\t\tif (this.currentFrame != frame) {\n\t\t\tthis.currentFrame = frame;\n\t\t\tthis.dispatchEvent(\"change\");\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the \"animationend\" event. Returns true if a handler changed the animation (ex. calling {{#crossLink \"Sprite/stop\"}}{{/crossLink}},\n\t * {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}, etc.)\n\t * @property _dispatchAnimationEnd\n\t * @private\n\t * @type {Function}\n\t **/\n\tp._dispatchAnimationEnd = function(animation, frame, paused, next, end) {\n\t\tvar name = animation ? animation.name : null;\n\t\tif (this.hasEventListener(\"animationend\")) {\n\t\t\tvar evt = new createjs.Event(\"animationend\");\n\t\t\tevt.name = name;\n\t\t\tevt.next = next;\n\t\t\tthis.dispatchEvent(evt);\n\t\t}\n\t\t// did the animation get changed in the event stack?:\n\t\tvar changed = (this._animation != animation || this._currentFrame != frame);\n\t\t// if the animation hasn't changed, but the sprite was paused, then we want to stick to the last frame:\n\t\tif (!changed && !paused && this.paused) { this.currentAnimationFrame = end; changed = true; }\n\t\treturn changed;\n\t};\n\n\t/**\n\t * Moves the playhead to the specified frame number or animation.\n\t * @method _goto\n\t * @param {String|Number} frameOrAnimation The frame number or animation that the playhead should move to.\n\t * @param {Boolean} [frame] The frame of the animation to go to. Defaults to 0.\n\t * @protected\n\t **/\n\tp._goto = function(frameOrAnimation, frame) {\n\t\tthis.currentAnimationFrame = 0;\n\t\tif (isNaN(frameOrAnimation)) {\n\t\t\tvar data = this.spriteSheet.getAnimation(frameOrAnimation);\n\t\t\tif (data) {\n\t\t\t\tthis._animation = data;\n\t\t\t\tthis.currentAnimation = frameOrAnimation;\n\t\t\t\tthis._normalizeFrame(frame);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.currentAnimation = this._animation = null;\n\t\t\tthis._currentFrame = frameOrAnimation;\n\t\t\tthis._normalizeFrame();\n\t\t}\n\t};\n\n\n\tcreatejs.Sprite = createjs.promote(Sprite, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Shape.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * A Shape allows you to display vector art in the display list. It composites a {{#crossLink \"Graphics\"}}{{/crossLink}}\n\t * instance which exposes all of the vector drawing methods. The Graphics instance can be shared between multiple Shape\n\t * instances to display the same vector graphics with different positions or transforms.\n\t *\n\t * If the vector art will not\n\t * change between draws, you may want to use the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method to reduce the\n\t * rendering cost.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var graphics = new createjs.Graphics().beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n\t *      var shape = new createjs.Shape(graphics);\n\t *\n\t *      //Alternatively use can also use the graphics property of the Shape class to renderer the same as above.\n\t *      var shape = new createjs.Shape();\n\t *      shape.graphics.beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n\t *\n\t * @class Shape\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {Graphics} graphics Optional. The graphics instance to display. If null, a new Graphics instance will be created.\n\t **/\n\tfunction Shape(graphics) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The graphics instance to display.\n\t\t * @property graphics\n\t\t * @type Graphics\n\t\t **/\n\t\tthis.graphics = graphics ? graphics : new createjs.Graphics();\n\t}\n\tvar p = createjs.extend(Shape, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the Shape would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the Shape would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.graphics && !this.graphics.isEmpty());\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the Shape into the specified context ignoring its visible, alpha, shadow, and transform. Returns true if\n\t * the draw was handled (useful for overriding functionality).\n\t *\n\t * <i>NOTE: This method is mainly for internal use, though it may be useful for advanced uses.</i>\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis.graphics.draw(ctx, this);\n\t\treturn true;\n\t};\n\n\t/**\n\t * Returns a clone of this Shape. Some properties that are specific to this instance's current context are reverted to\n\t * their defaults (for example .parent).\n\t * @method clone\n\t * @param {Boolean} recursive If true, this Shape's {{#crossLink \"Graphics\"}}{{/crossLink}} instance will also be\n\t * cloned. If false, the Graphics instance will be shared with the new Shape.\n\t **/\n\tp.clone = function(recursive) {\n\t\tvar g = (recursive && this.graphics) ? this.graphics.clone() : this.graphics;\n\t\treturn  this._cloneProps(new Shape(g));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Shape (name=\"+  this.name +\")]\";\n\t};\n\n\n\tcreatejs.Shape = createjs.promote(Shape, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Text.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Display one or more lines of dynamic text (not user editable) in the display list. Line wrapping support (using the\n\t * lineWidth) is very basic, wrapping on spaces and tabs only. Note that as an alternative to Text, you can position HTML\n\t * text above or below the canvas relative to items in the display list using the {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n\t * method, or using {{#crossLink \"DOMElement\"}}{{/crossLink}}.\n\t *\n\t * <b>Please note that Text does not support HTML text, and can only display one font style at a time.</b> To use\n\t * multiple font styles, you will need to create multiple text instances, and position them manually.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var text = new createjs.Text(\"Hello World\", \"20px Arial\", \"#ff7700\");\n\t *      text.x = 100;\n\t *      text.textBaseline = \"alphabetic\";\n\t *\n\t * CreateJS Text supports web fonts (the same rules as Canvas). The font must be loaded and supported by the browser\n\t * before it can be displayed.\n\t *\n\t * <strong>Note:</strong> Text can be expensive to generate, so cache instances where possible. Be aware that not all\n\t * browsers will render Text exactly the same.\n\t * @class Text\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {String} [text] The text to display.\n\t * @param {String} [font] The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold\n\t * 36px Arial\").\n\t * @param {String} [color] The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex.\n\t * \"#F00\", \"red\", or \"#FF0000\").\n\t **/\n\tfunction Text(text, font, color) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The text to display.\n\t\t * @property text\n\t\t * @type String\n\t\t **/\n\t\tthis.text = text;\n\t\n\t\t/**\n\t\t * The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold 36px Arial\").\n\t\t * @property font\n\t\t * @type String\n\t\t **/\n\t\tthis.font = font;\n\t\n\t\t/**\n\t\t * The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex. \"#F00\"). Default is \"#000\".\n\t\t * It will also accept valid canvas fillStyle values.\n\t\t * @property color\n\t\t * @type String\n\t\t **/\n\t\tthis.color = color;\n\t\n\t\t/**\n\t\t * The horizontal text alignment. Any of \"start\", \"end\", \"left\", \"right\", and \"center\". For detailed\n\t\t * information view the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>. Default is \"left\".\n\t\t * @property textAlign\n\t\t * @type String\n\t\t **/\n\t\tthis.textAlign = \"left\";\n\t\n\t\t/**\n\t\t * The vertical alignment point on the font. Any of \"top\", \"hanging\", \"middle\", \"alphabetic\", \"ideographic\", or\n\t\t * \"bottom\". For detailed information view the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>. Default is \"top\".\n\t\t * @property textBaseline\n\t\t * @type String\n\t\t*/\n\t\tthis.textBaseline = \"top\";\n\t\n\t\t/**\n\t\t * The maximum width to draw the text. If maxWidth is specified (not null), the text will be condensed or\n\t\t * shrunk to make it fit in this width. For detailed information view the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>.\n\t\t * @property maxWidth\n\t\t * @type Number\n\t\t*/\n\t\tthis.maxWidth = null;\n\t\n\t\t/**\n\t\t * If greater than 0, the text will be drawn as a stroke (outline) of the specified width.\n\t\t * @property outline\n\t\t * @type Number\n\t\t **/\n\t\tthis.outline = 0;\n\t\n\t\t/**\n\t\t * Indicates the line height (vertical distance between baselines) for multi-line text. If null or 0,\n\t\t * the value of getMeasuredLineHeight is used.\n\t\t * @property lineHeight\n\t\t * @type Number\n\t\t **/\n\t\tthis.lineHeight = 0;\n\t\n\t\t/**\n\t\t * Indicates the maximum width for a line of text before it is wrapped to multiple lines. If null,\n\t\t * the text will not be wrapped.\n\t\t * @property lineWidth\n\t\t * @type Number\n\t\t **/\n\t\tthis.lineWidth = null;\n\t}\n\tvar p = createjs.extend(Text, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t\n// static properties:\n\t/**\n\t * @property _workingContext\n\t * @type CanvasRenderingContext2D\n\t * @private\n\t **/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():ww&&document.createElement(\"canvas\"));\n\tif (canvas.getContext) { Text._workingContext = canvas.getContext(\"2d\"); canvas.width = canvas.height = 1; }\n\t\n\t\n// constants:\n\t/**\n\t * Lookup table for the ratio to offset bounds x calculations based on the textAlign property.\n\t * @property H_OFFSETS\n\t * @type Object\n\t * @protected\n\t * @static\n\t **/\n\tText.H_OFFSETS = {start: 0, left: 0, center: -0.5, end: -1, right: -1};\n\t\n\t/**\n\t * Lookup table for the ratio to offset bounds y calculations based on the textBaseline property.\n\t * @property H_OFFSETS\n\t * @type Object\n\t * @protected\n\t * @static\n\t **/\n\tText.V_OFFSETS = {top: 0, hanging: -0.01, middle: -0.4, alphabetic: -0.8, ideographic: -0.85, bottom: -1};\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.text != null && this.text !== \"\");\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the Text into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\n\t\tvar col = this.color || \"#000\";\n\t\tif (this.outline) { ctx.strokeStyle = col; ctx.lineWidth = this.outline*1; }\n\t\telse { ctx.fillStyle = col; }\n\t\t\n\t\tthis._drawText(this._prepContext(ctx));\n\t\treturn true;\n\t};\n\n\t/**\n\t * Returns the measured, untransformed width of the text without wrapping. Use getBounds for a more robust value.\n\t * @method getMeasuredWidth\n\t * @return {Number} The measured, untransformed width of the text.\n\t **/\n\tp.getMeasuredWidth = function() {\n\t\treturn this._getMeasuredWidth(this.text);\n\t};\n\n\t/**\n\t * Returns an approximate line height of the text, ignoring the lineHeight property. This is based on the measured\n\t * width of a \"M\" character multiplied by 1.2, which provides an approximate line height for most fonts.\n\t * @method getMeasuredLineHeight\n\t * @return {Number} an approximate line height of the text, ignoring the lineHeight property. This is\n\t * based on the measured width of a \"M\" character multiplied by 1.2, which approximates em for most fonts.\n\t **/\n\tp.getMeasuredLineHeight = function() {\n\t\treturn this._getMeasuredWidth(\"M\")*1.2;\n\t};\n\n\t/**\n\t * Returns the approximate height of multi-line text by multiplying the number of lines against either the\n\t * <code>lineHeight</code> (if specified) or {{#crossLink \"Text/getMeasuredLineHeight\"}}{{/crossLink}}. Note that\n\t * this operation requires the text flowing logic to run, which has an associated CPU cost.\n\t * @method getMeasuredHeight\n\t * @return {Number} The approximate height of the untransformed multi-line text.\n\t **/\n\tp.getMeasuredHeight = function() {\n\t\treturn this._drawText(null,{}).height;\n\t};\n\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\tvar rect = this.DisplayObject_getBounds();\n\t\tif (rect) { return rect; }\n\t\tif (this.text == null || this.text === \"\") { return null; }\n\t\tvar o = this._drawText(null, {});\n\t\tvar w = (this.maxWidth && this.maxWidth < o.width) ? this.maxWidth : o.width;\n\t\tvar x = w * Text.H_OFFSETS[this.textAlign||\"left\"];\n\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\n\t\tvar y = lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\n\t\treturn this._rectangle.setValues(x, y, w, o.height);\n\t};\n\t\n\t/**\n\t * Returns an object with width, height, and lines properties. The width and height are the visual width and height\n\t * of the drawn text. The lines property contains an array of strings, one for\n\t * each line of text that will be drawn, accounting for line breaks and wrapping. These strings have trailing\n\t * whitespace removed.\n\t * @method getMetrics\n\t * @return {Object} An object with width, height, and lines properties.\n\t **/\n\tp.getMetrics = function() {\n\t\tvar o = {lines:[]};\n\t\to.lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n\t\to.vOffset = o.lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\n\t\treturn this._drawText(null, o, o.lines);\n\t};\n\n\t/**\n\t * Returns a clone of the Text instance.\n\t * @method clone\n\t * @return {Text} a clone of the Text instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new Text(this.text, this.font, this.color));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Text (text=\"+  (this.text.length > 20 ? this.text.substr(0, 17)+\"...\" : this.text) +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _cloneProps\n\t * @param {Text} o\n\t * @protected\n\t * @return {Text} o\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.DisplayObject__cloneProps(o);\n\t\to.textAlign = this.textAlign;\n\t\to.textBaseline = this.textBaseline;\n\t\to.maxWidth = this.maxWidth;\n\t\to.outline = this.outline;\n\t\to.lineHeight = this.lineHeight;\n\t\to.lineWidth = this.lineWidth;\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _getWorkingContext\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @return {CanvasRenderingContext2D}\n\t * @protected\n\t **/\n\tp._prepContext = function(ctx) {\n\t\tctx.font = this.font||\"10px sans-serif\";\n\t\tctx.textAlign = this.textAlign||\"left\";\n\t\tctx.textBaseline = this.textBaseline||\"top\";\n\t\tctx.lineJoin = \"miter\";\n\t\tctx.miterLimit = 2.5;\n\t\treturn ctx;\n\t};\n\n\t/**\n\t * Draws multiline text.\n\t * @method _drawText\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {Object} o\n\t * @param {Array} lines\n\t * @return {Object}\n\t * @protected\n\t **/\n\tp._drawText = function(ctx, o, lines) {\n\t\tvar paint = !!ctx;\n\t\tif (!paint) {\n\t\t\tctx = Text._workingContext;\n\t\t\tctx.save();\n\t\t\tthis._prepContext(ctx);\n\t\t}\n\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\n\t\t\n\t\tvar maxW = 0, count = 0;\n\t\tvar hardLines = String(this.text).split(/(?:\\r\\n|\\r|\\n)/);\n\t\tfor (var i=0, l=hardLines.length; i<l; i++) {\n\t\t\tvar str = hardLines[i];\n\t\t\tvar w = null;\n\t\t\t\n\t\t\tif (this.lineWidth != null && (w = ctx.measureText(str).width) > this.lineWidth) {\n\t\t\t\t// text wrapping:\n\t\t\t\tvar words = str.split(/(\\s)/);\n\t\t\t\tstr = words[0];\n\t\t\t\tw = ctx.measureText(str).width;\n\t\t\t\t\n\t\t\t\tfor (var j=1, jl=words.length; j<jl; j+=2) {\n\t\t\t\t\t// Line needs to wrap:\n\t\t\t\t\tvar wordW = ctx.measureText(words[j] + words[j+1]).width;\n\t\t\t\t\tif (w + wordW > this.lineWidth) {\n\t\t\t\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\n\t\t\t\t\t\tif (lines) { lines.push(str); }\n\t\t\t\t\t\tif (w > maxW) { maxW = w; }\n\t\t\t\t\t\tstr = words[j+1];\n\t\t\t\t\t\tw = ctx.measureText(str).width;\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstr += words[j] + words[j+1];\n\t\t\t\t\t\tw += wordW;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\n\t\t\tif (lines) { lines.push(str); }\n\t\t\tif (o && w == null) { w = ctx.measureText(str).width; }\n\t\t\tif (w > maxW) { maxW = w; }\n\t\t\tcount++;\n\t\t}\n\t\t\n\t\tif (o) {\n\t\t\to.width = maxW;\n\t\t\to.height = count*lineHeight;\n\t\t}\n\t\tif (!paint) { ctx.restore(); }\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _drawTextLine\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {String} text\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tp._drawTextLine = function(ctx, text, y) {\n\t\t// Chrome 17 will fail to draw the text if the last param is included but null, so we feed it a large value instead:\n\t\tif (this.outline) { ctx.strokeText(text, 0, y, this.maxWidth||0xFFFF); }\n\t\telse { ctx.fillText(text, 0, y, this.maxWidth||0xFFFF); }\n\t};\n\t\n\t\n\t/**\n\t * @method _getMeasuredWidth\n\t * @param {String} text\n\t * @protected\n\t **/\n\tp._getMeasuredWidth = function(text) {\n\t\tvar ctx = Text._workingContext;\n\t\tctx.save();\n\t\tvar w = this._prepContext(ctx).measureText(text).width;\n\t\tctx.restore();\n\t\treturn w;\n\t};\n\n\n\tcreatejs.Text = createjs.promote(Text, \"DisplayObject\");\n}());\n\n//##############################################################################\n// BitmapText.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Displays text using bitmap glyphs defined in a sprite sheet. Multi-line text is supported using new line characters,\n\t * but automatic wrapping is not supported. See the {{#crossLink \"BitmapText/spriteSheet:property\"}}{{/crossLink}}\n\t * property for more information on defining glyphs.\n\t *\n\t * <strong>Important:</strong> While BitmapText extends Container, it is not designed to be used as one.\n\t * As such, methods like addChild and removeChild are disabled.\n\t *\n\t *\n\t * @class BitmapText\n\t * @extends DisplayObject\n\t * @param {String} [text=\"\"] The text to display.\n\t * @param {SpriteSheet} [spriteSheet=null] The spritesheet that defines the character glyphs.\n\t * @constructor\n\t **/\n\tfunction BitmapText(text, spriteSheet) {\n\t\tthis.Container_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The text to display.\n\t\t * @property text\n\t\t * @type String\n\t\t * @default \"\"\n\t\t **/\n\t\tthis.text = text||\"\";\n\t\t\n\t\t/**\n\t\t * A SpriteSheet instance that defines the glyphs for this bitmap text. Each glyph/character\n\t\t * should have a single frame animation defined in the sprite sheet named the same as\n\t\t * corresponding character. For example, the following animation definition:\n\t\t *\n\t\t * \t\t\"A\": {frames: [0]}\n\t\t *\n\t\t * would indicate that the frame at index 0 of the spritesheet should be drawn for the \"A\" character. The short form\n\t\t * is also acceptable:\n\t\t * \n\t\t * \t\t\"A\": 0\n\t\t *\n\t\t * Note that if a character in the text is not found in the sprite sheet, it will also\n\t\t * try to use the alternate case (upper or lower).\n\t\t *\n\t\t * See SpriteSheet for more information on defining sprite sheet data.\n\t\t * @property spriteSheet\n\t\t * @type SpriteSheet\n\t\t * @default null\n\t\t **/\n\t\tthis.spriteSheet = spriteSheet;\n\t\n\t\t/**\n\t\t * The height of each line of text. If 0, then it will use a line height calculated\n\t\t * by checking for the height of the \"1\", \"T\", or \"L\" character (in that order). If\n\t\t * those characters are not defined, it will use the height of the first frame of the\n\t\t * sprite sheet.\n\t\t * @property lineHeight\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.lineHeight = 0;\n\t\n\t\t/**\n\t\t * This spacing (in pixels) will be added after each character in the output.\n\t\t * @property letterSpacing\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.letterSpacing = 0;\n\t\n\t\t/**\n\t\t * If a space character is not defined in the sprite sheet, then empty pixels equal to\n\t\t * spaceWidth will be inserted instead. If 0, then it will use a value calculated\n\t\t * by checking for the width of the \"1\", \"l\", \"E\", or \"A\" character (in that order). If\n\t\t * those characters are not defined, it will use the width of the first frame of the\n\t\t * sprite sheet.\n\t\t * @property spaceWidth\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.spaceWidth = 0;\n\t\t\n\t\t\n\t// private properties:\n\t \t/**\n\t\t * @property _oldProps\n\t\t * @type Object\n\t\t * @protected\n\t\t **/\n\t\tthis._oldProps = {text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0};\n\n\t\t/**\n\t\t * Used to track the object which this class attached listeners to, helps optimize listener attachment.\n\t\t * @property _oldStage\n\t\t * @type Stage\n\t\t * @protected\n\t\t */\n\t\tthis._oldStage = null;\n\t\t/**\n\t\t * The event listener proxy triggered drawing draw for special circumstances.\n\t\t * @property _drawAction\n\t\t * @type function\n\t\t * @protected\n\t\t */\n\t\tthis._drawAction = null;\n\t}\n\tvar p = createjs.extend(BitmapText, createjs.Container);\n\n// static properties:\n\t/**\n\t * BitmapText uses Sprite instances to draw text. To reduce the creation and destruction of instances (and thus garbage collection), it maintains\n\t * an internal object pool of sprite instances to reuse. Increasing this value can cause more sprites to be\n\t * retained, slightly increasing memory use, but reducing instantiation.\n\t * @property maxPoolSize\n\t * @type Number\n\t * @static\n\t * @default 100\n\t **/\n\tBitmapText.maxPoolSize = 100;\n\t\n\t/**\n\t * Sprite object pool.\n\t * @type {Array}\n\t * @static\n\t * @private\n\t */\n\tBitmapText._spritePool = [];\n\n\t\n// public methods:\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return; }\n\t\tthis._updateState();\n\t\tthis.Container_draw(ctx, ignoreCache);\n\t};\n\t\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp.getBounds = function() {\n\t\tthis._updateText();\n\t\treturn this.Container_getBounds();\n\t};\n\t\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.spriteSheet && this.spriteSheet.complete && this.text);\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX !== 0 && this.scaleY !== 0 && hasContent);\n\t};\n\t\n\tp.clone = function() {\n\t\treturn this._cloneProps(new BitmapText(this.text, this.spriteSheet));\n\t};\n\t\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method addChild\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method addChildAt\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeChild\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeChildAt\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeAllChildren\n\t **/\n\tp.addChild = p.addChildAt = p.removeChild = p.removeChildAt = p.removeAllChildren = function() {};\n\n\n// private methods:\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp._updateState = function() {\n\t\tthis._updateText();\n\t};\n\n \t/**\n\t * @method _cloneProps\n\t * @param {BitmapText} o\n\t * @return {BitmapText} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.Container__cloneProps(o);\n\t\to.lineHeight = this.lineHeight;\n\t\to.letterSpacing = this.letterSpacing;\n\t\to.spaceWidth = this.spaceWidth;\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * @method _getFrameIndex\n\t * @param {String} character\n\t * @param {SpriteSheet} spriteSheet\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getFrameIndex = function(character, spriteSheet) {\n\t\tvar c, o = spriteSheet.getAnimation(character);\n\t\tif (!o) {\n\t\t\t(character != (c = character.toUpperCase())) || (character != (c = character.toLowerCase())) || (c=null);\n\t\t\tif (c) { o = spriteSheet.getAnimation(c); }\n\t\t}\n\t\treturn o && o.frames[0];\n\t};\n\t\n\t/**\n\t * @method _getFrame\n\t * @param {String} character\n\t * @param {SpriteSheet} spriteSheet\n\t * @return {Object}\n\t * @protected\n\t **/\n\tp._getFrame = function(character, spriteSheet) {\n\t\tvar index = this._getFrameIndex(character, spriteSheet);\n\t\treturn index == null ? index : spriteSheet.getFrame(index);\n\t};\n\n\t/**\n\t * @method _getLineHeight\n\t * @param {SpriteSheet} ss\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getLineHeight = function(ss) {\n\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"T\",ss) || this._getFrame(\"L\",ss) || ss.getFrame(0);\n\t\treturn frame ? frame.rect.height : 1;\n\t};\n\n\t/**\n\t * @method _getSpaceWidth\n\t * @param {SpriteSheet} ss\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getSpaceWidth = function(ss) {\n\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"l\",ss) || this._getFrame(\"e\",ss) || this._getFrame(\"a\",ss) || ss.getFrame(0);\n\t\treturn frame ? frame.rect.width : 1;\n\t};\n\n\t/**\n\t * @method _updateText\n\t * @protected\n\t **/\n\tp._updateText = function() {\n\t\tvar x=0, y=0, o=this._oldProps, change=false, spaceW=this.spaceWidth, lineH=this.lineHeight, ss=this.spriteSheet;\n\t\tvar pool=BitmapText._spritePool, kids=this.children, childIndex=0, numKids=kids.length, sprite;\n\t\t\n\t\tfor (var n in o) {\n\t\t\tif (o[n] != this[n]) {\n\t\t\t\to[n] = this[n];\n\t\t\t\tchange = true;\n\t\t\t}\n\t\t}\n\t\tif (!change) { return; }\n\t\t\n\t\tvar hasSpace = !!this._getFrame(\" \", ss);\n\t\tif (!hasSpace && !spaceW) { spaceW = this._getSpaceWidth(ss); }\n\t\tif (!lineH) { lineH = this._getLineHeight(ss); }\n\t\t\n\t\tfor(var i=0, l=this.text.length; i<l; i++) {\n\t\t\tvar character = this.text.charAt(i);\n\t\t\tif (character == \" \" && !hasSpace) {\n\t\t\t\tx += spaceW;\n\t\t\t\tcontinue;\n\t\t\t} else if (character==\"\\n\" || character==\"\\r\") {\n\t\t\t\tif (character==\"\\r\" && this.text.charAt(i+1) == \"\\n\") { i++; } // crlf\n\t\t\t\tx = 0;\n\t\t\t\ty += lineH;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar index = this._getFrameIndex(character, ss);\n\t\t\tif (index == null) { continue; }\n\t\t\t\n\t\t\tif (childIndex < numKids) {\n\t\t\t\tsprite = kids[childIndex];\n\t\t\t} else {\n\t\t\t\tkids.push(sprite = pool.length ? pool.pop() : new createjs.Sprite());\n\t\t\t\tsprite.parent = this;\n\t\t\t\tnumKids++;\n\t\t\t}\n\t\t\tsprite.spriteSheet = ss;\n\t\t\tsprite.gotoAndStop(index);\n\t\t\tsprite.x = x;\n\t\t\tsprite.y = y;\n\t\t\tchildIndex++;\n\t\t\t\n\t\t\tx += sprite.getBounds().width + this.letterSpacing;\n\t\t}\n\t\twhile (numKids > childIndex) {\n\t\t\t // faster than removeChild.\n\t\t\tpool.push(sprite = kids.pop());\n\t\t\tsprite.parent = null;\n\t\t\tnumKids--;\n\t\t}\n\t\tif (pool.length > BitmapText.maxPoolSize) { pool.length = BitmapText.maxPoolSize; }\n\t};\n\n\n\tcreatejs.BitmapText = createjs.promote(BitmapText, \"Container\");\n}());\n\n//##############################################################################\n// MovieClip.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The MovieClip class associates a TweenJS Timeline with an EaselJS {{#crossLink \"Container\"}}{{/crossLink}}. It allows\n\t * you to create objects which encapsulate timeline animations, state changes, and synched actions. The MovieClip\n\t * class has been included in the EaselJS minified file since 0.7.0.\n\t *\n\t * Currently MovieClip only works properly if it is tick based (as opposed to time based) though some concessions have\n\t * been made to support time-based timelines in the future.\n\t *\n\t * <h4>Example</h4>\n\t * This example animates two shapes back and forth. The grey shape starts on the left, but we jump to a mid-point in\n\t * the animation using {{#crossLink \"MovieClip/gotoAndPlay\"}}{{/crossLink}}.\n\t *\n\t *      var stage = new createjs.Stage(\"canvas\");\n\t *      createjs.Ticker.addEventListener(\"tick\", stage);\n\t *\n\t *      var mc = new createjs.MovieClip({loop:-1, labels:{myLabel:20}});\n\t *      stage.addChild(mc);\n\t *\n\t *      var child1 = new createjs.Shape(\n\t *          new createjs.Graphics().beginFill(\"#999999\")\n\t *              .drawCircle(30,30,30));\n\t *      var child2 = new createjs.Shape(\n\t *          new createjs.Graphics().beginFill(\"#5a9cfb\")\n\t *              .drawCircle(30,30,30));\n\t *\n\t *      mc.timeline.addTween(\n\t *          createjs.Tween.get(child1)\n\t *              .to({x:0}).to({x:60}, 50).to({x:0}, 50));\n\t *      mc.timeline.addTween(\n\t *          createjs.Tween.get(child2)\n\t *              .to({x:60}).to({x:0}, 50).to({x:60}, 50));\n\t *\n\t *      mc.gotoAndPlay(\"start\");\n\t *\n\t * It is recommended to use <code>tween.to()</code> to animate and set properties (use no duration to have it set\n\t * immediately), and the <code>tween.wait()</code> method to create delays between animations. Note that using the\n\t * <code>tween.set()</code> method to affect properties will likely not provide the desired result.\n\t *\n\t * @class MovieClip\n\t * @main MovieClip\n\t * @param {Object} [props] The configuration properties to apply to this instance (ex. `{mode:MovieClip.SYNCHED}`).\n\t * Supported props for the MovieClip are listed below. These props are set on the corresponding instance properties except where\n\t * specified.<UL>\n\t *    <LI> `mode`</LI>\n\t *    <LI> `startPosition`</LI>\n\t *    <LI> `frameBounds`</LI>\n\t * </UL>\n\t * \n\t * This object will also be passed into the Timeline instance associated with this MovieClip. See the documentation\n\t * for Timeline for a list of supported props (ex. `paused`, `labels`, `loop`, `reversed`, etc.)\n\t * @extends Container\n\t * @constructor\n\t **/\n\tfunction MovieClip(props) {\n\t\tthis.Container_constructor();\n\t\t!MovieClip.inited&&MovieClip.init(); // static init\n\t\t\n\t\tvar mode, startPosition, loop, labels;\n\t\t\n\t\t// handle old params (mode, startPosition, loop, labels):\n\t\t// TODO: deprecated param handling:\n\t\tif (props instanceof String || arguments.length > 1) {\n\t\t\tmode = props;\n\t\t\tstartPosition = arguments[1];\n\t\t\tloop = arguments[2];\n\t\t\tlabels = arguments[3];\n\t\t\tif (loop == null) { loop = -1; }\n\t\t\tprops = null;\n\t\t} else if (props) {\n\t\t\tmode = props.mode;\n\t\t\tstartPosition = props.startPosition;\n\t\t\tloop = props.loop;\n\t\t\tlabels = props.labels;\n\t\t}\n\t\tif (!props) { props = {labels:labels}; }\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * Controls how this MovieClip advances its time. Must be one of 0 (INDEPENDENT), 1 (SINGLE_FRAME), or 2 (SYNCHED).\n\t\t * See each constant for a description of the behaviour.\n\t\t * @property mode\n\t\t * @type String\n\t\t * @default null\n\t\t **/\n\t\tthis.mode = mode||MovieClip.INDEPENDENT;\n\t\n\t\t/**\n\t\t * Specifies what the first frame to play in this movieclip, or the only frame to display if mode is SINGLE_FRAME.\n\t\t * @property startPosition\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.startPosition = startPosition||0;\n\t\n\t\t/**\n\t\t * Specifies how many times this MovieClip should loop. A value of -1 indicates it should loop indefinitely. A value of\n\t\t * 1 would cause it to loop once (ie. play a total of twice).\n\t\t * @property loop\n\t\t * @type Number\n\t\t * @default -1\n\t\t */\n\t\tthis.loop = loop === true ? -1 : (loop || 0);\n\t\n\t\t/**\n\t\t * The current frame of the movieclip.\n\t\t * @property currentFrame\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t */\n\t\tthis.currentFrame = 0;\n\t\n\t\t/**\n\t\t * If true, the MovieClip's position will not advance when ticked.\n\t\t * @property paused\n\t\t * @type Boolean\n\t\t * @default false\n\t\t */\n\t\tthis.paused = props.paused||false;\n\t\n\t\t/**\n\t\t * If true, actions in this MovieClip's tweens will be run when the playhead advances.\n\t\t * @property actionsEnabled\n\t\t * @type Boolean\n\t\t * @default true\n\t\t */\n\t\tthis.actionsEnabled = true;\n\t\n\t\t/**\n\t\t * If true, the MovieClip will automatically be reset to its first frame whenever the timeline adds\n\t\t * it back onto the display list. This only applies to MovieClip instances with mode=INDEPENDENT.\n\t\t * <br><br>\n\t\t * For example, if you had a character animation with a \"body\" child MovieClip instance\n\t\t * with different costumes on each frame, you could set body.autoReset = false, so that\n\t\t * you can manually change the frame it is on, without worrying that it will be reset\n\t\t * automatically.\n\t\t * @property autoReset\n\t\t * @type Boolean\n\t\t * @default true\n\t\t */\n\t\tthis.autoReset = true;\n\t\t\n\t\t/**\n\t\t * An array of bounds for each frame in the MovieClip. This is mainly intended for tool output.\n\t\t * @property frameBounds\n\t\t * @type Array\n\t\t * @default null\n\t\t */\n\t\tthis.frameBounds = this.frameBounds||props.frameBounds; // frameBounds are set on the prototype in Animate.\n\t\t\n\t\t/**\n\t\t * By default MovieClip instances advance one frame per tick. Specifying a framerate for the MovieClip\n\t\t * will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n\t\t * framerate.\n\t\t *\n\t\t * For example, if a MovieClip with a framerate of 10 is placed on a Stage being updated at 40fps, then the MovieClip will\n\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n\t\t * vary slightly between frames.\n\t\t *\n\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t * @property framerate\n\t\t * @type {Number}\n\t\t * @default null\n\t\t **/\n\t\tthis.framerate = null;\n\t\t\n\t\t// set up the needed props for Timeline:\n\t\tprops.useTicks = props.paused = true;\n\t\t\n\t\t/**\n\t\t * The TweenJS Timeline that is associated with this MovieClip. This is created automatically when the MovieClip\n\t\t * instance is initialized. Animations are created by adding <a href=\"http://tweenjs.com\">TweenJS</a> Tween\n\t\t * instances to the timeline.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var tween = createjs.Tween.get(target).to({x:0}).to({x:100}, 30);\n\t\t *      var mc = new createjs.MovieClip();\n\t\t *      mc.timeline.addTween(tween);\n\t\t *\n\t\t * Elements can be added and removed from the timeline by toggling an \"_off\" property\n\t\t * using the <code>tweenInstance.to()</code> method. Note that using <code>Tween.set</code> is not recommended to\n\t\t * create MovieClip animations. The following example will toggle the target off on frame 0, and then back on for\n\t\t * frame 1. You can use the \"visible\" property to achieve the same effect.\n\t\t *\n\t\t *      var tween = createjs.Tween.get(target).to({_off:false})\n\t\t *          .wait(1).to({_off:true})\n\t\t *          .wait(1).to({_off:false});\n\t\t *\n\t\t * @property timeline\n\t\t * @type Timeline\n\t\t * @default null\n\t\t */\n\t\tthis.timeline = new createjs.Timeline(props);\n\t\t\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * @property _synchOffset\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._synchOffset = 0;\n\t\n\t\t/**\n\t\t * @property _rawPosition\n\t\t * @type Number\n\t\t * @default -1\n\t\t * @private\n\t\t */\n\t\tthis._rawPosition = -1; // TODO: evaluate using a ._reset Boolean prop instead of -1.\n\t\t\n\t\t/**\n\t\t * @property _bound_resolveState\n\t\t * @type Function\n\t\t * @private\n\t\t */\n\t\tthis._bound_resolveState = this._resolveState.bind(this);\n\t\n\t\n\t\t/**\n\t\t * The time remaining from the previous tick, only applicable when .framerate is set.\n\t\t * @property _t\n\t\t * @type Number\n\t\t * @private\n\t\t */\n\t\tthis._t = 0;\n\t\n\t\t/**\n\t\t * List of display objects that are actively being managed by the MovieClip.\n\t\t * @property _managed\n\t\t * @type Object\n\t\t * @private\n\t\t */\n\t\tthis._managed = {};\n\t}\n\tvar p = createjs.extend(MovieClip, createjs.Container);\n\n\n// constants:\n\t/**\n\t * The MovieClip will advance independently of its parent, even if its parent is paused.\n\t * This is the default mode.\n\t * @property INDEPENDENT\n\t * @static\n\t * @type String\n\t * @default \"independent\"\n\t * @readonly\n\t **/\n\tMovieClip.INDEPENDENT = \"independent\";\n\n\t/**\n\t * The MovieClip will only display a single frame (as determined by the startPosition property).\n\t * @property SINGLE_FRAME\n\t * @static\n\t * @type String\n\t * @default \"single\"\n\t * @readonly\n\t **/\n\tMovieClip.SINGLE_FRAME = \"single\";\n\n\t/**\n\t * The MovieClip will be advanced only when its parent advances and will be synched to the position of\n\t * the parent MovieClip.\n\t * @property SYNCHED\n\t * @static\n\t * @type String\n\t * @default \"synched\"\n\t * @readonly\n\t **/\n\tMovieClip.SYNCHED = \"synched\";\n\t\n\t\n// static properties:\n\tMovieClip.inited = false;\n\t\n\t\n// static methods:\n\tMovieClip.init = function() {\n\t\tif (MovieClip.inited) { return; }\n\t\t// plugins introduce some overhead to Tween, so we only install this if an MC is instantiated.\n\t\tMovieClipPlugin.install();\n\t\tMovieClip.inited = true;\n\t};\n\t\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"MovieClip/labels:property\"}}{{/crossLink}} property instead.\n\t * @method _getLabels\n\t * @protected\n\t * @return {Array}\n\t **/\n\tp._getLabels = function() {\n\t\treturn this.timeline.getLabels();\n\t};\n\t// MovieClip.getLabels is @deprecated. Remove for 1.1+\n\tp.getLabels = createjs.deprecate(p._getLabels, \"MovieClip.getLabels\");\n\n\t/**\n\t * Use the {{#crossLink \"MovieClip/currentLabel:property\"}}{{/crossLink}} property instead.\n\t * @method _getCurrentLabel\n\t * @protected\n\t * @return {String}\n\t **/\n\tp._getCurrentLabel = function() {\n\t\treturn this.timeline.currentLabel;\n\t};\n\t// MovieClip.getCurrentLabel is @deprecated. Remove for 1.1+\n\tp.getCurrentLabel = createjs.deprecate(p._getCurrentLabel, \"MovieClip.getCurrentLabel\");\n\n\t/**\n\t * Use the {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}} property instead.\n\t * @method _getDuration\n\t * @protected\n\t * @return {Number}\n\t **/\n\tp._getDuration = function() {\n\t\treturn this.timeline.duration;\n\t};\n\t// MovieClip.getDuration is @deprecated. Remove for 1.1+\n\tp.getDuration = createjs.deprecate(p._getDuration, \"MovieClip.getDuration\");\n\n\t/**\n\t * Returns an array of objects with label and position (aka frame) properties, sorted by position.\n\t * @property labels\n\t * @type {Array}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the name of the label on or immediately before the current frame.\n\t * @property currentLabel\n\t * @type {String}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the duration of this MovieClip in seconds or ticks.\n\t * @property totalFrames\n\t * @type {Number}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the duration of this MovieClip in seconds or ticks.\n\t * @property duration\n\t * @type {Number}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tlabels: { get: p._getLabels },\n\t\t\tcurrentLabel: { get: p._getCurrentLabel },\n\t\t\ttotalFrames: { get: p._getDuration },\n\t\t\tduration: { get: p._getDuration }\n\t\t\t// TODO: can we just proxy .currentFrame to tl.position as well? Ditto for .loop (or just remove entirely).\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = MovieClip; // TODO: Deprecated. This is for backwards support of Adobe Flash/Animate\n\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\t// children are placed in draw, so we can't determine if we have content.\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\t// draw to cache first:\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis._updateState();\n\t\tthis.Container_draw(ctx, ignoreCache);\n\t\treturn true;\n\t};\n\n\t/**\n\t * Sets paused to false.\n\t * @method play\n\t **/\n\tp.play = function() {\n\t\tthis.paused = false;\n\t};\n\t\n\t/**\n\t * Sets paused to true.\n\t * @method stop\n\t **/\n\tp.stop = function() {\n\t\tthis.paused = true;\n\t};\n\t\n\t/**\n\t * Advances this movie clip to the specified position or label and sets paused to false.\n\t * @method gotoAndPlay\n\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n\t **/\n\tp.gotoAndPlay = function(positionOrLabel) {\n\t\tthis.paused = false;\n\t\tthis._goto(positionOrLabel);\n\t};\n\t\n\t/**\n\t * Advances this movie clip to the specified position or label and sets paused to true.\n\t * @method gotoAndStop\n\t * @param {String|Number} positionOrLabel The animation or frame name to go to.\n\t **/\n\tp.gotoAndStop = function(positionOrLabel) {\n\t\tthis.paused = true;\n\t\tthis._goto(positionOrLabel);\n\t};\n\t\n\t/**\n\t * Advances the playhead. This occurs automatically each tick by default.\n\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set.\n\t * @method advance\n\t*/\n\tp.advance = function(time) {\n\t\tvar independent = MovieClip.INDEPENDENT;\n\t\tif (this.mode !== independent) { return; } // update happens in draw for synched clips\n\t\t\n\t\t// if this MC doesn't have a framerate, hunt ancestors for one:\n\t\tvar o=this, fps = o.framerate;\n\t\twhile ((o = o.parent) && fps === null) { if (o.mode === independent) { fps = o._framerate; } }\n\t\tthis._framerate = fps;\n\t\t\n\t\tif (this.paused) { return; }\n\t\t\n\t\t// calculate how many frames to advance:\n\t\tvar t = (fps !== null && fps !== -1 && time !== null) ? time/(1000/fps) + this._t : 1;\n\t\tvar frames = t|0;\n\t\tthis._t = t-frames; // leftover time, save to add to next advance.\n\t\t\n\t\twhile (frames--) { this._updateTimeline(this._rawPosition+1, false); }\n\t};\n\t\n\t/**\n\t * MovieClip instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\t// TODO: add support for this? Need to clone the Timeline & retarget tweens - pretty complex.\n\t\tthrow(\"MovieClip cannot be cloned.\");\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[MovieClip (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp._updateState = function() {\n\t\tif (this._rawPosition === -1 || this.mode !== MovieClip.INDEPENDENT) { this._updateTimeline(-1); }\n\t};\n\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * function.\n\t * @protected\n\t **/\n\tp._tick = function(evtObj) {\n\t\tthis.advance(evtObj&&evtObj.delta);\n\t\tthis.Container__tick(evtObj);\n\t};\n\t\n\t/**\n\t * @method _goto\n\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n\t * @protected\n\t **/\n\tp._goto = function(positionOrLabel) {\n\t\tvar pos = this.timeline.resolve(positionOrLabel);\n\t\tif (pos == null) { return; }\n\t\tthis._t = 0;\n\t\tthis._updateTimeline(pos, true);\n\t};\n\t\n\t/**\n\t * @method _reset\n\t * @private\n\t **/\n\tp._reset = function() {\n\t\tthis._rawPosition = -1;\n\t\tthis._t = this.currentFrame = 0;\n\t\tthis.paused = false;\n\t};\n\t\n\t/**\n\t * @method _updateTimeline\n\t * @param {Boolean} jump Indicates whether this update is due to jumping (via gotoAndXX) to a new position.\n\t * @protected\n\t **/\n\tp._updateTimeline = function(rawPosition, jump) {\n\t\tvar synced = this.mode !== MovieClip.INDEPENDENT, tl = this.timeline;\n\t\tif (synced) { rawPosition = this.startPosition + (this.mode===MovieClip.SINGLE_FRAME?0:this._synchOffset); }\n\t\tif (rawPosition < 0) { rawPosition = 0; }\n\t\tif (this._rawPosition === rawPosition && !synced) { return; }\n\t\tthis._rawPosition = rawPosition;\n\t\t\n\t\t// update timeline position, ignoring actions if this is a graphic.\n\t\ttl.loop = this.loop; // TODO: should we maintain this on MovieClip, or just have it on timeline?\n\t\ttl.setPosition(rawPosition, synced || !this.actionsEnabled, jump, this._bound_resolveState);\n\t};\n\t\n\t/**\n\t * Renders position 0 without running actions or updating _rawPosition.\n\t * Primarily used by Animate CC to build out the first frame in the constructor of MC symbols.\n\t * NOTE: not tested when run after the MC advances past the first frame.\n\t * @method _renderFirstFrame\n\t * @protected\n\t **/\n\tp._renderFirstFrame = function() {\n\t\tvar tl = this.timeline, pos = tl.rawPosition;\n\t\ttl.setPosition(0, true, true, this._bound_resolveState);\n\t\ttl.rawPosition = pos;\n\t};\n\t\n\t/**\n\t * Runs via a callback after timeline property updates and before actions.\n\t * @method _resolveState\n\t * @protected\n\t **/\n\tp._resolveState = function() {\n\t\tvar tl = this.timeline;\n\t\tthis.currentFrame = tl.position;\n\t\t\n\t\tfor (var n in this._managed) { this._managed[n] = 1; }\n\n\t\tvar tweens = tl.tweens;\n\t\tfor (var i=0, l=tweens.length; i<l; i++) {\n\t\t\tvar tween = tweens[i],  target = tween.target;\n\t\t\tif (target === this || tween.passive) { continue; } // TODO: this assumes the actions tween from Animate has `this` as the target. There's likely a better approach.\n\t\t\tvar offset = tween._stepPosition;\n\n\t\t\tif (target instanceof createjs.DisplayObject) {\n\t\t\t\t// motion tween.\n\t\t\t\tthis._addManagedChild(target, offset);\n\t\t\t} else {\n\t\t\t\t// state tween.\n\t\t\t\tthis._setState(target.state, offset);\n\t\t\t}\n\t\t}\n\n\t\tvar kids = this.children;\n\t\tfor (i=kids.length-1; i>=0; i--) {\n\t\t\tvar id = kids[i].id;\n\t\t\tif (this._managed[id] === 1) {\n\t\t\t\tthis.removeChildAt(i);\n\t\t\t\tdelete(this._managed[id]);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _setState\n\t * @param {Array} state\n\t * @param {Number} offset\n\t * @protected\n\t **/\n\tp._setState = function(state, offset) {\n\t\tif (!state) { return; }\n\t\tfor (var i=state.length-1;i>=0;i--) {\n\t\t\tvar o = state[i];\n\t\t\tvar target = o.t;\n\t\t\tvar props = o.p;\n\t\t\tfor (var n in props) { target[n] = props[n]; }\n\t\t\tthis._addManagedChild(target, offset);\n\t\t}\n\t};\n\n\t/**\n\t * Adds a child to the timeline, and sets it up as a managed child.\n\t * @method _addManagedChild\n\t * @param {MovieClip} child The child MovieClip to manage\n\t * @param {Number} offset\n\t * @private\n\t **/\n\tp._addManagedChild = function(child, offset) {\n\t\tif (child._off) { return; }\n\t\tthis.addChildAt(child,0);\n\n\t\tif (child instanceof MovieClip) {\n\t\t\tchild._synchOffset = offset;\n\t\t\t// TODO: this does not precisely match Adobe Flash/Animate, which loses track of the clip if it is renamed or removed from the timeline, which causes it to reset.\n\t\t\t// TODO: should also reset when MovieClip loops, though that will be a bit tricky to detect.\n\t\t\tif (child.mode === MovieClip.INDEPENDENT && child.autoReset && (!this._managed[child.id])) { child._reset(); }\n\t\t}\n\t\tthis._managed[child.id] = 2;\n\t};\n\t\n\t/**\n\t * @method _getBounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getBounds = function(matrix, ignoreTransform) {\n\t\tvar bounds = this.DisplayObject_getBounds();\n\t\tif (!bounds) {\n\t\t\tif (this.frameBounds) { bounds = this._rectangle.copy(this.frameBounds[this.currentFrame]); }\n\t\t}\n\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\n\t\treturn this.Container__getBounds(matrix, ignoreTransform);\n\t};\n\n\n\tcreatejs.MovieClip = createjs.promote(MovieClip, \"Container\");\n\n\n\n// MovieClipPlugin for TweenJS:\n\t/**\n\t * This plugin works with <a href=\"http://tweenjs.com\" target=\"_blank\">TweenJS</a> to prevent the startPosition\n\t * property from tweening.\n\t * @private\n\t * @class MovieClipPlugin\n\t * @constructor\n\t **/\n\tfunction MovieClipPlugin() {\n\t\tthrow(\"MovieClipPlugin cannot be instantiated.\")\n\t}\n\t\n\t/**\n\t * @property priority\n\t * @type {Number}\n\t * @static\n\t * @readonly\n\t **/\n\tMovieClipPlugin.priority = 100; // very high priority, should run first\n\t\n\t/**\n\t * @property ID\n\t * @type {String}\n\t * @static\n\t * @readonly\n\t **/\n\tMovieClipPlugin.ID = \"MovieClip\";\n\n\t/**\n\t * @method install\n\t * @static\n\t **/\n\tMovieClipPlugin.install = function() {\n\t\tcreatejs.Tween._installPlugin(MovieClipPlugin);\n\t};\n\t\n\t/**\n\t * @method init\n\t * @param {Tween} tween\n\t * @param {String} prop\n\t * @param {*} value\n\t * @static\n\t **/\n\tMovieClipPlugin.init = function(tween, prop, value) {\n\t\tif (prop === \"startPosition\" && tween.target instanceof MovieClip) { tween._addPlugin(MovieClipPlugin); }\n\t};\n\t\n\t/**\n\t * @method step\n\t * @param {Tween} tween\n\t * @param {TweenStep} step\n\t * @param {Object} props\n\t * @static\n\t **/\n\tMovieClipPlugin.step = function(tween, step, props) {};\n\n\t/**\n\t * @method change\n\t * @param {Tween} tween\n\t * @param {TweenStep} step\n\t * @param {*} value\n\t * @param {Number} ratio\n\t * @param {Object} end\n\t * @return {*}\n\t * @static\n\t */\n\tMovieClipPlugin.change = function(tween, step, prop, value, ratio, end) {\n\t\tif (prop === \"startPosition\") { return (ratio === 1 ? step.props[prop] : step.prev.props[prop]); }\n\t};\n\n}());\n\n//##############################################################################\n// SpriteSheetUtils.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\t\n\t\n// constructor:\n\t/**\n\t * The SpriteSheetUtils class is a collection of static methods for working with {{#crossLink \"SpriteSheet\"}}{{/crossLink}}s.\n\t * A sprite sheet is a series of images (usually animation frames) combined into a single image on a regular grid. For\n\t * example, an animation consisting of 8 100x100 images could be combined into a 400x200 sprite sheet (4 frames across\n\t * by 2 high). The SpriteSheetUtils class uses a static interface and should not be instantiated.\n\t * @class SpriteSheetUtils\n\t * @static\n\t **/\n\tfunction SpriteSheetUtils() {\n\t\tthrow \"SpriteSheetUtils cannot be instantiated\";\n\t}\n\n\n// private static properties:\n\t/**\n\t * @property _workingCanvas\n\t * @static\n\t * @type HTMLCanvasElement | Object\n\t * @protected\n\t*/\n\t/**\n\t * @property _workingContext\n\t * @static\n\t * @type CanvasRenderingContext2D\n\t * @protected\n\t*/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():ww&&document.createElement(\"canvas\"));\n\tif (canvas.getContext) {\n\t\tSpriteSheetUtils._workingCanvas = canvas;\n\t\tSpriteSheetUtils._workingContext = canvas.getContext(\"2d\");\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\n\n// public static methods:\n\t/**\n\t * Returns a single frame of the specified sprite sheet as a new PNG image. An example of when this may be useful is\n\t * to use a spritesheet frame as the source for a bitmap fill.\n\t *\n\t * <strong>WARNING:</strong> In almost all cases it is better to display a single frame using a {{#crossLink \"Sprite\"}}{{/crossLink}}\n\t * with a {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} call than it is to slice out a frame using this\n\t * method and display it with a Bitmap instance. You can also crop an image using the {{#crossLink \"Bitmap/sourceRect\"}}{{/crossLink}}\n\t * property of {{#crossLink \"Bitmap\"}}{{/crossLink}}.\n\t *\n\t * The extractFrame method may cause cross-domain warnings since it accesses pixels directly on the canvas.\n\t * @method extractFrame\n\t * @static\n\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to extract a frame from.\n\t * @param {Number|String} frameOrAnimation The frame number or animation name to extract. If an animation\n\t * name is specified, only the first frame of the animation will be extracted.\n\t * @return {HTMLImageElement} a single frame of the specified sprite sheet as a new PNG image.\n\t*/\n\tSpriteSheetUtils.extractFrame = function(spriteSheet, frameOrAnimation) {\n\t\tif (isNaN(frameOrAnimation)) {\n\t\t\tframeOrAnimation = spriteSheet.getAnimation(frameOrAnimation).frames[0];\n\t\t}\n\t\tvar data = spriteSheet.getFrame(frameOrAnimation);\n\t\tif (!data) { return null; }\n\t\tvar r = data.rect;\n\t\tvar canvas = SpriteSheetUtils._workingCanvas;\n\t\tcanvas.width = r.width;\n\t\tcanvas.height = r.height;\n\t\tSpriteSheetUtils._workingContext.drawImage(data.image, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height);\n\t\tvar img = document.createElement(\"img\");\n\t\timg.src = canvas.toDataURL(\"image/png\");\n\t\treturn img;\n\t};\n\n\t// SpriteSheetUtils.addFlippedFrames is @deprecated. Remove for 1.1+\n\tSpriteSheetUtils.addFlippedFrames = createjs.deprecate(null, \"SpriteSheetUtils.addFlippedFrames\");\n\n\t// SpriteSheetUtils.addFlippedFrames is @deprecated. Remove for 1.1+\n\tSpriteSheetUtils.mergeAlpha = createjs.deprecate(null, \"SpriteSheetUtils.mergeAlpha\");\n\n\t\n// private static methods:\n\tSpriteSheetUtils._flip = function(spriteSheet, count, h, v) {\n\t\tvar imgs = spriteSheet._images;\n\t\tvar canvas = SpriteSheetUtils._workingCanvas;\n\t\tvar ctx = SpriteSheetUtils._workingContext;\n\t\tvar il = imgs.length/count;\n\t\tfor (var i=0;i<il;i++) {\n\t\t\tvar src = imgs[i];\n\t\t\tsrc.__tmp = i; // a bit hacky, but faster than doing indexOf below.\n\t\t\tctx.setTransform(1,0,0,1,0,0);\n\t\t\tctx.clearRect(0,0,canvas.width+1,canvas.height+1);\n\t\t\tcanvas.width = src.width;\n\t\t\tcanvas.height = src.height;\n\t\t\tctx.setTransform(h?-1:1, 0, 0, v?-1:1, h?src.width:0, v?src.height:0);\n\t\t\tctx.drawImage(src,0,0);\n\t\t\tvar img = document.createElement(\"img\");\n\t\t\timg.src = canvas.toDataURL(\"image/png\");\n\t\t\t// work around a strange bug in Safari:\n\t\t\timg.width = (src.width||src.naturalWidth);\n\t\t\timg.height = (src.height||src.naturalHeight);\n\t\t\timgs.push(img);\n\t\t}\n\n\t\tvar frames = spriteSheet._frames;\n\t\tvar fl = frames.length/count;\n\t\tfor (i=0;i<fl;i++) {\n\t\t\tsrc = frames[i];\n\t\t\tvar rect = src.rect.clone();\n\t\t\timg = imgs[src.image.__tmp+il*count];\n\n\t\t\tvar frame = {image:img,rect:rect,regX:src.regX,regY:src.regY};\n\t\t\tif (h) {\n\t\t\t\trect.x = (img.width||img.naturalWidth)-rect.x-rect.width; // update rect\n\t\t\t\tframe.regX = rect.width-src.regX; // update registration point\n\t\t\t}\n\t\t\tif (v) {\n\t\t\t\trect.y = (img.height||img.naturalHeight)-rect.y-rect.height;  // update rect\n\t\t\t\tframe.regY = rect.height-src.regY; // update registration point\n\t\t\t}\n\t\t\tframes.push(frame);\n\t\t}\n\n\t\tvar sfx = \"_\"+(h?\"h\":\"\")+(v?\"v\":\"\");\n\t\tvar names = spriteSheet._animations;\n\t\tvar data = spriteSheet._data;\n\t\tvar al = names.length/count;\n\t\tfor (i=0;i<al;i++) {\n\t\t\tvar name = names[i];\n\t\t\tsrc = data[name];\n\t\t\tvar anim = {name:name+sfx,speed:src.speed,next:src.next,frames:[]};\n\t\t\tif (src.next) { anim.next += sfx; }\n\t\t\tframes = src.frames;\n\t\t\tfor (var j=0,l=frames.length;j<l;j++) {\n\t\t\t\tanim.frames.push(frames[j]+fl*count);\n\t\t\t}\n\t\t\tdata[anim.name] = anim;\n\t\t\tnames.push(anim.name);\n\t\t}\n\t};\n\n\n\tcreatejs.SpriteSheetUtils = SpriteSheetUtils;\n}());\n\n//##############################################################################\n// SpriteSheetBuilder.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The SpriteSheetBuilder allows you to generate {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances at run time\n\t * from any display object. This can allow you to maintain your assets as vector graphics (for low file size), and\n\t * render them at run time as SpriteSheets for better performance.\n\t *\n\t * SpriteSheets can be built either synchronously, or asynchronously, so that large SpriteSheets can be generated\n\t * without locking the UI.\n\t *\n\t * Note that the \"images\" used in the generated SpriteSheet are actually canvas elements, and that they will be\n\t * sized to the nearest power of 2 up to the value of {{#crossLink \"SpriteSheetBuilder/maxWidth:property\"}}{{/crossLink}}\n\t * or {{#crossLink \"SpriteSheetBuilder/maxHeight:property\"}}{{/crossLink}}.\n\t * @class SpriteSheetBuilder\n\t * @param {Number} [framerate=0] The {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} of\n\t * {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are created.\n\t * @extends EventDispatcher\n\t * @constructor\n\t **/\n\tfunction SpriteSheetBuilder(framerate) {\n\t\tthis.EventDispatcher_constructor();\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The maximum width for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n\t\t * dimensions, then additional images will be created as needed.\n\t\t * @property maxWidth\n\t\t * @type Number\n\t\t * @default 2048\n\t\t*/\n\t\tthis.maxWidth = 2048;\n\t\n\t\t/**\n\t\t * The maximum height for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n\t\t * dimensions, then additional images will be created as needed.\n\t\t * @property maxHeight\n\t\t * @type Number\n\t\t * @default 2048\n\t\t **/\n\t\tthis.maxHeight = 2048;\n\t\n\t\t/**\n\t\t * The SpriteSheet that was generated. This will be null before a build is completed successfully.\n\t\t * @property spriteSheet\n\t\t * @type SpriteSheet\n\t\t **/\n\t\tthis.spriteSheet = null;\n\t\n\t\t/**\n\t\t * The scale to apply when drawing all frames to the SpriteSheet. This is multiplied against any scale specified\n\t\t * in the addFrame call. This can be used, for example, to generate a SpriteSheet at run time that is tailored\n\t\t * to the a specific device resolution (ex. tablet vs mobile).\n\t\t * @property scale\n\t\t * @type Number\n\t\t * @default 1\n\t\t **/\n\t\tthis.scale = 1;\n\t\n\t\t/**\n\t\t* The padding to use between frames. This is helpful to preserve antialiasing on drawn vector content.\n\t\t* @property padding\n\t\t* @type Number\n\t\t* @default 1\n\t\t**/\n\t\tthis.padding = 1;\n\t\n\t\t/**\n\t\t * A number from 0.01 to 0.99 that indicates what percentage of time the builder can use. This can be\n\t\t * thought of as the number of seconds per second the builder will use. For example, with a timeSlice value of 0.3,\n\t\t * the builder will run 20 times per second, using approximately 15ms per build (30% of available time, or 0.3s per second).\n\t\t * Defaults to 0.3.\n\t\t * @property timeSlice\n\t\t * @type Number\n\t\t * @default 0.3\n\t\t **/\n\t\tthis.timeSlice = 0.3;\n\t\n\t\t/**\n\t\t * A value between 0 and 1 that indicates the progress of a build, or -1 if a build has not\n\t\t * been initiated.\n\t\t * @property progress\n\t\t * @type Number\n\t\t * @default -1\n\t\t * @readonly\n\t\t */\n\t\tthis.progress = -1;\n\n\t\t/**\n\t\t * A {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} value that will be passed to new {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are\n\t\t * created. If no framerate is specified (or it is 0), then SpriteSheets will use the {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t\t * framerate.\n\t\t * @property framerate\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.framerate = framerate || 0;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @property _frames\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._frames = [];\n\t\n\t\t/**\n\t\t * @property _animations\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._animations = {};\n\t\n\t\t/**\n\t\t * @property _data\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._data = null;\n\t\n\t\t/**\n\t\t * @property _nextFrameIndex\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._nextFrameIndex = 0;\n\t\n\t\t/**\n\t\t * @property _index\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._index = 0;\n\t\n\t\t/**\n\t\t * @property _timerID\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._timerID = null;\n\t\n\t\t/**\n\t\t * @property _scale\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._scale = 1;\n\t}\n\tvar p = createjs.extend(SpriteSheetBuilder, createjs.EventDispatcher);\n\n// constants:\n\tSpriteSheetBuilder.ERR_DIMENSIONS = \"frame dimensions exceed max spritesheet dimensions\";\n\tSpriteSheetBuilder.ERR_RUNNING = \"a build is already running\";\n\n// events:\n\t/**\n\t * Dispatched when a build completes.\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when an asynchronous build has progress.\n\t * @event progress\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Number} progress The current progress value (0-1).\n\t * @since 0.6.0\n\t */\n\n\n// public methods:\n\t/**\n\t * Adds a frame to the {{#crossLink \"SpriteSheet\"}}{{/crossLink}}. Note that the frame will not be drawn until you\n\t * call {{#crossLink \"SpriteSheetBuilder/build\"}}{{/crossLink}} method. The optional setup params allow you to have\n\t * a function run immediately before the draw occurs. For example, this allows you to add a single source multiple\n\t * times, but manipulate it or its children to change it to generate different frames.\n\t *\n\t * Note that the source's transformations (x, y, scale, rotate, alpha) will be ignored, except for regX/Y. To apply\n\t * transforms to a source object and have them captured in the SpriteSheet, simply place it into a {{#crossLink \"Container\"}}{{/crossLink}}\n\t * and pass in the Container as the source.\n\t * @method addFrame\n\t * @param {DisplayObject} source The source {{#crossLink \"DisplayObject\"}}{{/crossLink}}  to draw as the frame.\n\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the\n\t * source to draw to the frame. If not specified, it will look for a `getBounds` method, bounds property, or\n\t * `nominalBounds` property on the source to use. If one is not found, the frame will be skipped.\n\t * @param {Number} [scale=1] Optional. The scale to draw this frame at. Default is 1.\n\t * @param {Function} [setupFunction] A function to call immediately before drawing this frame. It will be called with two parameters: the source, and setupData.\n\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n\t * @return {Number} The index of the frame that was just added, or null if a sourceRect could not be determined.\n\t **/\n\tp.addFrame = function(source, sourceRect, scale, setupFunction, setupData) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\n\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\n\t\tif (!rect) { return null; }\n\t\tscale = scale||1;\n\t\treturn this._frames.push({source:source, sourceRect:rect, scale:scale, funct:setupFunction, data:setupData, index:this._frames.length, height:rect.height*scale})-1;\n\t};\n\n\t/**\n\t * Adds an animation that will be included in the created {{#crossLink \"SpriteSheet\"}}{{/crossLink}}.\n\t * @method addAnimation\n\t * @param {String} name The name for the animation.\n\t * @param {Array} frames An array of frame indexes that comprise the animation. Ex. [3,6,5] would describe an animation\n\t * that played frame indexes 3, 6, and 5 in that order.\n\t * @param {String} [next] Specifies the name of the animation to continue to after this animation ends. You can\n\t * also pass false to have the animation stop when it ends. By default it will loop to the start of the same animation.\n\t * @param {Number} [speed] Specifies a frame advance speed for this animation. For example, a value of 0.5 would\n\t * cause the animation to advance every second tick. Note that earlier versions used `frequency` instead, which had\n\t * the opposite effect.\n\t **/\n\tp.addAnimation = function(name, frames, next, speed) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis._animations[name] = {frames:frames, next:next, speed:speed};\n\t};\n\n\t/**\n\t * This will take a {{#crossLink \"MovieClip\"}}{{/crossLink}} instance, and add its frames and labels to this\n\t * builder. Labels will be added as an animation running from the label index to the next label. For example, if\n\t * there is a label named \"foo\" at frame 0 and a label named \"bar\" at frame 10, in a MovieClip with 15 frames, it\n\t * will add an animation named \"foo\" that runs from frame index 0 to 9, and an animation named \"bar\" that runs from\n\t * frame index 10 to 14.\n\t *\n\t * Note that this will iterate through the full MovieClip with {{#crossLink \"MovieClip/actionsEnabled:property\"}}{{/crossLink}}\n\t * set to `false`, ending on the last frame.\n\t * @method addMovieClip\n\t * @param {MovieClip} source The source MovieClip instance to add to the SpriteSheet.\n\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the source to\n\t * draw to the frame. If not specified, it will look for a {{#crossLink \"DisplayObject/getBounds\"}}{{/crossLink}}\n\t * method, `frameBounds` Array, `bounds` property, or `nominalBounds` property on the source to use. If one is not\n\t * found, the MovieClip will be skipped.\n\t * @param {Number} [scale=1] The scale to draw the movie clip at.\n\t * @param {Function} [setupFunction] A function to call immediately before drawing each frame. It will be called\n\t * with three parameters: the source, setupData, and the frame index.\n\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n\t * @param {Function} [labelFunction] This method will be called for each MovieClip label that is added with four\n\t * parameters: the label name, the source MovieClip instance, the starting frame index (in the movieclip timeline)\n\t * and the end index. It must return a new name for the label/animation, or `false` to exclude the label.\n\t **/\n\tp.addMovieClip = function(source, sourceRect, scale, setupFunction, setupData, labelFunction) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tvar rects = source.frameBounds;\n\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\n\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\n\t\tif (!rect && !rects) { return; }\n\n\t\tvar i, l, baseFrameIndex = this._frames.length;\n\t\tvar duration = source.timeline.duration;\n\t\tfor (i=0; i<duration; i++) {\n\t\t\tvar r = (rects&&rects[i]) ? rects[i] : rect;\n\t\t\tthis.addFrame(source, r, scale, this._setupMovieClipFrame, {i:i, f:setupFunction, d:setupData});\n\t\t}\n\t\tvar labels = source.timeline._labels;\n\t\tvar lbls = [];\n\t\tfor (var n in labels) {\n\t\t\tlbls.push({index:labels[n], label:n});\n\t\t}\n\t\tif (lbls.length) {\n\t\t\tlbls.sort(function(a,b){ return a.index-b.index; });\n\t\t\tfor (i=0,l=lbls.length; i<l; i++) {\n\t\t\t\tvar label = lbls[i].label;\n\t\t\t\tvar start = baseFrameIndex+lbls[i].index;\n\t\t\t\tvar end = baseFrameIndex+((i == l-1) ? duration : lbls[i+1].index);\n\t\t\t\tvar frames = [];\n\t\t\t\tfor (var j=start; j<end; j++) { frames.push(j); }\n\t\t\t\tif (labelFunction) {\n\t\t\t\t\tlabel = labelFunction(label, source, start, end);\n\t\t\t\t\tif (!label) { continue; }\n\t\t\t\t}\n\t\t\t\tthis.addAnimation(label, frames, true); // for now, this loops all animations.\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames.\n\t * @method build\n\t * @return {SpriteSheet} The created SpriteSheet instance, or null if a build is already running or an error\n\t * occurred.\n\t **/\n\tp.build = function() {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis._startBuild();\n\t\twhile (this._drawNext()) {}\n\t\tthis._endBuild();\n\t\treturn this.spriteSheet;\n\t};\n\n\t/**\n\t * Asynchronously builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames. It will\n\t * run 20 times per second, using an amount of time defined by `timeSlice`. When it is complete it will call the\n\t * specified callback.\n\t * @method buildAsync\n\t * @param {Number} [timeSlice] Sets the timeSlice property on this instance.\n\t **/\n\tp.buildAsync = function(timeSlice) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis.timeSlice = timeSlice;\n\t\tthis._startBuild();\n\t\tvar _this = this;\n\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50);\n\t};\n\n\t/**\n\t * Stops the current asynchronous build.\n\t * @method stopAsync\n\t **/\n\tp.stopAsync = function() {\n\t\tclearTimeout(this._timerID);\n\t\tthis._data = null;\n\t};\n\n\t/**\n\t * SpriteSheetBuilder instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"SpriteSheetBuilder cannot be cloned.\");\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[SpriteSheetBuilder]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _startBuild\n\t * @protected\n\t **/\n\tp._startBuild = function() {\n\t\tvar pad = this.padding||0;\n\t\tthis.progress = 0;\n\t\tthis.spriteSheet = null;\n\t\tthis._index = 0;\n\t\tthis._scale = this.scale;\n\t\tvar dataFrames = [];\n\t\tthis._data = {\n\t\t\timages: [],\n\t\t\tframes: dataFrames,\n\t\t\tframerate: this.framerate,\n\t\t\tanimations: this._animations // TODO: should we \"clone\" _animations in case someone adds more animations after a build?\n\t\t};\n\n\t\tvar frames = this._frames.slice();\n\t\tframes.sort(function(a,b) { return (a.height<=b.height) ? -1 : 1; });\n\n\t\tif (frames[frames.length-1].height+pad*2 > this.maxHeight) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\n\t\tvar y=0, x=0;\n\t\tvar img = 0;\n\t\twhile (frames.length) {\n\t\t\tvar o = this._fillRow(frames, y, img, dataFrames, pad);\n\t\t\tif (o.w > x) { x = o.w; }\n\t\t\ty += o.h;\n\t\t\tif (!o.h || !frames.length) {\n\t\t\t\tvar canvas = (createjs.createCanvas?createjs.createCanvas():ww&&document.createElement(\"canvas\"));\n\t\t\t\tcanvas.width = this._getSize(x,this.maxWidth);\n\t\t\t\tcanvas.height = this._getSize(y,this.maxHeight);\n\t\t\t\tthis._data.images[img] = canvas;\n\t\t\t\tif (!o.h) {\n\t\t\t\t\tx=y=0;\n\t\t\t\t\timg++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * @method _setupMovieClipFrame\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._setupMovieClipFrame = function(source, data) {\n\t\tvar ae = source.actionsEnabled;\n\t\tsource.actionsEnabled = false;\n\t\tsource.gotoAndStop(data.i);\n\t\tsource.actionsEnabled = ae;\n\t\tdata.f&&data.f(source, data.d, data.i);\n\t};\n\n\t/**\n\t * @method _getSize\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._getSize = function(size,max) {\n\t\tvar pow = 4;\n\t\twhile (Math.pow(2,++pow) < size){}\n\t\treturn Math.min(max,Math.pow(2,pow));\n\t};\n\n\t/**\n\t * @method _fillRow\n\t * @param {Array} frames\n\t * @param {Number} y\n\t * @param {HTMLImageElement} img\n\t * @param {Object} dataFrames\n\t * @param {Number} pad\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._fillRow = function(frames, y, img, dataFrames, pad) {\n\t\tvar w = this.maxWidth;\n\t\tvar maxH = this.maxHeight;\n\t\ty += pad;\n\t\tvar h = maxH-y;\n\t\tvar x = pad;\n\t\tvar height = 0;\n\t\tfor (var i=frames.length-1; i>=0; i--) {\n\t\t\tvar frame = frames[i];\n\t\t\tvar sc = this._scale*frame.scale;\n\t\t\tvar rect = frame.sourceRect;\n\t\t\tvar source = frame.source;\n\t\t\tvar rx = Math.floor(sc*rect.x-pad);\n\t\t\tvar ry = Math.floor(sc*rect.y-pad);\n\t\t\tvar rh = Math.ceil(sc*rect.height+pad*2);\n\t\t\tvar rw = Math.ceil(sc*rect.width+pad*2);\n\t\t\tif (rw > w) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\n\t\t\tif (rh > h || x+rw > w) { continue; }\n\t\t\tframe.img = img;\n\t\t\tframe.rect = new createjs.Rectangle(x,y,rw,rh);\n\t\t\theight = height || rh;\n\t\t\tframes.splice(i,1);\n\t\t\tdataFrames[frame.index] = [x,y,rw,rh,img,Math.round(-rx+sc*source.regX-pad),Math.round(-ry+sc*source.regY-pad)];\n\t\t\tx += rw;\n\t\t}\n\t\treturn {w:x, h:height};\n\t};\n\n\t/**\n\t * @method _endBuild\n\t * @protected\n\t **/\n\tp._endBuild = function() {\n\t\tthis.spriteSheet = new createjs.SpriteSheet(this._data);\n\t\tthis._data = null;\n\t\tthis.progress = 1;\n\t\tthis.dispatchEvent(\"complete\");\n\t};\n\n\t/**\n\t * @method _run\n\t * @protected\n\t **/\n\tp._run = function() {\n\t\tvar ts = Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50;\n\t\tvar t = (new Date()).getTime()+ts;\n\t\tvar complete = false;\n\t\twhile (t > (new Date()).getTime()) {\n\t\t\tif (!this._drawNext()) { complete = true; break; }\n\t\t}\n\t\tif (complete) {\n\t\t\tthis._endBuild();\n\t\t} else {\n\t\t\tvar _this = this;\n\t\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-ts);\n\t\t}\n\t\tvar p = this.progress = this._index/this._frames.length;\n\t\tif (this.hasEventListener(\"progress\")) {\n\t\t\tvar evt = new createjs.Event(\"progress\");\n\t\t\tevt.progress = p;\n\t\t\tthis.dispatchEvent(evt);\n\t\t}\n\t};\n\n\t/**\n\t * @method _drawNext\n\t * @protected\n\t * @return Boolean Returns false if this is the last draw.\n\t **/\n\tp._drawNext = function() {\n\t\tvar frame = this._frames[this._index];\n\t\tvar sc = frame.scale*this._scale;\n\t\tvar rect = frame.rect;\n\t\tvar sourceRect = frame.sourceRect;\n\t\tvar canvas = this._data.images[frame.img];\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tframe.funct&&frame.funct(frame.source, frame.data);\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.rect(rect.x, rect.y, rect.width, rect.height);\n\t\tctx.clip();\n\t\tctx.translate(Math.ceil(rect.x-sourceRect.x*sc), Math.ceil(rect.y-sourceRect.y*sc));\n\t\tctx.scale(sc,sc);\n\t\tframe.source.draw(ctx); // display object will draw itself.\n\t\tctx.restore();\n\t\treturn (++this._index) < this._frames.length;\n\t};\n\n\n\tcreatejs.SpriteSheetBuilder = createjs.promote(SpriteSheetBuilder, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// DOMElement.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * <b>This class is still experimental, and more advanced use is likely to be buggy. Please report bugs.</b>\n\t *\n\t * A DOMElement allows you to associate a HTMLElement with the display list. It will be transformed\n\t * within the DOM as though it is child of the {{#crossLink \"Container\"}}{{/crossLink}} it is added to. However, it is\n\t * not rendered to canvas, and as such will retain whatever z-index it has relative to the canvas (ie. it will be\n\t * drawn in front of or behind the canvas).\n\t *\n\t * The position of a DOMElement is relative to their parent node in the DOM. It is recommended that\n\t * the DOM Object be added to a div that also contains the canvas so that they share the same position\n\t * on the page.\n\t *\n\t * DOMElement is useful for positioning HTML elements over top of canvas content, and for elements\n\t * that you want to display outside the bounds of the canvas. For example, a tooltip with rich HTML\n\t * content.\n\t *\n\t * <h4>Mouse Interaction</h4>\n\t *\n\t * DOMElement instances are not full EaselJS display objects, and do not participate in EaselJS mouse\n\t * events or support methods like hitTest. To get mouse events from a DOMElement, you must instead add handlers to\n\t * the htmlElement (note, this does not support EventDispatcher)\n\t *\n\t *      var domElement = new createjs.DOMElement(htmlElement);\n\t *      domElement.htmlElement.onclick = function() {\n\t *          console.log(\"clicked\");\n\t *      }\n\t *\n\t * <strong>Important:</strong> This class needs to be notified it is about to be drawn, this will happen automatically\n\t * if you call stage.update, calling stage.draw or disabling tickEnabled will miss important steps and it will render\n\t * stale information.\n\t *\n\t * @class DOMElement\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {HTMLElement} htmlElement A reference or id for the DOM element to manage.\n\t */\n\tfunction DOMElement(htmlElement) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\tif (typeof(htmlElement)==\"string\") { htmlElement = document.getElementById(htmlElement); }\n\t\tthis.mouseEnabled = false;\n\t\t\n\t\tvar style = htmlElement.style;\n\t\tstyle.position = \"absolute\";\n\t\tstyle.transformOrigin = style.WebkitTransformOrigin = style.msTransformOrigin = style.MozTransformOrigin = style.OTransformOrigin = \"0% 0%\";\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The DOM object to manage.\n\t\t * @property htmlElement\n\t\t * @type HTMLElement\n\t\t */\n\t\tthis.htmlElement = htmlElement;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @property _oldMtx\n\t\t * @type Matrix2D\n\t\t * @protected\n\t\t */\n\t\tthis._oldProps = null;\n\n\t\t/**\n\t\t * Used to track the object which this class attached listeners to, helps optimize listener attachment.\n\t\t * @property _oldStage\n\t\t * @type Stage\n\t\t * @protected\n\t\t */\n\t\tthis._oldStage = null;\n\t\t/**\n\t\t * The event listener proxy triggered drawing draw for special circumstances.\n\t\t * @property _drawAction\n\t\t * @type function\n\t\t * @protected\n\t\t */\n\t\tthis._drawAction = null;\n\t}\n\tvar p = createjs.extend(DOMElement, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t */\n\tp.isVisible = function() {\n\t\treturn this.htmlElement != null;\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t * @return {Boolean}\n\t */\n\tp.draw = function(ctx, ignoreCache) {\n\t\t// this relies on the _tick method because draw isn't called if the parent is not visible.\n\t\t// the actual update happens in _handleDrawEnd\n\t\treturn true;\n\t};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method cache\n\t */\n\tp.cache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method uncache\n\t */\n\tp.uncache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method updateCache\n\t */\n\tp.updateCache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method hitTest\n\t */\n\tp.hitTest = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method localToGlobal\n\t */\n\tp.localToGlobal = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method globalToLocal\n\t */\n\tp.globalToLocal = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method localToLocal\n\t */\n\tp.localToLocal = function() {};\n\n\t/**\n\t * DOMElement cannot be cloned. Throws an error.\n\t * @method clone\n\t */\n\tp.clone = function() {\n\t\tthrow(\"DOMElement cannot be cloned.\")\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function() {\n\t\treturn \"[DOMElement (name=\"+  this.name +\")]\";\n\t};\n\n\t/**\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n\t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t * @event click\n\t */\n\n     /**\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n \t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t * @event dblClick\n\t */\n\n     /**\n      * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n \t  * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t  * @event mousedown\n\t  */\n\n     /**\n      * The HTMLElement can listen for the mouseover event, not the DOMElement instance.\n      * Since DOMElement instances are not full EaselJS display objects and do not participate in EaselJS mouse events.\n      * @event mouseover\n\t  */\n\n     /**\n      * Not applicable to DOMElement.\n\t  * @event tick\n\t  */\n\n\n// private methods:\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * function.\n\t * @protected\n\t */\n\tp._tick = function(evtObj) {\n\t\tvar stage = this.stage;\n\t\tif(stage && stage !== this._oldStage) {\n\t\t\tthis._drawAction && stage.off(\"drawend\", this._drawAction);\n\t\t\tthis._drawAction = stage.on(\"drawend\", this._handleDrawEnd, this);\n\t\t\tthis._oldStage = stage;\n\t\t}\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\t\n\t/**\n\t * @method _handleDrawEnd\n\t * @param {Event} evt\n\t * @protected\n\t */\n\tp._handleDrawEnd = function(evt) {\n\t\tvar o = this.htmlElement;\n\t\tif (!o) { return; }\n\t\tvar style = o.style;\n\t\t\n\t\tvar props = this.getConcatenatedDisplayProps(this._props), mtx = props.matrix;\n\t\t\n\t\tvar visibility = props.visible ? \"visible\" : \"hidden\";\n\t\tif (visibility != style.visibility) { style.visibility = visibility; }\n\t\tif (!props.visible) { return; }\n\t\t\n\t\tvar oldProps = this._oldProps, oldMtx = oldProps&&oldProps.matrix;\n\t\tvar n = 10000; // precision\n\t\t\n\t\tif (!oldMtx || !oldMtx.equals(mtx)) {\n\t\t\tvar str = \"matrix(\" + (mtx.a*n|0)/n +\",\"+ (mtx.b*n|0)/n +\",\"+ (mtx.c*n|0)/n +\",\"+ (mtx.d*n|0)/n +\",\"+ (mtx.tx+0.5|0);\n\t\t\tstyle.transform = style.WebkitTransform = style.OTransform = style.msTransform = str +\",\"+ (mtx.ty+0.5|0) +\")\";\n\t\t\tstyle.MozTransform = str +\"px,\"+ (mtx.ty+0.5|0) +\"px)\";\n\t\t\tif (!oldProps) { oldProps = this._oldProps = new createjs.DisplayProps(true, null); }\n\t\t\toldProps.matrix.copy(mtx);\n\t\t}\n\t\t\n\t\tif (oldProps.alpha != props.alpha) {\n\t\t\tstyle.opacity = \"\"+(props.alpha*n|0)/n;\n\t\t\toldProps.alpha = props.alpha;\n\t\t}\n\t};\n\n\n\tcreatejs.DOMElement = createjs.promote(DOMElement, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Filter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Base class that all filters should inherit from. Filters need to be applied to objects that have been cached using\n\t * the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method. If an object changes, please cache it again, or use\n\t * {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}}. Note that the filters must be applied before caching.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myInstance.filters = [\n\t *          new createjs.ColorFilter(0, 0, 0, 1, 255, 0, 0),\n\t *          new createjs.BlurFilter(5, 5, 10)\n\t *      ];\n\t *      myInstance.cache(0,0, 100, 100);\n\t *\n\t * Note that each filter can implement a {{#crossLink \"Filter/getBounds\"}}{{/crossLink}} method, which returns the\n\t * margins that need to be applied in order to fully display the filter. For example, the {{#crossLink \"BlurFilter\"}}{{/crossLink}}\n\t * will cause an object to feather outwards, resulting in a margin around the shape.\n\t *\n\t * <h4>EaselJS Filters</h4>\n\t * EaselJS comes with a number of pre-built filters:\n\t * <ul><li>{{#crossLink \"AlphaMapFilter\"}}{{/crossLink}} : Map a greyscale image to the alpha channel of a display object</li>\n\t *      <li>{{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}: Map an image's alpha channel to the alpha channel of a display object</li>\n\t *      <li>{{#crossLink \"BlurFilter\"}}{{/crossLink}}: Apply vertical and horizontal blur to a display object</li>\n\t *      <li>{{#crossLink \"ColorFilter\"}}{{/crossLink}}: Color transform a display object</li>\n\t *      <li>{{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}: Transform an image using a {{#crossLink \"ColorMatrix\"}}{{/crossLink}}</li>\n\t * </ul>\n\t *\n\t * @class Filter\n\t * @constructor\n\t **/\n\tfunction Filter() {\n\t\t/**\n\t\t * A flag stating that this filter uses a context draw mode and cannot be batched into imageData processing.\n\t\t * @property usesContext\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.usesContext = false;\n\n\t\t/**\n\t\t * Another filter that is required to act as part of this filter and created and managed under the hood.\n\t\t * @private\n\t\t * @property _multiPass\n\t\t * @type {Filter}\n\t\t * @default null\n\t\t */\n\t\tthis._multiPass = null;\n\n\t\t/**\n\t\t * Pre-processed template shader code. It will be parsed before being fed in into the shader compiler.\n\t\t * This should be based upon StageGL.SHADER_VERTEX_BODY_REGULAR\n\t\t * @property VTX_SHADER\n\t\t * @virtual\n\t\t * @type {String}\n\t\t * @readonly\n\t\t */\n\t\tthis.VTX_SHADER_BODY = null;\n\n\t\t/**\n\t\t * Pre-processed template shader code. It will be parsed before being fed in into the shader compiler.\n\t\t * This should be based upon StageGL.SHADER_FRAGMENT_BODY_REGULAR\n\t\t * @property FRAG_SHADER\n\t\t * @virtual\n\t\t * @type {String}\n\t\t * @readonly\n\t\t */\n\t\tthis.FRAG_SHADER_BODY = null;\n\t}\n\tvar p = Filter.prototype;\n\n// public methods:\n\t/**\n\t * Provides padding values for this filter. That is, how much the filter will extend the visual bounds of an object it is applied to.\n\t * @method getBounds\n\t * @param {Rectangle} [rect] If specified, the provided Rectangle instance will be expanded by the padding amounts and returned.\n\t * @return {Rectangle} If a `rect` param was provided, it is returned. If not, either a new rectangle with the padding values, or null if no padding is required for this filter.\n\t **/\n\tp.getBounds = function(rect) {\n\t\treturn rect;\n\t};\n\n\t/**\n\t * Assign any unique uniforms or other setup functionality here.\n\t * @method shaderParamSetup\n\t * @virtual\n\t * @param {WebGLContext} gl The context associated with the stage performing the render.\n\t * @param {StageGL} stage The stage instance that will be rendering.\n\t * @param {ShaderProgram} shaderProgram The compiled shader that is going to be used to perform the render.\n\t */\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {};\n\n\t/**\n\t * Applies the filter to the specified context.\n\t * @method applyFilter\n\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n\t * @param {Number} x The x position to use for the source rect.\n\t * @param {Number} y The y position to use for the source rect.\n\t * @param {Number} width The width to use for the source rect.\n\t * @param {Number} height The height to use for the source rect.\n\t * @param {CanvasRenderingContext2D} [targetCtx] The 2D context to draw the result to. Defaults to the context passed to ctx.\n\t * @param {Number} [targetX] The x position to draw the result to. Defaults to the value passed to x.\n\t * @param {Number} [targetY] The y position to draw the result to. Defaults to the value passed to y.\n\t * @return {Boolean} If the filter was applied successfully.\n\t **/\n\tp.applyFilter = function(ctx, x, y, width, height, targetCtx, targetX, targetY) {\n\t\t// this is the default behaviour because most filters access pixel data. It is overridden when not needed.\n\t\ttargetCtx = targetCtx || ctx;\n\t\tif (targetX == null) { targetX = x; }\n\t\tif (targetY == null) { targetY = y; }\n\t\ttry {\n\t\t\tvar imageData = ctx.getImageData(x, y, width, height);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._applyFilter(imageData)) {\n\t\t\ttargetCtx.putImageData(imageData, targetX, targetY);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Filter]\";\n\t};\n\n\t/**\n\t * Returns a clone of this Filter instance.\n\t * @method clone\n\t * @return {Filter} A clone of the current Filter instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Filter();\n\t};\n\t\n// private methods:\n\t/**\n\t * @method _applyFilter\n\t * @param {ImageData} imageData Target ImageData instance.\n\t * @return {Boolean}\n\t **/\n\tp._applyFilter = function(imageData) { return true; };\n\n\n\tcreatejs.Filter = Filter;\n}());\n\n//##############################################################################\n// BitmapCache.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The BitmapCache is an internal representation of all the cache properties and logic required in order to \"cache\"\n\t * an object. This information and functionality used to be located on a {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method in {{#crossLink \"DisplayObject\"}}{{/crossLink}}, but was moved to its own class.\n\t *\n\t * Caching in this context is purely visual, and will render the DisplayObject out into an image to be used instead\n\t * of the object. The actual cache itself is still stored on the target with the {{#crossLink \"DisplayObject/cacheCanvas:property\"}}{{/crossLink}}.\n\t * Working with a singular image like a {{#crossLink \"Bitmap\"}}{{/crossLink}} there is little benefit to performing \n\t * a cache as it is already a single image. Caching is best done on containers containing multiple complex parts that \n\t * do not move often, so that rendering the image instead will improve overall rendering speed. A cached object will \n\t * not visually update until explicitly told to do so with a call to update, much like a Stage. If a cache is being \n\t * updated every frame it is likely not improving rendering performance. Cache are best used when updates will be sparse.\n\t *\n\t * Caching is also a co-requisite for applying filters to prevent expensive filters running constantly without need, \n\t * and to physically enable some effects. The BitmapCache is also responsible for applying filters to objects and \n\t * reads each {{#crossLink \"Filter\"}}{{/crossLink}} due to this relationship. Real-time Filters are not recommended \n\t * performance wise when dealing with a Context2D canvas. For best performance and to still allow for some visual \n\t * effects use a compositeOperation when possible.\n\t * @class BitmapCache\n\t * @constructor\n\t **/\n\tfunction BitmapCache() {\n\n\t\t// public:\n\t\t/**\n\t\t * Width of the cache relative to the target object.\n\t\t * @property width\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default undefined\n\t\t **/\n\t\tthis.width = undefined;\n\n\t\t/**\n\t\t * Height of the cache relative to the target object.\n\t\t * @property height\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default undefined\n\t\t * @todo Should the width and height be protected?\n\t\t **/\n\t\tthis.height = undefined;\n\n\t\t/**\n\t\t * Horizontal position of the cache relative to the target's origin.\n\t\t * @property x\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default undefined\n\t\t **/\n\t\tthis.x = undefined;\n\n\t\t/**\n\t\t * Vertical position of the cache relative to target's origin.\n\t\t * @property y\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default undefined\n\t\t **/\n\t\tthis.y = undefined;\n\n\t\t/**\n\t\t * The internal scale of the cache image, does not affects display size. This is useful to both increase and\n\t\t * decrease render quality. Objects with increased scales are more likely to look good when scaled up or rotated.\n\t\t * Objects with decreased scales can save on rendering performance.\n\t\t * @property scale\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.scale = 1;\n\n\t\t/**\n\t\t * The x offset used for drawing into the cache itself, accounts for both transforms applied.\n\t\t * @property offX\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.offX = 0;\n\n\t\t/**\n\t\t * The y offset used for drawing into the cache itself, accounts for both transforms applied.\n\t\t * @property offY\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.offY = 0;\n\n\t\t/**\n\t\t * Track how many times the cache has been updated, mostly used for preventing duplicate cacheURLs.\n\t\t * This can be useful to see if a cache has been updated.\n\t\t * @property cacheID\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.cacheID = 0;\n\n\t\t// protected:\n\t\t/**\n\t\t * The relative offset of the filter's x position, used for drawing the cache onto its container.\n\t\t * Re-calculated every update call before drawing.\n\t\t * @property _filterOffY\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._filterOffX = 0;\n\n\t\t/**\n\t\t * The relative offset of the filter's y position, used for drawing the cache onto its container.\n\t\t * Re-calculated every update call before drawing.\n\t\t * @property _filterOffY\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._filterOffY = 0;\n\n\t\t/**\n\t\t * The cacheID when a DataURL was requested.\n\t\t * @property _cacheDataURLID\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._cacheDataURLID = 0;\n\n\t\t/**\n\t\t * The cache's DataURL, generated on-demand using the getter.\n\t\t * @property _cacheDataURL\n\t\t * @protected\n\t\t * @type {String}\n\t\t * @default null\n\t\t **/\n\t\tthis._cacheDataURL = null;\n\n\t\t/**\n\t\t * Internal tracking of final bounding width, approximately width*scale; however, filters can complicate the actual value.\n\t\t * @property _drawWidth\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._drawWidth = 0;\n\n\t\t/**\n\t\t * Internal tracking of final bounding height, approximately height*scale; however, filters can complicate the actual value.\n\t\t * @property _drawHeight\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._drawHeight = 0;\n\t}\n\tvar p = BitmapCache.prototype;\n\n\t/**\n\t * Returns the bounds that surround all applied filters, relies on each filter to describe how it changes bounds.\n\t * @method getFilterBounds\n\t * @param {DisplayObject} target The object to check the filter bounds for.\n\t * @param {Rectangle} [output=null] Optional parameter, if provided then calculated bounds will be applied to that object.\n\t * @return {Rectangle} bounds object representing the bounds with filters.\n\t * @static\n\t **/\n\tBitmapCache.getFilterBounds = function(target, output) {\n\t\tif(!output){ output = new createjs.Rectangle(); }\n\t\tvar filters = target.filters;\n\t\tvar filterCount = filters && filters.length;\n\t\tif (!!filterCount <= 0) { return output; }\n\n\t\tfor(var i=0; i<filterCount; i++) {\n\t\t\tvar f = filters[i];\n\t\t\tif(!f || !f.getBounds){ continue; }\n\t\t\tvar test = f.getBounds();\n\t\t\tif(!test){ continue; }\n\t\t\tif(i==0) {\n\t\t\t\toutput.setValues(test.x, test.y, test.width, test.height);\n\t\t\t} else {\n\t\t\t\toutput.extend(test.x, test.y, test.width, test.height);\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t};\n\n// public methods:\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[BitmapCache]\";\n\t};\n\n\t/**\n\t * Actually create the correct cache surface and properties associated with it. Caching and it's benefits are discussed\n\t * by the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} function and this class description. Here are the detailed\n\t * specifics of how to use the options object.\n\t *\n\t * - If options.useGL is set to \"new\" a StageGL is created and contained on this for use when rendering the cache.\n\t * - If options.useGL is set to \"stage\" if the current stage is a StageGL it will be used. If not then it will default to \"new\".\n\t * - If options.useGL is a StageGL instance it will not create one but use the one provided.\n\t * - If options.useGL is undefined a Context 2D cache will be performed.\n\t *\n\t * This means you can use any combination of StageGL and 2D with either, neither, or both the stage and cache being\n\t * WebGL. Using \"new\" with a StageGL display list is highly unrecommended, but still an option. It should be avoided\n\t * due to negative performance reasons and the Image loading limitation noted in the class complications above.\n\t *\n\t * When \"options.useGL\" is set to the parent stage of the target and WebGL, performance is increased by using\n\t * \"RenderTextures\" instead of canvas elements. These are internal Textures on the graphics card stored in the GPU.\n\t * Because they are no longer canvases you cannot perform operations you could with a regular canvas. The benefit\n\t * is that this avoids the slowdown of copying the texture back and forth from the GPU to a Canvas element.\n\t * This means \"stage\" is the recommended option when available.\n\t *\n\t * A StageGL cache does not infer the ability to draw objects a StageGL cannot currently draw, i.e. do not use a\n\t * WebGL context cache when caching a Shape, Text, etc.\n\t * <h4>WebGL cache with a 2D context</h4>\n\t *\n\t *     var stage = new createjs.Stage();\n\t *     var bmp = new createjs.Bitmap(src);\n\t *     bmp.cache(0, 0, bmp.width, bmp.height, 1, {gl: \"new\"});          // no StageGL to use, so make one\n\t *\n\t *     var shape = new createjs.Shape();\n\t *     shape.graphics.clear().fill(\"red\").drawRect(0,0,20,20);\n\t *     shape.cache(0, 0, 20, 20, 1);                             // cannot use WebGL cache\n\t *\n\t * <h4>WebGL cache with a WebGL context</h4>\n\t *\n\t *     var stageGL = new createjs.StageGL();\n\t *     var bmp = new createjs.Bitmap(src);\n\t *     bmp.cache(0, 0, bmp.width, bmp.height, 1, {gl: \"stage\"});       // use our StageGL to cache\n\t *\n\t *     var shape = new createjs.Shape();\n\t *     shape.graphics.clear().fill(\"red\").drawRect(0,0,20,20);\n\t *     shape.cache(0, 0, 20, 20, 1);                             // cannot use WebGL cache\n\t *\n\t * You may wish to create your own StageGL instance to control factors like clear color, transparency, AA, and\n\t * others. If you do, pass a new instance in instead of \"true\", the library will automatically set the\n\t * {{#crossLink \"StageGL/isCacheControlled\"}}{{/crossLink}} to true on your instance. This will trigger it to behave\n\t * correctly, and not assume your main context is WebGL.\n\t *\n\t * @public\n\t * @method BitmapCache.cache\n\t * @param {Number} x The x coordinate origin for the cache region.\n\t * @param {Number} y The y coordinate origin for the cache region.\n\t * @param {Number} width The width of the cache region.\n\t * @param {Number} height The height of the cache region.\n\t * @param {Number} [scale=1] The scale at which the cache will be created. For example, if you cache a vector shape\n\t * using myShape.cache(0,0,100,100,2) then the resulting cacheCanvas will be 200x200 px. This lets you scale and\n\t * rotate cached elements with greater fidelity. Default is 1.\n\t * @param {Object} [options=undefined] Specify additional parameters for the cache logic\n\t * @param {undefined|\"new\"|\"stage\"|StageGL} [options.useGL=undefined] Select whether to use context 2D, or WebGL rendering, and\n\t * whether to make a new stage instance or use an existing one. See above for extensive details on use.\n\t * @for BitmapCache\n\t */\n\t p.define = function(target, x, y, width, height, scale, options) {\n\t\tif(!target){ throw \"No symbol to cache\"; }\n\t\tthis._options = options;\n\t\tthis.target = target;\n\n\t\tthis.width =\t\twidth >= 1 ? width : 1;\n\t\tthis.height =\t\theight >= 1 ? height : 1;\n\t\tthis.x =\t\t\tx || 0;\n\t\tthis.y =\t\t\ty || 0;\n\t\tthis.scale =\t\tscale || 1;\n\n\t\tthis.update();\n\t};\n\n\t/**\n\t * Directly called via {{#crossLink \"DisplayObject/updateCache:method\"}}{{/crossLink}}, but also internally. This\n\t * has the dual responsibility of making sure the surface is ready to be drawn to, and performing the draw. For\n\t * full details of each behaviour, check the protected functions {{#crossLink \"BitmapCache/_updateSurface\"}}{{/crossLink}}\n\t * and {{#crossLink \"BitmapCache/_drawToCache\"}}{{/crossLink}} respectively.\n\t * @method update\n\t * @param {String} [compositeOperation=null] The DisplayObject this cache is linked to.\n\t **/\n\tp.update = function(compositeOperation) {\n\t\tif(!this.target) { throw \"define() must be called before update()\"; }\n\n\t\tvar filterBounds = BitmapCache.getFilterBounds(this.target);\n\t\tvar surface = this.target.cacheCanvas;\n\n\t\tthis._drawWidth = Math.ceil(this.width*this.scale) + filterBounds.width;\n\t\tthis._drawHeight = Math.ceil(this.height*this.scale) + filterBounds.height;\n\n\t\tif(!surface || this._drawWidth != surface.width || this._drawHeight != surface.height) {\n\t\t\tthis._updateSurface();\n\t\t}\n\n\t\tthis._filterOffX = filterBounds.x;\n\t\tthis._filterOffY = filterBounds.y;\n\t\tthis.offX = this.x*this.scale + this._filterOffX;\n\t\tthis.offY = this.y*this.scale + this._filterOffY;\n\n\t\tthis._drawToCache(compositeOperation);\n\n\t\tthis.cacheID = this.cacheID?this.cacheID+1:1;\n\t};\n\n\t/**\n\t * Reset and release all the properties and memory associated with this cache.\n\t * @method release\n\t **/\n\tp.release = function() {\n\t\tif (this._webGLCache) {\n\t\t\t// if it isn't cache controlled clean up after yourself\n\t\t\tif (!this._webGLCache.isCacheControlled) {\n\t\t\t\tif (this.__lastRT){ this.__lastRT = undefined; }\n\t\t\t\tif (this.__rtA){ this._webGLCache._killTextureObject(this.__rtA); }\n\t\t\t\tif (this.__rtB){ this._webGLCache._killTextureObject(this.__rtB); }\n\t\t\t\tif (this.target && this.target.cacheCanvas){ this._webGLCache._killTextureObject(this.target.cacheCanvas); }\n\t\t\t}\n\t\t\t// set the context to none and let the garbage collector get the rest when the canvas itself gets removed\n\t\t\tthis._webGLCache = false;\n\t\t} else {\n\t\t\tvar stage = this.target.stage;\n\t\t\tif (stage instanceof createjs.StageGL){\n\t\t\t\tstage.releaseTexture(this.target.cacheCanvas);\n\t\t\t}\n\t\t}\n\n\t\tthis.target = this.target.cacheCanvas = null;\n\t\tthis.cacheID = this._cacheDataURLID = this._cacheDataURL = undefined;\n\t\tthis.width = this.height = this.x = this.y = this.offX = this.offY = 0;\n\t\tthis.scale = 1;\n\t};\n\n\t/**\n\t * Returns a data URL for the cache, or `null` if this display object is not cached.\n\t * Uses {{#crossLink \"BitmapCache/cacheID:property\"}}{{/crossLink}} to ensure a new data URL is not generated if the\n\t * cache has not changed.\n\t * @method getCacheDataURL\n\t * @return {String} The image data url for the cache.\n\t **/\n\tp.getCacheDataURL = function() {\n\t\tvar cacheCanvas = this.target && this.target.cacheCanvas;\n\t\tif (!cacheCanvas) { return null; }\n\t\tif (this.cacheID != this._cacheDataURLID) {\n\t\t\tthis._cacheDataURLID = this.cacheID;\n\t\t\tthis._cacheDataURL = cacheCanvas.toDataURL?cacheCanvas.toDataURL():null;\t// incase function is\n\t\t}\n\t\treturn this._cacheDataURL;\n\t};\n\n\t/**\n\t * Use context2D drawing commands to display the cache canvas being used.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The context to draw into.\n\t * @return {Boolean} Whether the draw was handled successfully.\n\t **/\n\tp.draw = function(ctx) {\n\t\tif(!this.target) { return false; }\n\t\tctx.drawImage(this.target.cacheCanvas,\n\t\t\tthis.x + (this._filterOffX/this.scale),\t\tthis.y + (this._filterOffY/this.scale),\n\t\t\tthis._drawWidth/this.scale,\t\t\t\t\tthis._drawHeight/this.scale\n\t\t);\n\t\treturn true;\n\t};\n\n// private methods:\n\t/**\n\t * Create or resize the invisible canvas/surface that is needed for the display object(s) to draw to,\n\t * and in turn be used in their stead when drawing. The surface is resized to the size defined\n\t * by the width and height, factoring in scaling and filters. Adjust them to adjust the output size.\n\t * @method _updateSurface\n\t * @protected\n\t **/\n\tp._updateSurface = function() {\n\t\tif (!this._options || !this._options.useGL) {\n\t\t\tvar surface = this.target.cacheCanvas;\n\n\t\t\t// create it if it's missing\n\t\t\tif(!surface) {\n\t\t\t\tsurface = this.target.cacheCanvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");\n\t\t\t}\n\n\t\t\t// now size it\n\t\t\tsurface.width = this._drawWidth;\n\t\t\tsurface.height = this._drawHeight;\n\t\t\treturn;\n\t\t}\n\n\t\t// create it if it's missing\n\t\tif (!this._webGLCache) {\n\t\t\tif (this._options.useGL === \"stage\") {\n\t\t\t\tif(!(this.target.stage && this.target.stage.isWebGL)){\n\t\t\t\t\tvar error = \"Cannot use 'stage' for cache because the object's parent stage is \";\n\t\t\t\t\terror += this.target.stage ? \"non WebGL.\" : \"not set, please addChild to the correct stage.\";\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t\tthis.target.cacheCanvas = true; // will be replaced with RenderTexture, temporary positive value for old \"isCached\" checks\n\t\t\t\tthis._webGLCache = this.target.stage;\n\n\t\t\t} else if(this._options.useGL === \"new\") {\n\t\t\t\tthis.target.cacheCanvas = document.createElement(\"canvas\"); // we can turn off autopurge because we wont be making textures here\n\t\t\t\tthis._webGLCache = new createjs.StageGL(this.target.cacheCanvas, {antialias: true, transparent: true, autoPurge: -1});\n\t\t\t\tthis._webGLCache.isCacheControlled = true;\t// use this flag to control stage sizing and final output\n\n\t\t\t} else if(this._options.useGL instanceof createjs.StageGL) {\n\t\t\t\tthis.target.cacheCanvas = true; // will be replaced with RenderTexture, temporary positive value for old \"isCached\" checks\n\t\t\t\tthis._webGLCache = this._options.useGL;\n\t\t\t\tthis._webGLCache.isCacheControlled = true;\t// use this flag to control stage sizing and final output\n\n\t\t\t} else {\n\t\t\t\tthrow \"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got \"+ this._options.useGL;\n\t\t\t}\n\t\t}\n\n\t\t// now size render surfaces\n\t\tvar surface = this.target.cacheCanvas;\n\t\tvar stageGL = this._webGLCache;\n\n\t\t// if we have a dedicated stage we've gotta size it\n\t\tif (stageGL.isCacheControlled) {\n\t\t\tsurface.width = this._drawWidth;\n\t\t\tsurface.height = this._drawHeight;\n\t\t\tstageGL.updateViewport(this._drawWidth, this._drawHeight);\n\t\t}\n\t\tif (this.target.filters) {\n\t\t\t// with filters we can't tell how many we'll need but the most we'll ever need is two, so make them now\n\t\t\tstageGL.getTargetRenderTexture(this.target, this._drawWidth,this._drawHeight);\n\t\t\tstageGL.getTargetRenderTexture(this.target, this._drawWidth,this._drawHeight);\n\t\t} else {\n\t\t\t// without filters then we only need one RenderTexture, and that's only if its not a dedicated stage\n\t\t\tif (!stageGL.isCacheControlled) {\n\t\t\t\tstageGL.getTargetRenderTexture(this.target, this._drawWidth,this._drawHeight);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Perform the cache draw out for context 2D now that the setup properties have been performed.\n\t * @method _drawToCache\n\t * @protected\n\t **/\n\tp._drawToCache = function(compositeOperation) {\n\t\tvar surface = this.target.cacheCanvas;\n\t\tvar target = this.target;\n\t\tvar webGL = this._webGLCache;\n\n\t\tif (webGL){\n\t\t\t//TODO: auto split blur into an x/y pass\n\t\t\twebGL.cacheDraw(target, target.filters, this);\n\n\t\t\t// we may of swapped around which element the surface is, so we re-fetch it\n\t\t\tsurface = this.target.cacheCanvas;\n\n\t\t\tsurface.width = this._drawWidth;\n\t\t\tsurface.height = this._drawHeight;\n\t\t} else {\n\t\t\tvar ctx = surface.getContext(\"2d\");\n\n\t\t\tif (!compositeOperation) {\n\t\t\t\tctx.clearRect(0, 0, this._drawWidth+1, this._drawHeight+1);\n\t\t\t}\n\n\t\t\tctx.save();\n\t\t\tctx.globalCompositeOperation = compositeOperation;\n\t\t\tctx.setTransform(this.scale,0,0,this.scale, -this._filterOffX,-this._filterOffY);\n\t\t\tctx.translate(-this.x, -this.y);\n\t\t\ttarget.draw(ctx, true);\n\t\t\tctx.restore();\n\n\n\t\t\tif (target.filters && target.filters.length) {\n\t\t\t\tthis._applyFilters(ctx);\n\t\t\t}\n\t\t}\n\t\tsurface._invalid = true;\n\t};\n\n\t/**\n\t * Work through every filter and apply its individual visual transformation.\n\t * @method _applyFilters\n\t * @protected\n\t **/\n\tp._applyFilters = function(ctx) {\n\t\tvar filters = this.target.filters;\n\n\t\tvar w = this._drawWidth;\n\t\tvar h = this._drawHeight;\n\n\t\tvar data;\n\n\t\tvar i = 0, filter = filters[i];\n\t\tdo { // this is safe because we wouldn't be in apply filters without a filter count of at least 1\n\t\t\tif(filter.usesContext){\n\t\t\t\tif(data) {\n\t\t\t\t\tctx.putImageData(data, 0,0);\n\t\t\t\t\tdata = null;\n\t\t\t\t}\n\t\t\t\tfilter.applyFilter(ctx, 0,0, w,h);\n\t\t\t} else {\n\t\t\t\tif(!data) {\n\t\t\t\t\tdata = ctx.getImageData(0,0, w,h);\n\t\t\t\t}\n\t\t\t\tfilter._applyFilter(data);\n\t\t\t}\n\n\t\t\t// work through the multipass if it's there, otherwise move on\n\t\t\tfilter = filter._multiPass !== null ? filter._multiPass : filters[++i];\n\t\t} while (filter);\n\n\t\t//done\n\t\tif(data) {\n\t\t\tctx.putImageData(data, 0,0);\n\t\t}\n\t};\n\n\tcreatejs.BitmapCache = BitmapCache;\n}());\n\n//##############################################################################\n// BlurFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies a box blur to DisplayObjects in context 2D and a Gaussian blur in webgl. Note that this filter is fairly\n\t * intensive, particularly if the quality is set higher than 1.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a red circle, and then applies a 5 pixel blur to it. It uses the {{#crossLink \"Filter/getBounds\"}}{{/crossLink}}\n\t * method to account for the spread that the blur causes.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      var blurFilter = new createjs.BlurFilter(5, 5, 1);\n\t *      shape.filters = [blurFilter];\n\t *      var bounds = blurFilter.getBounds();\n\t *\n\t *      shape.cache(-50+bounds.x, -50+bounds.y, 100+bounds.width, 100+bounds.height);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class BlurFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {Number} [blurX=0] The horizontal blur radius in pixels.\n\t * @param {Number} [blurY=0] The vertical blur radius in pixels.\n\t * @param {Number} [quality=1] The number of blur iterations.\n\t **/\n\tfunction BlurFilter( blurX, blurY, quality) {\n\t\tthis.Filter_constructor();\n\n\t\t// public properties:\n\t\t/**\n\t\t * Horizontal blur radius in pixels\n\t\t * @property blurX\n\t\t * @default 0\n\t\t * @type Number\n\t\t **/\n\t\tthis._blurX = blurX;\n\t\tthis._blurXTable = [];\n\t\tthis._lastBlurX = null;\n\n\t\t/**\n\t\t * Vertical blur radius in pixels\n\t\t * @property blurY\n\t\t * @default 0\n\t\t * @type Number\n\t\t **/\n\t\tthis._blurY = blurY;\n\t\tthis._blurYTable = [];\n\t\tthis._lastBlurY = null;\n\n\t\t/**\n\t\t * Number of blur iterations. For example, a value of 1 will produce a rough blur. A value of 2 will produce a\n\t\t * smoother blur, but take twice as long to run.\n\t\t * @property quality\n\t\t * @default 1\n\t\t * @type Number\n\t\t **/\n\t\tthis._quality;\n\t\tthis._lastQuality = null;\n\n\t\t/**\n\t\t * This is a template to generate the shader for {{#crossLink FRAG_SHADER_BODY}}{{/crossLink}}\n\t\t */\n\t\tthis.FRAG_SHADER_TEMPLATE = (\n\t\t\t\"uniform float xWeight[{{blurX}}];\" +\n\t\t\t\"uniform float yWeight[{{blurY}}];\" +\n\t\t\t\"uniform vec2 textureOffset;\" +\n\t\t\t\"void main(void) {\" +\n\t\t\t\t\"vec4 color = vec4(0.0);\" +\n\n\t\t\t\t\"float xAdj = ({{blurX}}.0-1.0)/2.0;\" +\n\t\t\t\t\"float yAdj = ({{blurY}}.0-1.0)/2.0;\" +\n\t\t\t\t\"vec2 sampleOffset;\" +\n\n\t\t\t\t\"for(int i=0; i<{{blurX}}; i++) {\" +\n\t\t\t\t\t\"for(int j=0; j<{{blurY}}; j++) {\" +\n\t\t\t\t\t\t\"sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));\" +\n\t\t\t\t\t\t\"color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);\" +\n\t\t\t\t\t\"}\" +\n\t\t\t\t\"}\" +\n\n\t\t\t\t\"gl_FragColor = color.rgba;\" +\n\t\t\t\"}\"\n\t\t);\n\n\t\t// update the filter using the setters\n\t\tif(isNaN(quality) || quality < 1){ quality = 1; }\n\t\tthis.setQuality(quality|0);\n\t}\n\tvar p = createjs.extend(BlurFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\tp.getBlurX = function() { return this._blurX; };\n\tp.getBlurY = function() { return this._blurY; };\n\tp.setBlurX = function(value) {\n\t\tif(isNaN(value) || value < 0){ value = 0; }\n\t\tthis._blurX = value;\n\t};\n\tp.setBlurY = function(value) {\n\t\tif(isNaN(value) || value < 0){ value = 0; }\n\t\tthis._blurY = value;\n\t};\n\tp.getQuality = function() { return this._quality; };\n\tp.setQuality = function(value) {\n\t\tif(isNaN(value) || value < 0){ value = 0; }\n\t\tthis._quality = value | 0;\n\t};\n\tp._getShader = function() {\n\t\tvar xChange = this._lastBlurX !== this._blurX;\n\t\tvar yChange = this._lastBlurY !== this._blurY;\n\t\tvar qChange = this._lastQuality !== this._quality;\n\t\tif(xChange || yChange || qChange) {\n\t\t\tif(xChange || qChange) { this._blurXTable = this._getTable(this._blurX * this._quality); }\n\t\t\tif(yChange || qChange) { this._blurYTable = this._getTable(this._blurY * this._quality); }\n\t\t\tthis._updateShader();\n\t\t\tthis._lastBlurX = this._blurX;\n\t\t\tthis._lastBlurY = this._blurY;\n\t\t\tthis._lastQuality = this._quality;\n\t\t\treturn undefined; // force a rebuild\n\t\t}\n\t\treturn this._compiledShader;\n\t};\n\tp._setShader = function() { this._compiledShader; };\n\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tblurX: { get: p.getBlurX, set: p.setBlurX },\n\t\t\tblurY: { get: p.getBlurY, set: p.setBlurY },\n\t\t\tquality: { get: p.getQuality, set: p.setQuality },\n\t\t\t_builtShader: { get: p._getShader, set: p._setShader}\n\t\t});\n\t} catch (e) { console.log(e); }\n\n\t/**\n\t * Internal lookup function to create gaussian distribution.\n\t * @method _getTable\n\t * @param {Number} spread How many steps in the curve.\n\t * @return {Array<Number>} An array with Math.ceil(spread*2) entries with appropriately distributed weights.\n\t */\n\tp._getTable = function(spread) {\n\t\tvar EDGE = 4.2;\n\t\tif(spread<=1) { return [1]; }\n\n\t\tvar result = [];\n\t\tvar count = Math.ceil(spread*2);\n\t\tcount += (count%2)?0:1;\n\t\tvar adjust = (count/2)|0;\n\t\tfor(var i = -adjust; i<=adjust; i++) {\n\t\t\tvar x = (i/adjust)*EDGE;\n\t\t\tresult.push(1/Math.sqrt(2*Math.PI) * Math.pow(Math.E, -(Math.pow(x,2)/4)));\n\t\t}\n\t\tvar factor = result.reduce(function(a, b) { return a + b; });\n\t\treturn result.map(function(currentValue, index, array) { return currentValue/factor; });\n\t};\n\n\t/**\n\t * Internal update function to create shader properties.\n\t * @method _updateShader\n\t */\n\tp._updateShader = function() {\n\t\tif(this._blurX === undefined || this._blurY === undefined){ return; }\n\t\tvar result = this.FRAG_SHADER_TEMPLATE;\n\t\tresult = result.replace(/\\{\\{blurX\\}\\}/g, (this._blurXTable.length).toFixed(0));\n\t\tresult = result.replace(/\\{\\{blurY\\}\\}/g, (this._blurYTable.length).toFixed(0));\n\t\tthis.FRAG_SHADER_BODY = result;\n\t};\n\n\t/** docced in super class **/\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {\n\t\t// load the normalized gaussian weight tables\n\t\tgl.uniform1fv(\n\t\t\tgl.getUniformLocation(shaderProgram, \"xWeight\"),\n\t\t\tthis._blurXTable\n\t\t);\n\t\tgl.uniform1fv(\n\t\t\tgl.getUniformLocation(shaderProgram, \"yWeight\"),\n\t\t\tthis._blurYTable\n\t\t);\n\n\t\t// what is the size of a single pixel in -1, 1 (webGL) space\n\t\tgl.uniform2f(\n\t\t\tgl.getUniformLocation(shaderProgram, \"textureOffset\"),\n\t\t\t2/(stage._viewportWidth*this._quality), 2/(stage._viewportHeight*this._quality)\n\t\t);\n\t};\n\n// constants:\n\t/**\n\t * Array of multiply values for blur calculations.\n\t * @property MUL_TABLE\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tBlurFilter.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];\n\n\t/**\n\t * Array of shift values for blur calculations.\n\t * @property SHG_TABLE\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tBlurFilter.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];\n\n// public methods:\n\t/** docced in super class **/\n\tp.getBounds = function (rect) {\n\t\tvar x = this.blurX|0, y = this.blurY| 0;\n\t\tif(x <= 0 && y <= 0) { return rect; }\n\t\tvar q = Math.pow(this.quality, 0.2);\n\t\treturn (rect || new createjs.Rectangle()).pad(y*q+1,x*q+1,y*q+1,x*q+1);\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new BlurFilter(this.blurX, this.blurY, this.quality);\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[BlurFilter]\";\n\t};\n\n\n// private methods:\n\n\t/** docced in super class **/\n\tp._applyFilter = function (imageData) {\n\t\tvar radiusX = this._blurX >> 1;\n\t\tif (isNaN(radiusX) || radiusX < 0) return false;\n\t\tvar radiusY = this._blurY >> 1;\n\t\tif (isNaN(radiusY) || radiusY < 0) return false;\n\t\tif (radiusX == 0 && radiusY == 0) return false;\n\n\t\tvar iterations = this.quality;\n\t\tif (isNaN(iterations) || iterations < 1) iterations = 1;\n\t\titerations |= 0;\n\t\tif (iterations > 3) iterations = 3;\n\t\tif (iterations < 1) iterations = 1;\n\n\t\tvar px = imageData.data;\n\t\tvar x=0, y=0, i=0, p=0, yp=0, yi=0, yw=0, r=0, g=0, b=0, a=0, pr=0, pg=0, pb=0, pa=0;\n\n\t\tvar divx = (radiusX + radiusX + 1) | 0;\n\t\tvar divy = (radiusY + radiusY + 1) | 0;\n\t\tvar w = imageData.width | 0;\n\t\tvar h = imageData.height | 0;\n\n\t\tvar w1 = (w - 1) | 0;\n\t\tvar h1 = (h - 1) | 0;\n\t\tvar rxp1 = (radiusX + 1) | 0;\n\t\tvar ryp1 = (radiusY + 1) | 0;\n\n\t\tvar ssx = {r:0,b:0,g:0,a:0};\n\t\tvar sx = ssx;\n\t\tfor ( i = 1; i < divx; i++ )\n\t\t{\n\t\t\tsx = sx.n = {r:0,b:0,g:0,a:0};\n\t\t}\n\t\tsx.n = ssx;\n\n\t\tvar ssy = {r:0,b:0,g:0,a:0};\n\t\tvar sy = ssy;\n\t\tfor ( i = 1; i < divy; i++ )\n\t\t{\n\t\t\tsy = sy.n = {r:0,b:0,g:0,a:0};\n\t\t}\n\t\tsy.n = ssy;\n\n\t\tvar si = null;\n\n\n\t\tvar mtx = BlurFilter.MUL_TABLE[radiusX] | 0;\n\t\tvar stx = BlurFilter.SHG_TABLE[radiusX] | 0;\n\t\tvar mty = BlurFilter.MUL_TABLE[radiusY] | 0;\n\t\tvar sty = BlurFilter.SHG_TABLE[radiusY] | 0;\n\n\t\twhile (iterations-- > 0) {\n\n\t\t\tyw = yi = 0;\n\t\t\tvar ms = mtx;\n\t\t\tvar ss = stx;\n\t\t\tfor (y = h; --y > -1;) {\n\t\t\t\tr = rxp1 * (pr = px[(yi) | 0]);\n\t\t\t\tg = rxp1 * (pg = px[(yi + 1) | 0]);\n\t\t\t\tb = rxp1 * (pb = px[(yi + 2) | 0]);\n\t\t\t\ta = rxp1 * (pa = px[(yi + 3) | 0]);\n\n\t\t\t\tsx = ssx;\n\n\t\t\t\tfor( i = rxp1; --i > -1; )\n\t\t\t\t{\n\t\t\t\t\tsx.r = pr;\n\t\t\t\t\tsx.g = pg;\n\t\t\t\t\tsx.b = pb;\n\t\t\t\t\tsx.a = pa;\n\t\t\t\t\tsx = sx.n;\n\t\t\t\t}\n\n\t\t\t\tfor( i = 1; i < rxp1; i++ )\n\t\t\t\t{\n\t\t\t\t\tp = (yi + ((w1 < i ? w1 : i) << 2)) | 0;\n\t\t\t\t\tr += ( sx.r = px[p]);\n\t\t\t\t\tg += ( sx.g = px[p+1]);\n\t\t\t\t\tb += ( sx.b = px[p+2]);\n\t\t\t\t\ta += ( sx.a = px[p+3]);\n\n\t\t\t\t\tsx = sx.n;\n\t\t\t\t}\n\n\t\t\t\tsi = ssx;\n\t\t\t\tfor ( x = 0; x < w; x++ )\n\t\t\t\t{\n\t\t\t\t\tpx[yi++] = (r * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (g * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (b * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (a * ms) >>> ss;\n\n\t\t\t\t\tp = ((yw + ((p = x + radiusX + 1) < w1 ? p : w1)) << 2);\n\n\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\tsi = si.n;\n\n\t\t\t\t}\n\t\t\t\tyw += w;\n\t\t\t}\n\n\t\t\tms = mty;\n\t\t\tss = sty;\n\t\t\tfor (x = 0; x < w; x++) {\n\t\t\t\tyi = (x << 2) | 0;\n\n\t\t\t\tr = (ryp1 * (pr = px[yi])) | 0;\n\t\t\t\tg = (ryp1 * (pg = px[(yi + 1) | 0])) | 0;\n\t\t\t\tb = (ryp1 * (pb = px[(yi + 2) | 0])) | 0;\n\t\t\t\ta = (ryp1 * (pa = px[(yi + 3) | 0])) | 0;\n\n\t\t\t\tsy = ssy;\n\t\t\t\tfor( i = 0; i < ryp1; i++ )\n\t\t\t\t{\n\t\t\t\t\tsy.r = pr;\n\t\t\t\t\tsy.g = pg;\n\t\t\t\t\tsy.b = pb;\n\t\t\t\t\tsy.a = pa;\n\t\t\t\t\tsy = sy.n;\n\t\t\t\t}\n\n\t\t\t\typ = w;\n\n\t\t\t\tfor( i = 1; i <= radiusY; i++ )\n\t\t\t\t{\n\t\t\t\t\tyi = ( yp + x ) << 2;\n\n\t\t\t\t\tr += ( sy.r = px[yi]);\n\t\t\t\t\tg += ( sy.g = px[yi+1]);\n\t\t\t\t\tb += ( sy.b = px[yi+2]);\n\t\t\t\t\ta += ( sy.a = px[yi+3]);\n\n\t\t\t\t\tsy = sy.n;\n\n\t\t\t\t\tif( i < h1 )\n\t\t\t\t\t{\n\t\t\t\t\t\typ += w;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tyi = x;\n\t\t\t\tsi = ssy;\n\t\t\t\tif ( iterations > 0 )\n\t\t\t\t{\n\t\t\t\t\tfor ( y = 0; y < h; y++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tp = yi << 2;\n\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\n\t\t\t\t\t\tif ( pa > 0 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss );\n\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss );\n\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\n\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t\tyi += w;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor ( y = 0; y < h; y++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tp = yi << 2;\n\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\n\t\t\t\t\t\tif ( pa > 0 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpa = 255 / pa;\n\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss ) * pa;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\n\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t\tyi += w;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn true;\n\t};\n\n\tcreatejs.BlurFilter = createjs.promote(BlurFilter, \"Filter\");\n}());\n\n//##############################################################################\n// AlphaMapFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\t\n\t\n// constructor:\n\t/**\n\t * Applies a greyscale alpha map image (or canvas) to the target, such that the alpha channel of the result will\n\t * be copied from the red channel of the map, and the RGB channels will be copied from the target.\n\t *\n\t * Generally, it is recommended that you use {{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}, because it has much\n\t * better performance.\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a red->blue box, caches it, and then uses the cache canvas as an alpha map on a 100x100 image.\n\t *\n\t *       var box = new createjs.Shape();\n\t *       box.graphics.beginLinearGradientFill([\"#ff0000\", \"#0000ff\"], [0, 1], 0, 0, 0, 100)\n\t *       box.graphics.drawRect(0, 0, 100, 100);\n\t *       box.cache(0, 0, 100, 100);\n\t *\n\t *       var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n\t *       bmp.filters = [\n\t *           new createjs.AlphaMapFilter(box.cacheCanvas)\n\t *       ];\n\t *       bmp.cache(0, 0, 100, 100);\n\t *       stage.addChild(bmp);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n\t * @class AlphaMapFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {HTMLImageElement|HTMLCanvasElement} alphaMap The greyscale image (or canvas) to use as the alpha value for the\n\t * result. This should be exactly the same dimensions as the target.\n\t **/\n\tfunction AlphaMapFilter(alphaMap) {\n\t\tthis.Filter_constructor();\n\t\n\t// public properties:\n\t\t/**\n\t\t * The greyscale image (or canvas) to use as the alpha value for the result. This should be exactly the same\n\t\t * dimensions as the target.\n\t\t * @property alphaMap\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis.alphaMap = alphaMap;\n\t\t\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * @property _alphaMap\n\t\t * @protected\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis._alphaMap = null;\n\t\t\n\t\t/**\n\t\t * @property _mapData\n\t\t * @protected\n\t\t * @type Uint8ClampedArray\n\t\t **/\n\t\tthis._mapData = null;\n\t\tthis._mapTexture = null;\n\n\t\tthis.FRAG_SHADER_BODY = (\n\t\t\t\"uniform sampler2D uAlphaSampler;\"+\n\n\t\t\t\"void main(void) {\" +\n\t\t\t\t\"vec4 color = texture2D(uSampler, vRenderCoord);\" +\n\t\t\t\t\"vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);\" +\n\n\t\t\t\t// some image formats can have transparent white rgba(1,1,1, 0) when put on the GPU, this means we need a slight tweak\n\t\t\t\t// using ceil ensure that the colour will be used so long as it exists but pure transparency will be treated black\n\t\t\t\t\"gl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));\" +\n\t\t\t\"}\"\n\t\t);\n\t}\n\tvar p = createjs.extend(AlphaMapFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t/** docced in super class **/\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {\n\t\tif(!this._mapTexture) { this._mapTexture = gl.createTexture(); }\n\n\t\tgl.activeTexture(gl.TEXTURE1);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this._mapTexture);\n\t\tstage.setTextureParams(gl);\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.alphaMap);\n\n\t\tgl.uniform1i(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uAlphaSampler\"),\n\t\t\t1\n\t\t);\n\t};\n\n// public methods:\n\t/** docced in super class **/\n\tp.clone = function () {\n\t\tvar o = new AlphaMapFilter(this.alphaMap);\n\t\to._alphaMap = this._alphaMap;\n\t\to._mapData = this._mapData;\n\t\treturn o;\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function () {\n\t\treturn \"[AlphaMapFilter]\";\n\t};\n\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function (imageData) {\n\t\tif (!this.alphaMap) { return true; }\n\t\tif (!this._prepAlphaMap()) { return false; }\n\t\t\n\t\t// TODO: update to support scenarios where the target has different dimensions.\n\t\tvar data = imageData.data;\n\t\tvar map = this._mapData;\n\t\tfor(var i=0, l=data.length; i<l; i += 4) { data[i + 3] = map[i] || 0; }\n\t\t\n\t\treturn true;\n\t};\n\n\t/**\n\t * @method _prepAlphaMap\n\t * @protected\n\t **/\n\tp._prepAlphaMap = function () {\n\t\tif (!this.alphaMap) { return false; }\n\t\tif (this.alphaMap == this._alphaMap && this._mapData) { return true; }\n\n\t\tthis._mapData = null;\n\t\tvar map = this._alphaMap = this.alphaMap;\n\t\tvar canvas = map;\n\t\tvar ctx;\n\t\tif (map instanceof HTMLCanvasElement) {\n\t\t\tctx = canvas.getContext(\"2d\");\n\t\t} else {\n\t\t\tcanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n\t\t\tcanvas.width = map.width;\n\t\t\tcanvas.height = map.height;\n\t\t\tctx = canvas.getContext(\"2d\");\n\t\t\tctx.drawImage(map, 0, 0);\n\t\t}\n\n\t\ttry {\n\t\t\tvar imgData = ctx.getImageData(0, 0, map.width, map.height);\n\t\t} catch (e) {\n\t\t\t//if (!this.suppressCrossDomainErrors) throw new Error(\"unable to access local image data: \" + e);\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tthis._mapData = imgData.data;\n\t\treturn true;\n\t};\n\n\n\tcreatejs.AlphaMapFilter = createjs.promote(AlphaMapFilter, \"Filter\");\n}());\n\n//##############################################################################\n// AlphaMaskFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies the alpha from the mask image (or canvas) to the target, such that the alpha channel of the result will\n\t * be derived from the mask, and the RGB channels will be copied from the target. This can be used, for example, to\n\t * apply an alpha mask to a display object. This can also be used to combine a JPG compressed RGB image with a PNG32\n\t * alpha mask, which can result in a much smaller file size than a single PNG32 containing ARGB.\n\t *\n\t * <b>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters correctly.</b>\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a gradient box, then caches it and uses the \"cacheCanvas\" as the alpha mask on a 100x100 image.\n\t *\n\t *      var box = new createjs.Shape();\n\t *      box.graphics.beginLinearGradientFill([\"#000000\", \"rgba(0, 0, 0, 0)\"], [0, 1], 0, 0, 100, 100)\n\t *      box.graphics.drawRect(0, 0, 100, 100);\n\t *      box.cache(0, 0, 100, 100);\n\t *\n\t *      var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n\t *      bmp.filters = [\n\t *          new createjs.AlphaMaskFilter(box.cacheCanvas)\n\t *      ];\n\t *      bmp.cache(0, 0, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n\t * @class AlphaMaskFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {HTMLImageElement|HTMLCanvasElement} mask\n\t **/\n\tfunction AlphaMaskFilter(mask) {\n\t\tthis.Filter_constructor();\n\t\n\t// public properties:\n\t\t/**\n\t\t * The image (or canvas) to use as the mask.\n\t\t * @property mask\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis.mask = mask;\n\n\t\t/** docced in super class **/\n\t\tthis.usesContext = true;\n\n\t\tthis.FRAG_SHADER_BODY = (\n\t\t\t\"uniform sampler2D uAlphaSampler;\"+\n\n\t\t\t\"void main(void) {\" +\n\t\t\t\t\"vec4 color = texture2D(uSampler, vRenderCoord);\" +\n\t\t\t\t\"vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);\" +\n\n\t\t\t\t\"gl_FragColor = vec4(color.rgb, color.a * alphaMap.a);\" +\n\t\t\t\"}\"\n\t\t);\n\t}\n\tvar p = createjs.extend(AlphaMaskFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t/** docced in super class **/\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {\n\t\tif(!this._mapTexture) { this._mapTexture = gl.createTexture(); }\n\n\t\tgl.activeTexture(gl.TEXTURE1);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this._mapTexture);\n\t\tstage.setTextureParams(gl);\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.mask);\n\n\t\tgl.uniform1i(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uAlphaSampler\"),\n\t\t\t1\n\t\t);\n\t};\n\n// public methods:\n\t/**\n\t * Applies the filter to the specified context.\n\t *\n\t * <strong>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters\n\t * correctly.</strong>\n\t * @method applyFilter\n\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n\t * @param {Number} x The x position to use for the source rect.\n\t * @param {Number} y The y position to use for the source rect.\n\t * @param {Number} width The width to use for the source rect.\n\t * @param {Number} height The height to use for the source rect.\n\t * @param {CanvasRenderingContext2D} [targetCtx] NOT SUPPORTED IN THIS FILTER. The 2D context to draw the result to. Defaults to the context passed to ctx.\n\t * @param {Number} [targetX] NOT SUPPORTED IN THIS FILTER. The x position to draw the result to. Defaults to the value passed to x.\n\t * @param {Number} [targetY] NOT SUPPORTED IN THIS FILTER. The y position to draw the result to. Defaults to the value passed to y.\n\t * @return {Boolean} If the filter was applied successfully.\n\t **/\n\tp.applyFilter = function (ctx, x, y, width, height, targetCtx, targetX, targetY) {\n\t\tif (!this.mask) { return true; }\n\t\ttargetCtx = targetCtx || ctx;\n\t\tif (targetX == null) { targetX = x; }\n\t\tif (targetY == null) { targetY = y; }\n\n\t\ttargetCtx.save();\n\t\tif (ctx != targetCtx) {\n\t\t\t// TODO: support targetCtx and targetX/Y\n\t\t\t// clearRect, then draw the ctx in?\n\t\t\treturn false;\n\t\t}\n\n\t\ttargetCtx.globalCompositeOperation = \"destination-in\";\n\t\ttargetCtx.drawImage(this.mask, targetX, targetY);\n\t\ttargetCtx.restore();\n\t\treturn true;\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function () {\n\t\treturn new AlphaMaskFilter(this.mask);\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function () {\n\t\treturn \"[AlphaMaskFilter]\";\n\t};\n\n\n\tcreatejs.AlphaMaskFilter = createjs.promote(AlphaMaskFilter, \"Filter\");\n}());\n\n//##############################################################################\n// ColorFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies a color transform to DisplayObjects.\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a red circle, and then transforms it to Blue. This is accomplished by multiplying all the channels\n\t * to 0 (except alpha, which is set to 1), and then adding 255 to the blue channel.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      shape.filters = [\n\t *          new createjs.ColorFilter(0,0,0,1, 0,0,255,0)\n\t *      ];\n\t *      shape.cache(-50, -50, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class ColorFilter\n\t * @param {Number} [redMultiplier=1] The amount to multiply against the red channel. This is a range between 0 and 1.\n\t * @param {Number} [greenMultiplier=1] The amount to multiply against the green channel. This is a range between 0 and 1.\n\t * @param {Number} [blueMultiplier=1] The amount to multiply against the blue channel. This is a range between 0 and 1.\n\t * @param {Number} [alphaMultiplier=1] The amount to multiply against the alpha channel. This is a range between 0 and 1.\n\t * @param {Number} [redOffset=0] The amount to add to the red channel after it has been multiplied. This is a range\n\t * between -255 and 255.\n\t * @param {Number} [greenOffset=0] The amount to add to the green channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @param {Number} [blueOffset=0] The amount to add to the blue channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @param {Number} [alphaOffset=0] The amount to add to the alpha channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @constructor\n\t * @extends Filter\n\t **/\n\tfunction ColorFilter(redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset) {\n\t\tthis.Filter_constructor();\n\n\t// public properties:\n\t\t/**\n\t\t * Red channel multiplier.\n\t\t * @property redMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.redMultiplier = redMultiplier != null ? redMultiplier : 1;\n\t\n\t\t/**\n\t\t * Green channel multiplier.\n\t\t * @property greenMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.greenMultiplier = greenMultiplier != null ? greenMultiplier : 1;\n\t\n\t\t/**\n\t\t * Blue channel multiplier.\n\t\t * @property blueMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.blueMultiplier = blueMultiplier != null ? blueMultiplier : 1;\n\t\n\t\t/**\n\t\t * Alpha channel multiplier.\n\t\t * @property alphaMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.alphaMultiplier = alphaMultiplier != null ? alphaMultiplier : 1;\n\t\n\t\t/**\n\t\t * Red channel offset (added to value).\n\t\t * @property redOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.redOffset = redOffset || 0;\n\t\n\t\t/**\n\t\t * Green channel offset (added to value).\n\t\t * @property greenOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.greenOffset = greenOffset || 0;\n\t\n\t\t/**\n\t\t * Blue channel offset (added to value).\n\t\t * @property blueOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.blueOffset = blueOffset || 0;\n\t\n\t\t/**\n\t\t * Alpha channel offset (added to value).\n\t\t * @property alphaOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.alphaOffset = alphaOffset || 0;\n\n\t\tthis.FRAG_SHADER_BODY = (\n\t\t\t\"uniform vec4 uColorMultiplier;\" +\n\t\t\t\"uniform vec4 uColorOffset;\" +\n\n\t\t\t\"void main(void) {\" +\n\t\t\t\t\"vec4 color = texture2D(uSampler, vRenderCoord);\" +\n\n\t\t\t\t\"gl_FragColor = (color * uColorMultiplier) + uColorOffset;\" +\n\t\t\t\"}\"\n\t\t);\n\n\t}\n\tvar p = createjs.extend(ColorFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/** docced in super class **/\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {\n\t\tgl.uniform4f(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uColorMultiplier\"),\n\t\t\tthis.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier\n\t\t);\n\n\t\tgl.uniform4f(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uColorOffset\"),\n\t\t\tthis.redOffset/255, this.greenOffset/255, this.blueOffset/255, this.alphaOffset/255\n\t\t);\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[ColorFilter]\";\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new ColorFilter(\n\t\t\tthis.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier,\n\t\t\tthis.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset\n\t\t);\n\t};\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function(imageData) {\n\t\tvar data = imageData.data;\n\t\tvar l = data.length;\n\t\tfor (var i=0; i<l; i+=4) {\n\t\t\tdata[i] = data[i]*this.redMultiplier+this.redOffset;\n\t\t\tdata[i+1] = data[i+1]*this.greenMultiplier+this.greenOffset;\n\t\t\tdata[i+2] = data[i+2]*this.blueMultiplier+this.blueOffset;\n\t\t\tdata[i+3] = data[i+3]*this.alphaMultiplier+this.alphaOffset;\n\t\t}\n\t\treturn true;\n\t};\n\n\n\tcreatejs.ColorFilter = createjs.promote(ColorFilter, \"Filter\");\n}());\n\n//##############################################################################\n// ColorMatrix.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Provides helper functions for assembling a matrix for use with the {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}.\n\t * Most methods return the instance to facilitate chained calls.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myColorMatrix.adjustHue(20).adjustBrightness(50);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an example of how to apply filters, or {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}\n\t * for an example of how to use ColorMatrix to change a DisplayObject's color.\n\t * @class ColorMatrix\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @constructor\n\t **/\n\tfunction ColorMatrix(brightness, contrast, saturation, hue) {\n\t\tthis.setColor(brightness, contrast, saturation, hue);\n\t}\n\tvar p = ColorMatrix.prototype;\n\n// constants:\n\t/**\n\t * Array of delta values for contrast calculations.\n\t * @property DELTA_INDEX\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.DELTA_INDEX = [\n\t\t0,    0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1,  0.11,\n\t\t0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.20, 0.21, 0.22, 0.24,\n\t\t0.25, 0.27, 0.28, 0.30, 0.32, 0.34, 0.36, 0.38, 0.40, 0.42,\n\t\t0.44, 0.46, 0.48, 0.5,  0.53, 0.56, 0.59, 0.62, 0.65, 0.68,\n\t\t0.71, 0.74, 0.77, 0.80, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98,\n\t\t1.0,  1.06, 1.12, 1.18, 1.24, 1.30, 1.36, 1.42, 1.48, 1.54,\n\t\t1.60, 1.66, 1.72, 1.78, 1.84, 1.90, 1.96, 2.0,  2.12, 2.25,\n\t\t2.37, 2.50, 2.62, 2.75, 2.87, 3.0,  3.2,  3.4,  3.6,  3.8,\n\t\t4.0,  4.3,  4.7,  4.9,  5.0,  5.5,  6.0,  6.5,  6.8,  7.0,\n\t\t7.3,  7.5,  7.8,  8.0,  8.4,  8.7,  9.0,  9.4,  9.6,  9.8,\n\t\t10.0\n\t];\n\n\t/**\n\t * Identity matrix values.\n\t * @property IDENTITY_MATRIX\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.IDENTITY_MATRIX = [\n\t\t1,0,0,0,0,\n\t\t0,1,0,0,0,\n\t\t0,0,1,0,0,\n\t\t0,0,0,1,0,\n\t\t0,0,0,0,1\n\t];\n\n\t/**\n\t * The constant length of a color matrix.\n\t * @property LENGTH\n\t * @type Number\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.LENGTH = ColorMatrix.IDENTITY_MATRIX.length;\n\n\n// public methods:\n\t/**\n\t * Resets the instance with the specified values.\n\t * @method setColor\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t */\n\tp.setColor = function(brightness,contrast,saturation,hue) {\n\t\treturn this.reset().adjustColor(brightness,contrast,saturation,hue);\n\t};\n\n\t/**\n\t * Resets the matrix to identity values.\n\t * @method reset\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t */\n\tp.reset = function() {\n\t\treturn this.copy(ColorMatrix.IDENTITY_MATRIX);\n\t};\n\n\t/**\n\t * Shortcut method to adjust brightness, contrast, saturation and hue.\n\t * Equivalent to calling adjustHue(hue), adjustContrast(contrast),\n\t * adjustBrightness(brightness), adjustSaturation(saturation), in that order.\n\t * @method adjustColor\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustColor = function(brightness,contrast,saturation,hue) {\n\t\tthis.adjustHue(hue);\n\t\tthis.adjustContrast(contrast);\n\t\tthis.adjustBrightness(brightness);\n\t\treturn this.adjustSaturation(saturation);\n\t};\n\n\t/**\n\t * Adjusts the brightness of pixel color by adding the specified value to the red, green and blue channels.\n\t * Positive values will make the image brighter, negative values will make it darker.\n\t * @method adjustBrightness\n\t * @param {Number} value A value between -255 & 255 that will be added to the RGB channels.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustBrightness = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,255);\n\t\tthis._multiplyMatrix([\n\t\t\t1,0,0,0,value,\n\t\t\t0,1,0,0,value,\n\t\t\t0,0,1,0,value,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Adjusts the contrast of pixel color.\n\t * Positive values will increase contrast, negative values will decrease contrast.\n\t * @method adjustContrast\n\t * @param {Number} value A value between -100 & 100.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustContrast = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,100);\n\t\tvar x;\n\t\tif (value<0) {\n\t\t\tx = 127+value/100*127;\n\t\t} else {\n\t\t\tx = value%1;\n\t\t\tif (x == 0) {\n\t\t\t\tx = ColorMatrix.DELTA_INDEX[value];\n\t\t\t} else {\n\t\t\t\tx = ColorMatrix.DELTA_INDEX[(value<<0)]*(1-x)+ColorMatrix.DELTA_INDEX[(value<<0)+1]*x; // use linear interpolation for more granularity.\n\t\t\t}\n\t\t\tx = x*127+127;\n\t\t}\n\t\tthis._multiplyMatrix([\n\t\t\tx/127,0,0,0,0.5*(127-x),\n\t\t\t0,x/127,0,0,0.5*(127-x),\n\t\t\t0,0,x/127,0,0.5*(127-x),\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Adjusts the color saturation of the pixel.\n\t * Positive values will increase saturation, negative values will decrease saturation (trend towards greyscale).\n\t * @method adjustSaturation\n\t * @param {Number} value A value between -100 & 100.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustSaturation = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,100);\n\t\tvar x = 1+((value > 0) ? 3*value/100 : value/100);\n\t\tvar lumR = 0.3086;\n\t\tvar lumG = 0.6094;\n\t\tvar lumB = 0.0820;\n\t\tthis._multiplyMatrix([\n\t\t\tlumR*(1-x)+x,lumG*(1-x),lumB*(1-x),0,0,\n\t\t\tlumR*(1-x),lumG*(1-x)+x,lumB*(1-x),0,0,\n\t\t\tlumR*(1-x),lumG*(1-x),lumB*(1-x)+x,0,0,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\n\t/**\n\t * Adjusts the hue of the pixel color.\n\t * @method adjustHue\n\t * @param {Number} value A value between -180 & 180.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustHue = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,180)/180*Math.PI;\n\t\tvar cosVal = Math.cos(value);\n\t\tvar sinVal = Math.sin(value);\n\t\tvar lumR = 0.213;\n\t\tvar lumG = 0.715;\n\t\tvar lumB = 0.072;\n\t\tthis._multiplyMatrix([\n\t\t\tlumR+cosVal*(1-lumR)+sinVal*(-lumR),lumG+cosVal*(-lumG)+sinVal*(-lumG),lumB+cosVal*(-lumB)+sinVal*(1-lumB),0,0,\n\t\t\tlumR+cosVal*(-lumR)+sinVal*(0.143),lumG+cosVal*(1-lumG)+sinVal*(0.140),lumB+cosVal*(-lumB)+sinVal*(-0.283),0,0,\n\t\t\tlumR+cosVal*(-lumR)+sinVal*(-(1-lumR)),lumG+cosVal*(-lumG)+sinVal*(lumG),lumB+cosVal*(1-lumB)+sinVal*(lumB),0,0,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Concatenates (multiplies) the specified matrix with this one.\n\t * @method concat\n\t * @param {Array} matrix An array or ColorMatrix instance.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.concat = function(matrix) {\n\t\tmatrix = this._fixMatrix(matrix);\n\t\tif (matrix.length != ColorMatrix.LENGTH) { return this; }\n\t\tthis._multiplyMatrix(matrix);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a clone of this ColorMatrix.\n\t * @method clone\n\t * @return {ColorMatrix} A clone of this ColorMatrix.\n\t **/\n\tp.clone = function() {\n\t\treturn (new ColorMatrix()).copy(this);\n\t};\n\n\t/**\n\t * Return a length 25 (5x5) array instance containing this matrix's values.\n\t * @method toArray\n\t * @return {Array} An array holding this matrix's values.\n\t **/\n\tp.toArray = function() {\n\t\tvar arr = [];\n\t\tfor (var i= 0, l=ColorMatrix.LENGTH; i<l; i++) {\n\t\t\tarr[i] = this[i];\n\t\t}\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Copy the specified matrix's values to this matrix.\n\t * @method copy\n\t * @param {Array} matrix An array or ColorMatrix instance.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.copy = function(matrix) {\n\t\tvar l = ColorMatrix.LENGTH;\n\t\tfor (var i=0;i<l;i++) {\n\t\t\tthis[i] = matrix[i];\n\t\t}\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[ColorMatrix]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _multiplyMatrix\n\t * @param {Array} matrix\n\t * @protected\n\t **/\n\tp._multiplyMatrix = function(matrix) {\n\t\tvar i, j, k, col = [];\n\n\t\tfor (i=0;i<5;i++) {\n\t\t\tfor (j=0;j<5;j++) {\n\t\t\t\tcol[j] = this[j+i*5];\n\t\t\t}\n\t\t\tfor (j=0;j<5;j++) {\n\t\t\t\tvar val=0;\n\t\t\t\tfor (k=0;k<5;k++) {\n\t\t\t\t\tval += matrix[j+k*5]*col[k];\n\t\t\t\t}\n\t\t\t\tthis[j+i*5] = val;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Make sure values are within the specified range, hue has a limit of 180, brightness is 255, others are 100.\n\t * @method _cleanValue\n\t * @param {Number} value The raw number\n\t * @param {Number} limit The maximum that the number can be. The minimum is the limit * -1.\n\t * @protected\n\t **/\n\tp._cleanValue = function(value, limit) {\n\t\treturn Math.min(limit,Math.max(-limit,value));\n\t};\n\n\t/**\n\t * Makes sure matrixes are 5x5 (25 long).\n\t * @method _fixMatrix\n\t * @param {Array} matrix\n\t * @protected\n\t **/\n\tp._fixMatrix = function(matrix) {\n\t\tif (matrix instanceof ColorMatrix) { matrix = matrix.toArray(); }\n\t\tif (matrix.length < ColorMatrix.LENGTH) {\n\t\t\tmatrix = matrix.slice(0,matrix.length).concat(ColorMatrix.IDENTITY_MATRIX.slice(matrix.length,ColorMatrix.LENGTH));\n\t\t} else if (matrix.length > ColorMatrix.LENGTH) {\n\t\t\tmatrix = matrix.slice(0,ColorMatrix.LENGTH);\n\t\t}\n\t\treturn matrix;\n\t};\n\n\n\tcreatejs.ColorMatrix = ColorMatrix;\n}());\n\n//##############################################################################\n// ColorMatrixFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Allows you to carry out complex color operations such as modifying saturation, brightness, or inverting. See the\n\t * {{#crossLink \"ColorMatrix\"}}{{/crossLink}} for more information on changing colors. For an easier color transform,\n\t * consider the {{#crossLink \"ColorFilter\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a red circle, inverts its hue, and then saturates it to brighten it up.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      var matrix = new createjs.ColorMatrix().adjustHue(180).adjustSaturation(100);\n\t *      shape.filters = [\n\t *          new createjs.ColorMatrixFilter(matrix)\n\t *      ];\n\t *\n\t *      shape.cache(-50, -50, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class ColorMatrixFilter\n\t * @constructor\n\t * @extends Filter\n\t * @param {Array | ColorMatrix} matrix A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n\t * class.\n\t **/\n\tfunction ColorMatrixFilter(matrix) {\n\t\tthis.Filter_constructor();\n\n\t// public properties:\n\t\t/**\n\t\t * A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n\t\t * @property matrix\n\t\t * @type Array | ColorMatrix\n\t\t **/\n\t\tthis.matrix = matrix;\n\n\t\tthis.FRAG_SHADER_BODY = (\n\t\t\t\"uniform mat4 uColorMatrix;\" +\n\t\t\t\"uniform vec4 uColorMatrixOffset;\" +\n\n\t\t\t\"void main(void) {\" +\n\t\t\t\t\"vec4 color = texture2D(uSampler, vRenderCoord);\" +\n\n\t\t\t\t\"mat4 m = uColorMatrix;\" +\n\t\t\t\t\"vec4 newColor = vec4(0,0,0,0);\" +\n\t\t\t\t\"newColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];\" +\n\t\t\t\t\"newColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];\" +\n\t\t\t\t\"newColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];\" +\n\t\t\t\t\"newColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];\" +\n\n\t\t\t\t\"gl_FragColor = newColor + uColorMatrixOffset;\" +\n\t\t\t\"}\"\n\t\t);\n\t}\n\tvar p = createjs.extend(ColorMatrixFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t/** docced in super class **/\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {\n\t\tvar mat = this.matrix;\n\t\tvar colorMatrix = new Float32Array([\n\t\t\tmat[0],mat[1],mat[2],mat[3],\n\t\t\tmat[5],mat[6],mat[7],mat[8],\n\t\t\tmat[10],mat[11],mat[12],mat[13],\n\t\t\tmat[15],mat[16],mat[17],mat[18]\n\t\t]);\n\n\t\tgl.uniformMatrix4fv(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uColorMatrix\"),\n\t\t\tfalse, colorMatrix\n\t\t);\n\t\tgl.uniform4f(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uColorMatrixOffset\"),\n\t\t\tmat[4]/255, mat[9]/255, mat[14]/255, mat[19]/255\n\t\t);\n\t};\n\n// public methods:\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[ColorMatrixFilter]\";\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new ColorMatrixFilter(this.matrix);\n\t};\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function(imageData) { \n\t\tvar data = imageData.data;\n\t\tvar l = data.length;\n\t\tvar r,g,b,a;\n\t\tvar mtx = this.matrix;\n\t\tvar m0 =  mtx[0],  m1 =  mtx[1],  m2 =  mtx[2],  m3 =  mtx[3],  m4 =  mtx[4];\n\t\tvar m5 =  mtx[5],  m6 =  mtx[6],  m7 =  mtx[7],  m8 =  mtx[8],  m9 =  mtx[9];\n\t\tvar m10 = mtx[10], m11 = mtx[11], m12 = mtx[12], m13 = mtx[13], m14 = mtx[14];\n\t\tvar m15 = mtx[15], m16 = mtx[16], m17 = mtx[17], m18 = mtx[18], m19 = mtx[19];\n\n\t\tfor (var i=0; i<l; i+=4) {\n\t\t\tr = data[i];\n\t\t\tg = data[i+1];\n\t\t\tb = data[i+2];\n\t\t\ta = data[i+3];\n\t\t\tdata[i] = r*m0+g*m1+b*m2+a*m3+m4; // red\n\t\t\tdata[i+1] = r*m5+g*m6+b*m7+a*m8+m9; // green\n\t\t\tdata[i+2] = r*m10+g*m11+b*m12+a*m13+m14; // blue\n\t\t\tdata[i+3] = r*m15+g*m16+b*m17+a*m18+m19; // alpha\n\t\t}\n\t\treturn true;\n\t};\n\n\tcreatejs.ColorMatrixFilter = createjs.promote(ColorMatrixFilter, \"Filter\");\n}());\n\n//##############################################################################\n// Touch.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n * Global utility for working with multi-touch enabled devices in EaselJS. Currently supports W3C Touch API (iOS and\n * modern Android browser) and the Pointer API (IE), including ms-prefixed events in IE10, and unprefixed in IE11.\n *\n * Ensure that you {{#crossLink \"Touch/disable\"}}{{/crossLink}} touch when cleaning up your application. You do not have\n * to check if touch is supported to enable it, as it will fail gracefully if it is not supported.\n *\n * <h4>Example</h4>\n *\n *      var stage = new createjs.Stage(\"canvasId\");\n *      createjs.Touch.enable(stage);\n *\n * <strong>Note:</strong> It is important to disable Touch on a stage that you are no longer using:\n *\n *      createjs.Touch.disable(stage);\n *\n * @class Touch\n * @static\n **/\n\tfunction Touch() {\n\t\tthrow \"Touch cannot be instantiated\";\n\t}\n\n\n// public static methods:\n\t/**\n\t * Returns `true` if touch is supported in the current browser.\n\t * @method isSupported\n\t * @return {Boolean} Indicates whether touch is supported in the current browser.\n\t * @static\n\t **/\n\tTouch.isSupported = function() {\n\t\treturn\t!!(('ontouchstart' in window) // iOS & Android\n\t\t\t|| (window.navigator['msPointerEnabled'] && window.navigator['msMaxTouchPoints'] > 0) // IE10\n\t\t\t|| (window.navigator['pointerEnabled'] && window.navigator['maxTouchPoints'] > 0)); // IE11+\n\t};\n\n\t/**\n\t * Enables touch interaction for the specified EaselJS {{#crossLink \"Stage\"}}{{/crossLink}}. Currently supports iOS\n\t * (and compatible browsers, such as modern Android browsers), and IE10/11. Supports both single touch and\n\t * multi-touch modes. Extends the EaselJS {{#crossLink \"MouseEvent\"}}{{/crossLink}} model, but without support for\n\t * double click or over/out events. See the MouseEvent {{#crossLink \"MouseEvent/pointerId:property\"}}{{/crossLink}}\n\t * for more information.\n\t * @method enable\n\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to enable touch on.\n\t * @param {Boolean} [singleTouch=false] If `true`, only a single touch will be active at a time.\n\t * @param {Boolean} [allowDefault=false] If `true`, then default gesture actions (ex. scrolling, zooming) will be\n\t * allowed when the user is interacting with the target canvas.\n\t * @return {Boolean} Returns `true` if touch was successfully enabled on the target stage.\n\t * @static\n\t **/\n\tTouch.enable = function(stage, singleTouch, allowDefault) {\n\t\tif (!stage || !stage.canvas || !Touch.isSupported()) { return false; }\n\t\tif (stage.__touch) { return true; }\n\n\t\t// inject required properties on stage:\n\t\tstage.__touch = {pointers:{}, multitouch:!singleTouch, preventDefault:!allowDefault, count:0};\n\n\t\t// note that in the future we may need to disable the standard mouse event model before adding\n\t\t// these to prevent duplicate calls. It doesn't seem to be an issue with iOS devices though.\n\t\tif ('ontouchstart' in window) { Touch._IOS_enable(stage); }\n\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_enable(stage); }\n\t\treturn true;\n\t};\n\n\t/**\n\t * Removes all listeners that were set up when calling `Touch.enable()` on a stage.\n\t * @method disable\n\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to disable touch on.\n\t * @static\n\t **/\n\tTouch.disable = function(stage) {\n\t\tif (!stage) { return; }\n\t\tif ('ontouchstart' in window) { Touch._IOS_disable(stage); }\n\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_disable(stage); }\n\t\t\n\t\tdelete stage.__touch;\n\t};\n\n\n// Private static methods:\n\t/**\n\t * @method _IOS_enable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IOS_enable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tvar f = stage.__touch.f = function(e) { Touch._IOS_handleEvent(stage,e); };\n\t\tcanvas.addEventListener(\"touchstart\", f, false);\n\t\tcanvas.addEventListener(\"touchmove\", f, false);\n\t\tcanvas.addEventListener(\"touchend\", f, false);\n\t\tcanvas.addEventListener(\"touchcancel\", f, false);\n\t};\n\n\t/**\n\t * @method _IOS_disable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IOS_disable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tif (!canvas) { return; }\n\t\tvar f = stage.__touch.f;\n\t\tcanvas.removeEventListener(\"touchstart\", f, false);\n\t\tcanvas.removeEventListener(\"touchmove\", f, false);\n\t\tcanvas.removeEventListener(\"touchend\", f, false);\n\t\tcanvas.removeEventListener(\"touchcancel\", f, false);\n\t};\n\n\t/**\n\t * @method _IOS_handleEvent\n\t * @param {Stage} stage\n\t * @param {Object} e The event to handle\n\t * @protected\n\t * @static\n\t **/\n\tTouch._IOS_handleEvent = function(stage, e) {\n\t\tif (!stage) { return; }\n\t\tif (stage.__touch.preventDefault) { e.preventDefault&&e.preventDefault(); }\n\t\tvar touches = e.changedTouches;\n\t\tvar type = e.type;\n\t\tfor (var i= 0,l=touches.length; i<l; i++) {\n\t\t\tvar touch = touches[i];\n\t\t\tvar id = touch.identifier;\n\t\t\tif (touch.target != stage.canvas) { continue; }\n\n\t\t\tif (type == \"touchstart\") {\n\t\t\t\tthis._handleStart(stage, id, e, touch.pageX, touch.pageY);\n\t\t\t} else if (type == \"touchmove\") {\n\t\t\t\tthis._handleMove(stage, id, e, touch.pageX, touch.pageY);\n\t\t\t} else if (type == \"touchend\" || type == \"touchcancel\") {\n\t\t\t\tthis._handleEnd(stage, id, e);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _IE_enable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IE_enable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tvar f = stage.__touch.f = function(e) { Touch._IE_handleEvent(stage,e); };\n\n\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\n\t\t\tcanvas.addEventListener(\"MSPointerDown\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerMove\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerUp\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerCancel\", f, false);\n\t\t\tif (stage.__touch.preventDefault) { canvas.style.msTouchAction = \"none\"; }\n\t\t} else {\n\t\t\tcanvas.addEventListener(\"pointerdown\", f, false);\n\t\t\twindow.addEventListener(\"pointermove\", f, false);\n\t\t\twindow.addEventListener(\"pointerup\", f, false);\n\t\t\twindow.addEventListener(\"pointercancel\", f, false);\n\t\t\tif (stage.__touch.preventDefault) { canvas.style.touchAction = \"none\"; }\n\n\t\t}\n\t\tstage.__touch.activeIDs = {};\n\t};\n\n\t/**\n\t * @method _IE_disable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IE_disable = function(stage) {\n\t\tvar f = stage.__touch.f;\n\n\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\n\t\t\twindow.removeEventListener(\"MSPointerMove\", f, false);\n\t\t\twindow.removeEventListener(\"MSPointerUp\", f, false);\n\t\t\twindow.removeEventListener(\"MSPointerCancel\", f, false);\n\t\t\tif (stage.canvas) {\n\t\t\t\tstage.canvas.removeEventListener(\"MSPointerDown\", f, false);\n\t\t\t}\n\t\t} else {\n\t\t\twindow.removeEventListener(\"pointermove\", f, false);\n\t\t\twindow.removeEventListener(\"pointerup\", f, false);\n\t\t\twindow.removeEventListener(\"pointercancel\", f, false);\n\t\t\tif (stage.canvas) {\n\t\t\t\tstage.canvas.removeEventListener(\"pointerdown\", f, false);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _IE_handleEvent\n\t * @param {Stage} stage\n\t * @param {Object} e The event to handle.\n\t * @protected\n\t * @static\n\t **/\n\tTouch._IE_handleEvent = function(stage, e) {\n\t\tif (!stage) { return; }\n\t\tif (stage.__touch.preventDefault) { e.preventDefault && e.preventDefault(); }\n\t\tvar type = e.type;\n\t\tvar id = e.pointerId;\n\t\tvar ids = stage.__touch.activeIDs;\n\n\t\tif (type == \"MSPointerDown\" || type == \"pointerdown\") {\n\t\t\tif (e.srcElement != stage.canvas) { return; }\n\t\t\tids[id] = true;\n\t\t\tthis._handleStart(stage, id, e, e.pageX, e.pageY);\n\t\t} else if (ids[id]) { // it's an id we're watching\n\t\t\tif (type == \"MSPointerMove\" || type == \"pointermove\") {\n\t\t\t\tthis._handleMove(stage, id, e, e.pageX, e.pageY);\n\t\t\t} else if (type == \"MSPointerUp\" || type == \"MSPointerCancel\"\n\t\t\t\t\t|| type == \"pointerup\" || type == \"pointercancel\") {\n\t\t\t\tdelete(ids[id]);\n\t\t\t\tthis._handleEnd(stage, id, e);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleStart\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tTouch._handleStart = function(stage, id, e, x, y) {\n\t\tvar props = stage.__touch;\n\t\tif (!props.multitouch && props.count) { return; }\n\t\tvar ids = props.pointers;\n\t\tif (ids[id]) { return; }\n\t\tids[id] = true;\n\t\tprops.count++;\n\t\tstage._handlePointerDown(id, e, x, y);\n\t};\n\n\t/**\n\t * @method _handleMove\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tTouch._handleMove = function(stage, id, e, x, y) {\n\t\tif (!stage.__touch.pointers[id]) { return; }\n\t\tstage._handlePointerMove(id, e, x, y);\n\t};\n\n\t/**\n\t * @method _handleEnd\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @protected\n\t **/\n\tTouch._handleEnd = function(stage, id, e) {\n\t\t// TODO: cancel should be handled differently for proper UI (ex. an up would trigger a click, a cancel would more closely resemble an out).\n\t\tvar props = stage.__touch;\n\t\tvar ids = props.pointers;\n\t\tif (!ids[id]) { return; }\n\t\tprops.count--;\n\t\tstage._handlePointerUp(id, e, true);\n\t\tdelete(ids[id]);\n\t};\n\n\n\tcreatejs.Touch = Touch;\n}());\n\n//##############################################################################\n// version.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of\n\t * the library.\n\t * @class EaselJS\n\t **/\n\tvar s = createjs.EaselJS = createjs.EaselJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type String\n\t * @static\n\t **/\n\ts.version = /*=version*/\"1.0.0\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type String\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 14 Sep 2017 19:47:53 GMT\"; // injected by build process\n\n})();\n/*!\n* PreloadJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n\n//##############################################################################\n// version.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of the library.\n\t * @class PreloadJS\n\t **/\n\tvar s = createjs.PreloadJS = createjs.PreloadJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type {String}\n\t * @static\n\t **/\n\ts.version = /*=version*/\"1.0.0\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type {String}\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 14 Sep 2017 19:47:47 GMT\"; // injected by build process\n\n})();\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function(subclass, superclass) {\n\t\"use strict\";\n\n\tfunction o() { this.constructor = subclass; }\n\to.prototype = superclass.prototype;\n\treturn (subclass.prototype = new o());\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function(subclass, prefix) {\n\t\"use strict\";\n\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\n\tif (supP) {\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n\t\tfor (var n in supP) {\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\n\t\t}\n\t}\n\treturn subclass;\n};\n\n//##############################################################################\n// deprecate.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Wraps deprecated methods so they still be used, but throw warnings to developers.\n *\n *\tobj.deprecatedMethod = createjs.deprecate(\"Old Method Name\", obj._fallbackMethod);\n *\n * The recommended approach for deprecated properties is:\n *\n *\ttry {\n *\t\tObj\tect.defineProperties(object, {\n *\t\t\treadyOnlyProp: { get: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }) },\n *\t\t\treadWriteProp: {\n *\t\t\t\tget: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }),\n *\t\t\t\tset: createjs.deprecate(\"readOnlyProp\", function(val) { this.alternateProp = val; })\n *\t\t});\n *\t} catch (e) {}\n *\n * @method deprecate\n * @param {Function} [fallbackMethod=null] A method to call when the deprecated method is used. See the example for how\n * @param {String} [name=null] The name of the method or property to display in the console warning.\n * to deprecate properties.\n * @return {Function} If a fallbackMethod is supplied, returns a closure that will call the fallback method after\n * logging the warning in the console.\n */\ncreatejs.deprecate = function(fallbackMethod, name) {\n\t\"use strict\";\n\treturn function() {\n\t\tvar msg = \"Deprecated property or method '\"+name+\"'. See docs for info.\";\n\t\tconsole && (console.warn ? console.warn(msg) : console.log(msg));\n\t\treturn fallbackMethod && fallbackMethod.apply(this, arguments);\n\t}\n};\n\n//##############################################################################\n// proxy.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n * createjs namespace directly.\n *\n * <h4>Example</h4>\n *\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n *\n * @class Utility Methods\n * @main Utility Methods\n */\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n\t * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n\t * method gets called in the correct scope.\n\t *\n\t * Additional arguments can be passed that will be applied to the function when it is called.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n\t *\n\t *      function myHandler(arg1, arg2) {\n\t *           // This gets called when myObject.myCallback is executed.\n\t *      }\n\t *\n\t * @method proxy\n\t * @param {Function} method The function to call\n\t * @param {Object} scope The scope to call the method name on\n\t * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n\t * @public\n\t * @static\n\t */\n\tcreatejs.proxy = function (method, scope) {\n\t\tvar aArgs = Array.prototype.slice.call(arguments, 2);\n\t\treturn function () {\n\t\t\treturn method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n\t\t};\n\t}\n\n}());\n\n//##############################################################################\n// indexOf.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement){\n\t\"use strict\";\n\n\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\tif (searchElement === array[i]) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * Contains properties and methods shared by all events for use with\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n\t * \n\t * Note that Event objects are often reused, so you should never\n\t * rely on an event object's state outside of the call stack it was received in.\n\t * @class Event\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @constructor\n\t **/\n\tfunction Event(type, bubbles, cancelable) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The type of event.\n\t\t * @property type\n\t\t * @type String\n\t\t **/\n\t\tthis.type = type;\n\t\n\t\t/**\n\t\t * The object that generated an event.\n\t\t * @property target\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.target = null;\n\t\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t * @property currentTarget\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.currentTarget = null;\n\t\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t * @property eventPhase\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.eventPhase = 0;\n\t\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t * @property bubbles\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.bubbles = !!bubbles;\n\t\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t * @property cancelable\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.cancelable = !!cancelable;\n\t\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t * @property timeStamp\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.timeStamp = (new Date()).getTime();\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property defaultPrevented\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.defaultPrevented = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t * @property propagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.propagationStopped = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property immediatePropagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.immediatePropagationStopped = false;\n\t\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t * @property removed\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.removed = false;\n\t}\n\tvar p = Event.prototype;\n\n// public methods:\n\t/**\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @method preventDefault\n\t **/\n\tp.preventDefault = function() {\n\t\tthis.defaultPrevented = this.cancelable&&true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopPropagation\n\t **/\n\tp.stopPropagation = function() {\n\t\tthis.propagationStopped = true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopImmediatePropagation\n\t **/\n\tp.stopImmediatePropagation = function() {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t};\n\t\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t * \n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t * \t\t\t// do stuff...\n\t * \t\t\tevt.remove(); // removes this listener.\n\t * \t\t});\n\t * \n\t * @method remove\n\t **/\n\tp.remove = function() {\n\t\tthis.removed = true;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Event instance.\n\t * @method clone\n\t * @return {Event} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t};\n\n\tcreatejs.Event = Event;\n}());\n\n//##############################################################################\n// ErrorEvent.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\n\t * @class ErrorEvent\n\t * @param {String} [title] The error title\n\t * @param {String} [message] The error description\n\t * @param {Object} [data] Additional error data\n\t * @constructor\n\t */\n\tfunction ErrorEvent(title, message, data) {\n\t\tthis.Event_constructor(\"error\");\n\n\t\t/**\n\t\t * The short error title, which indicates the type of error that occurred.\n\t\t * @property title\n\t\t * @type String\n\t\t */\n\t\tthis.title = title;\n\n\t\t/**\n\t\t * The verbose error message, containing details about the error.\n\t\t * @property message\n\t\t * @type String\n\t\t */\n\t\tthis.message = message;\n\n\t\t/**\n\t\t * Additional data attached to an error.\n\t\t * @property data\n\t\t * @type {Object}\n\t\t */\n\t\tthis.data = data;\n\t}\n\n\tvar p = createjs.extend(ErrorEvent, createjs.Event);\n\n\tp.clone = function() {\n\t\treturn new createjs.ErrorEvent(this.title, this.message, this.data);\n\t};\n\n\tcreatejs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\n\n}());\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n\t *\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n\t * \n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n\t * \n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n\t * \n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n\t *\n\t * <h4>Example</h4>\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\n\t *\n\t *      EventDispatcher.initialize(MyClass.prototype);\n\t *\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n\t *\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\n\t *      function handlerMethod(event) {\n\t *          console.log(event.target + \" Was Clicked\");\n\t *      }\n\t *\n\t * <b>Maintaining proper scope</b><br />\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n\t * method to subscribe to events simplifies this.\n\t *\n\t *      instance.addEventListener(\"click\", function(event) {\n\t *          console.log(instance == this); // false, scope is ambiguous.\n\t *      });\n\t *      \n\t *      instance.on(\"click\", function(event) {\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n\t *      });\n\t * \n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n\t * scope.\n\t *\n\t * <b>Browser support</b>\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n\t * requires modern browsers (IE9+).\n\t *      \n\t *\n\t * @class EventDispatcher\n\t * @constructor\n\t **/\n\tfunction EventDispatcher() {\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @protected\n\t\t * @property _listeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._listeners = null;\n\t\t\n\t\t/**\n\t\t * @protected\n\t\t * @property _captureListeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._captureListeners = null;\n\t}\n\tvar p = EventDispatcher.prototype;\n\n// static public methods:\n\t/**\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\n\t * \n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n\t * \n\t * @method initialize\n\t * @static\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n\t * prototype.\n\t **/\n\tEventDispatcher.initialize = function(target) {\n\t\ttarget.addEventListener = p.addEventListener;\n\t\ttarget.on = p.on;\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\n\t\ttarget.hasEventListener = p.hasEventListener;\n\t\ttarget.dispatchEvent = p.dispatchEvent;\n\t\ttarget._dispatchEvent = p._dispatchEvent;\n\t\ttarget.willTrigger = p.willTrigger;\n\t};\n\t\n\n// public methods:\n\t/**\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n\t * multiple callbacks getting fired.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *         // Click happened.\n\t *      }\n\t *\n\t * @method addEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\n\t **/\n\tp.addEventListener = function(type, listener, useCapture) {\n\t\tvar listeners;\n\t\tif (useCapture) {\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\n\t\t} else {\n\t\t\tlisteners = this._listeners = this._listeners||{};\n\t\t}\n\t\tvar arr = listeners[type];\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\n\t\tarr = listeners[type]; // remove may have deleted the array\n\t\tif (!arr) { listeners[type] = [listener];  }\n\t\telse { arr.push(listener); }\n\t\treturn listener;\n\t};\n\t\n\t/**\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\n\t * \n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n\t * to `on` with the same params will create multiple listeners.\n\t * \n\t * <h4>Example</h4>\n\t * \n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n\t * \t\tfunction handleClick(evt, data) {\n\t * \t\t\tdata.count -= 1;\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n\t * \t\t\tif (data.count == 0) {\n\t * \t\t\t\talert(\"clicked 3 times!\");\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\n\t * \t\t\t\t// alternately: evt.remove();\n\t * \t\t\t}\n\t * \t\t}\n\t * \n\t * @method on\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n\t **/\n\tp.on = function(type, listener, scope, once, data, useCapture) {\n\t\tif (listener.handleEvent) {\n\t\t\tscope = scope||listener;\n\t\t\tlistener = listener.handleEvent;\n\t\t}\n\t\tscope = scope||this;\n\t\treturn this.addEventListener(type, function(evt) {\n\t\t\t\tlistener.call(scope, evt, data);\n\t\t\t\tonce&&evt.remove();\n\t\t\t}, useCapture);\n\t};\n\n\t/**\n\t * Removes the specified event listener.\n\t *\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n\t * closure will not work.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.removeEventListener(\"click\", handleClick);\n\t *\n\t * @method removeEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.removeEventListener = function(type, listener, useCapture) {\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\n\t\tif (!listeners) { return; }\n\t\tvar arr = listeners[type];\n\t\tif (!arr) { return; }\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\n\t\t\tif (arr[i] == listener) {\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\n\t\t\t\telse { arr.splice(i,1); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n\t * .on method.\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n\t *\n\t * @method off\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.off = p.removeEventListener;\n\n\t/**\n\t * Removes all listeners for the specified type, or all listeners of all types.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Remove all listeners\n\t *      displayObject.removeAllEventListeners();\n\t *\n\t *      // Remove all click listeners\n\t *      displayObject.removeAllEventListeners(\"click\");\n\t *\n\t * @method removeAllEventListeners\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n\t **/\n\tp.removeAllEventListeners = function(type) {\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\n\t\telse {\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the specified event to all listeners.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Use a string event\n\t *      this.dispatchEvent(\"complete\");\n\t *\n\t *      // Use an Event instance\n\t *      var event = new createjs.Event(\"progress\");\n\t *      this.dispatchEvent(event);\n\t *\n\t * @method dispatchEvent\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n\t **/\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\n\t\tif (typeof eventObj == \"string\") {\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\n\t\t\tvar listeners = this._listeners;\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\n\t\t} else if (eventObj.target && eventObj.clone) {\n\t\t\t// redispatching an active event object, so clone it:\n\t\t\teventObj = eventObj.clone();\n\t\t}\n\t\t\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\n\n\t\tif (!eventObj.bubbles || !this.parent) {\n\t\t\tthis._dispatchEvent(eventObj, 2);\n\t\t} else {\n\t\t\tvar top=this, list=[top];\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\n\t\t\tvar i, l=list.length;\n\n\t\t\t// capture & atTarget\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\n\t\t\t}\n\t\t\t// bubbling\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\n\t\t\t}\n\t\t}\n\t\treturn !eventObj.defaultPrevented;\n\t};\n\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type.\n\t * @method hasEventListener\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\n\t **/\n\tp.hasEventListener = function(type) {\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\n\t};\n\t\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n\t * specified type is dispatched from this object, it will trigger at least one listener.\n\t * \n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n\t * event flow for a listener, not just this object.\n\t * @method willTrigger\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n\t **/\n\tp.willTrigger = function(type) {\n\t\tvar o = this;\n\t\twhile (o) {\n\t\t\tif (o.hasEventListener(type)) { return true; }\n\t\t\to = o.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[EventDispatcher]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _dispatchEvent\n\t * @param {Object | Event} eventObj\n\t * @param {Object} eventPhase\n\t * @protected\n\t **/\n\tp._dispatchEvent = function(eventObj, eventPhase) {\n\t\tvar l, arr, listeners = (eventPhase <= 2) ? this._captureListeners : this._listeners;\n\t\tif (eventObj && listeners && (arr = listeners[eventObj.type]) && (l=arr.length)) {\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\n\t\t\ttry { eventObj.eventPhase = eventPhase|0; } catch (e) {}\n\t\t\teventObj.removed = false;\n\t\t\t\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\n\t\t\t\tvar o = arr[i];\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\n\t\t\t\telse { o(eventObj); }\n\t\t\t\tif (eventObj.removed) {\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\n\t\t\t\t\teventObj.removed = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (eventPhase === 2) { this._dispatchEvent(eventObj, 2.1); }\n\t};\n\n\n\tcreatejs.EventDispatcher = EventDispatcher;\n}());\n\n//##############################################################################\n// ProgressEvent.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function (scope) {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\n\t * @class ProgressEvent\n\t * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\n\t * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\n\t * a percentage (between 0 and 1), it can be omitted.\n\t * @todo Consider having this event be a \"fileprogress\" event as well\n\t * @constructor\n\t */\n\tfunction ProgressEvent(loaded, total) {\n\t\tthis.Event_constructor(\"progress\");\n\n\t\t/**\n\t\t * The amount that has been loaded (out of a total amount)\n\t\t * @property loaded\n\t\t * @type {Number}\n\t\t */\n\t\tthis.loaded = loaded;\n\n\t\t/**\n\t\t * The total \"size\" of the load.\n\t\t * @property total\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t */\n\t\tthis.total = (total == null) ? 1 : total;\n\n\t\t/**\n\t\t * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\n\t\t * @property progress\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.progress = (total == 0) ? 0 : this.loaded / this.total;\n\t};\n\n\tvar p = createjs.extend(ProgressEvent, createjs.Event);\n\n\t/**\n\t * Returns a clone of the ProgressEvent instance.\n\t * @method clone\n\t * @return {ProgressEvent} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new createjs.ProgressEvent(this.loaded, this.total);\n\t};\n\n\tcreatejs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\n\n}(window));\n\n//##############################################################################\n// json3.js\n//##############################################################################\n\n/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n        String = context[\"String\"] || root[\"String\"],\n        Object = context[\"Object\"] || root[\"Object\"],\n        Date = context[\"Date\"] || root[\"Date\"],\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n        Math = context[\"Math\"] || root[\"Math\"],\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty, forEach, undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n        // but clips the values returned by the date methods to the range of\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undef &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undef) === undef &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undef &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undef]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                // serialize extended years.\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                // The milliseconds are optional in ES 5, but required in 5.1.\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                // values less than 1000. Credits: @Yaffle.\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {}, constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__, result = property in (this.__proto__ = null, this);\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0, Properties, members, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                  // Months, dates, hours, minutes, and seconds should have two\n                  // digits; milliseconds should have three.\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root[\"JSON3\"],\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n//##############################################################################\n// Elements.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Convenience methods for creating various elements used by PrelaodJS.\n\t *\n\t * @class DomUtils\n\t */\n\tvar s = {};\n\n\ts.a = function() {\n\t\treturn s.el(\"a\");\n\t}\n\n\ts.svg = function() {\n\t\treturn s.el(\"svg\");\n\t}\n\n\ts.object = function() {\n\t\treturn s.el(\"object\");\n\t}\n\n\ts.image = function() {\n\t\treturn s.el(\"image\");\n\t}\n\n\ts.img = function() {\n\t\treturn s.el(\"img\");\n\t}\n\n\ts.style = function() {\n\t\treturn s.el(\"style\");\n\t}\n\n\ts.link = function() {\n\t\treturn s.el(\"link\");\n\t}\n\n\ts.script = function() {\n\t\treturn s.el(\"script\");\n\t}\n\n\ts.audio = function() {\n\t\treturn s.el(\"audio\");\n\t}\n\n\ts.video = function() {\n\t\treturn s.el(\"video\");\n\t}\n\n\ts.text = function(value) {\n\t\treturn document.createTextNode(value);\n\t}\n\n\ts.el = function(name) {\n\t\treturn document.createElement(name);\n\t}\n\n\tcreatejs.Elements = s;\n\n}());\n\n//##############################################################################\n// URLUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Utilities that assist with parsing load items, and determining file types, etc.\n\t * @class URLUtils\n\t */\n\tvar s = {};\n\n\t/**\n\t * The Regular Expression used to test file URLS for an absolute path.\n\t * @property ABSOLUTE_PATH\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\n\n\t/**\n\t * The Regular Expression used to test file URLS for a relative path.\n\t * @property RELATIVE_PATH\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.RELATIVE_PATT = (/^[./]*?\\//i);\n\n\t/**\n\t * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\n\t * removed.\n\t * @property EXTENSION_PATT\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\n\n\t/**\n\t * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\n\t * <ul>\n\t *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\n\t *     `//networkPath`)</li>\n\t *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\n\t *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\n\t *     the file path is expected to follow the format `name.ext`.</li>\n\t * </ul>\n\t *\n\t * @method parseURI\n\t * @param {String} path\n\t * @returns {Object} An Object with an `absolute` and `relative` Boolean values,\n\t * \tthe pieces of the path (protocol, hostname, port, pathname, search, hash, host)\n\t * \tas well as an optional 'extension` property, which is the lowercase extension.\n\t *\n\t * @static\n\t */\n\ts.parseURI = function (path) {\n\t\tvar info = {\n\t\t\tabsolute: false,\n\t\t\trelative: false,\n\t\t\tprotocol: null,\n\t\t\thostname: null,\n\t\t\tport: null,\n\t\t\tpathname: null,\n\t\t\tsearch: null,\n\t\t\thash: null,\n\t\t\thost: null\n\t\t};\n\n\t\tif (path == null) { return info; }\n\n\t\t// Inject the path parts.\n\t\tvar parser = createjs.Elements.a();\n\t\tparser.href = path;\n\n\t\tfor (var n in info) {\n\t\t\tif (n in parser) {\n\t\t\t\tinfo[n] = parser[n];\n\t\t\t}\n\t\t}\n\n\t\t// Drop the query string\n\t\tvar queryIndex = path.indexOf(\"?\");\n\t\tif (queryIndex > -1) {\n\t\t\tpath = path.substr(0, queryIndex);\n\t\t}\n\n\t\t// Absolute\n\t\tvar match;\n\t\tif (s.ABSOLUTE_PATT.test(path)) {\n\t\t\tinfo.absolute = true;\n\n\t\t\t// Relative\n\t\t} else if (s.RELATIVE_PATT.test(path)) {\n\t\t\tinfo.relative = true;\n\t\t}\n\n\t\t// Extension\n\t\tif (match = path.match(s.EXTENSION_PATT)) {\n\t\t\tinfo.extension = match[1].toLowerCase();\n\t\t}\n\n\t\treturn info;\n\t};\n\n\t/**\n\t * Formats an object into a query string for either a POST or GET request.\n\t * @method formatQueryString\n\t * @param {Object} data The data to convert to a query string.\n\t * @param {Array} [query] Existing name/value pairs to append on to this query.\n\t * @static\n\t */\n\ts.formatQueryString = function (data, query) {\n\t\tif (data == null) {\n\t\t\tthrow new Error(\"You must specify data.\");\n\t\t}\n\t\tvar params = [];\n\t\tfor (var n in data) {\n\t\t\tparams.push(n + \"=\" + escape(data[n]));\n\t\t}\n\t\tif (query) {\n\t\t\tparams = params.concat(query);\n\t\t}\n\t\treturn params.join(\"&\");\n\t};\n\n\t/**\n\t * A utility method that builds a file path using a source and a data object, and formats it into a new path.\n\t * @method buildURI\n\t * @param {String} src The source path to add values to.\n\t * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\n\t * path will be preserved.\n\t * @returns {string} A formatted string that contains the path and the supplied parameters.\n\t * @static\n\t */\n\ts.buildURI = function (src, data) {\n\t\tif (data == null) {\n\t\t\treturn src;\n\t\t}\n\n\t\tvar query = [];\n\t\tvar idx = src.indexOf(\"?\");\n\n\t\tif (idx != -1) {\n\t\t\tvar q = src.slice(idx + 1);\n\t\t\tquery = query.concat(q.split(\"&\"));\n\t\t}\n\n\t\tif (idx != -1) {\n\t\t\treturn src.slice(0, idx) + \"?\" + this.formatQueryString(data, query);\n\t\t} else {\n\t\t\treturn src + \"?\" + this.formatQueryString(data, query);\n\t\t}\n\t};\n\n\t/**\n\t * @method isCrossDomain\n\t * @param {LoadItem|Object} item A load item with a `src` property.\n\t * @return {Boolean} If the load item is loading from a different domain than the current location.\n\t * @static\n\t */\n\ts.isCrossDomain = function (item) {\n\t\tvar target = createjs.Elements.a();\n\t\ttarget.href = item.src;\n\n\t\tvar host = createjs.Elements.a();\n\t\thost.href = location.href;\n\n\t\tvar crossdomain = (target.hostname != \"\") &&\n\t\t\t(target.port != host.port ||\n\t\t\ttarget.protocol != host.protocol ||\n\t\t\ttarget.hostname != host.hostname);\n\t\treturn crossdomain;\n\t};\n\n\t/**\n\t * @method isLocal\n\t * @param {LoadItem|Object} item A load item with a `src` property\n\t * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\n\t * well.\n\t * @static\n\t */\n\ts.isLocal = function (item) {\n\t\tvar target = createjs.Elements.a();\n\t\ttarget.href = item.src;\n\t\treturn target.hostname == \"\" && target.protocol == \"file:\";\n\t};\n\n\tcreatejs.URLUtils = s;\n\n}());\n\n//##############################################################################\n// DomUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * A few utilities for interacting with the dom.\n\t * @class DomUtils\n\t */\n\tvar s = {\n\t\tcontainer: null\n\t};\n\n\ts.appendToHead = function (el) {\n\t\ts.getHead().appendChild(el);\n\t}\n\n\ts.appendToBody = function (el) {\n\t\tif (s.container == null) {\n\t\t\ts.container = document.createElement(\"div\");\n\t\t\ts.container.id = \"preloadjs-container\";\n\t\t\tvar style = s.container.style;\n\t\t\tstyle.visibility = \"hidden\";\n\t\t\tstyle.position = \"absolute\";\n\t\t\tstyle.width = s.container.style.height = \"10px\";\n\t\t\tstyle.overflow = \"hidden\";\n\t\t\tstyle.transform = style.msTransform = style.webkitTransform = style.oTransform = \"translate(-10px, -10px)\"; //LM: Not working\n\t\t\ts.getBody().appendChild(s.container);\n\t\t}\n\t\ts.container.appendChild(el);\n\t}\n\n\ts.getHead = function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}\n\n\ts.getBody = function () {\n\t\treturn document.body || document.getElementsByTagName(\"body\")[0];\n\t}\n\n\ts.removeChild = function(el) {\n\t\tif (el.parent) {\n\t\t\tel.parent.removeChild(el);\n\t\t}\n\t}\n\n\t/**\n\t * Check if item is a valid HTMLImageElement\n\t * @method isImageTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isImageTag = function(item) {\n\t\treturn item instanceof HTMLImageElement;\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLAudioElement\n\t * @method isAudioTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isAudioTag = function(item) {\n\t\tif (window.HTMLAudioElement) {\n\t\t\treturn item instanceof HTMLAudioElement;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLVideoElement\n\t * @method isVideoTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isVideoTag = function(item) {\n\t\tif (window.HTMLVideoElement) {\n\t\t\treturn item instanceof HTMLVideoElement;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tcreatejs.DomUtils = s;\n\n}());\n\n//##############################################################################\n// DataUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * A few data utilities for formatting different data types.\n\t * @class DataUtils\n\t */\n\tvar s = {};\n\n\t// static methods\n\t/**\n\t * Parse XML using the DOM. This is required when preloading XML or SVG.\n\t * @method parseXML\n\t * @param {String} text The raw text or XML that is loaded by XHR.\n\t * @return {XML} An XML document\n\t * @static\n\t */\n\ts.parseXML = function (text) {\n\t\tvar xml = null;\n\t\t// CocoonJS does not support XML parsing with either method.\n\n\t\t// Most browsers will use DOMParser\n\t\t// IE fails on certain SVG files, so we have a fallback below.\n\t\ttry {\n\t\t\tif (window.DOMParser) {\n\t\t\t\tvar parser = new DOMParser();\n\t\t\t\txml = parser.parseFromString(text, \"text/xml\");\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\t// Fallback for IE support.\n\t\tif (!xml) {\n\t\t\ttry {\n\t\t\t\txml = new ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\txml.async = false;\n\t\t\t\txml.loadXML(text);\n\t\t\t} catch (e) {\n\t\t\t\txml = null;\n\t\t\t}\n\t\t}\n\n\t\treturn xml;\n\t};\n\n\t/**\n\t * Parse a string into an Object.\n\t * @method parseJSON\n\t * @param {String} value The loaded JSON string\n\t * @returns {Object} A JavaScript object.\n\t */\n\ts.parseJSON = function (value) {\n\t\tif (value == null) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\treturn JSON.parse(value);\n\t\t} catch (e) {\n\t\t\t// TODO; Handle this with a custom error?\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\tcreatejs.DataUtils = s;\n\n}());\n\n//##############################################################################\n// Types.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function() {\n\tvar s = {};\n\n\t/**\n\t * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\n\t * @property BINARY\n\t * @type {String}\n\t * @default binary\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.BINARY = \"binary\";\n\n\t/**\n\t * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\n\t * &lt;style&gt; tag when loaded with tags.\n\t * @property CSS\n\t * @type {String}\n\t * @default css\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.CSS = \"css\";\n\n\t/**\n\t * The preload type for font files.\n\t * @property FONT\n\t * @type {String}\n\t * @default font\n\t * @static\n\t * @since 0.9.0\n\t */\n\ts.FONT = \"font\";\n\n\t/**\n\t * The preload type for fonts specified with CSS (such as Google fonts)\n\t * @property FONTCSS\n\t * @type {String}\n\t * @default fontcss\n\t * @static\n\t * @since 0.9.0\n\t */\n\ts.FONTCSS = \"fontcss\";\n\n\t/**\n\t * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\n\t * @property IMAGE\n\t * @type {String}\n\t * @default image\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.IMAGE = \"image\";\n\n\t/**\n\t * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\n\t * &lt;script&gt; tag.\n\t *\n\t * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\n\t * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\n\t * only tag-loaded scripts are injected.\n\t * @property JAVASCRIPT\n\t * @type {String}\n\t * @default javascript\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JAVASCRIPT = \"javascript\";\n\n\t/**\n\t * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\n\t * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\n\t * must contain a matching wrapper function.\n\t * @property JSON\n\t * @type {String}\n\t * @default json\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JSON = \"json\";\n\n\t/**\n\t * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\n\t * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\n\t * property is set to.\n\t * @property JSONP\n\t * @type {String}\n\t * @default jsonp\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JSONP = \"jsonp\";\n\n\t/**\n\t * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\n\t * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\n\t * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\n\t * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\n\t * @property MANIFEST\n\t * @type {String}\n\t * @default manifest\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.MANIFEST = \"manifest\";\n\n\t/**\n\t * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\n\t * &lt;audio&gt; tag.\n\t * @property SOUND\n\t * @type {String}\n\t * @default sound\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SOUND = \"sound\";\n\n\t/**\n\t * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\n\t * &lt;video&gt; tag.\n\t * @property VIDEO\n\t * @type {String}\n\t * @default video\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.VIDEO = \"video\";\n\n\t/**\n\t * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\n\t * @property SPRITESHEET\n\t * @type {String}\n\t * @default spritesheet\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SPRITESHEET = \"spritesheet\";\n\n\t/**\n\t * The preload type for SVG files.\n\t * @property SVG\n\t * @type {String}\n\t * @default svg\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SVG = \"svg\";\n\n\t/**\n\t * The preload type for text files, which is also the default file type if the type can not be determined. Text is\n\t * loaded as raw text.\n\t * @property TEXT\n\t * @type {String}\n\t * @default text\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.TEXT = \"text\";\n\n\t/**\n\t * The preload type for xml files. XML is loaded into an XML document.\n\t * @property XML\n\t * @type {String}\n\t * @default xml\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.XML = \"xml\";\n\n\tcreatejs.Types = s;\n}());\n\n//##############################################################################\n// Methods.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function() {\n\tvar s = {};\n\n\t/**\n\t * Defines a POST request, use for a method value when loading data.\n\t * @property POST\n\t * @type {string}\n\t * @default post\n\t * @static\n\t */\n\ts.POST = \"POST\";\n\n\t/**\n\t * Defines a GET request, use for a method value when loading data.\n\t * @property GET\n\t * @type {string}\n\t * @default get\n\t * @static\n\t */\n\ts.GET = \"GET\";\n\n\tcreatejs.Methods = s;\n}());\n\n//##############################################################################\n// LoadItem.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\n\t * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\n\t * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\n\t * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\n\t * @class LoadItem\n\t * @constructor\n\t * @since 0.6.0\n\t */\n\tfunction LoadItem() {\n\t\t/**\n\t\t * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\n\t\t * string (recommended), or an HTML tag.\n\t\t * This can also be an object, but in that case it has to include a type and be handled by a plugin.\n\t\t * @property src\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.src = null;\n\n\t\t/**\n\t\t * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\n\t\t * be set manually. This is helpful in cases where a file does not have an extension.\n\t\t * @property type\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.type = null;\n\n\t\t/**\n\t\t * A string identifier which can be used to reference the loaded object. If none is provided, this will be\n\t\t * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\n\t\t * @property id\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\n\t\t * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\n\t\t * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\n\t\t * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\n\t\t * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\n\t\t * @property maintainOrder\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.maintainOrder = false;\n\n\t\t/**\n\t\t * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\n\t\t * @property callback\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.callback = null;\n\n\t\t/**\n\t\t * An arbitrary data object, which is included with the loaded object.\n\t\t * @property data\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.data = null;\n\n\t\t/**\n\t\t * The request method used for HTTP calls. Both {{#crossLink \"Methods/GET:property\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Methods/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\n\t\t * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t\t * @property method\n\t\t * @type {String}\n\t\t * @default GET\n\t\t */\n\t\tthis.method = createjs.Methods.GET;\n\n\t\t/**\n\t\t * An object hash of name/value pairs to send to the server.\n\t\t * @property values\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.values = null;\n\n\t\t/**\n\t\t * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\n\t\t * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\n\t\t * default headers by including them in your headers object.\n\t\t * @property headers\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.headers = null;\n\n\t\t/**\n\t\t * Enable credentials for XHR requests.\n\t\t * @property withCredentials\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.withCredentials = false;\n\n\t\t/**\n\t\t * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\n\t\t * based files (json, xml, text, css, js).\n\t\t * @property mimeType\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.mimeType = null;\n\n\t\t/**\n\t\t * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\n\t\t * @property crossOrigin\n\t\t * @type {boolean}\n\t\t * @default Anonymous\n\t\t */\n\t\tthis.crossOrigin = null;\n\n\t\t/**\n\t\t * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t\t * @property loadTimeout\n\t\t * @type {Number}\n\t\t * @default 8000 (8 seconds)\n\t\t */\n\t\tthis.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t};\n\n\tvar p = LoadItem.prototype = {};\n\tvar s = LoadItem;\n\n\t/**\n\t * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t * @property LOAD_TIMEOUT_DEFAULT\n\t * @type {number}\n\t * @static\n\t */\n\ts.LOAD_TIMEOUT_DEFAULT = 8000;\n\n\t/**\n\t * Create a LoadItem.\n\t * <ul>\n\t *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\n\t *     <li>LoadItem instances are returned as-is</li>\n\t *     <li>Objects are returned with any needed properties added</li>\n\t * </ul>\n\t * @method create\n\t * @param {LoadItem|String|Object} value The load item value\n\t * @returns {LoadItem|Object}\n\t * @static\n\t */\n\ts.create = function (value) {\n\t\tif (typeof value == \"string\") {\n\t\t\tvar item = new LoadItem();\n\t\t\titem.src = value;\n\t\t\treturn item;\n\t\t} else if (value instanceof s) {\n\t\t\treturn value;\n\t\t} else if (value instanceof Object && value.src) {\n\t\t\tif (value.loadTimeout == null) {\n\t\t\t\tvalue.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t\t\t}\n\t\t\treturn value;\n\t\t} else {\n\t\t\tthrow new Error(\"Type not recognized.\");\n\t\t}\n\t};\n\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\n\t * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\tcreatejs.LoadItem = s;\n\n}());\n\n//##############################################################################\n// RequestUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Utilities that assist with parsing load items, and determining file types, etc.\n\t * @class RequestUtils\n\t */\n\tvar s = {};\n\n\t/**\n\t * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\n\t * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\n\t * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\n\t * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\n\t * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t * @method isBinary\n\t * @param {String} type The item type.\n\t * @return {Boolean} If the specified type is binary.\n\t * @static\n\t */\n\ts.isBinary = function (type) {\n\t\tswitch (type) {\n\t\t\tcase createjs.Types.IMAGE:\n\t\t\tcase createjs.Types.BINARY:\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\n\t * @method isText\n\t * @param {String} type The item type.\n\t * @return {Boolean} If the specified type is text.\n\t * @static\n\t */\n\ts.isText = function (type) {\n\t\tswitch (type) {\n\t\t\tcase createjs.Types.TEXT:\n\t\t\tcase createjs.Types.JSON:\n\t\t\tcase createjs.Types.MANIFEST:\n\t\t\tcase createjs.Types.XML:\n\t\t\tcase createjs.Types.CSS:\n\t\t\tcase createjs.Types.SVG:\n\t\t\tcase createjs.Types.JAVASCRIPT:\n\t\t\tcase createjs.Types.SPRITESHEET:\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\n\t * if it is an unusual extension.\n\t * @method getTypeByExtension\n\t * @param {String} extension The file extension to use to determine the load type.\n\t * @return {String} The determined load type (for example, `createjs.Types.IMAGE`). Will return `null` if\n\t * the type can not be determined by the extension.\n\t * @static\n\t */\n\ts.getTypeByExtension = function (extension) {\n\t\tif (extension == null) {\n\t\t\treturn createjs.Types.TEXT;\n\t\t}\n\n\t\tswitch (extension.toLowerCase()) {\n\t\t\tcase \"jpeg\":\n\t\t\tcase \"jpg\":\n\t\t\tcase \"gif\":\n\t\t\tcase \"png\":\n\t\t\tcase \"webp\":\n\t\t\tcase \"bmp\":\n\t\t\t\treturn createjs.Types.IMAGE;\n\t\t\tcase \"ogg\":\n\t\t\tcase \"mp3\":\n\t\t\tcase \"webm\":\n\t\t\t\treturn createjs.Types.SOUND;\n\t\t\tcase \"mp4\":\n\t\t\tcase \"webm\":\n\t\t\tcase \"ts\":\n\t\t\t\treturn createjs.Types.VIDEO;\n\t\t\tcase \"json\":\n\t\t\t\treturn createjs.Types.JSON;\n\t\t\tcase \"xml\":\n\t\t\t\treturn createjs.Types.XML;\n\t\t\tcase \"css\":\n\t\t\t\treturn createjs.Types.CSS;\n\t\t\tcase \"js\":\n\t\t\t\treturn createjs.Types.JAVASCRIPT;\n\t\t\tcase 'svg':\n\t\t\t\treturn createjs.Types.SVG;\n\t\t\tdefault:\n\t\t\t\treturn createjs.Types.TEXT;\n\t\t}\n\t};\n\n\tcreatejs.RequestUtils = s;\n\n}());\n\n//##############################################################################\n// AbstractLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\n\t * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\n\t * @class AbstractLoader\n\t * @param {LoadItem|object|string} loadItem The item to be loaded.\n\t * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\n\t * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\n\t * other, so this is a suggested directive.\n\t * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\n\t * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\n\t * @extends EventDispatcher\n\t */\n\tfunction AbstractLoader(loadItem, preferXHR, type) {\n\t\tthis.EventDispatcher_constructor();\n\n\t\t// public properties\n\t\t/**\n\t\t * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\n\t\t * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\n\t\t * @property loaded\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.loaded = false;\n\n\t\t/**\n\t\t * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\n\t\t * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\n\t\t * instead.\n\t\t * @property canceled\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @readonly\n\t\t */\n\t\tthis.canceled = false;\n\n\t\t/**\n\t\t * The current load progress (percentage) for this item. This will be a number between 0 and 1.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     var queue = new createjs.LoadQueue();\n\t\t *     queue.loadFile(\"largeImage.png\");\n\t\t *     queue.on(\"progress\", function() {\n\t\t *         console.log(\"Progress:\", queue.progress, event.progress);\n\t\t *     });\n\t\t *\n\t\t * @property progress\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.progress = 0;\n\n\t\t/**\n\t\t * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\n\t\t * supported types.\n\t\t * @property type\n\t\t * @type {String}\n\t\t */\n\t\tthis.type = type;\n\n\t\t/**\n\t\t * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\n\t\t * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\n\t\t * can be overridden to provide custom formatting.\n\t\t *\n\t\t * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\n\t\t * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\n\t\t * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\n\t\t * called in the current scope, as well as the success and error callbacks.\n\t\t *\n\t\t * <h4>Example asynchronous resultFormatter</h4>\n\t\t *\n\t\t * \tfunction _formatResult(loader) {\n\t\t * \t\treturn function(success, error) {\n\t\t * \t\t\tif (errorCondition) { error(errorDetailEvent); }\n\t\t * \t\t\tsuccess(result);\n\t\t * \t\t}\n\t\t * \t}\n\t\t * @property resultFormatter\n\t\t * @type {Function}\n\t\t * @default null\n\t\t */\n\t\tthis.resultFormatter = null;\n\n\t\t// protected properties\n\t\t/**\n\t\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t\t * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\n\t\t * @property _item\n\t\t * @type {LoadItem|Object}\n\t\t * @private\n\t\t */\n\t\tif (loadItem) {\n\t\t\tthis._item = createjs.LoadItem.create(loadItem);\n\t\t} else {\n\t\t\tthis._item = null;\n\t\t}\n\n\t\t/**\n\t\t * Whether the loader will try and load content using XHR (true) or HTML tags (false).\n\t\t * @property _preferXHR\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._preferXHR = preferXHR;\n\n\t\t/**\n\t\t * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\n\t\t * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\n\t\t * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\n\t\t * @property _result\n\t\t * @type {Object|String}\n\t\t * @private\n\t\t */\n\t\tthis._result = null;\n\n\t\t/**\n\t\t * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\n\t\t * method, and passing `true`.\n\t\t * @property _rawResult\n\t\t * @type {Object|String}\n\t\t * @private\n\t\t */\n\t\tthis._rawResult = null;\n\n\t\t/**\n\t\t * A list of items that loaders load behind the scenes. This does not include the main item the loader is\n\t\t * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t * @property _loadItems\n\t\t * @type {null}\n\t\t * @protected\n\t\t */\n\t\tthis._loadedItems = null;\n\n\t\t/**\n\t\t * The attribute the items loaded using tags use for the source.\n\t\t * @type {string}\n\t\t * @default null\n\t\t * @private\n\t\t */\n\t\tthis._tagSrcAttribute = null;\n\n\t\t/**\n\t\t * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\n\t\t * @property _tag\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._tag = null;\n\t};\n\n\tvar p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\n\tvar s = AbstractLoader;\n\n\t// Remove these @deprecated properties after 1.0\n\ttry {\n\t\tObject.defineProperties(s, {\n\t\t\tPOST: { get: createjs.deprecate(function() { return createjs.Methods.POST; }, \"AbstractLoader.POST\") },\n\t\t\tGET: { get: createjs.deprecate(function() { return createjs.Methods.GET; }, \"AbstractLoader.GET\") },\n\n\t\t\tBINARY: { get: createjs.deprecate(function() { return createjs.Types.BINARY; }, \"AbstractLoader.BINARY\") },\n\t\t\tCSS: { get: createjs.deprecate(function() { return createjs.Types.CSS; }, \"AbstractLoader.CSS\") },\n\t\t\tFONT: { get: createjs.deprecate(function() { return createjs.Types.FONT; }, \"AbstractLoader.FONT\") },\n\t\t\tFONTCSS: { get: createjs.deprecate(function() { return createjs.Types.FONTCSS; }, \"AbstractLoader.FONTCSS\") },\n\t\t\tIMAGE: { get: createjs.deprecate(function() { return createjs.Types.IMAGE; }, \"AbstractLoader.IMAGE\") },\n\t\t\tJAVASCRIPT: { get: createjs.deprecate(function() { return createjs.Types.JAVASCRIPT; }, \"AbstractLoader.JAVASCRIPT\") },\n\t\t\tJSON: { get: createjs.deprecate(function() { return createjs.Types.JSON; }, \"AbstractLoader.JSON\") },\n\t\t\tJSONP: { get: createjs.deprecate(function() { return createjs.Types.JSONP; }, \"AbstractLoader.JSONP\") },\n\t\t\tMANIFEST: { get: createjs.deprecate(function() { return createjs.Types.MANIFEST; }, \"AbstractLoader.MANIFEST\") },\n\t\t\tSOUND: { get: createjs.deprecate(function() { return createjs.Types.SOUND; }, \"AbstractLoader.SOUND\") },\n\t\t\tVIDEO: { get: createjs.deprecate(function() { return createjs.Types.VIDEO; }, \"AbstractLoader.VIDEO\") },\n\t\t\tSPRITESHEET: { get: createjs.deprecate(function() { return createjs.Types.SPRITESHEET; }, \"AbstractLoader.SPRITESHEET\") },\n\t\t\tSVG: { get: createjs.deprecate(function() { return createjs.Types.SVG; }, \"AbstractLoader.SVG\") },\n\t\t\tTEXT: { get: createjs.deprecate(function() { return createjs.Types.TEXT; }, \"AbstractLoader.TEXT\") },\n\t\t\tXML: { get: createjs.deprecate(function() { return createjs.Types.XML; }, \"AbstractLoader.XML\") }\n\t\t});\n\t} catch (e) {}\n\n// Events\n\t/**\n\t * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\n\t * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t * @event progress\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\n\t * @event loadstart\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.3.1\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\n\t * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\n\t * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t * @event error\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\n\t * This enables loaders to maintain internal queues, and surface file load errors.\n\t * @event fileerror\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"fileerror\")\n\t * @param {LoadItem|object} The item that encountered the error\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\n\t * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\n\t * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\n\t * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"fileload\")\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a `src` property.\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t * to a usable object.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\n\t * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\n\t * @event initialize\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"initialize\")\n\t * @param {AbstractLoader} loader The loader that has been initialized.\n\t */\n\n\n\t/**\n\t * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\n\t * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\n\t * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t * @method getItem\n\t * @return {Object} The manifest item that this loader is responsible for loading.\n\t * @since 0.6.0\n\t */\n\tp.getItem = function () {\n\t\treturn this._item;\n\t};\n\n\t/**\n\t * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\n\t * event is dispatched.\n\t * @method getResult\n\t * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\n\t * data (if it exists).\n\t * @return {Object}\n\t * @since 0.6.0\n\t */\n\tp.getResult = function (raw) {\n\t\treturn raw ? this._rawResult : this._result;\n\t};\n\n\t/**\n\t * Return the `tag` this object creates or uses for loading.\n\t * @method getTag\n\t * @return {Object} The tag instance\n\t * @since 0.6.0\n\t */\n\tp.getTag = function () {\n\t\treturn this._tag;\n\t};\n\n\t/**\n\t * Set the `tag` this item uses for loading.\n\t * @method setTag\n\t * @param {Object} tag The tag instance\n\t * @since 0.6.0\n\t */\n\tp.setTag = function(tag) {\n\t  this._tag = tag;\n\t};\n\n\t/**\n\t * Begin loading the item. This method is required when using a loader by itself.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *      queue.on(\"complete\", handleComplete);\n\t *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\n\t *      queue.load();\n\t *\n\t * @method load\n\t */\n\tp.load = function () {\n\t\tthis._createRequest();\n\n\t\tthis._request.on(\"complete\", this, this);\n\t\tthis._request.on(\"progress\", this, this);\n\t\tthis._request.on(\"loadStart\", this, this);\n\t\tthis._request.on(\"abort\", this, this);\n\t\tthis._request.on(\"timeout\", this, this);\n\t\tthis._request.on(\"error\", this, this);\n\n\t\tvar evt = new createjs.Event(\"initialize\");\n\t\tevt.loader = this._request;\n\t\tthis.dispatchEvent(evt);\n\n\t\tthis._request.load();\n\t};\n\n\t/**\n\t * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\n\t * the background), but events will not longer be dispatched.\n\t * @method cancel\n\t */\n\tp.cancel = function () {\n\t\tthis.canceled = true;\n\t\tthis.destroy();\n\t};\n\n\t/**\n\t * Clean up the loader.\n\t * @method destroy\n\t */\n\tp.destroy = function() {\n\t\tif (this._request) {\n\t\t\tthis._request.removeAllEventListeners();\n\t\t\tthis._request.destroy();\n\t\t}\n\n\t\tthis._request = null;\n\n\t\tthis._item = null;\n\t\tthis._rawResult = null;\n\t\tthis._result = null;\n\n\t\tthis._loadItems = null;\n\n\t\tthis.removeAllEventListeners();\n\t};\n\n\t/**\n\t * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t * to expose items it loads internally.\n\t * @method getLoadedItems\n\t * @return {Array} A list of the items loaded by the loader.\n\t * @since 0.6.0\n\t */\n\tp.getLoadedItems = function () {\n\t\treturn this._loadedItems;\n\t};\n\n\n\t// Private methods\n\t/**\n\t * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\n\t * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\n\t * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\n\t * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\n\t * @method _createRequest\n\t * @protected\n\t */\n\tp._createRequest = function() {\n\t\tif (!this._preferXHR) {\n\t\t\tthis._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t} else {\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t}\n\t};\n\n\t/**\n\t * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\n\t * by loaders that require tag loading.\n\t * @method _createTag\n\t * @param {String} src The tag source\n\t * @return {HTMLElement} The tag that was created\n\t * @protected\n\t */\n\tp._createTag = function(src) { return null; };\n\n\t/**\n\t * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendLoadStart\n\t * @protected\n\t */\n\tp._sendLoadStart = function () {\n\t\tif (this._isCanceled()) { return; }\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\n\t * @method _sendProgress\n\t * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\n\t * and <code>total</code> properties.\n\t * @protected\n\t */\n\tp._sendProgress = function (value) {\n\t\tif (this._isCanceled()) { return; }\n\t\tvar event = null;\n\t\tif (typeof(value) == \"number\") {\n\t\t\tthis.progress = value;\n\t\t\tevent = new createjs.ProgressEvent(this.progress);\n\t\t} else {\n\t\t\tevent = value;\n\t\t\tthis.progress = value.loaded / value.total;\n\t\t\tevent.progress = this.progress;\n\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t}\n\t\tthis.hasEventListener(\"progress\") && this.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\n\t * @method _sendComplete\n\t * @protected\n\t */\n\tp._sendComplete = function () {\n\t\tif (this._isCanceled()) { return; }\n\n\t\tthis.loaded = true;\n\n\t\tvar event = new createjs.Event(\"complete\");\n\t\tevent.rawResult = this._rawResult;\n\n\t\tif (this._result != null) {\n\t\t\tevent.result = this._result;\n\t\t}\n\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendError\n\t * @param {ErrorEvent} event The event object containing specific error properties.\n\t * @protected\n\t */\n\tp._sendError = function (event) {\n\t\tif (this._isCanceled() || !this.hasEventListener(\"error\")) { return; }\n\t\tif (event == null) {\n\t\t\tevent = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\n\t\t}\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\n\t * do not cause issues after the queue has been cleaned up.\n\t * @method _isCanceled\n\t * @return {Boolean} If the loader has been canceled.\n\t * @protected\n\t */\n\tp._isCanceled = function () {\n\t\tif (window.createjs == null || this.canceled) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * A custom result formatter function, which is called just before a request dispatches its complete event. Most\n\t * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\n\t * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\n\t * @property resultFormatter\n\t * @type Function\n\t * @return {Object} The formatted result\n\t * @since 0.6.0\n\t */\n\tp.resultFormatter = null;\n\n\t/**\n\t * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\n\t * this method can be overridden for custom behaviours.\n\t * @method handleEvent\n\t * @param {Event} event The event that the internal request dispatches.\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target._response;\n\t\t\t\tvar result = this.resultFormatter && this.resultFormatter(this);\n\t\t\t\t// The resultFormatter is asynchronous\n\t\t\t\tif (result instanceof Function) {\n\t\t\t\t\tresult.call(this,\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatSuccess, this),\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatFailed, this)\n\t\t\t\t\t);\n\t\t\t\t// The result formatter is synchronous\n\t\t\t\t} else {\n\t\t\t\t\tthis._result =  result || this._rawResult;\n\t\t\t\t\tthis._sendComplete();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"progress\":\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\tbreak;\n\t\t\tcase \"error\":\n\t\t\t\tthis._sendError(event);\n\t\t\t\tbreak;\n\t\t\tcase \"loadstart\":\n\t\t\t\tthis._sendLoadStart();\n\t\t\t\tbreak;\n\t\t\tcase \"abort\":\n\t\t\tcase \"timeout\":\n\t\t\t\tif (!this._isCanceled()) {\n\t\t\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t * functions.\n\t * @method _resultFormatSuccess\n\t * @param {Object} result The formatted result\n\t * @private\n\t */\n\tp._resultFormatSuccess = function (result) {\n\t\tthis._result = result;\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t * functions.\n\t * @method _resultFormatSuccess\n\t * @param {Object} error The error event\n\t * @private\n\t */\n\tp._resultFormatFailed = function (event) {\n\t\tthis._sendError(event);\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function () {\n\t\treturn \"[PreloadJS AbstractLoader]\";\n\t};\n\n\tcreatejs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// AbstractMediaLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\n\t * handle HTML media elements, such as Video and Audio.\n\t * @class AbstractMediaLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction AbstractMediaLoader(loadItem, preferXHR, type) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, type);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\n        this.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\n\n\t// static properties\n\t// public methods\n\tp.load = function () {\n\t\t// TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\n\t\tif (!this._tag) {\n\t\t\tthis._tag = this._createTag(this._item.src);\n\t\t}\n\n\t\tthis._tag.preload = \"auto\";\n\t\tthis._tag.load();\n\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\t/**\n\t * Creates a new tag for loading if it doesn't exist yet.\n\t * @method _createTag\n\t * @private\n\t */\n\tp._createTag = function () {};\n\n\n\tp._createRequest = function() {\n\t\tif (!this._preferXHR) {\n\t\t\tthis._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t} else {\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t}\n\t};\n\n    // protected methods\n    /**\n     * Before the item loads, set its mimeType and responseType.\n     * @property _updateXHR\n     * @param {Event} event\n     * @private\n     */\n    p._updateXHR = function (event) {\n        // Only exists for XHR\n        if (event.loader.setResponseType) {\n            event.loader.setResponseType(\"blob\");\n        }\n    };\n\n\t/**\n\t * The result formatter for media files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLVideoElement|HTMLAudioElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\tthis._tag.onstalled = null;\n\t\tif (this._preferXHR) {\n            var URL = window.URL || window.webkitURL;\n            var result = loader.getResult(true);\n\n\t\t\tloader.getTag().src = URL.createObjectURL(result);\n\t\t}\n\t\treturn loader.getTag();\n\t};\n\n\tcreatejs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// AbstractRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\n\t * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\n\t * hood to get data.\n\t * @class AbstractRequest\n\t * @param {LoadItem} item\n\t * @constructor\n\t */\n\tvar AbstractRequest = function (item) {\n\t\tthis._item = item;\n\t};\n\n\tvar p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\n\n\t// public methods\n\t/**\n\t * Begin a load.\n\t * @method load\n\t */\n\tp.load =  function() {};\n\n\t/**\n\t * Clean up a request.\n\t * @method destroy\n\t */\n\tp.destroy = function() {};\n\n\t/**\n\t * Cancel an in-progress request.\n\t * @method cancel\n\t */\n\tp.cancel = function() {};\n\n\tcreatejs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// TagRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\n\t * @class TagRequest\n\t * @param {LoadItem} loadItem\n\t * @param {HTMLElement} tag\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t */\n\tfunction TagRequest(loadItem, tag, srcAttribute) {\n\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t// protected properties\n\t\t/**\n\t\t * The HTML tag instance that is used to load.\n\t\t * @property _tag\n\t\t * @type {HTMLElement}\n\t\t * @protected\n\t\t */\n\t\tthis._tag = tag;\n\n\t\t/**\n\t\t * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t\t * @property _tagSrcAttribute\n\t\t * @type {String}\n\t\t * @protected\n\t\t */\n\t\tthis._tagSrcAttribute = srcAttribute;\n\n\t\t/**\n\t\t * A method closure used for handling the tag load event.\n\t\t * @property _loadedHandler\n\t\t * @type {Function}\n\t\t * @private\n\t\t */\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\n\t\t/**\n\t\t * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\n\t\t * @property _addedToDOM\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._addedToDOM = false;\n\n\t};\n\n\tvar p = createjs.extend(TagRequest, createjs.AbstractRequest);\n\n\t// public methods\n\tp.load = function () {\n\t\tthis._tag.onload = createjs.proxy(this._handleTagComplete, this);\n\t\tthis._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\n\t\tthis._tag.onerror = createjs.proxy(this._handleError, this);\n\n\t\tvar evt = new createjs.Event(\"initialize\");\n\t\tevt.loader = this._tag;\n\n\t\tthis.dispatchEvent(evt);\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\tthis._tag[this._tagSrcAttribute] = this._item.src;\n\n\t\t// wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\n\t\tif (this._tag.parentNode == null) {\n\t\t\tcreatejs.DomUtils.appendToBody(this._tag);\n\t\t\tthis._addedToDOM = true;\n\t\t}\n\t};\n\n\tp.destroy = function() {\n\t\tthis._clean();\n\t\tthis._tag = null;\n\n\t\tthis.AbstractRequest_destroy();\n\t};\n\n\t// private methods\n\t/**\n\t * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\n\t * and LINK tags), but other cases may exist.\n\t * @method _handleReadyStateChange\n\t * @private\n\t */\n\tp._handleReadyStateChange = function () {\n\t\tclearTimeout(this._loadTimeout);\n\t\t// This is strictly for tags in browsers that do not support onload.\n\t\tvar tag = this._tag;\n\n\t\t// Complete is for old IE support.\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\tthis._handleTagComplete();\n\t\t}\n\t};\n\n\t/**\n\t * Handle any error events from the tag.\n\t * @method _handleError\n\t * @protected\n\t */\n\tp._handleError = function() {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(\"error\");\n\t};\n\n\t/**\n\t * Handle the tag's onload callback.\n\t * @method _handleTagComplete\n\t * @private\n\t */\n\tp._handleTagComplete = function () {\n\t\tthis._rawResult = this._tag;\n\t\tthis._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\n\n\t\tthis._clean();\n\n\t\tthis.dispatchEvent(\"complete\");\n\t};\n\n\t/**\n\t * The tag request has not loaded within the time specified in loadTimeout.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.Event(\"timeout\"));\n\t};\n\n\t/**\n\t * Remove event listeners, but don't destroy the request object\n\t * @method _clean\n\t * @private\n\t */\n\tp._clean = function() {\n\t\tthis._tag.onload = null;\n\t\tthis._tag.onreadystatechange = null;\n\t\tthis._tag.onerror = null;\n\t\tif (this._addedToDOM && this._tag.parentNode != null) {\n\t\t\tthis._tag.parentNode.removeChild(this._tag);\n\t\t}\n\t\tclearTimeout(this._loadTimeout);\n\t};\n\n\t/**\n\t * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\n\t * that is already in a load, but not complete.\n\t * @method _handleStalled\n\t * @private\n\t */\n\tp._handleStalled = function () {\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t};\n\n\tcreatejs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\n\n}());\n\n//##############################################################################\n// MediaTagRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\n\t * @class MediaTagRequest\n\t * @param {LoadItem} loadItem\n\t * @param {HTMLAudioElement|HTMLVideoElement} tag\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t * @constructor\n\t */\n\tfunction MediaTagRequest(loadItem, tag, srcAttribute) {\n\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t// protected properties\n\t\tthis._tag = tag;\n\t\tthis._tagSrcAttribute = srcAttribute;\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\t};\n\n\tvar p = createjs.extend(MediaTagRequest, createjs.TagRequest);\n\tvar s = MediaTagRequest;\n\n\t// public methods\n\tp.load = function () {\n\t\tvar sc = createjs.proxy(this._handleStalled, this);\n\t\tthis._stalledCallback = sc;\n\n\t\tvar pc = createjs.proxy(this._handleProgress, this);\n\t\tthis._handleProgress = pc;\n\n\t\tthis._tag.addEventListener(\"stalled\", sc);\n\t\tthis._tag.addEventListener(\"progress\", pc);\n\n\t\t// This will tell us when audio is buffered enough to play through, but not when its loaded.\n\t\t// The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\n\t\tthis._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\n\n\t\tthis.TagRequest_load();\n\t};\n\n\t// private methods\n\tp._handleReadyStateChange = function () {\n\t\tclearTimeout(this._loadTimeout);\n\t\t// This is strictly for tags in browsers that do not support onload.\n\t\tvar tag = this._tag;\n\n\t\t// Complete is for old IE support.\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\tthis._handleTagComplete();\n\t\t}\n\t};\n\n\tp._handleStalled = function () {\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t};\n\n\t/**\n\t * An XHR request has reported progress.\n\t * @method _handleProgress\n\t * @param {Object} event The XHR progress event.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t}\n\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\t// protected methods\n\tp._clean = function () {\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\tthis._tag.removeEventListener(\"stalled\", this._stalledCallback);\n\t\tthis._tag.removeEventListener(\"progress\", this._progressCallback);\n\n\t\tthis.TagRequest__clean();\n\t};\n\n\tcreatejs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\n\n}());\n\n//##############################################################################\n// XHRRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\n\t * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\n\t * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\n\t * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\n\t * cross-domain loading.\n\t * @class XHRRequest\n\t * @constructor\n\t * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * for an overview of supported file properties.\n\t * @extends AbstractLoader\n\t */\n\tfunction XHRRequest (item) {\n\t\tthis.AbstractRequest_constructor(item);\n\n\t\t// protected properties\n\t\t/**\n\t\t * A reference to the XHR request used to load the content.\n\t\t * @property _request\n\t\t * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\n\t\t * @private\n\t\t */\n\t\tthis._request = null;\n\n\t\t/**\n\t\t * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\n\t\t * typically IE9).\n\t\t * @property _loadTimeout\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\t\tthis._loadTimeout = null;\n\n\t\t/**\n\t\t * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\n\t\t * the version, so we use capabilities to make a best guess.\n\t\t * @property _xhrLevel\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @private\n\t\t */\n\t\tthis._xhrLevel = 1;\n\n\t\t/**\n\t\t * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\n\t\t * null until the file is loaded.\n\t\t * @property _response\n\t\t * @type {mixed}\n\t\t * @private\n\t\t */\n\t\tthis._response = null;\n\n\t\t/**\n\t\t * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\n\t\t * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\n\t\t * want to access the raw content as it was loaded.\n\t\t * @property _rawResponse\n\t\t * @type {String|Object}\n\t\t * @private\n\t\t */\n\t\tthis._rawResponse = null;\n\n\t\tthis._canceled = false;\n\n\t\t// Setup our event handlers now.\n\t\tthis._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\n\t\tthis._handleProgressProxy = createjs.proxy(this._handleProgress, this);\n\t\tthis._handleAbortProxy = createjs.proxy(this._handleAbort, this);\n\t\tthis._handleErrorProxy = createjs.proxy(this._handleError, this);\n\t\tthis._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\n\t\tthis._handleLoadProxy = createjs.proxy(this._handleLoad, this);\n\t\tthis._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\n\n\t\tif (!this._createXHR(item)) {\n\t\t\t//TODO: Throw error?\n\t\t}\n\t};\n\n\tvar p = createjs.extend(XHRRequest, createjs.AbstractRequest);\n\n// static properties\n\t/**\n\t * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\n\t * @property ACTIVEX_VERSIONS\n\t * @type {Array}\n\t * @since 0.4.2\n\t * @private\n\t */\n\tXHRRequest.ACTIVEX_VERSIONS = [\n\t\t\"Msxml2.XMLHTTP.6.0\",\n\t\t\"Msxml2.XMLHTTP.5.0\",\n\t\t\"Msxml2.XMLHTTP.4.0\",\n\t\t\"MSXML2.XMLHTTP.3.0\",\n\t\t\"MSXML2.XMLHTTP\",\n\t\t\"Microsoft.XMLHTTP\"\n\t];\n\n// Public methods\n\t/**\n\t * Look up the loaded result.\n\t * @method getResult\n\t * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t * returned instead.\n\t * @return {Object} A result object containing the content that was loaded, such as:\n\t * <ul>\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\n\t *      HTML head.</li>\n\t *      <li>A style tag for CSS (&lt;style /&gt;)</li>\n\t *      <li>Raw text for TEXT</li>\n\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t *      <li>An XML document</li>\n\t *      <li>An binary arraybuffer loaded by XHR</li>\n\t * </ul>\n\t * Note that if a raw result is requested, but not found, the result will be returned instead.\n\t */\n\tp.getResult = function (raw) {\n\t\tif (raw && this._rawResponse) {\n\t\t\treturn this._rawResponse;\n\t\t}\n\t\treturn this._response;\n\t};\n\n\t// Overrides abstract method in AbstractRequest\n\tp.cancel = function () {\n\t\tthis.canceled = true;\n\t\tthis._clean();\n\t\tthis._request.abort();\n\t};\n\n\t// Overrides abstract method in AbstractLoader\n\tp.load = function () {\n\t\tif (this._request == null) {\n\t\t\tthis._handleError();\n\t\t\treturn;\n\t\t}\n\n\t\t//Events\n\t\tif (this._request.addEventListener != null) {\n\t\t\tthis._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\n\t\t\tthis._request.addEventListener(\"progress\", this._handleProgressProxy, false);\n\t\t\tthis._request.addEventListener(\"abort\", this._handleAbortProxy, false);\n\t\t\tthis._request.addEventListener(\"error\", this._handleErrorProxy, false);\n\t\t\tthis._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\n\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\tthis._request.addEventListener(\"load\", this._handleLoadProxy, false);\n\t\t\tthis._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\n\t\t} else {\n\t\t\t// IE9 support\n\t\t\tthis._request.onloadstart = this._handleLoadStartProxy;\n\t\t\tthis._request.onprogress = this._handleProgressProxy;\n\t\t\tthis._request.onabort = this._handleAbortProxy;\n\t\t\tthis._request.onerror = this._handleErrorProxy;\n\t\t\tthis._request.ontimeout = this._handleTimeoutProxy;\n\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\tthis._request.onload = this._handleLoadProxy;\n\t\t\tthis._request.onreadystatechange = this._handleReadyStateChangeProxy;\n\t\t}\n\n\t\t// Set up a timeout if we don't have XHR2\n\t\tif (this._xhrLevel == 1) {\n\t\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\t\t}\n\n\t\t// Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\n\t\ttry {\n\t\t\tif (!this._item.values) {\n\t\t\t\tthis._request.send();\n\t\t\t} else {\n\t\t\t\tthis._request.send(createjs.URLUtils.formatQueryString(this._item.values));\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\n\t\t}\n\t};\n\n\tp.setResponseType = function (type) {\n\t\t// Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\n\t\tif (type === 'blob') {\n\t\t\ttype = window.URL ? 'blob' : 'arraybuffer';\n\t\t\tthis._responseType = type;\n\t\t}\n\t\tthis._request.responseType = type;\n\t};\n\n\t/**\n\t * Get all the response headers from the XmlHttpRequest.\n\t *\n\t * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\n\t * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\n\t * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\n\t * pair.\n\t * @method getAllResponseHeaders\n\t * @return {String}\n\t * @since 0.4.1\n\t */\n\tp.getAllResponseHeaders = function () {\n\t\tif (this._request.getAllResponseHeaders instanceof Function) {\n\t\t\treturn this._request.getAllResponseHeaders();\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\t/**\n\t * Get a specific response header from the XmlHttpRequest.\n\t *\n\t * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\n\t * header, unless the field name is Set-Cookie or Set-Cookie2.\n\t * @method getResponseHeader\n\t * @param {String} header The header name to retrieve.\n\t * @return {String}\n\t * @since 0.4.1\n\t */\n\tp.getResponseHeader = function (header) {\n\t\tif (this._request.getResponseHeader instanceof Function) {\n\t\t\treturn this._request.getResponseHeader(header);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n// protected methods\n\t/**\n\t * The XHR request has reported progress.\n\t * @method _handleProgress\n\t * @param {Object} event The XHR progress event.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t}\n\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\t/**\n\t * The XHR request has reported a load start.\n\t * @method _handleLoadStart\n\t * @param {Object} event The XHR loadStart event.\n\t * @private\n\t */\n\tp._handleLoadStart = function (event) {\n\t\tclearTimeout(this._loadTimeout);\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * The XHR request has reported an abort event.\n\t * @method handleAbort\n\t * @param {Object} event The XHR abort event.\n\t * @private\n\t */\n\tp._handleAbort = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\n\t};\n\n\t/**\n\t * The XHR request has reported an error event.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleError = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(event.message));\n\t};\n\n\t/**\n\t * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\n\t * event, so we must monitor the readyStateChange to determine if the file is loaded.\n\t * @method _handleReadyStateChange\n\t * @param {Object} event The XHR readyStateChange event.\n\t * @private\n\t */\n\tp._handleReadyStateChange = function (event) {\n\t\tif (this._request.readyState == 4) {\n\t\t\tthis._handleLoad();\n\t\t}\n\t};\n\n\t/**\n\t * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\n\t * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\n\t *\n\t * Note that This method uses {{#crossLink \"_checkError\"}}{{/crossLink}} to determine if the server has returned an\n\t * error code.\n\t * @method _handleLoad\n\t * @param {Object} event The XHR load event.\n\t * @private\n\t */\n\tp._handleLoad = function (event) {\n\t\tif (this.loaded) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loaded = true;\n\n\t\tvar error = this._checkError();\n\t\tif (error) {\n\t\t\tthis._handleError(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._response = this._getResponse();\n\t\t// Convert arraybuffer back to blob\n\t\tif (this._responseType === 'arraybuffer') {\n\t\t\ttry {\n\t\t\t\tthis._response = new Blob([this._response]);\n\t\t\t} catch (e) {\n\t\t\t\t// Fallback to use BlobBuilder if Blob constructor is not supported\n\t\t\t\t// Tested on Android 2.3 ~ 4.2 and iOS5 safari\n\t\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\t\t\t\tif (e.name === 'TypeError' && window.BlobBuilder) {\n\t\t\t\t\tvar builder = new BlobBuilder();\n\t\t\t\t\tbuilder.append(this._response);\n\t\t\t\t\tthis._response = builder.getBlob();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._clean();\n\n\t\tthis.dispatchEvent(new createjs.Event(\"complete\"));\n\t};\n\n\t/**\n\t * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\n\t * callback.\n\t * @method _handleTimeout\n\t * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\n\t * @private\n\t */\n\tp._handleTimeout = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\n\t};\n\n// Protected\n\t/**\n\t * Determine if there is an error in the current load.\n\t * Currently this checks the status of the request for problem codes, and not actual response content:\n\t * <ul>\n\t *     <li>Status codes between 400 and 599 (HTTP error range)</li>\n\t *     <li>A status of 0, but *only when the application is running on a server*. If the application is running\n\t *     on `file:`, then it may incorrectly treat an error on local (or embedded applications) as a successful\n\t *     load.</li>\n\t * </ul>\n\t * @method _checkError\n\t * @return {Error} An error with the status code in the `message` argument.\n\t * @private\n\t */\n\tp._checkError = function () {\n\t\tvar status = parseInt(this._request.status);\n\t\tif (status >= 400 && status <= 599) {\n\t\t\treturn new Error(status);\n\t\t} else if (status == 0) {\n\t\t\tif ((/^https?:/).test(location.protocol)) { return new Error(0); }\n\t\t\treturn null; // Likely an embedded app.\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\n\t/**\n\t * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\n\t * in other browsers. If there is no response, the <code>_response</code> property will remain null.\n\t * @method _getResponse\n\t * @private\n\t */\n\tp._getResponse = function () {\n\t\tif (this._response != null) {\n\t\t\treturn this._response;\n\t\t}\n\n\t\tif (this._request.response != null) {\n\t\t\treturn this._request.response;\n\t\t}\n\n\t\t// Android 2.2 uses .responseText\n\t\ttry {\n\t\t\tif (this._request.responseText != null) {\n\t\t\t\treturn this._request.responseText;\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\t// When loading XML, IE9 does not return .response, instead it returns responseXML.xml\n\t\ttry {\n\t\t\tif (this._request.responseXML != null) {\n\t\t\t\treturn this._request.responseXML;\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t/**\n\t * Create an XHR request. Depending on a number of factors, we get totally different results.\n\t * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\n\t *      <li>XMLHttpRequest are created when available.</li>\n\t *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\n\t *      <li>Text requests override the mime type if possible</li>\n\t *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\n\t *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\n\t * @method _createXHR\n\t * @param {Object} item The requested item that is being loaded.\n\t * @return {Boolean} If an XHR request or equivalent was successfully created.\n\t * @private\n\t */\n\tp._createXHR = function (item) {\n\t\t// Check for cross-domain loads. We can't fully support them, but we can try.\n\t\tvar crossdomain = createjs.URLUtils.isCrossDomain(item);\n\t\tvar headers = {};\n\n\t\t// Create the request. Fallback to whatever support we have.\n\t\tvar req = null;\n\t\tif (window.XMLHttpRequest) {\n\t\t\treq = new XMLHttpRequest();\n\t\t\t// This is 8 or 9, so use XDomainRequest instead.\n\t\t\tif (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\n\t\t\t\treq = new XDomainRequest();\n\t\t\t}\n\t\t} else { // Old IE versions use a different approach\n\t\t\tfor (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\n\t\t\t\tvar axVersion = s.ACTIVEX_VERSIONS[i];\n\t\t\t\ttry {\n\t\t\t\t\treq = new ActiveXObject(axVersion);\n\t\t\t\t\tbreak;\n\t\t\t\t} catch (e) {\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (req == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Default to utf-8 for Text requests.\n\t\tif (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\n\t\t\titem.mimeType = \"text/plain; charset=utf-8\";\n\t\t}\n\n\t\t// IE9 doesn't support overrideMimeType(), so we need to check for it.\n\t\tif (item.mimeType && req.overrideMimeType) {\n\t\t\treq.overrideMimeType(item.mimeType);\n\t\t}\n\n\t\t// Determine the XHR level\n\t\tthis._xhrLevel = (typeof req.responseType === \"string\") ? 2 : 1;\n\n\t\tvar src = null;\n\t\tif (item.method == createjs.Methods.GET) {\n\t\t\tsrc = createjs.URLUtils.buildURI(item.src, item.values);\n\t\t} else {\n\t\t\tsrc = item.src;\n\t\t}\n\n\t\t// Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\n\t\treq.open(item.method || createjs.Methods.GET, src, true);\n\n\t\tif (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\n\t\t\theaders[\"Origin\"] = location.origin;\n\t\t}\n\n\t\t// To send data we need to set the Content-type header)\n\t\tif (item.values && item.method == createjs.Methods.POST) {\n\t\t\theaders[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n\t\t}\n\n\t\tif (!crossdomain && !headers[\"X-Requested-With\"]) {\n\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t}\n\n\t\tif (item.headers) {\n\t\t\tfor (var n in item.headers) {\n\t\t\t\theaders[n] = item.headers[n];\n\t\t\t}\n\t\t}\n\n\t\tfor (n in headers) {\n\t\t\treq.setRequestHeader(n, headers[n])\n\t\t}\n\n\t\tif (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\n\t\t\treq.withCredentials = item.withCredentials;\n\t\t}\n\n\t\tthis._request = req;\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * A request has completed (or failed or canceled), and needs to be disposed.\n\t * @method _clean\n\t * @private\n\t */\n\tp._clean = function () {\n\t\tclearTimeout(this._loadTimeout);\n\n\t\tif (this._request.removeEventListener != null) {\n\t\t\tthis._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\n\t\t\tthis._request.removeEventListener(\"progress\", this._handleProgressProxy);\n\t\t\tthis._request.removeEventListener(\"abort\", this._handleAbortProxy);\n\t\t\tthis._request.removeEventListener(\"error\", this._handleErrorProxy);\n\t\t\tthis._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\n\t\t\tthis._request.removeEventListener(\"load\", this._handleLoadProxy);\n\t\t\tthis._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\n\t\t} else {\n\t\t\tthis._request.onloadstart = null;\n\t\t\tthis._request.onprogress = null;\n\t\t\tthis._request.onabort = null;\n\t\t\tthis._request.onerror = null;\n\t\t\tthis._request.ontimeout = null;\n\t\t\tthis._request.onload = null;\n\t\t\tthis._request.onreadystatechange = null;\n\t\t}\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[PreloadJS XHRRequest]\";\n\t};\n\n\tcreatejs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\n\n}());\n\n//##############################################################################\n// LoadQueue.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n/*\n TODO: WINDOWS ISSUES\n * No error for HTML audio in IE 678\n * SVG no failure error in IE 67 (maybe 8) TAGS AND XHR\n * No script complete handler in IE 67 TAGS (XHR is fine)\n * No XML/JSON in IE6 TAGS\n * Need to hide loading SVG in Opera TAGS\n * No CSS onload/readystatechange in Safari or Android TAGS (requires rule checking)\n * SVG no load or failure in Opera XHR\n * Reported issues with IE7/8\n */\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * The LoadQueue class is the main API for preloading content. LoadQueue is a load manager, which can preload either\n\t * a single file, or queue of files.\n\t *\n\t * <b>Creating a Queue</b><br />\n\t * To use LoadQueue, create a LoadQueue instance. If you want to force tag loading where possible, set the preferXHR\n\t * argument to false.\n\t *\n\t *      var queue = new createjs.LoadQueue(true);\n\t *\n\t * <b>Listening for Events</b><br />\n\t * Add any listeners you want to the queue. Since PreloadJS 0.3.0, the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}\n\t * lets you add as many listeners as you want for events. You can subscribe to the following events:<ul>\n\t *     <li>{{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}: fired when a queue completes loading all\n\t *     files</li>\n\t *     <li>{{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}: fired when the queue encounters an error with\n\t *     any file.</li>\n\t *     <li>{{#crossLink \"AbstractLoader/progress:event\"}}{{/crossLink}}: Progress for the entire queue has\n\t *     changed.</li>\n\t *     <li>{{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}: A single file has completed loading.</li>\n\t *     <li>{{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}: Progress for a single file has changes. Note\n\t *     that only files loaded with XHR (or possibly by plugins) will fire progress events other than 0 or 100%.</li>\n\t * </ul>\n\t *\n\t *      queue.on(\"fileload\", handleFileLoad, this);\n\t *      queue.on(\"complete\", handleComplete, this);\n\t *\n\t * <b>Adding files and manifests</b><br />\n\t * Add files you want to load using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or add multiple files at a\n\t * time using a list or a manifest definition using {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. Files are\n\t * appended to the end of the active queue, so you can use these methods as many times as you like, whenever you\n\t * like.\n\t *\n\t *      queue.loadFile(\"filePath/file.jpg\");\n\t *      queue.loadFile({id:\"image\", src:\"filePath/file.jpg\"});\n\t *      queue.loadManifest([\"filePath/file.jpg\", {id:\"image\", src:\"filePath/file.jpg\"}]);\n\t *\n\t *      // Use an external manifest\n\t *      queue.loadManifest(\"path/to/manifest.json\");\n\t *      queue.loadManifest({src:\"manifest.json\", type:\"manifest\"});\n\t *\n\t * If you pass `false` as the `loadNow` parameter, the queue will not kick of the load of the files, but it will not\n\t * stop if it has already been started. Call the {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}} method to begin\n\t * a paused queue. Note that a paused queue will automatically resume when new files are added to it with a\n\t * `loadNow` argument of `true`.\n\t *\n\t *      queue.load();\n\t *\n\t * <b>File Types</b><br />\n\t * The file type of a manifest item is auto-determined by the file extension. The pattern matching in PreloadJS\n\t * should handle the majority of standard file and url formats, and works with common file extensions. If you have\n\t * either a non-standard file extension, or are serving the file using a proxy script, then you can pass in a\n\t * <code>type</code> property with any manifest item.\n\t *\n\t *      queue.loadFile({src:\"path/to/myFile.mp3x\", type:createjs.Types.SOUND});\n\t *\n\t *      // Note that PreloadJS will not read a file extension from the query string\n\t *      queue.loadFile({src:\"http://server.com/proxy?file=image.jpg\", type:createjs.Types.IMAGE});\n\t *\n\t * Supported types are defined on the {{#crossLink \"AbstractLoader\"}}{{/crossLink}} class, and include:\n\t * <ul>\n\t *     <li>{{#crossLink \"Types/BINARY:property\"}}{{/crossLink}}: Raw binary data via XHR</li>\n\t *     <li>{{#crossLink \"Types/CSS:property\"}}{{/crossLink}}: CSS files</li>\n\t *     <li>{{#crossLink \"Types/IMAGE:property\"}}{{/crossLink}}: Common image formats</li>\n\t *     <li>{{#crossLink \"Types/JAVASCRIPT:property\"}}{{/crossLink}}: JavaScript files</li>\n\t *     <li>{{#crossLink \"Types/JSON:property\"}}{{/crossLink}}: JSON data</li>\n\t *     <li>{{#crossLink \"Types/JSONP:property\"}}{{/crossLink}}: JSON files cross-domain</li>\n\t *     <li>{{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}}: A list of files to load in JSON format, see\n\t *     {{#crossLink \"AbstractLoader/loadManifest\"}}{{/crossLink}}</li>\n\t *     <li>{{#crossLink \"Types/SOUND:property\"}}{{/crossLink}}: Audio file formats</li>\n\t *     <li>{{#crossLink \"Types/SPRITESHEET:property\"}}{{/crossLink}}: JSON SpriteSheet definitions. This\n\t *     will also load sub-images, and provide a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance.</li>\n\t *     <li>{{#crossLink \"Types/SVG:property\"}}{{/crossLink}}: SVG files</li>\n\t *     <li>{{#crossLink \"Types/TEXT:property\"}}{{/crossLink}}: Text files - XHR only</li>\n     *     <li>{{#crossLink \"Types/VIDEO:property\"}}{{/crossLink}}: Video objects</li>\n\t *     <li>{{#crossLink \"Types/XML:property\"}}{{/crossLink}}: XML data</li>\n\t * </ul>\n\t *\n\t * <em>Note: Loader types used to be defined on LoadQueue, but have been moved to the Types class</em>\n\t *\n\t * <b>Handling Results</b><br />\n\t * When a file is finished downloading, a {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event is\n\t * dispatched. In an example above, there is an event listener snippet for fileload. Loaded files are usually a\n\t * formatted object that can be used immediately, including:\n\t * <ul>\n\t *     <li>Binary: The binary loaded result</li>\n\t *     <li>CSS: A &lt;link /&gt; tag</li>\n\t *     <li>Image: An &lt;img /&gt; tag</li>\n\t *     <li>JavaScript: A &lt;script /&gt; tag</li>\n\t *     <li>JSON/JSONP: A formatted JavaScript Object</li>\n\t *     <li>Manifest: A JavaScript object.\n\t *     <li>Sound: An &lt;audio /&gt; tag</a>\n\t *     <li>SpriteSheet: A {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance, containing loaded images.\n\t *     <li>SVG: An &lt;object /&gt; tag</li>\n\t *     <li>Text: Raw text</li>\n     *     <li>Video: A Video DOM node</li>\n\t *     <li>XML: An XML DOM node</li>\n\t * </ul>\n\t *\n\t *      function handleFileLoad(event) {\n\t *          var item = event.item; // A reference to the item that was passed in to the LoadQueue\n\t *          var type = item.type;\n\t *\n\t *          // Add any images to the page body.\n\t *          if (type == createjs.Types.IMAGE) {\n\t *              document.body.appendChild(event.result);\n\t *          }\n\t *      }\n\t *\n\t * At any time after the file has been loaded (usually after the queue has completed), any result can be looked up\n\t * via its \"id\" using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}. If no id was provided, then the\n\t * \"src\" or file path can be used instead, including the `path` defined by a manifest, but <strong>not including</strong>\n\t * a base path defined on the LoadQueue. It is recommended to always pass an id if you want to look up content.\n\t *\n\t *      var image = queue.getResult(\"image\");\n\t *      document.body.appendChild(image);\n\t *\n\t * Raw loaded content can be accessed using the <code>rawResult</code> property of the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n\t * event, or can be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}, passing `true` as the 2nd\n\t * argument. This is only applicable for content that has been parsed for the browser, specifically: JavaScript,\n\t * CSS, XML, SVG, and JSON objects, or anything loaded with XHR.\n\t *\n\t *      var image = queue.getResult(\"image\", true); // load the binary image data loaded with XHR.\n\t *\n\t * <b>Plugins</b><br />\n\t * LoadQueue has a simple plugin architecture to help process and preload content. For example, to preload audio,\n\t * make sure to install the <a href=\"http://soundjs.com\">SoundJS</a> Sound class, which will help load HTML audio,\n\t * Flash audio, and WebAudio files. This should be installed <strong>before</strong> loading any audio files.\n\t *\n\t *      queue.installPlugin(createjs.Sound);\n\t *\n\t * <h4>Known Browser Issues</h4>\n\t * <ul>\n\t *     <li>Browsers without audio support can not load audio files.</li>\n\t *     <li>Safari on Mac OS X can only play HTML audio if QuickTime is installed</li>\n\t *     <li>HTML Audio tags will only download until their <code>canPlayThrough</code> event is fired. Browsers other\n\t *     than Chrome will continue to download in the background.</li>\n\t *     <li>When loading scripts using tags, they are automatically added to the document.</li>\n\t *     <li>Scripts loaded via XHR may not be properly inspectable with browser tools.</li>\n\t *     <li>IE6 and IE7 (and some other browsers) may not be able to load XML, Text, or JSON, since they require\n\t *     XHR to work.</li>\n\t *     <li>Content loaded via tags will not show progress, and will continue to download in the background when\n\t *     canceled, although no events will be dispatched.</li>\n\t * </ul>\n\t *\n\t * @class LoadQueue\n\t * @param {Boolean} [preferXHR=true] Determines whether the preload instance will favor loading with XHR (XML HTTP\n\t * Requests), or HTML tags. When this is `false`, the queue will use tag loading when possible, and fall back on XHR\n\t * when necessary.\n\t * @param {String} [basePath=\"\"] A path that will be prepended on to the source parameter of all items in the queue\n\t * before they are loaded.  Sources beginning with a protocol such as `http://` or a relative path such as `../`\n\t * will not receive a base path.\n\t * @param {String|Boolean} [crossOrigin=\"\"] An optional flag to support images loaded from a CORS-enabled server. To\n\t * use it, set this value to `true`, which will default the crossOrigin property on images to \"Anonymous\". Any\n\t * string value will be passed through, but only \"\" and \"Anonymous\" are recommended. <strong>Note: The crossOrigin\n\t * parameter is deprecated. Use LoadItem.crossOrigin instead</strong>\n\t *\n\t * @constructor\n\t * @extends AbstractLoader\n\t */\n\tfunction LoadQueue (preferXHR, basePath, crossOrigin) {\n\t\tthis.AbstractLoader_constructor();\n\n\t\t/**\n\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}.\n\t\t * @property _plugins\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.1\n\t\t */\n\t\tthis._plugins = [];\n\n\t\t/**\n\t\t * An object hash of callbacks that are fired for each file type before the file is loaded, giving plugins the\n\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n\t\t * method for more information.\n\t\t * @property _typeCallbacks\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._typeCallbacks = {};\n\n\t\t/**\n\t\t * An object hash of callbacks that are fired for each file extension before the file is loaded, giving plugins the\n\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n\t\t * method for more information.\n\t\t * @property _extensionCallbacks\n\t\t * @type {null}\n\t\t * @private\n\t\t */\n\t\tthis._extensionCallbacks = {};\n\n\t\t/**\n\t\t * The next preload queue to process when this one is complete. If an error is thrown in the current queue, and\n\t\t * {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}} is `true`, the next queue will not be processed.\n\t\t * @property next\n\t\t * @type {LoadQueue}\n\t\t * @default null\n\t\t */\n\t\tthis.next = null;\n\n\t\t/**\n\t\t * Ensure loaded scripts \"complete\" in the order they are specified. Loaded scripts are added to the document head\n\t\t * once they are loaded. Scripts loaded via tags will load one-at-a-time when this property is `true`, whereas\n\t\t * scripts loaded using XHR can load in any order, but will \"finish\" and be added to the document in the order\n\t\t * specified.\n\t\t *\n\t\t * Any items can be set to load in order by setting the {{#crossLink \"maintainOrder:property\"}}{{/crossLink}}\n\t\t * property on the load item, or by ensuring that only one connection can be open at a time using\n\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Note that when the `maintainScriptOrder` property\n\t\t * is set to `true`, scripts items are automatically set to `maintainOrder=true`, and changing the\n\t\t * `maintainScriptOrder` to `false` during a load will not change items already in a queue.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var queue = new createjs.LoadQueue();\n\t\t *      queue.setMaxConnections(3); // Set a higher number to load multiple items at once\n\t\t *      queue.maintainScriptOrder = true; // Ensure scripts are loaded in order\n\t\t *      queue.loadManifest([\n\t\t *          \"script1.js\",\n\t\t *          \"script2.js\",\n\t\t *          \"image.png\", // Load any time\n\t\t *          {src: \"image2.png\", maintainOrder: true} // Will wait for script2.js\n\t\t *          \"image3.png\",\n\t\t *          \"script3.js\" // Will wait for image2.png before loading (or completing when loading with XHR)\n\t\t *      ]);\n\t\t *\n\t\t * @property maintainScriptOrder\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.maintainScriptOrder = true;\n\n\t\t/**\n\t\t * Determines if the LoadQueue will stop processing the current queue when an error is encountered.\n\t\t * @property stopOnError\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.stopOnError = false;\n\n\t\t/**\n\t\t * The number of maximum open connections that a loadQueue tries to maintain. Please see\n\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} for more information.\n\t\t * @property _maxConnections\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @private\n\t\t */\n\t\tthis._maxConnections = 1;\n\n\t\t/**\n\t\t * An internal list of all the default Loaders that are included with PreloadJS. Before an item is loaded, the\n\t\t * available loader list is iterated, in the order they are included, and as soon as a loader indicates it can\n\t\t * handle the content, it will be selected. The default loader, ({{#crossLink \"TextLoader\"}}{{/crossLink}} is\n\t\t * last in the list, so it will be used if no other match is found. Typically, loaders will match based on the\n\t\t * {{#crossLink \"LoadItem/type\"}}{{/crossLink}}, which is automatically determined using the file extension of\n\t\t * the {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}.\n\t\t *\n\t\t * Loaders can be removed from PreloadJS by simply not including them.\n\t\t *\n\t\t * Custom loaders installed using {{#crossLink \"registerLoader\"}}{{/crossLink}} will be prepended to this list\n\t\t * so that they are checked first.\n\t\t * @property _availableLoaders\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._availableLoaders = [\n            createjs.FontLoader,\n\t\t\tcreatejs.ImageLoader,\n\t\t\tcreatejs.JavaScriptLoader,\n\t\t\tcreatejs.CSSLoader,\n\t\t\tcreatejs.JSONLoader,\n\t\t\tcreatejs.JSONPLoader,\n\t\t\tcreatejs.SoundLoader,\n\t\t\tcreatejs.ManifestLoader,\n\t\t\tcreatejs.SpriteSheetLoader,\n\t\t\tcreatejs.XMLLoader,\n\t\t\tcreatejs.SVGLoader,\n\t\t\tcreatejs.BinaryLoader,\n\t\t\tcreatejs.VideoLoader,\n\t\t\tcreatejs.TextLoader\n\t\t];\n\n\t\t/**\n\t\t * The number of built in loaders, so they can't be removed by {{#crossLink \"unregisterLoader\"}}{{/crossLink}.\n\t\t\t\t * @property _defaultLoaderLength\n\t\t * @type {Number}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._defaultLoaderLength = this._availableLoaders.length;\n\n\t\tthis.init(preferXHR, basePath, crossOrigin);\n\t}\n\n\tvar p = createjs.extend(LoadQueue, createjs.AbstractLoader);\n\tvar s = LoadQueue;\n\n\t// Remove these @deprecated properties after 1.0\n\ttry {\n\t\tObject.defineProperties(s, {\n\t\t\tPOST: { get: createjs.deprecate(function() { return createjs.Methods.POST; }, \"AbstractLoader.POST\") },\n\t\t\tGET: { get: createjs.deprecate(function() { return createjs.Methods.GET; }, \"AbstractLoader.GET\") },\n\n\t\t\tBINARY: { get: createjs.deprecate(function() { return createjs.Types.BINARY; }, \"AbstractLoader.BINARY\") },\n\t\t\tCSS: { get: createjs.deprecate(function() { return createjs.Types.CSS; }, \"AbstractLoader.CSS\") },\n\t\t\tFONT: { get: createjs.deprecate(function() { return createjs.Types.FONT; }, \"AbstractLoader.FONT\") },\n\t\t\tFONTCSS: { get: createjs.deprecate(function() { return createjs.Types.FONTCSS; }, \"AbstractLoader.FONTCSS\") },\n\t\t\tIMAGE: { get: createjs.deprecate(function() { return createjs.Types.IMAGE; }, \"AbstractLoader.IMAGE\") },\n\t\t\tJAVASCRIPT: { get: createjs.deprecate(function() { return createjs.Types.JAVASCRIPT; }, \"AbstractLoader.JAVASCRIPT\") },\n\t\t\tJSON: { get: createjs.deprecate(function() { return createjs.Types.JSON; }, \"AbstractLoader.JSON\") },\n\t\t\tJSONP: { get: createjs.deprecate(function() { return createjs.Types.JSONP; }, \"AbstractLoader.JSONP\") },\n\t\t\tMANIFEST: { get: createjs.deprecate(function() { return createjs.Types.MANIFEST; }, \"AbstractLoader.MANIFEST\") },\n\t\t\tSOUND: { get: createjs.deprecate(function() { return createjs.Types.SOUND; }, \"AbstractLoader.SOUND\") },\n\t\t\tVIDEO: { get: createjs.deprecate(function() { return createjs.Types.VIDEO; }, \"AbstractLoader.VIDEO\") },\n\t\t\tSPRITESHEET: { get: createjs.deprecate(function() { return createjs.Types.SPRITESHEET; }, \"AbstractLoader.SPRITESHEET\") },\n\t\t\tSVG: { get: createjs.deprecate(function() { return createjs.Types.SVG; }, \"AbstractLoader.SVG\") },\n\t\t\tTEXT: { get: createjs.deprecate(function() { return createjs.Types.TEXT; }, \"AbstractLoader.TEXT\") },\n\t\t\tXML: { get: createjs.deprecate(function() { return createjs.Types.XML; }, \"AbstractLoader.XML\") }\n\t\t});\n\t} catch (e) {}\n\n\t/**\n\t * An internal initialization method, which is used for initial set up, but also to reset the LoadQueue.\n\t * @method init\n\t * @param preferXHR\n\t * @param basePath\n\t * @param crossOrigin\n\t * @private\n\t */\n\tp.init = function (preferXHR, basePath, crossOrigin) {\n\n\t\t// public properties\n\n\t\t/**\n\t\t * Try and use XMLHttpRequest (XHR) when possible. Note that LoadQueue will default to tag loading or XHR\n\t\t * loading depending on the requirements for a media type. For example, HTML audio can not be loaded with XHR,\n\t\t * and plain text can not be loaded with tags, so it will default the the correct type instead of using the\n\t\t * user-defined type.\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis.preferXHR = true; //TODO: Get/Set\n\t\tthis._preferXHR = true;\n\t\tthis.setPreferXHR(preferXHR);\n\n\t\t// protected properties\n\t\t/**\n\t\t * Whether the queue is currently paused or not.\n\t\t * @property _paused\n\t\t * @type {boolean}\n\t\t * @private\n\t\t */\n\t\tthis._paused = false;\n\n\t\t/**\n\t\t * A path that will be prepended on to the item's {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}. The\n\t\t * `_basePath` property will only be used if an item's source is relative, and does not include a protocol such\n\t\t * as `http://`, or a relative path such as `../`.\n\t\t * @property _basePath\n\t\t * @type {String}\n\t\t * @private\n\t\t * @since 0.3.1\n\t\t */\n\t\tthis._basePath = basePath;\n\n\t\t/**\n\t\t * An optional flag to set on images that are loaded using PreloadJS, which enables CORS support. Images loaded\n\t\t * cross-domain by servers that support CORS require the crossOrigin flag to be loaded and interacted with by\n\t\t * a canvas. When loading locally, or with a server with no CORS support, this flag can cause other security issues,\n\t\t * so it is recommended to only set it if you are sure the server supports it. Currently, supported values are \"\"\n\t\t * and \"Anonymous\".\n\t\t * @property _crossOrigin\n\t\t * @type {String}\n\t\t * @default \"\"\n\t\t * @private\n\t\t * @since 0.4.1\n\t\t */\n\t\tthis._crossOrigin = crossOrigin;\n\n\t\t/**\n\t\t * Determines if the loadStart event was dispatched already. This event is only fired one time, when the first\n\t\t * file is requested.\n\t\t * @property _loadStartWasDispatched\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @private\n\t\t */\n\t\tthis._loadStartWasDispatched = false;\n\n\t\t/**\n\t\t * Determines if there is currently a script loading. This helps ensure that only a single script loads at once when\n\t\t * using a script tag to do preloading.\n\t\t * @property _currentlyLoadingScript\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._currentlyLoadingScript = null;\n\n\t\t/**\n\t\t * An array containing the currently downloading files.\n\t\t * @property _currentLoads\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._currentLoads = [];\n\n\t\t/**\n\t\t * An array containing the queued items that have not yet started downloading.\n\t\t * @property _loadQueue\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadQueue = [];\n\n\t\t/**\n\t\t * An array containing downloads that have not completed, so that the LoadQueue can be properly reset.\n\t\t * @property _loadQueueBackup\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadQueueBackup = [];\n\n\t\t/**\n\t\t * An object hash of items that have finished downloading, indexed by the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t * id.\n\t\t * @property _loadItemsById\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadItemsById = {};\n\n\t\t/**\n\t\t * An object hash of items that have finished downloading, indexed by {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t * source.\n\t\t * @property _loadItemsBySrc\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadItemsBySrc = {};\n\n\t\t/**\n\t\t * An object hash of loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t * @property _loadedResults\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadedResults = {};\n\n\t\t/**\n\t\t * An object hash of un-parsed loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t * @property _loadedRawResults\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadedRawResults = {};\n\n\t\t/**\n\t\t * The number of items that have been requested. This helps manage an overall progress without knowing how large\n\t\t * the files are before they are downloaded. This does not include items inside of loaders such as the\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t * @property _numItems\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._numItems = 0;\n\n\t\t/**\n\t\t * The number of items that have completed loaded. This helps manage an overall progress without knowing how large\n\t\t * the files are before they are downloaded.\n\t\t * @property _numItemsLoaded\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._numItemsLoaded = 0;\n\n\t\t/**\n\t\t * A list of scripts in the order they were requested. This helps ensure that scripts are \"completed\" in the right\n\t\t * order.\n\t\t * @property _scriptOrder\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._scriptOrder = [];\n\n\t\t/**\n\t\t * A list of scripts that have been loaded. Items are added to this list as <code>null</code> when they are\n\t\t * requested, contain the loaded item if it has completed, but not been dispatched to the user, and <code>true</true>\n\t\t * once they are complete and have been dispatched.\n\t\t * @property _loadedScripts\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadedScripts = [];\n\n\t\t/**\n\t\t * The last progress amount. This is used to suppress duplicate progress events.\n\t\t * @property _lastProgress\n\t\t * @type {Number}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._lastProgress = NaN;\n\n\t};\n\n// static properties\n\n// events\n\t/**\n\t * This event is fired when an individual file has loaded, and been processed.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a `src` property.\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t * to a usable object.\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * This {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when an an individual file's progress changes.\n\t * @event fileprogress\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * This event is fired when an individual file starts to load.\n\t * @event filestart\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a property.\n\t */\n\n\t/**\n\t * Although it extends {{#crossLink \"AbstractLoader\"}}{{/crossLink}}, the `initialize` event is never fired from\n\t * a LoadQueue instance.\n\t * @event initialize\n\t * @private\n\t */\n\n// public methods\n\t/**\n\t * Register a custom loaders class. New loaders are given precedence over loaders added earlier and default loaders.\n\t * It is recommended that loaders extend {{#crossLink \"AbstractLoader\"}}{{/crossLink}}. Loaders can only be added\n\t * once, and will be prepended to the list of available loaders.\n\t * @method registerLoader\n\t * @param {Function|AbstractLoader} loader The AbstractLoader class to add.\n\t * @since 0.6.0\n\t */\n\tp.registerLoader = function (loader) {\n\t\tif (!loader || !loader.canLoadItem) {\n\t\t\tthrow new Error(\"loader is of an incorrect type.\");\n\t\t} else if (this._availableLoaders.indexOf(loader) != -1) {\n\t\t\tthrow new Error(\"loader already exists.\"); //LM: Maybe just silently fail here\n\t\t}\n\n\t\tthis._availableLoaders.unshift(loader);\n\t};\n\n\t/**\n\t * Remove a custom loader added using {{#crossLink \"registerLoader\"}}{{/crossLink}}. Only custom loaders can be\n\t * unregistered, the default loaders will always be available.\n\t * @method unregisterLoader\n\t * @param {Function|AbstractLoader} loader The AbstractLoader class to remove\n\t */\n\tp.unregisterLoader = function (loader) {\n\t\tvar idx = this._availableLoaders.indexOf(loader);\n\t\tif (idx != -1 && idx < this._defaultLoaderLength - 1) {\n\t\t\tthis._availableLoaders.splice(idx, 1);\n\t\t}\n\t};\n\n\t/**\n\t * Change the {{#crossLink \"preferXHR:property\"}}{{/crossLink}} value. Note that if this is set to `true`, it may\n\t * fail, or be ignored depending on the browser's capabilities and the load type.\n\t * @method setPreferXHR\n\t * @param {Boolean} value\n\t * @returns {Boolean} The value of {{#crossLink \"preferXHR\"}}{{/crossLink}} that was successfully set.\n\t * @since 0.6.0\n\t */\n\tp.setPreferXHR = function (value) {\n\t\t// Determine if we can use XHR. XHR defaults to TRUE, but the browser may not support it.\n\t\t//TODO: Should we be checking for the other XHR types? Might have to do a try/catch on the different types similar to createXHR.\n\t\tthis.preferXHR = (value != false && window.XMLHttpRequest != null);\n\t\treturn this.preferXHR;\n\t};\n\n\t/**\n\t * Stops all queued and loading items, and clears the queue. This also removes all internal references to loaded\n\t * content, and allows the queue to be used again.\n\t * @method removeAll\n\t * @since 0.3.0\n\t */\n\tp.removeAll = function () {\n\t\tthis.remove();\n\t};\n\n\t/**\n\t * Stops an item from being loaded, and removes it from the queue. If nothing is passed, all items are removed.\n\t * This also removes internal references to loaded item(s).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      queue.loadManifest([\n\t *          {src:\"test.png\", id:\"png\"},\n\t *          {src:\"test.jpg\", id:\"jpg\"},\n\t *          {src:\"test.mp3\", id:\"mp3\"}\n\t *      ]);\n\t *      queue.remove(\"png\"); // Single item by ID\n\t *      queue.remove(\"png\", \"test.jpg\"); // Items as arguments. Mixed id and src.\n\t *      queue.remove([\"test.png\", \"jpg\"]); // Items in an Array. Mixed id and src.\n\t *\n\t * @method remove\n\t * @param {String | Array} idsOrUrls* The id or ids to remove from this queue. You can pass an item, an array of\n\t * items, or multiple items as arguments.\n\t * @since 0.3.0\n\t */\n\tp.remove = function (idsOrUrls) {\n\t\tvar args = null;\n\n\t\tif (idsOrUrls && !Array.isArray(idsOrUrls)) {\n\t\t\targs = [idsOrUrls];\n\t\t} else if (idsOrUrls) {\n\t\t\targs = idsOrUrls;\n\t\t} else if (arguments.length > 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar itemsWereRemoved = false;\n\n\t\t// Destroy everything\n\t\tif (!args) {\n\t\t\tthis.close();\n\t\t\tfor (var n in this._loadItemsById) {\n\t\t\t\tthis._disposeItem(this._loadItemsById[n]);\n\t\t\t}\n\t\t\tthis.init(this.preferXHR, this._basePath);\n\n\t\t\t// Remove specific items\n\t\t} else {\n\t\t\twhile (args.length) {\n\t\t\t\tvar item = args.pop();\n\t\t\t\tvar r = this.getResult(item);\n\n\t\t\t\t//Remove from the main load Queue\n\t\t\t\tfor (i = this._loadQueue.length - 1; i >= 0; i--) {\n\t\t\t\t\tloadItem = this._loadQueue[i].getItem();\n\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\tthis._loadQueue.splice(i, 1)[0].cancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//Remove from the backup queue\n\t\t\t\tfor (i = this._loadQueueBackup.length - 1; i >= 0; i--) {\n\t\t\t\t\tloadItem = this._loadQueueBackup[i].getItem();\n\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\tthis._loadQueueBackup.splice(i, 1)[0].cancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (r) {\n\t\t\t\t\tthis._disposeItem(this.getItem(item));\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i = this._currentLoads.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tvar loadItem = this._currentLoads[i].getItem();\n\t\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\t\tthis._currentLoads.splice(i, 1)[0].cancel();\n\t\t\t\t\t\t\titemsWereRemoved = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If this was called during a load, try to load the next item.\n\t\t\tif (itemsWereRemoved) {\n\t\t\t\tthis._loadNext();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Stops all open loads, destroys any loaded items, and resets the queue, so all items can\n\t * be reloaded again by calling {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}}. Items are not removed from the\n\t * queue. To remove items use the {{#crossLink \"LoadQueue/remove\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/removeAll\"}}{{/crossLink}} method.\n\t * @method reset\n\t * @since 0.3.0\n\t */\n\tp.reset = function () {\n\t\tthis.close();\n\t\tfor (var n in this._loadItemsById) {\n\t\t\tthis._disposeItem(this._loadItemsById[n]);\n\t\t}\n\n\t\t//Reset the queue to its start state\n\t\tvar a = [];\n\t\tfor (var i = 0, l = this._loadQueueBackup.length; i < l; i++) {\n\t\t\ta.push(this._loadQueueBackup[i].getItem());\n\t\t}\n\n\t\tthis.loadManifest(a, false);\n\t};\n\n\t/**\n\t * Register a plugin. Plugins can map to load types (sound, image, etc), or specific extensions (png, mp3, etc).\n\t * Currently, only one plugin can exist per type/extension.\n\t *\n\t * When a plugin is installed, a <code>getPreloadHandlers()</code> method will be called on it. For more information\n\t * on this method, check out the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method in the\n\t * {{#crossLink \"SamplePlugin\"}}{{/crossLink}} class.\n\t *\n\t * Before a file is loaded, a matching plugin has an opportunity to modify the load. If a `callback` is returned\n\t * from the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method, it will be invoked first, and its\n\t * result may cancel or modify the item. The callback method can also return a `completeHandler` to be fired when\n\t * the file is loaded, or a `tag` object, which will manage the actual download. For more information on these\n\t * methods, check out the {{#crossLink \"SamplePlugin/preloadHandler\"}}{{/crossLink}} and {{#crossLink \"SamplePlugin/fileLoadHandler\"}}{{/crossLink}}\n\t * methods on the {{#crossLink \"SamplePlugin\"}}{{/crossLink}}.\n\t *\n\t * @method installPlugin\n\t * @param {Function} plugin The plugin class to install.\n\t */\n\tp.installPlugin = function (plugin) {\n\t\tif (plugin == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (plugin.getPreloadHandlers != null) {\n\t\t\tthis._plugins.push(plugin);\n\t\t\tvar map = plugin.getPreloadHandlers();\n\t\t\tmap.scope = plugin;\n\n\t\t\tif (map.types != null) {\n\t\t\t\tfor (var i = 0, l = map.types.length; i < l; i++) {\n\t\t\t\t\tthis._typeCallbacks[map.types[i]] = map;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (map.extensions != null) {\n\t\t\t\tfor (i = 0, l = map.extensions.length; i < l; i++) {\n\t\t\t\t\tthis._extensionCallbacks[map.extensions[i]] = map;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Set the maximum number of concurrent connections. Note that browsers and servers may have a built-in maximum\n\t * number of open connections, so any additional connections may remain in a pending state until the browser\n\t * opens the connection. When loading scripts using tags, and when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}}\n\t * is `true`, only one script is loaded at a time due to browser limitations.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *      queue.setMaxConnections(10); // Allow 10 concurrent loads\n\t *\n\t * @method setMaxConnections\n\t * @param {Number} value The number of concurrent loads to allow. By default, only a single connection per LoadQueue\n\t * is open at any time.\n\t */\n\tp.setMaxConnections = function (value) {\n\t\tthis._maxConnections = value;\n\t\tif (!this._paused && this._loadQueue.length > 0) {\n\t\t\tthis._loadNext();\n\t\t}\n\t};\n\n\t/**\n\t * Load a single file. To add multiple files at once, use the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * method.\n\t *\n\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\n\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n\t * @method loadFile\n\t * @param {LoadItem|Object|String} file The file object or path to load. A file can be either\n\t * <ul>\n\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t *     in the background.</li>\n\t * </ul>\n\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}}, and the value is\n\t * `true`, the queue will resume automatically.\n\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}},\n\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n\t * constructor, or a `path` property in a manifest definition.\n\t */\n\tp.loadFile = function (file, loadNow, basePath) {\n\t\tif (file == null) {\n\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_NO_FILE\");\n\t\t\tthis._sendError(event);\n\t\t\treturn;\n\t\t}\n\t\tthis._addItem(file, null, basePath);\n\n\t\tif (loadNow !== false) {\n\t\t\tthis.setPaused(false);\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\t};\n\n\t/**\n\t * Load an array of files. To load a single file, use the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} method.\n\t * The files in the manifest are requested in the same order, but may complete in a different order if the max\n\t * connections are set above 1 using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Scripts will load\n\t * in the right order as long as {{#crossLink \"LoadQueue/maintainScriptOrder\"}}{{/crossLink}} is true (which is\n\t * default).\n\t *\n\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\n\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n\t * @method loadManifest\n\t * @param {Array|String|Object} manifest An list of files to load. The loadManifest call supports four types of\n\t * manifests:\n\t * <ol>\n\t *     <li>A string path, which points to a manifest file, which is a JSON file that contains a \"manifest\" property,\n\t *     which defines the list of files to load, and can optionally contain a \"path\" property, which will be\n\t *     prepended to each file in the list.</li>\n\t *     <li>An object which defines a \"src\", which is a JSON or JSONP file. A \"callback\" can be defined for JSONP\n\t *     file. The JSON/JSONP file should contain a \"manifest\" property, which defines the list of files to load,\n\t *     and can optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n\t *     <li>An object which contains a \"manifest\" property, which defines the list of files to load, and can\n\t *     optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n\t *     <li>An Array of files to load.</li>\n\t * </ol>\n\t *\n\t * Each \"file\" in a manifest can be either:\n\t * <ul>\n\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t *     in the background.</li>\n\t * </ul>\n\t *\n\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} and this value is\n\t * `true`, the queue will resume automatically.\n\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"LoadQueue/MANIFEST:property\"}}{{/crossLink}},\n\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n\t * constructor, or a `path` property in a manifest definition.\n\t */\n\tp.loadManifest = function (manifest, loadNow, basePath) {\n\t\tvar fileList = null;\n\t\tvar path = null;\n\n\t\t// Array-based list of items\n\t\tif (Array.isArray(manifest)) {\n\t\t\tif (manifest.length == 0) {\n\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_EMPTY\");\n\t\t\t\tthis._sendError(event);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfileList = manifest;\n\n\t\t\t// String-based. Only file manifests can be specified this way. Any other types will cause an error when loaded.\n\t\t} else if (typeof(manifest) === \"string\") {\n\t\t\tfileList = [\n\t\t\t\t{\n\t\t\t\t\tsrc: manifest,\n\t\t\t\t\ttype: s.MANIFEST\n\t\t\t\t}\n\t\t\t];\n\n\t\t} else if (typeof(manifest) == \"object\") {\n\n\t\t\t// An object that defines a manifest path\n\t\t\tif (manifest.src !== undefined) {\n\t\t\t\tif (manifest.type == null) {\n\t\t\t\t\tmanifest.type = s.MANIFEST;\n\t\t\t\t} else if (manifest.type != s.MANIFEST) {\n\t\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_TYPE\");\n\t\t\t\t\tthis._sendError(event);\n\t\t\t\t}\n\t\t\t\tfileList = [manifest];\n\n\t\t\t\t// An object that defines a manifest\n\t\t\t} else if (manifest.manifest !== undefined) {\n\t\t\t\tfileList = manifest.manifest;\n\t\t\t\tpath = manifest.path;\n\t\t\t}\n\n\t\t\t// Unsupported. This will throw an error.\n\t\t} else {\n\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_NULL\");\n\t\t\tthis._sendError(event);\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, l = fileList.length; i < l; i++) {\n\t\t\tthis._addItem(fileList[i], path, basePath);\n\t\t}\n\n\t\tif (loadNow !== false) {\n\t\t\tthis.setPaused(false);\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\n\t};\n\n\t/**\n\t * Start a LoadQueue that was created, but not automatically started.\n\t * @method load\n\t */\n\tp.load = function () {\n\t\tthis.setPaused(false);\n\t};\n\n\t/**\n\t * Look up a {{#crossLink \"LoadItem\"}}{{/crossLink}} using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\" was\n\t * supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n\t * `basePath` will not be part of the ID.\n\t * @method getItem\n\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n\t * @return {Object} The load item that was initially requested using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n\t * event as the `item` parameter.\n\t */\n\tp.getItem = function (value) {\n\t\treturn this._loadItemsById[value] || this._loadItemsBySrc[value];\n\t};\n\n\t/**\n\t * Look up a loaded result using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\"\n\t * was supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n\t * `basePath` will not be part of the ID.\n\t * @method getResult\n\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n\t * @param {Boolean} [rawResult=false] Return a raw result instead of a formatted result. This applies to content\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t * returned instead.\n\t * @return {Object} A result object containing the content that was loaded, such as:\n\t * <ul>\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts are automatically added to the HTML\n\t *      DOM.</li>\n\t *      <li>A style tag for CSS (&lt;style /&gt; or &lt;link &gt;)</li>\n\t *      <li>Raw text for TEXT</li>\n\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t *      <li>An XML document</li>\n\t *      <li>A binary arraybuffer loaded by XHR</li>\n\t *      <li>An audio tag (&lt;audio &gt;) for HTML audio. Note that it is recommended to use SoundJS APIs to play\n\t *      loaded audio. Specifically, audio loaded by Flash and WebAudio will return a loader object using this method\n\t *      which can not be used to play audio back.</li>\n\t * </ul>\n\t * This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event as the 'item`\n\t * parameter. Note that if a raw result is requested, but not found, the result will be returned instead.\n\t */\n\tp.getResult = function (value, rawResult) {\n\t\tvar item = this._loadItemsById[value] || this._loadItemsBySrc[value];\n\t\tif (item == null) {\n\t\t\treturn null;\n\t\t}\n\t\tvar id = item.id;\n\t\tif (rawResult && this._loadedRawResults[id]) {\n\t\t\treturn this._loadedRawResults[id];\n\t\t}\n\t\treturn this._loadedResults[id];\n\t};\n\n\t/**\n\t * Generate an list of items loaded by this queue.\n\t * @method getItems\n\t * @param {Boolean} loaded Determines if only items that have been loaded should be returned. If false, in-progress\n\t * and failed load items will also be included.\n\t * @returns {Array} A list of objects that have been loaded. Each item includes the {{#crossLink \"LoadItem\"}}{{/crossLink}},\n\t * result, and rawResult.\n\t * @since 0.6.0\n\t */\n\tp.getItems = function (loaded) {\n\t\tvar arr = [];\n\t\tfor (var n in this._loadItemsById) {\n\t\t\tvar item = this._loadItemsById[n];\n\t\t\tvar result = this.getResult(n);\n\t\t\tif (loaded === true && result == null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tarr.push({\n\t\t\t\titem: item,\n\t\t\t\tresult: result,\n\t\t\t\trawResult: this.getResult(n, true)\n\t\t\t});\n\t\t}\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Pause or resume the current load. Active loads will not be cancelled, but the next items in the queue will not\n\t * be processed when active loads complete. LoadQueues are not paused by default.\n\t *\n\t * Note that if new items are added to the queue using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}, a paused queue will be resumed, unless the `loadNow`\n\t * argument is `false`.\n\t * @method setPaused\n\t * @param {Boolean} value Whether the queue should be paused or not.\n\t */\n\tp.setPaused = function (value) {\n\t\tthis._paused = value;\n\t\tif (!this._paused) {\n\t\t\tthis._loadNext();\n\t\t}\n\t};\n\n\t/**\n\t * Close the active queue. Closing a queue completely empties the queue, and prevents any remaining items from\n\t * starting to download. Note that currently any active loads will remain open, and events may be processed.\n\t *\n\t * To stop and restart a queue, use the {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} method instead.\n\t * @method close\n\t */\n\tp.close = function () {\n\t\twhile (this._currentLoads.length) {\n\t\t\tthis._currentLoads.pop().cancel();\n\t\t}\n\t\tthis._scriptOrder.length = 0;\n\t\tthis._loadedScripts.length = 0;\n\t\tthis.loadStartWasDispatched = false;\n\t\tthis._itemCount = 0;\n\t\tthis._lastProgress = NaN;\n\t};\n\n// protected methods\n\t/**\n\t * Add an item to the queue. Items are formatted into a usable object containing all the properties necessary to\n\t * load the content. The load queue is populated with the loader instance that handles preloading, and not the load\n\t * item that was passed in by the user. To look up the load item by id or src, use the {{#crossLink \"LoadQueue.getItem\"}}{{/crossLink}}\n\t * method.\n\t * @method _addItem\n\t * @param {String|Object} value The item to add to the queue.\n\t * @param {String} [path] An optional path prepended to the `src`. The path will only be prepended if the src is\n\t * relative, and does not start with a protocol such as `http://`, or a path like `../`. If the LoadQueue was\n\t * provided a {{#crossLink \"_basePath\"}}{{/crossLink}}, then it will optionally be prepended after.\n\t * @param {String} [basePath] <strong>Deprecated</strong>An optional basePath passed into a {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} call. This parameter will be removed in a future tagged\n\t * version.\n\t * @private\n\t */\n\tp._addItem = function (value, path, basePath) {\n\t\tvar item = this._createLoadItem(value, path, basePath); // basePath and manifest path are added to the src.\n\t\tif (item == null) {\n\t\t\treturn;\n\t\t} // Sometimes plugins or types should be skipped.\n\t\tvar loader = this._createLoader(item);\n\t\tif (loader != null) {\n\t\t\tif (\"plugins\" in loader) {\n\t\t\t\tloader.plugins = this._plugins;\n\t\t\t}\n\t\t\titem._loader = loader;\n\t\t\tthis._loadQueue.push(loader);\n\t\t\tthis._loadQueueBackup.push(loader);\n\n\t\t\tthis._numItems++;\n\t\t\tthis._updateProgress();\n\n\t\t\t// Only worry about script order when using XHR to load scripts. Tags are only loading one at a time.\n\t\t\tif ((this.maintainScriptOrder\n\t\t\t\t\t&& item.type == createjs.Types.JAVASCRIPT\n\t\t\t\t\t\t//&& loader instanceof createjs.XHRLoader //NOTE: Have to track all JS files this way\n\t\t\t\t\t)\n\t\t\t\t\t|| item.maintainOrder === true) {\n\t\t\t\tthis._scriptOrder.push(item);\n\t\t\t\tthis._loadedScripts.push(null);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Create a refined {{#crossLink \"LoadItem\"}}{{/crossLink}}, which contains all the required properties. The type of\n\t * item is determined by browser support, requirements based on the file type, and developer settings. For example,\n\t * XHR is only used for file types that support it in new browsers.\n\t *\n\t * Before the item is returned, any plugins registered to handle the type or extension will be fired, which may\n\t * alter the load item.\n\t * @method _createLoadItem\n\t * @param {String | Object | HTMLAudioElement | HTMLImageElement} value The item that needs to be preloaded.\n\t * @param {String} [path] A path to prepend to the item's source. Sources beginning with http:// or similar will\n\t * not receive a path. Since PreloadJS 0.4.1, the src will be modified to include the `path` and {{#crossLink \"LoadQueue/_basePath:property\"}}{{/crossLink}}\n\t * when it is added.\n\t * @param {String} [basePath] <strong>Deprectated</strong> A base path to prepend to the items source in addition to\n\t * the path argument.\n\t * @return {Object} The loader instance that will be used.\n\t * @private\n\t */\n\tp._createLoadItem = function (value, path, basePath) {\n\t\tvar item = createjs.LoadItem.create(value);\n\t\tif (item == null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar bp = \"\"; // Store the generated basePath\n\t\tvar useBasePath = basePath || this._basePath;\n\n\t\tif (item.src instanceof Object) {\n\t\t\tif (!item.type) {\n\t\t\t\treturn null;\n\t\t\t} // the the src is an object, type is required to pass off to plugin\n\t\t\tif (path) {\n\t\t\t\tbp = path;\n\t\t\t\tvar pathMatch = createjs.URLUtils.parseURI(path);\n\t\t\t\t// Also append basePath\n\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n\t\t\t\t\tbp = useBasePath + bp;\n\t\t\t\t}\n\t\t\t} else if (useBasePath != null) {\n\t\t\t\tbp = useBasePath;\n\t\t\t}\n\t\t} else {\n\t\t\t// Determine Extension, etc.\n\t\t\tvar match = createjs.URLUtils.parseURI(item.src);\n\t\t\tif (match.extension) {\n\t\t\t\titem.ext = match.extension;\n\t\t\t}\n\t\t\tif (item.type == null) {\n\t\t\t\titem.type = createjs.RequestUtils.getTypeByExtension(item.ext);\n\t\t\t}\n\n\t\t\t// Inject path & basePath\n\t\t\tvar autoId = item.src;\n\t\t\tif (!match.absolute && !match.relative) {\n\t\t\t\tif (path) {\n\t\t\t\t\tbp = path;\n\t\t\t\t\tvar pathMatch = createjs.URLUtils.parseURI(path);\n\t\t\t\t\tautoId = path + autoId;\n\t\t\t\t\t// Also append basePath\n\t\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n\t\t\t\t\t\tbp = useBasePath + bp;\n\t\t\t\t\t}\n\t\t\t\t} else if (useBasePath != null) {\n\t\t\t\t\tbp = useBasePath;\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.src = bp + item.src;\n\t\t}\n\t\titem.path = bp;\n\n\t\t// If there's no id, set one now.\n\t\tif (item.id === undefined || item.id === null || item.id === \"\") {\n\t\t\titem.id = autoId;\n\t\t}\n\n\t\t// Give plugins a chance to modify the loadItem:\n\t\tvar customHandler = this._typeCallbacks[item.type] || this._extensionCallbacks[item.ext];\n\t\tif (customHandler) {\n\t\t\t// Plugins are now passed both the full source, as well as a combined path+basePath (appropriately)\n\t\t\tvar result = customHandler.callback.call(customHandler.scope, item, this);\n\n\t\t\t// The plugin will handle the load, or has canceled it. Ignore it.\n\t\t\tif (result === false) {\n\t\t\t\treturn null;\n\n\t\t\t\t// Load as normal:\n\t\t\t} else if (result === true) {\n\t\t\t\t// Do Nothing\n\n\t\t\t\t// Result is a loader class:\n\t\t\t} else if (result != null) {\n\t\t\t\titem._loader = result;\n\t\t\t}\n\n\t\t\t// Update the extension in case the type changed:\n\t\t\tmatch = createjs.URLUtils.parseURI(item.src);\n\t\t\tif (match.extension != null) {\n\t\t\t\titem.ext = match.extension;\n\t\t\t}\n\t\t}\n\n\t\t// Store the item for lookup. This also helps clean-up later.\n\t\tthis._loadItemsById[item.id] = item;\n\t\tthis._loadItemsBySrc[item.src] = item;\n\n\t\tif (item.crossOrigin == null) {\n\t\t\titem.crossOrigin = this._crossOrigin;\n\t\t}\n\n\t\treturn item;\n\t};\n\n\t/**\n\t * Create a loader for a load item.\n\t * @method _createLoader\n\t * @param {Object} item A formatted load item that can be used to generate a loader.\n\t * @return {AbstractLoader} A loader that can be used to load content.\n\t * @private\n\t */\n\tp._createLoader = function (item) {\n\t\tif (item._loader != null) { // A plugin already specified a loader\n\t\t\treturn item._loader;\n\t\t}\n\n\t\t// Initially, try and use the provided/supported XHR mode:\n\t\tvar preferXHR = this.preferXHR;\n\n\t\tfor (var i = 0; i < this._availableLoaders.length; i++) {\n\t\t\tvar loader = this._availableLoaders[i];\n\t\t\tif (loader && loader.canLoadItem(item)) {\n\t\t\t\treturn new loader(item, preferXHR);\n\t\t\t}\n\t\t}\n\n\t\t// TODO: Log error (requires createjs.log)\n\t\treturn null;\n\t};\n\n\t/**\n\t * Load the next item in the queue. If the queue is empty (all items have been loaded), then the complete event\n\t * is processed. The queue will \"fill up\" any empty slots, up to the max connection specified using\n\t * {{#crossLink \"LoadQueue.setMaxConnections\"}}{{/crossLink}} method. The only exception is scripts that are loaded\n\t * using tags, which have to be loaded one at a time to maintain load order.\n\t * @method _loadNext\n\t * @private\n\t */\n\tp._loadNext = function () {\n\t\tif (this._paused) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only dispatch loadstart event when the first file is loaded.\n\t\tif (!this._loadStartWasDispatched) {\n\t\t\tthis._sendLoadStart();\n\t\t\tthis._loadStartWasDispatched = true;\n\t\t}\n\n\t\t// The queue has completed.\n\t\tif (this._numItems == this._numItemsLoaded) {\n\t\t\tthis.loaded = true;\n\t\t\tthis._sendComplete();\n\n\t\t\t// Load the next queue, if it has been defined.\n\t\t\tif (this.next && this.next.load) {\n\t\t\t\tthis.next.load();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.loaded = false;\n\t\t}\n\n\t\t// Must iterate forwards to load in the right order.\n\t\tfor (var i = 0; i < this._loadQueue.length; i++) {\n\t\t\tif (this._currentLoads.length >= this._maxConnections) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar loader = this._loadQueue[i];\n\n\t\t\t// Determine if we should be only loading one tag-script at a time:\n\t\t\t// Note: maintainOrder items don't do anything here because we can hold onto their loaded value\n\t\t\tif (!this._canStartLoad(loader)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._loadQueue.splice(i, 1);\n\t\t\ti--;\n\t\t\tthis._loadItem(loader);\n\t\t}\n\t};\n\n\t/**\n\t * Begin loading an item. Event listeners are not added to the loaders until the load starts.\n\t * @method _loadItem\n\t * @param {AbstractLoader} loader The loader instance to start. Currently, this will be an XHRLoader or TagLoader.\n\t * @private\n\t */\n\tp._loadItem = function (loader) {\n\t\tloader.on(\"fileload\", this._handleFileLoad, this);\n\t\tloader.on(\"progress\", this._handleProgress, this);\n\t\tloader.on(\"complete\", this._handleFileComplete, this);\n\t\tloader.on(\"error\", this._handleError, this);\n\t\tloader.on(\"fileerror\", this._handleFileError, this);\n\t\tthis._currentLoads.push(loader);\n\t\tthis._sendFileStart(loader.getItem());\n\t\tloader.load();\n\t};\n\n\t/**\n\t * The callback that is fired when a loader loads a file. This enables loaders like {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t * to maintain internal queues, but for this queue to dispatch the {{#crossLink \"fileload:event\"}}{{/crossLink}}\n\t * events.\n\t * @param {Event} event The {{#crossLink \"AbstractLoader/fileload:event\"}}{{/crossLink}} event from the loader.\n\t * @private\n\t * @since 0.6.0\n\t */\n\tp._handleFileLoad = function (event) {\n\t\tevent.target = null;\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * The callback that is fired when a loader encounters an error from an internal file load operation. This enables\n\t * loaders like M\n\t * @param event\n\t * @private\n\t */\n\tp._handleFileError = function (event) {\n\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, event.item);\n\t\tthis._sendError(newEvent);\n\t};\n\n\t/**\n\t * The callback that is fired when a loader encounters an error. The queue will continue loading unless {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}}\n\t * is set to `true`.\n\t * @method _handleError\n\t * @param {ErrorEvent} event The error event, containing relevant error information.\n\t * @private\n\t */\n\tp._handleError = function (event) {\n\t\tvar loader = event.target;\n\t\tthis._numItemsLoaded++;\n\n\t\tthis._finishOrderedItem(loader, true);\n\t\tthis._updateProgress();\n\n\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, loader.getItem());\n\t\t// TODO: Propagate actual error message.\n\n\t\tthis._sendError(newEvent);\n\n\t\tif (!this.stopOnError) {\n\t\t\tthis._removeLoadItem(loader);\n\t\t\tthis._cleanLoadItem(loader);\n\t\t\tthis._loadNext();\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\t};\n\n\t/**\n\t * An item has finished loading. We can assume that it is totally loaded, has been parsed for immediate use, and\n\t * is available as the \"result\" property on the load item. The raw text result for a parsed item (such as JSON, XML,\n\t * CSS, JavaScript, etc) is available as the \"rawResult\" property, and can also be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}.\n\t * @method _handleFileComplete\n\t * @param {Event} event The event object from the loader.\n\t * @private\n\t */\n\tp._handleFileComplete = function (event) {\n\t\tvar loader = event.target;\n\t\tvar item = loader.getItem();\n\n\t\tvar result = loader.getResult();\n\t\tthis._loadedResults[item.id] = result;\n\t\tvar rawResult = loader.getResult(true);\n\t\tif (rawResult != null && rawResult !== result) {\n\t\t\tthis._loadedRawResults[item.id] = rawResult;\n\t\t}\n\n\t\tthis._saveLoadedItems(loader);\n\n\t\t// Remove the load item\n\t\tthis._removeLoadItem(loader);\n\n\t\tif (!this._finishOrderedItem(loader)) {\n\t\t\t// The item was NOT managed, so process it now\n\t\t\tthis._processFinishedLoad(item, loader);\n\t\t}\n\n\t\t// Clean up the load item\n\t\tthis._cleanLoadItem(loader);\n\t};\n\n\t/**\n\t * Some loaders might load additional content, other than the item they were passed (such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}).\n\t * Any items exposed by the loader using {{#crossLink \"AbstractLoader/getLoadItems\"}}{{/crossLink}} are added to the\n\t * LoadQueue's look-ups, including {{#crossLink \"getItem\"}}{{/crossLink}} and {{#crossLink \"getResult\"}}{{/crossLink}}\n\t * methods.\n\t * @method _saveLoadedItems\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._saveLoadedItems = function (loader) {\n\t\t// TODO: Not sure how to handle this. Would be nice to expose the items.\n\t\t// Loaders may load sub-items. This adds them to this queue\n\t\tvar list = loader.getLoadedItems();\n\t\tif (list === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tvar item = list[i].item;\n\n\t\t\t// Store item lookups\n\t\t\tthis._loadItemsBySrc[item.src] = item;\n\t\t\tthis._loadItemsById[item.id] = item;\n\n\t\t\t// Store loaded content\n\t\t\tthis._loadedResults[item.id] = list[i].result;\n\t\t\tthis._loadedRawResults[item.id] = list[i].rawResult;\n\t\t}\n\t};\n\n\t/**\n\t * Flag an item as finished. If the item's order is being managed, then ensure that it is allowed to finish, and if\n\t * so, trigger prior items to trigger as well.\n\t * @method _finishOrderedItem\n\t * @param {AbstractLoader} loader\n\t * @param {Boolean} loadFailed\n\t * @return {Boolean} If the item's order is being managed. This allows the caller to take an alternate\n\t * behaviour if it is.\n\t * @private\n\t */\n\tp._finishOrderedItem = function (loader, loadFailed) {\n\t\tvar item = loader.getItem();\n\n\t\tif ((this.maintainScriptOrder && item.type == createjs.Types.JAVASCRIPT)\n\t\t\t\t|| item.maintainOrder) {\n\n\t\t\t//TODO: Evaluate removal of the _currentlyLoadingScript\n\t\t\tif (loader instanceof createjs.JavaScriptLoader) {\n\t\t\t\tthis._currentlyLoadingScript = false;\n\t\t\t}\n\n\t\t\tvar index = createjs.indexOf(this._scriptOrder, item);\n\t\t\tif (index == -1) {\n\t\t\t\treturn false;\n\t\t\t} // This loader no longer exists\n\t\t\tthis._loadedScripts[index] = (loadFailed === true) ? true : item;\n\n\t\t\tthis._checkScriptLoadOrder();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/**\n\t * Ensure the scripts load and dispatch in the correct order. When using XHR, scripts are stored in an array in the\n\t * order they were added, but with a \"null\" value. When they are completed, the value is set to the load item,\n\t * and then when they are processed and dispatched, the value is set to `true`. This method simply\n\t * iterates the array, and ensures that any loaded items that are not preceded by a `null` value are\n\t * dispatched.\n\t * @method _checkScriptLoadOrder\n\t * @private\n\t */\n\tp._checkScriptLoadOrder = function () {\n\t\tvar l = this._loadedScripts.length;\n\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tvar item = this._loadedScripts[i];\n\t\t\tif (item === null) {\n\t\t\t\tbreak;\n\t\t\t} // This is still loading. Do not process further.\n\t\t\tif (item === true) {\n\t\t\t\tcontinue;\n\t\t\t} // This has completed, and been processed. Move on.\n\n\t\t\tvar loadItem = this._loadedResults[item.id];\n\t\t\tif (item.type == createjs.Types.JAVASCRIPT) {\n\t\t\t\t// Append script tags to the head automatically.\n\t\t\t\tcreatejs.DomUtils.appendToHead(loadItem);\n\t\t\t}\n\n\t\t\tvar loader = item._loader;\n\t\t\tthis._processFinishedLoad(item, loader);\n\t\t\tthis._loadedScripts[i] = true;\n\t\t}\n\t};\n\n\t/**\n\t * A file has completed loading, and the LoadQueue can move on. This triggers the complete event, and kick-starts\n\t * the next item.\n\t * @method _processFinishedLoad\n\t * @param {LoadItem|Object} item\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t */\n\tp._processFinishedLoad = function (item, loader) {\n\t\tthis._numItemsLoaded++;\n\n\t\t// Since LoadQueue needs maintain order, we can't append scripts in the loader.\n\t\t// So we do it here instead. Or in _checkScriptLoadOrder();\n\t\tif (!this.maintainScriptOrder && item.type == createjs.Types.JAVASCRIPT) {\n\t\t\tvar tag = loader.getTag();\n\t\t\tcreatejs.DomUtils.appendToHead(tag);\n\t\t}\n\n\t\tthis._updateProgress();\n\t\tthis._sendFileComplete(item, loader);\n\t\tthis._loadNext();\n\t};\n\n\t/**\n\t * Ensure items with `maintainOrder=true` that are before the specified item have loaded. This only applies to\n\t * JavaScript items that are being loaded with a TagLoader, since they have to be loaded and completed <strong>before</strong>\n\t * the script can even be started, since it exist in the DOM while loading.\n\t * @method _canStartLoad\n\t * @param {AbstractLoader} loader The loader for the item\n\t * @return {Boolean} Whether the item can start a load or not.\n\t * @private\n\t */\n\tp._canStartLoad = function (loader) {\n\t\tif (!this.maintainScriptOrder || loader.preferXHR) {\n\t\t\treturn true;\n\t\t}\n\t\tvar item = loader.getItem();\n\t\tif (item.type != createjs.Types.JAVASCRIPT) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this._currentlyLoadingScript) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar index = this._scriptOrder.indexOf(item);\n\t\tvar i = 0;\n\t\twhile (i < index) {\n\t\t\tvar checkItem = this._loadedScripts[i];\n\t\t\tif (checkItem == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tthis._currentlyLoadingScript = true;\n\t\treturn true;\n\t};\n\n\t/**\n\t * A load item is completed or was canceled, and needs to be removed from the LoadQueue.\n\t * @method _removeLoadItem\n\t * @param {AbstractLoader} loader A loader instance to remove.\n\t * @private\n\t */\n\tp._removeLoadItem = function (loader) {\n\t\tvar l = this._currentLoads.length;\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tif (this._currentLoads[i] == loader) {\n\t\t\t\tthis._currentLoads.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Remove unneeded references from a loader.\n\t *\n\t * @param loader\n\t * @private\n\t */\n\tp._cleanLoadItem = function(loader) {\n\t\tvar item = loader.getItem();\n\t\tif (item) {\n\t\t\tdelete item._loader;\n\t\t}\n\t}\n\n\t/**\n\t * An item has dispatched progress. Propagate that progress, and update the LoadQueue's overall progress.\n\t * @method _handleProgress\n\t * @param {ProgressEvent} event The progress event from the item.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tvar loader = event.target;\n\t\tthis._sendFileProgress(loader.getItem(), loader.progress);\n\t\tthis._updateProgress();\n\t};\n\n\t/**\n\t * Overall progress has changed, so determine the new progress amount and dispatch it. This changes any time an\n\t * item dispatches progress or completes. Note that since we don't always know the actual filesize of items before\n\t * they are loaded. In this case, we define a \"slot\" for each item (1 item in 10 would get 10%), and then append\n\t * loaded progress on top of the already-loaded items.\n\t *\n\t * For example, if 5/10 items have loaded, and item 6 is 20% loaded, the total progress would be:\n\t * <ul>\n\t *      <li>5/10 of the items in the queue (50%)</li>\n\t *      <li>plus 20% of item 6's slot (2%)</li>\n\t *      <li>equals 52%</li>\n\t * </ul>\n\t * @method _updateProgress\n\t * @private\n\t */\n\tp._updateProgress = function () {\n\t\tvar loaded = this._numItemsLoaded / this._numItems; // Fully Loaded Progress\n\t\tvar remaining = this._numItems - this._numItemsLoaded;\n\t\tif (remaining > 0) {\n\t\t\tvar chunk = 0;\n\t\t\tfor (var i = 0, l = this._currentLoads.length; i < l; i++) {\n\t\t\t\tchunk += this._currentLoads[i].progress;\n\t\t\t}\n\t\t\tloaded += (chunk / remaining) * (remaining / this._numItems);\n\t\t}\n\n\t\tif (this._lastProgress != loaded) {\n\t\t\tthis._sendProgress(loaded);\n\t\t\tthis._lastProgress = loaded;\n\t\t}\n\t};\n\n\t/**\n\t * Clean out item results, to free them from memory. Mainly, the loaded item and results are cleared from internal\n\t * hashes.\n\t * @method _disposeItem\n\t * @param {LoadItem|Object} item The item that was passed in for preloading.\n\t * @private\n\t */\n\tp._disposeItem = function (item) {\n\t\tdelete this._loadedResults[item.id];\n\t\tdelete this._loadedRawResults[item.id];\n\t\tdelete this._loadItemsById[item.id];\n\t\tdelete this._loadItemsBySrc[item.src];\n\t};\n\n\t/**\n\t * Dispatch a \"fileprogress\" {{#crossLink \"Event\"}}{{/crossLink}}. Please see the LoadQueue {{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendFileProgress\n\t * @param {LoadItem|Object} item The item that is being loaded.\n\t * @param {Number} progress The amount the item has been loaded (between 0 and 1).\n\t * @protected\n\t */\n\tp._sendFileProgress = function (item, progress) {\n\t\tif (this._isCanceled() || this._paused) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.hasEventListener(\"fileprogress\")) {\n\t\t\treturn;\n\t\t}\n\n\t\t//LM: Rework ProgressEvent to support this?\n\t\tvar event = new createjs.Event(\"fileprogress\");\n\t\tevent.progress = progress;\n\t\tevent.loaded = progress;\n\t\tevent.total = 1;\n\t\tevent.item = item;\n\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a fileload {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event for\n\t * details on the event payload.\n\t * @method _sendFileComplete\n\t * @param {LoadItemObject} item The item that is being loaded.\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t */\n\tp._sendFileComplete = function (item, loader) {\n\t\tif (this._isCanceled() || this._paused) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar event = new createjs.Event(\"fileload\");\n\t\tevent.loader = loader;\n\t\tevent.item = item;\n\t\tevent.result = this._loadedResults[item.id];\n\t\tevent.rawResult = this._loadedRawResults[item.id];\n\n\t\t// This calls a handler specified on the actual load item. Currently, the SoundJS plugin uses this.\n\t\tif (item.completeHandler) {\n\t\t\titem.completeHandler(event);\n\t\t}\n\n\t\tthis.hasEventListener(\"fileload\") && this.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a filestart {{#crossLink \"Event\"}}{{/crossLink}} immediately before a file starts to load. Please see\n\t * the {{#crossLink \"LoadQueue/filestart:event\"}}{{/crossLink}} event for details on the event payload.\n\t * @method _sendFileStart\n\t * @param {LoadItem|Object} item The item that is being loaded.\n\t * @protected\n\t */\n\tp._sendFileStart = function (item) {\n\t\tvar event = new createjs.Event(\"filestart\");\n\t\tevent.item = item;\n\t\tthis.hasEventListener(\"filestart\") && this.dispatchEvent(event);\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[PreloadJS LoadQueue]\";\n\t};\n\n\tcreatejs.LoadQueue = createjs.promote(LoadQueue, \"AbstractLoader\");\n}());\n\n//##############################################################################\n// TextLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for Text files.\n\t * @class TextLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction TextLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.Types.TEXT);\n\t};\n\n\tvar p = createjs.extend(TextLoader, createjs.AbstractLoader);\n\tvar s = TextLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader loads items that are of type {{#crossLink \"Types/TEXT:property\"}}{{/crossLink}},\n\t * but is also the default loader if a file type can not be determined.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.TEXT;\n\t};\n\n\tcreatejs.TextLoader = createjs.promote(TextLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// BinaryLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for binary files. This is useful for loading web audio, or content that requires an ArrayBuffer.\n\t * @class BinaryLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction BinaryLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.Types.BINARY);\n\t\tthis.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(BinaryLoader, createjs.AbstractLoader);\n\tvar s = BinaryLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/BINARY:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.BINARY;\n\t};\n\n\t// private methods\n\t/**\n\t * Before the item loads, set the response type to \"arraybuffer\"\n\t * @property _updateXHR\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._updateXHR = function (event) {\n\t\tevent.loader.setResponseType(\"arraybuffer\");\n\t};\n\n\tcreatejs.BinaryLoader = createjs.promote(BinaryLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// CSSLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for CSS files.\n\t * @class CSSLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction CSSLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.CSS);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"href\";\n\n\t\tif (preferXHR) {\n\t\t\tthis._tag = createjs.Elements.style();\n\t\t} else {\n\t\t\tthis._tag = createjs.Elements.link();\n\t\t}\n\n\t\tthis._tag.rel = \"stylesheet\";\n\t\tthis._tag.type = \"text/css\";\n\t};\n\n\tvar p = createjs.extend(CSSLoader, createjs.AbstractLoader);\n\tvar s = CSSLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/CSS:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.CSS;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for CSS files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tif (this._preferXHR) {\n\t\t\tvar tag = loader.getTag();\n\n\t\t\tif (tag.styleSheet) { // IE\n\t\t\t\ttag.styleSheet.cssText = loader.getResult(true);\n\t\t\t} else {\n\t\t\t\tvar textNode = createjs.Elements.text(loader.getResult(true));\n\t\t\t\ttag.appendChild(textNode);\n\t\t\t}\n\t\t} else {\n\t\t\ttag = this._tag;\n\t\t}\n\n\t\tcreatejs.DomUtils.appendToHead(tag);\n\n\t\treturn tag;\n\t};\n\n\tcreatejs.CSSLoader = createjs.promote(CSSLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// FontLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * A loader that handles font files, CSS definitions, and CSS paths. FontLoader doesn't actually preload fonts\n\t * themselves, but rather generates CSS definitions, and then tests the size changes on an HTML5 Canvas element.\n\t *\n\t * Note that FontLoader does not support tag-based loading due to the requirement that CSS be read to determine the\n\t * font definitions to test for.\n\t * @class FontLoader\n\t * @param {LoadItem|object|string} loadItem The item to be loaded.\n\t * @extends AbstractLoader\n\t * @constructor\n\t **/\n\tfunction FontLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, loadItem.type);\n\n\t\t// private properties:\n\t\t/**\n\t\t * A lookup of font faces to load.\n\t\t * @property _faces\n\t\t * @protected\n\t\t * @type Object\n\t\t **/\n\t\tthis._faces = {};\n\n\t\t/**\n\t\t * A list of font faces currently being \"watched\". Watched fonts will be tested on a regular interval, and be\n\t\t * removed from this list when they are complete.\n\t\t * @oroperty _watched\n\t\t * @type {Array}\n\t\t * @protected\n\t\t */\n\t\tthis._watched = [];\n\n\t\t/**\n\t\t * A count of the total font faces to load.\n\t\t * @property _count\n\t\t * @type {number}\n\t\t * @protected\n\t\t * @default 0\n\t\t */\n\t\tthis._count = 0;\n\n\t\t/**\n\t\t * The interval for checking if fonts have been loaded.\n\t\t * @property _watchInterval\n\t\t * @type {Number}\n\t\t * @protected\n\t\t */\n\t\tthis._watchInterval = null;\n\n\t\t/**\n\t\t * The timeout for determining if a font can't be loaded. Uses the LoadItem {{#crossLink \"LoadImte/timeout:property\"}}{{/crossLink}}\n\t\t * value.\n\t\t * @property _loadTimeout\n\t\t * @type {Number}\n\t\t * @protected\n\t\t */\n\t\tthis._loadTimeout = null;\n\t\t/**\n\t\t * Determines if generated CSS should be injected into the document.\n\t\t * @property _injectCSS\n\t\t * @type {boolean}\n\t\t * @protected\n\t\t */\n\t\tthis._injectCSS = (loadItem.injectCSS === undefined) ? true : loadItem.injectCSS;\n\n\t\tthis.dispatchEvent(\"initialize\");\n\t}\n\tvar p = createjs.extend(FontLoader, createjs.AbstractLoader);\n    \n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"Types/FONT:property\"}}{{/crossLink}}.\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    FontLoader.canLoadItem = function (item) {\n        return item.type == createjs.Types.FONT || item.type == createjs.Types.FONTCSS;\n    };\n\n// static properties:\n\t/**\n\t * Sample text used by the FontLoader to determine if the font has been loaded. The sample text size is compared\n\t * to the loaded font size, and a change indicates that the font has completed.\n\t * @property sampleText\n\t * @type {String}\n\t * @default abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ\n\t * @static\n\t * @private\n\t */\n\tFontLoader.sampleText = \"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\n\t/**\n\t * The canvas context used to test the font size. Note that this currently requires an HTML DOM.\n\t * @property _ctx\n\t * @type {CanvasRenderingContext2D}\n\t * @static\n\t * @private\n\t */\n\tFontLoader._ctx = document.createElement(\"canvas\").getContext(\"2d\"); // TODO: Consider a method to do this like EaselJS Stage has.\n\n\t/**\n\t * A list of reference fonts to test. Multiple faces are tested to address the rare case of a loaded font being the\n\t * exact same dimensions as the test font.\n\t * @property _referenceFonts\n\t * @type {Array}\n\t * @default [\"serif\", \"monospace\"]\n\t * @private\n\t */\n\tFontLoader._referenceFonts = [\"serif\",\"monospace\"];\n\n\t/**\n\t * A regular expression that pulls out possible style values from the font name.\n\t * <ul>\n\t *     <li>This includes font names that include thin, normal, book, regular, medium, black, and heavy (such as\n\t *     \"Arial Black\")</li>\n\t *     <li>Weight modifiers including extra, ultra, semi, demi, light, and bold (such as \"WorkSans SemiBold\")</li>\n\t * </ul>\n\t *\n\t * Weight descriptions map to font weight values by default using the following (from\n\t * http://www.w3.org/TR/css3-fonts/#font-weight-numeric-values):\n\t * <ul>\n\t *     <li>100 - Thin</li>\n\t * \t   <li>200 - Extra Light, Ultra Light</li>\n\t *     <li>300 - Light, Semi Light, Demi Light</li>\n\t *     <li>400 - Normal, Book, Regular</li>\n\t *     <li>500 - Medium</li>\n\t *     <li>600 - Semi Bold, Demi Bold</li>\n\t *     <li>700 - Bold</li>\n\t *     <li>800 - Extra Bold, Ultra Bold</li>\n\t *     <li>900 - Black, Heavy</li>\n\t * </ul>\n\t * @property WEIGHT_REGEX\n\t * @type {RegExp}\n\t * @static\n\t */\n\tFontLoader.WEIGHT_REGEX = /[- ._]*(thin|normal|book|regular|medium|black|heavy|[1-9]00|(?:extra|ultra|semi|demi)?[- ._]*(?:light|bold))[- ._]*/ig;\n\n\t/**\n\t * A regular expression that pulls out possible style values from the font name. These include \"italic\"\n\t * and \"oblique\".\n\t * @property STYLE_REGEX\n\t * @type {RegExp}\n\t * @static\n\t */\n\tFontLoader.STYLE_REGEX = /[- ._]*(italic|oblique)[- ._]*/ig;\n\n\t/**\n\t * A lookup of font types for generating a CSS definition. For example, TTF fonts requires a \"truetype\" type.\n\t * @property FONT_FORMAT\n\t * @type {Object}\n\t * @static\n\t */\n\tFontLoader.FONT_FORMAT = {woff2:\"woff2\", woff:\"woff\", ttf:\"truetype\", otf:\"truetype\"};\n\n\t/**\n\t * A lookup of font weights based on a name. These values are from http://www.w3.org/TR/css3-fonts/#font-weight-numeric-values.\n\t * @property FONT_WEIGHT\n\t * @type {Object}\n\t * @static\n\t */\n\tFontLoader.FONT_WEIGHT = {thin:100, extralight:200, ultralight:200, light:300, semilight:300, demilight:300, book:\"normal\", regular:\"normal\", semibold:600, demibold:600, extrabold:800, ultrabold:800, black:900, heavy:900};\n\n\t/**\n\t * The frequency in milliseconds to check for loaded fonts.\n\t * @property WATCH_DURATION\n\t * @type {number}\n\t * @default 10\n\t * @static\n\t */\n\tFontLoader.WATCH_DURATION = 10;\n// public methods:\n\tp.load = function() {\n\t\tif (this.type == createjs.Types.FONTCSS) {\n\t\t\tvar loaded = this._watchCSS();\n\n\t\t\t// If the CSS is not ready, it will create a request, which AbstractLoader can handle.\n\t\t\tif (!loaded) {\n\t\t\t\tthis.AbstractLoader_load();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t} else if (this._item.src instanceof Array) {\n\t\t\tthis._watchFontArray();\n\t\t} else {\n\t\t\tvar def = this._defFromSrc(this._item.src);\n\t\t\tthis._watchFont(def);\n\t\t\tthis._injectStyleTag(this._cssFromDef(def));\n\t\t}\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * The font load has timed out. This is called via a <code>setTimeout</code>.\n\t * callback.\n\t * @method _handleTimeout\n\t * @protected\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._stopWatching();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\"));\n\t};\n\n\t// WatchCSS does the work for us, and provides a modified src.\n\tp._createRequest = function() {\n\t\treturn this._request;\n\t};\n\n\t// Events come from the internal XHR loader.\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target._response;\n\t\t\t\tthis._result = true;\n\t\t\t\tthis._parseCSS(this._rawResult);\n\t\t\t\tbreak;\n\n\t\t\tcase \"error\":\n\t\t\t\tthis._stopWatching();\n\t\t\t\tthis.AbstractLoader_handleEvent(event);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n// private methods:\n\t/**\n\t * Determine if the provided CSS is a string definition, CSS HTML element, or a CSS file URI. Depending on the\n\t * format, the CSS will be parsed, or loaded.\n\t * @method _watchCSS\n\t * @returns {boolean} Whether or not the CSS is ready\n\t * @protected\n\t */\n\tp._watchCSS = function() {\n\t\tvar src = this._item.src;\n\n\t\t// An HTMLElement was passed in. Just use it.\n\t\tif (src instanceof HTMLStyleElement) {\n\t\t\tif (this._injectCSS && !src.parentNode) { (document.head || document.getElementsByTagName('head')[0]).appendChild(src); }\n\t\t\tthis._injectCSS = false;\n\t\t\tsrc = \"\\n\"+src.textContent;\n\t\t}\n\n\t\t// A CSS string was passed in. Parse and use it\n\t\tif (src.search(/\\n|\\r|@font-face/i) !== -1) { // css string.\n\t\t\tthis._parseCSS(src);\n\t\t\treturn true;\n\t\t}\n\n\t\t// Load a CSS Path. Note that we CAN NOT load it without XHR because we need to read the CSS definition\n\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\treturn false;\n\t};\n\n\t/**\n\t * Parse a CSS string to determine the fonts to load.\n\t * @method _parseCSS\n\t * @param {String} css The CSS string to parse\n\t * @protected\n\t */\n\tp._parseCSS = function(css) {\n\t\tvar regex = /@font-face\\s*\\{([^}]+)}/g\n\t\twhile (true) {\n\t\t\tvar result = regex.exec(css);\n\t\t\tif (!result) { break; }\n\t\t\tthis._watchFont(this._parseFontFace(result[1]));\n\t\t}\n\t\tthis._injectStyleTag(css);\n\t};\n\n\t/**\n\t * The provided fonts were an array of object or string definitions. Parse them, and inject any that are ready.\n\t * @method _watchFontArray\n\t * @protected\n\t */\n\tp._watchFontArray = function() {\n\t\tvar arr = this._item.src, css = \"\", def;\n\t\tfor (var i=arr.length-1; i>=0; i--) {\n\t\t\tvar o = arr[i];\n\t\t\tif (typeof o === \"string\") { def = this._defFromSrc(o) }\n\t\t\telse { def = this._defFromObj(o); }\n\t\t\tthis._watchFont(def);\n\t\t\tcss += this._cssFromDef(def)+\"\\n\";\n\t\t}\n\t\tthis._injectStyleTag(css);\n\t};\n\n\t/**\n\t * Inject any style definitions into the document head. This is necessary when the definition is just a string or\n\t * object definition in order for the styles to be applied to the document. If the loaded fonts are already HTML CSS\n\t * elements, they don't need to be appended again.\n\t * @method _injectStyleTag\n\t * @param {String} css The CSS string content to be appended to the\n\t * @protected\n\t */\n\tp._injectStyleTag = function(css) {\n\t\tif (!this._injectCSS) { return; }\n\t\tvar head = document.head || document.getElementsByTagName('head')[0];\n\t\tvar styleTag = document.createElement(\"style\");\n\t\tstyleTag.type = \"text/css\";\n\t\tif (styleTag.styleSheet){\n\t\t\tstyleTag.styleSheet.cssText = css;\n\t\t} else {\n\t\t\tstyleTag.appendChild(document.createTextNode(css));\n\t\t}\n\t\thead.appendChild(styleTag);\n\t};\n\n\t/**\n\t * Determine the font face from a CSS definition.\n\t * @method _parseFontFace\n\t * @param {String} str The CSS string definition\n\t * @protected\n\t * @return {String} A modified CSS object containing family name, src, style, and weight\n\t */\n\tp._parseFontFace = function(str) {\n\t\tvar family = this._getCSSValue(str, \"font-family\"), src = this._getCSSValue(str, \"src\");\n\t\tif (!family || !src) { return null; }\n\t\treturn this._defFromObj({\n\t\t\tfamily: family,\n\t\t\tsrc: src,\n\t\t\tstyle: this._getCSSValue(str, \"font-style\"),\n\t\t\tweight: this._getCSSValue(str, \"font-weight\")\n\t\t});\n\t};\n\n\t/**\n\t * Add a font to the list of fonts currently being watched. If the font is already watched or loaded, it won't be\n\t * added again.\n\t * @method _watchFont\n\t * @param {Object} def The font definition\n\t * @protected\n\t */\n\tp._watchFont = function(def) {\n\t\tif (!def || this._faces[def.id]) { return; }\n\t\tthis._faces[def.id] = def;\n\t\tthis._watched.push(def);\n\t\tthis._count++;\n\n\t\tthis._calculateReferenceSizes(def);\n\t\tthis._startWatching();\n\t};\n\n\t/**\n\t * Create a interval to check for loaded fonts. Only one interval is used for all fonts. The fonts are checked based\n\t * on the {{#crossLink \"FontLoader/WATCH_DURATION:property\"}}{{/crossLink}}.\n\t * @method _startWatching\n\t * @protected\n\t */\n\tp._startWatching = function() {\n\t\tif (this._watchInterval != null) { return; }\n\t\tthis._watchInterval = setInterval(createjs.proxy(this._watch, this), FontLoader.WATCH_DURATION);\n\t};\n\n\t/**\n\t * Clear the interval used to check fonts. This happens when all fonts are loaded, or an error occurs, such as a\n\t * CSS file error, or a load timeout.\n\t * @method _stopWatching\n\t * @protected\n\t */\n\tp._stopWatching = function() {\n\t\tclearInterval(this._watchInterval);\n\t\tclearTimeout(this._loadTimeout);\n\t\tthis._watchInterval = null;\n\t};\n\n\t/**\n\t * Check all the fonts that have not been loaded. The fonts are drawn to a canvas in memory, and if their font size\n\t * varies from the default text size, then the font is considered loaded.\n\t *\n\t * A {{#crossLink \"AbstractLoader/fileload\"}}{{/crossLink}} event will be dispatched when each file is loaded, along\n\t * with the font family name as the `item` value. A {{#crossLink \"ProgressEvent\"}}{{/crossLink}} is dispatched a\n\t * maximum of one time per check when any fonts are loaded, with the {{#crossLink \"ProgressEvent/progress:property\"}}{{/crossLink}}\n\t * value showing the percentage of fonts that have loaded.\n\t * @method _watch\n\t * @protected\n\t */\n\tp._watch = function() {\n\t\tvar defs = this._watched, refFonts = FontLoader._referenceFonts, l = defs.length;\n\t\tfor (var i = l - 1; i >= 0; i--) {\n\t\t\tvar def = defs[i], refs = def.refs;\n\t\t\tfor (var j = refs.length - 1; j >= 0; j--) {\n\t\t\t\tvar w = this._getTextWidth(def.family + \",\" + refFonts[j], def.weight, def.style);\n\t\t\t\tif (w != refs[j]) {\n\t\t\t\t\tvar event = new createjs.Event(\"fileload\");\n\t\t\t\t\tdef.type = \"font-family\";\n\t\t\t\t\tevent.item = def;\n\t\t\t\t\tthis.dispatchEvent(event);\n\t\t\t\t\tdefs.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (l !== defs.length) {\n\t\t\tvar event = new createjs.ProgressEvent(this._count-defs.length, this._count);\n\t\t\tthis.dispatchEvent(event);\n\t\t}\n\t\tif (l === 0) {\n\t\t\tthis._stopWatching();\n\t\t\tthis._sendComplete();\n\t\t}\n\t};\n\n\t/**\n\t * Determine the default size of the reference fonts used to compare against loaded fonts.\n\t * @method _calculateReferenceSizes\n\t * @param {Object} def The font definition to get the size of.\n\t * @protected\n\t */\n\tp._calculateReferenceSizes = function(def) {\n\t\tvar refFonts = FontLoader._referenceFonts;\n\t\tvar refs = def.refs = [];\n\t\tfor (var i=0; i<refFonts.length; i++) {\n\t\t\trefs[i] = this._getTextWidth(refFonts[i], def.weight, def.style);\n\t\t}\n\t};\n\n\t/**\n\t * Get a CSS definition from a font source and name.\n\t * @method _defFromSrc\n\t * @param {String} src The font source\n\t * @protected\n\t */\n\tp._defFromSrc = function(src) {\n\t\tvar re = /[- ._]+/g, name = src, ext = null, index;\n\t\t\n\t\tindex = name.search(/[?#]/);\n\t\tif (index !== -1) {\n\t\t\tname = name.substr(0,index);\n\t\t}\n\t\tindex = name.lastIndexOf(\".\");\n\t\tif (index !== -1) {\n\t\t\text = name.substr(index+1);\n\t\t\tname = name.substr(0,index);\n\t\t}\n\t\tindex = name.lastIndexOf(\"/\");\n\t\tif (index !== -1) {\n\t\t\tname = name.substr(index+1);\n\t\t}\n\t\t\n\t\tvar family = name,\n\t\t\t\tweight = family.match(FontLoader.WEIGHT_REGEX);\n\t\tif (weight) {\n\t\t\tweight = weight[0];\n\t\t\tfamily = family.replace(weight, \"\");\n\t\t\tweight = weight.replace(re, \"\").toLowerCase();\n\t\t}\n\t\tvar style = name.match(FontLoader.STYLE_REGEX);\n\t\tif (style) {\n\t\t\tfamily = family.replace(style[0], \"\");\n\t\t\tstyle = \"italic\";\n\t\t}\n\t\tfamily = family.replace(re, \"\");\n\t\t\n\t\tvar cssSrc = \"local('\"+name.replace(re,\" \")+\"'), url('\"+src+\"')\";\n\t\tvar format = FontLoader.FONT_FORMAT[ext];\n\t\tif (format) { cssSrc += \" format('\"+format+\"')\"; }\n\t\t\n\t\treturn this._defFromObj({\n\t\t\tfamily: family,\n\t\t\tweight: FontLoader.FONT_WEIGHT[weight]||weight,\n\t\t\tstyle: style,\n\t\t\tsrc: cssSrc\n\t\t});\n\t};\n\n\t/**\n\t * Get a font definition from a raw font object.\n\t * @method _defFromObj\n\t * @param {Object} o A raw object provided to the FontLoader\n\t * @returns {Object} A standard font object that the FontLoader understands\n\t * @protected\n\t */\n\tp._defFromObj = function(o) {\n\t\tvar def = {\n\t\t\tfamily: o.family,\n\t\t\tsrc: o.src,\n\t\t\tstyle: o.style || \"normal\",\n\t\t\tweight: o.weight || \"normal\"\n\t\t};\n\t\tdef.id = def.family + \";\" + def.style + \";\" + def.weight;\n\t\treturn def;\n\t};\n\n\t/**\n\t * Get CSS from a font definition.\n\t * @method _cssFromDef\n\t * @param {Object} def A font definition\n\t * @returns {string} A CSS string representing the object\n\t * @protected\n\t */\n\tp._cssFromDef = function(def) {\n\t\treturn \"@font-face {\\n\" +\n\t\t\t\"\\tfont-family: '\"+def.family+\"';\\n\" +\n\t\t\t\"\\tfont-style: \"+def.style+\";\\n\" +\n\t\t\t\"\\tfont-weight: \"+def.weight+\";\\n\" +\n\t\t\t\"\\tsrc: \"+def.src+\";\\n\" +\n\t\t\t\"}\";\n\t};\n\n\t/**\n\t * Get the text width of text using the family, weight, and style\n\t * @method _getTextWidth\n\t * @param {String} family The font family\n\t * @param {String} weight The font weight\n\t * @param {String} style The font style\n\t * @returns {Number} The pixel measurement of the font.\n\t * @protected\n\t */\n\tp._getTextWidth = function(family, weight, style) {\n\t\tvar ctx = FontLoader._ctx;\n\t\tctx.font = style+\" \"+weight+\" 72px \"+family;\n\t\treturn ctx.measureText(FontLoader.sampleText).width;\n\t};\n\n\t/**\n\t * Get the value of a property from a CSS string. For example, searches a CSS string for the value of the\n\t * \"font-family\" property.\n\t * @method _getCSSValue\n\t * @param {String} str The CSS string to search\n\t * @param {String} propName The property name to get the value for\n\t * @returns {String} The value in the CSS for the provided property name\n\t * @protected\n\t */\n\tp._getCSSValue = function(str, propName) {\n\t\tvar regex = new RegExp(propName+\":\\s*([^;}]+?)\\s*[;}]\");\n\t\tvar result = regex.exec(str);\n\t\tif (!result || !result[1]) { return null; }\n\t\treturn result[1];\n\t};\n\n\tcreatejs.FontLoader = createjs.promote(FontLoader, \"AbstractLoader\");\n\n})();\n\n//##############################################################################\n// ImageLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for image files.\n\t * @class ImageLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction ImageLoader (loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.IMAGE);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\n\t\t// Check if the preload item is already a tag.\n\t\tif (createjs.DomUtils.isImageTag(loadItem)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.DomUtils.isImageTag(loadItem.src)) {\n\t\t\tthis._tag = loadItem.src;\n\t\t} else if (createjs.DomUtils.isImageTag(loadItem.tag)) {\n\t\t\tthis._tag = loadItem.tag;\n\t\t}\n\n\t\tif (this._tag != null) {\n\t\t\tthis._preferXHR = false;\n\t\t} else {\n\t\t\tthis._tag = createjs.Elements.img();\n\t\t}\n\n\t\tthis.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(ImageLoader, createjs.AbstractLoader);\n\tvar s = ImageLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/IMAGE:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.IMAGE;\n\t};\n\n\t// public methods\n\tp.load = function () {\n\t\tif (this._tag.src != \"\" && this._tag.complete) {\n\t\t\tthis._sendComplete();\n\t\t\treturn;\n\t\t}\n\n\t\tvar crossOrigin = this._item.crossOrigin;\n\t\tif (crossOrigin == true) { crossOrigin = \"Anonymous\"; }\n\t\tif (crossOrigin != null && !createjs.URLUtils.isLocal(this._item)) {\n\t\t\tthis._tag.crossOrigin = crossOrigin;\n\t\t}\n\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\t/**\n\t * Before the item loads, set its mimeType and responseType.\n\t * @property _updateXHR\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._updateXHR = function (event) {\n\t\tevent.loader.mimeType = 'text/plain; charset=x-user-defined-binary';\n\n\t\t// Only exists for XHR\n\t\tif (event.loader.setResponseType) {\n\t\t\tevent.loader.setResponseType(\"blob\");\n\t\t}\n\t};\n\n\t/**\n\t * The result formatter for Image files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLImageElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\treturn this._formatImage;\n\t};\n\n\t/**\n\t * The asynchronous image formatter function. This is required because images have\n\t * a short delay before they are ready.\n\t * @method _formatImage\n\t * @param {Function} successCallback The method to call when the result has finished formatting\n\t * @param {Function} errorCallback The method to call if an error occurs during formatting\n\t * @private\n\t */\n\tp._formatImage = function (successCallback, errorCallback) {\n\t\tvar tag = this._tag;\n\t\tvar URL = window.URL || window.webkitURL;\n\n\t\tif (!this._preferXHR) {\n\n\t\t\t//document.body.removeChild(tag);\n\t\t} else if (URL) {\n\t\t\tvar objURL = URL.createObjectURL(this.getResult(true));\n\t\t\ttag.src = objURL;\n\n\t\t\ttag.addEventListener(\"load\", this._cleanUpURL, false);\n\t\t\ttag.addEventListener(\"error\", this._cleanUpURL, false);\n\t\t} else {\n\t\t\ttag.src = this._item.src;\n\t\t}\n\n\t\tif (tag.complete) {\n\t\t\tsuccessCallback(tag);\n\t\t} else {\n            tag.onload = createjs.proxy(function() {\n                successCallback(this._tag);\n                tag.onload = tag.onerror = null;\n            }, this);\n\n            tag.onerror = createjs.proxy(function(event) {\n                errorCallback(new createjs.ErrorEvent('IMAGE_FORMAT', null, event));\n                tag.onload = tag.onerror = null;\n            }, this);\n\t\t}\n\t};\n\n\t/**\n\t * Clean up the ObjectURL, the tag is done with it. Note that this function is run\n\t * as an event listener without a proxy/closure, as it doesn't require it - so do not\n\t * include any functionality that requires scope without changing it.\n\t * @method _cleanUpURL\n\t * @param event\n\t * @private\n\t */\n\tp._cleanUpURL = function (event) {\n\t\tvar URL = window.URL || window.webkitURL;\n\t\tURL.revokeObjectURL(event.target.src);\n\t};\n\n\tcreatejs.ImageLoader = createjs.promote(ImageLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JavaScriptLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JavaScript files.\n\t * @class JavaScriptLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JavaScriptLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.JAVASCRIPT);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\t\tthis.setTag(createjs.Elements.script());\n\t};\n\n\tvar p = createjs.extend(JavaScriptLoader, createjs.AbstractLoader);\n\tvar s = JavaScriptLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/JAVASCRIPT:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.JAVASCRIPT;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for JavaScript files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tvar tag = loader.getTag();\n\t\tif (this._preferXHR) {\n\t\t\ttag.text = loader.getResult(true);\n\t\t}\n\t\treturn tag;\n\t};\n\n\tcreatejs.JavaScriptLoader = createjs.promote(JavaScriptLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JSONLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSON files. To load JSON cross-domain, use JSONP and the {{#crossLink \"JSONPLoader\"}}{{/crossLink}}\n\t * instead. To load JSON-formatted manifests, use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to\n\t * load EaselJS SpriteSheets, use {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n\t * @class JSONLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JSONLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.Types.JSON);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\t};\n\n\tvar p = createjs.extend(JSONLoader, createjs.AbstractLoader);\n\tvar s = JSONLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/JSON:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.JSON;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for JSON files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tvar json = null;\n\t\ttry {\n\t\t\tjson = createjs.DataUtils.parseJSON(loader.getResult(true));\n\t\t} catch (e) {\n\t\t\tvar event = new createjs.ErrorEvent(\"JSON_FORMAT\", null, e);\n\t\t\tthis._sendError(event);\n\t\t\treturn e;\n\t\t}\n\n\t\treturn json;\n\t};\n\n\tcreatejs.JSONLoader = createjs.promote(JSONLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JSONPLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSONP files, which are JSON-formatted text files, wrapped in a callback. To load regular JSON\n\t * without a callback use the {{#crossLink \"JSONLoader\"}}{{/crossLink}} instead. To load JSON-formatted manifests,\n\t * use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to load EaselJS SpriteSheets, use\n\t * {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n\t *\n\t * JSONP is a format that provides a solution for loading JSON files cross-domain <em>without</em> requiring CORS.\n\t * JSONP files are loaded as JavaScript, and the \"callback\" is executed once they are loaded. The callback in the\n\t * JSONP must match the callback passed to the loadItem.\n\t *\n\t * <h4>Example JSONP</h4>\n\t *\n\t * \t\tcallbackName({\n\t * \t\t\t\"name\": \"value\",\n\t *\t \t\t\"num\": 3,\n\t *\t\t\t\"obj\": { \"bool\":true }\n\t * \t\t});\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tvar loadItem = {id:\"json\", type:\"jsonp\", src:\"http://server.com/text.json\", callback:\"callbackName\"}\n\t * \t\tvar queue = new createjs.LoadQueue();\n\t * \t\tqueue.on(\"complete\", handleComplete);\n\t * \t\tqueue.loadItem(loadItem);\n\t *\n\t * \t\tfunction handleComplete(event) }\n\t * \t\t\tvar json = queue.getResult(\"json\");\n\t * \t\t\tconsole.log(json.obj.bool); // true\n\t * \t\t}\n\t *\n\t * JSONP files loaded concurrently require a <em>unique</em> callback. To ensure JSONP files are loaded in order,\n\t * either use the {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} method (set to 1), or set\n\t * {{#crossLink \"LoadItem/maintainOrder:property\"}}{{/crossLink}} on items with the same callback.\n\t *\n\t * Important note: Some browsers will prevent JSONP from firing the callback if the file was loaded as JSON, and not\n\t * JavaScript. You may have to have your server give you a JavaScript mime-type for this to work.\n\t *\n\t * @class JSONPLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JSONPLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, false, createjs.Types.JSONP);\n\t\tthis.setTag(createjs.Elements.script());\n\t\tthis.getTag().type = \"text/javascript\";\n\t};\n\n\tvar p = createjs.extend(JSONPLoader, createjs.AbstractLoader);\n\tvar s = JSONPLoader;\n\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/JSONP:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.JSONP;\n\t};\n\n\t// public methods\n\tp.cancel = function () {\n\t\tthis.AbstractLoader_cancel();\n\t\tthis._dispose();\n\t};\n\n\t/**\n\t * Loads the JSONp file.  Because of the unique loading needs of JSONp\n\t * we don't use the AbstractLoader.load() method.\n\t *\n\t * @method load\n\t *\n\t */\n\tp.load = function () {\n\t\tif (this._item.callback == null) {\n\t\t\tthrow new Error('callback is required for loading JSONP requests.');\n\t\t}\n\n\t\t// TODO: Look into creating our own iFrame to handle the load\n\t\t// In the first attempt, FF did not get the result\n\t\t//   result instanceof Object did not work either\n\t\t//   so we would need to clone the result.\n\t\tif (window[this._item.callback] != null) {\n\t\t\tthrow new Error(\n\t\t\t\t\"JSONP callback '\" +\n\t\t\t\tthis._item.callback +\n\t\t\t\t\"' already exists on window. You need to specify a different callback or re-name the current one.\");\n\t\t}\n\n\t\twindow[this._item.callback] = createjs.proxy(this._handleLoad, this);\n\t\tcreatejs.DomUtils.appendToBody(this._tag);\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\t// Load the tag\n\t\tthis._tag.src = this._item.src;\n\t};\n\n\t// private methods\n\t/**\n\t * Handle the JSONP callback, which is a public method defined on `window`.\n\t * @method _handleLoad\n\t * @param {Object} data The formatted JSON data.\n\t * @private\n\t */\n\tp._handleLoad = function (data) {\n\t\tthis._result = this._rawResult = data;\n\t\tthis._sendComplete();\n\n\t\tthis._dispose();\n\t};\n\n\t/**\n\t * The tag request has not loaded within the time specfied in loadTimeout.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._dispose();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"timeout\"));\n\t};\n\n\t/**\n\t * Clean up the JSONP load. This clears out the callback and script tag that this loader creates.\n\t * @method _dispose\n\t * @private\n\t */\n\tp._dispose = function () {\n\t\tcreatejs.DomUtils.removeChild(this._tag);\n\t\tdelete window[this._item.callback];\n\n\t\tclearTimeout(this._loadTimeout);\n\t};\n\n\tcreatejs.JSONPLoader = createjs.promote(JSONPLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// ManifestLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSON manifests. Items inside the manifest are loaded before the loader completes. To load manifests\n\t * using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}} as part of the\n\t * {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t *\n\t * The list of files in the manifest must be defined on the top-level JSON object in a `manifest` property. This\n\t * example shows a sample manifest definition, as well as how to to include a sub-manifest.\n\t *\n\t * \t\t{\n\t * \t\t\t\"path\": \"assets/\",\n\t *\t \t    \"manifest\": [\n\t *\t\t\t\t\"image.png\",\n\t *\t\t\t\t{\"src\": \"image2.png\", \"id\":\"image2\"},\n\t *\t\t\t\t{\"src\": \"sub-manifest.json\", \"type\":\"manifest\", \"callback\":\"jsonCallback\"}\n\t *\t \t    ]\n\t *\t \t}\n\t *\n\t * When a ManifestLoader has completed loading, the parent loader (usually a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t * but could also be another ManifestLoader) will inherit all the loaded items, so you can access them directly.\n\t *\n\t * Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}} and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are\n\t * higher priority loaders, so manifests <strong>must</strong> set the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t * {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property to {{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}}.\n\t *\n\t * Additionally, some browsers require the server to serve a JavaScript mime-type for JSONP, so it may not work in\n\t * some conditions.\n\t * @class ManifestLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction ManifestLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.MANIFEST);\n\n\t// Public Properties\n\t\t/**\n\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}},\n\t\t * used to pass plugins to new LoadQueues that may be created.\n\t\t * @property _plugins\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.1\n\t\t */\n\t\tthis.plugins = null;\n\n\n\t// Protected Properties\n\t\t/**\n\t\t * An internal {{#crossLink \"LoadQueue\"}}{{/crossLink}} that loads the contents of the manifest.\n\t\t * @property _manifestQueue\n\t\t * @type {LoadQueue}\n\t\t * @private\n\t\t */\n\t\tthis._manifestQueue = null;\n\t};\n\n\tvar p = createjs.extend(ManifestLoader, createjs.AbstractLoader);\n\tvar s = ManifestLoader;\n\n\t// static properties\n\t/**\n\t * The amount of progress that the manifest itself takes up.\n\t * @property MANIFEST_PROGRESS\n\t * @type {number}\n\t * @default 0.25 (25%)\n\t * @private\n\t * @static\n\t */\n\ts.MANIFEST_PROGRESS = 0.25;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.MANIFEST;\n\t};\n\n\t// public methods\n\tp.load = function () {\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\tp._createRequest = function() {\n\t\tvar callback = this._item.callback;\n\t\tif (callback != null) {\n\t\t\tthis._request = new createjs.JSONPLoader(this._item);\n\t\t} else {\n\t\t\tthis._request = new createjs.JSONLoader(this._item);\n\t\t}\n\t};\n\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target.getResult(true);\n\t\t\t\tthis._result = event.target.getResult();\n\t\t\t\tthis._sendProgress(s.MANIFEST_PROGRESS);\n\t\t\t\tthis._loadManifest(this._result);\n\t\t\t\treturn;\n\t\t\tcase \"progress\":\n\t\t\t\tevent.loaded *= s.MANIFEST_PROGRESS;\n\t\t\t\tthis.progress = event.loaded / event.total;\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\treturn;\n\t\t}\n\t\tthis.AbstractLoader_handleEvent(event);\n\t};\n\n\tp.destroy = function() {\n\t\tthis.AbstractLoader_destroy();\n\t\tthis._manifestQueue.close();\n\t};\n\n\t/**\n\t * Create and load the manifest items once the actual manifest has been loaded.\n\t * @method _loadManifest\n\t * @param {Object} json\n\t * @private\n\t */\n\tp._loadManifest = function (json) {\n\t\tif (json && json.manifest) {\n\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR);\n\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\n\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\n\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\n\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\n\t\t\tfor(var i = 0, l = this.plugins.length; i < l; i++) {\t// conserve order of plugins\n\t\t\t\tqueue.installPlugin(this.plugins[i]);\n\t\t\t}\n\t\t\tqueue.loadManifest(json);\n\t\t} else {\n\t\t\tthis._sendComplete();\n\t\t}\n\t};\n\n\t/**\n\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n\t * @method _handleManifestFileLoad\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestFileLoad = function (event) {\n\t\tevent.target = null;\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * The manifest has completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n\t * {{#crossLink \"Event\"}}{{/crossLink}} from the ManifestLoader.\n\t * @method _handleManifestComplete\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestComplete = function (event) {\n\t\tthis._loadedItems = this._manifestQueue.getItems(true);\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The manifest has reported progress.\n\t * @method _handleManifestProgress\n\t * @param {ProgressEvent} event\n\t * @private\n\t */\n\tp._handleManifestProgress = function (event) {\n\t\tthis.progress = event.progress * (1 - s.MANIFEST_PROGRESS) + s.MANIFEST_PROGRESS;\n\t\tthis._sendProgress(this.progress);\n\t};\n\n\t/**\n\t * The manifest has reported an error with one of the files.\n\t * @method _handleManifestError\n\t * @param {ErrorEvent} event\n\t * @private\n\t */\n\tp._handleManifestError = function (event) {\n\t\tvar newEvent = new createjs.Event(\"fileerror\");\n\t\tnewEvent.item = event.data;\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\tcreatejs.ManifestLoader = createjs.promote(ManifestLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// SoundLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\n\t * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\n\t * external framework that handles audio playback. To load content that can be played by WebAudio, use the\n\t * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\n\t * @class SoundLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractMediaLoader\n\t * @constructor\n\t */\n\tfunction SoundLoader(loadItem, preferXHR) {\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.Types.SOUND);\n\n\t\t// protected properties\n\t\tif (createjs.DomUtils.isAudioTag(loadItem)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.DomUtils.isAudioTag(loadItem.src)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.DomUtils.isAudioTag(loadItem.tag)) {\n\t\t\tthis._tag = createjs.DomUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\n\t\t}\n\n\t\tif (this._tag != null) {\n\t\t\tthis._preferXHR = false;\n\t\t}\n\t};\n\n\tvar p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\n\tvar s = SoundLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/SOUND:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.SOUND;\n\t};\n\n\t// protected methods\n\tp._createTag = function (src) {\n\t\tvar tag = createjs.Elements.audio();\n\t\ttag.autoplay = false;\n\t\ttag.preload = \"none\";\n\n\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n\t\ttag.src = src;\n\t\treturn tag;\n\t};\n\n\tcreatejs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\n\n}());\n\n//##############################################################################\n// VideoLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for video files.\n\t * @class VideoLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractMediaLoader\n\t * @constructor\n\t */\n\tfunction VideoLoader(loadItem, preferXHR) {\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.Types.VIDEO);\n\n\t\tif (createjs.DomUtils.isVideoTag(loadItem) || createjs.DomUtils.isVideoTag(loadItem.src)) {\n\t\t\tthis.setTag(createjs.DomUtils.isVideoTag(loadItem)?loadItem:loadItem.src);\n\n\t\t\t// We can't use XHR for a tag that's passed in.\n\t\t\tthis._preferXHR = false;\n\t\t} else {\n\t\t\tthis.setTag(this._createTag());\n\t\t}\n\t};\n\n\tvar p = createjs.extend(VideoLoader, createjs.AbstractMediaLoader);\n\tvar s = VideoLoader;\n\n\t/**\n\t * Create a new video tag\n\t *\n\t * @returns {HTMLElement}\n\t * @private\n\t */\n\tp._createTag = function () {\n\t\treturn createjs.Elements.video();\n\t};\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/VIDEO:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.VIDEO;\n\t};\n\n\tcreatejs.VideoLoader = createjs.promote(VideoLoader, \"AbstractMediaLoader\");\n\n}());\n\n//##############################################################################\n// SpriteSheetLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for EaselJS SpriteSheets. Images inside the spritesheet definition are loaded before the loader\n\t * completes. To load SpriteSheets using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n\t * as part of the {{#crossLink \"LoadItem\"}}{{/crossLink}}. Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}}\n\t * and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are higher priority loaders, so SpriteSheets <strong>must</strong>\n\t * set the {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property\n\t * to {{#crossLink \"Types/SPRITESHEET:property\"}}{{/crossLink}}.\n\t *\n\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/crossOrigin:property\"}}{{/crossLink}} as well\n\t * as the {{#crossLink \"LoadQueue's\"}}{{/crossLink}} `basePath` argument and {{#crossLink \"LoadQueue/_preferXHR\"}}{{/crossLink}}\n\t * property supplied to the {{#crossLink \"LoadQueue\"}}{{/crossLink}} are passed on to the sub-manifest that loads\n\t * the SpriteSheet images.\n\t *\n\t * Note that the SpriteSheet JSON does not respect the {{#crossLink \"LoadQueue/_preferXHR:property\"}}{{/crossLink}}\n\t * property, which should instead be determined by the presence of a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n\t * property on the SpriteSheet load item. This is because the JSON loaded will have a different format depending on\n\t * if it is loaded as JSON, so just changing `preferXHR` is not enough to change how it is loaded.\n\t * @class SpriteSheetLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction SpriteSheetLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.SPRITESHEET);\n\n\t\t// protected properties\n\t\t/**\n\t\t * An internal queue which loads the SpriteSheet's images.\n\t\t * @method _manifestQueue\n\t\t * @type {LoadQueue}\n\t\t * @private\n\t\t */\n\t\tthis._manifestQueue = null;\n\t}\n\n\tvar p = createjs.extend(SpriteSheetLoader, createjs.AbstractLoader);\n\tvar s = SpriteSheetLoader;\n\n\t// static properties\n\t/**\n\t * The amount of progress that the manifest itself takes up.\n\t * @property SPRITESHEET_PROGRESS\n\t * @type {number}\n\t * @default 0.25 (25%)\n\t * @private\n\t * @static\n\t */\n\ts.SPRITESHEET_PROGRESS = 0.25;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/SPRITESHEET:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.SPRITESHEET;\n\t};\n\n\t// public methods\n\tp.destroy = function() {\n\t\tthis.AbstractLoader_destroy();\n\t\tthis._manifestQueue.close();\n\t};\n\n\t// protected methods\n\tp._createRequest = function() {\n\t\tvar callback = this._item.callback;\n\t\tif (callback != null) {\n\t\t\tthis._request = new createjs.JSONPLoader(this._item);\n\t\t} else {\n\t\t\tthis._request = new createjs.JSONLoader(this._item);\n\t\t}\n\t};\n\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target.getResult(true);\n\t\t\t\tthis._result = event.target.getResult();\n\t\t\t\tthis._sendProgress(s.SPRITESHEET_PROGRESS);\n\t\t\t\tthis._loadManifest(this._result);\n\t\t\t\treturn;\n\t\t\tcase \"progress\":\n\t\t\t\tevent.loaded *= s.SPRITESHEET_PROGRESS;\n\t\t\t\tthis.progress = event.loaded / event.total;\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\treturn;\n\t\t}\n\t\tthis.AbstractLoader_handleEvent(event);\n\t};\n\n\t/**\n\t * Create and load the images once the SpriteSheet JSON has been loaded.\n\t * @method _loadManifest\n\t * @param {Object} json\n\t * @private\n\t */\n\tp._loadManifest = function (json) {\n\t\tif (json && json.images) {\n\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR, this._item.path, this._item.crossOrigin);\n\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\n\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\n\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\n\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\n\t\t\tqueue.loadManifest(json.images);\n\t\t}\n\t};\n\n\t/**\n\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n\t * @method _handleManifestFileLoad\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestFileLoad = function (event) {\n\t\tvar image = event.result;\n\t\tif (image != null) {\n\t\t\tvar images = this.getResult().images;\n\t\t\tvar pos = images.indexOf(event.item.src);\n\t\t\timages[pos] = image;\n\t\t}\n\t};\n\n\t/**\n\t * The images have completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n\t * {{#crossLink \"Event\"}}{{/crossLink}} from the SpriteSheetLoader.\n\t * @method _handleManifestComplete\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestComplete = function (event) {\n\t\tthis._result = new createjs.SpriteSheet(this._result);\n\t\tthis._loadedItems = this._manifestQueue.getItems(true);\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The images {{#crossLink \"LoadQueue\"}}{{/crossLink}} has reported progress.\n\t * @method _handleManifestProgress\n\t * @param {ProgressEvent} event\n\t * @private\n\t */\n\tp._handleManifestProgress = function (event) {\n\t\tthis.progress = event.progress * (1 - s.SPRITESHEET_PROGRESS) + s.SPRITESHEET_PROGRESS;\n\t\tthis._sendProgress(this.progress);\n\t};\n\n\t/**\n\t * An image has reported an error.\n\t * @method _handleManifestError\n\t * @param {ErrorEvent} event\n\t * @private\n\t */\n\tp._handleManifestError = function (event) {\n\t\tvar newEvent = new createjs.Event(\"fileerror\");\n\t\tnewEvent.item = event.data;\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\tcreatejs.SpriteSheetLoader = createjs.promote(SpriteSheetLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// SVGLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for SVG files.\n\t * @class SVGLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction SVGLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.SVG);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"data\";\n\n\t\tif (preferXHR) {\n\t\t\tthis.setTag(createjs.Elements.svg());\n\t\t} else {\n\t\t\tthis.setTag(createjs.Elements.object());\n\t\t\tthis.getTag().type = \"image/svg+xml\";\n\t\t}\n\t};\n\n\tvar p = createjs.extend(SVGLoader, createjs.AbstractLoader);\n\tvar s = SVGLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/SVG:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.SVG;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for SVG files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {Object}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\t// mime should be image/svg+xml, but Opera requires text/xml\n\t\tvar xml = createjs.DataUtils.parseXML(loader.getResult(true));\n\t\tvar tag = loader.getTag();\n\n\t\tif (!this._preferXHR && document.body.contains(tag)) {\n\t\t\tdocument.body.removeChild(tag);\n\t\t}\n\n\t\tif (xml.documentElement != null) {\n\t\t\tvar element = xml.documentElement;\n\t\t\t// Support loading an SVG from a different domain in ID\n\t\t\tif (document.importNode) {\n\t\t\t\telement = document.importNode(element, true);\n\t\t\t}\n\t\t\ttag.appendChild(element);\n\t\t\treturn tag;\n\t\t} else { // For browsers that don't support SVG, just give them the XML. (IE 9-8)\n\t\t\treturn xml;\n\t\t}\n\t};\n\n\tcreatejs.SVGLoader = createjs.promote(SVGLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// XMLLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for CSS files.\n\t * @class XMLLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction XMLLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.Types.XML);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\t};\n\n\tvar p = createjs.extend(XMLLoader, createjs.AbstractLoader);\n\tvar s = XMLLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/XML:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.XML;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for XML files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {XMLDocument}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\treturn createjs.DataUtils.parseXML(loader.getResult(true));\n\t};\n\n\tcreatejs.XMLLoader = createjs.promote(XMLLoader, \"AbstractLoader\");\n\n}());\n/*!\n* SoundJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n\n//##############################################################################\n// version.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of the library.\n\t * The SoundJS class has been renamed {{#crossLink \"Sound\"}}{{/crossLink}}.  Please see {{#crossLink \"Sound\"}}{{/crossLink}}\n\t * for information on using sound.\n\t * @class SoundJS\n\t **/\n\tvar s = createjs.SoundJS = createjs.SoundJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type String\n\t * @static\n\t **/\n\ts.version = /*=version*/\"1.0.0\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type String\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 14 Sep 2017 19:47:47 GMT\"; // injected by build process\n\n})();\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function(subclass, superclass) {\n\t\"use strict\";\n\n\tfunction o() { this.constructor = subclass; }\n\to.prototype = superclass.prototype;\n\treturn (subclass.prototype = new o());\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function(subclass, prefix) {\n\t\"use strict\";\n\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\n\tif (supP) {\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n\t\tfor (var n in supP) {\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\n\t\t}\n\t}\n\treturn subclass;\n};\n\n//##############################################################################\n// deprecate.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Wraps deprecated methods so they still be used, but throw warnings to developers.\n *\n *\tobj.deprecatedMethod = createjs.deprecate(\"Old Method Name\", obj._fallbackMethod);\n *\n * The recommended approach for deprecated properties is:\n *\n *\ttry {\n *\t\tObj\tect.defineProperties(object, {\n *\t\t\treadyOnlyProp: { get: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }) },\n *\t\t\treadWriteProp: {\n *\t\t\t\tget: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }),\n *\t\t\t\tset: createjs.deprecate(\"readOnlyProp\", function(val) { this.alternateProp = val; })\n *\t\t});\n *\t} catch (e) {}\n *\n * @method deprecate\n * @param {Function} [fallbackMethod=null] A method to call when the deprecated method is used. See the example for how\n * @param {String} [name=null] The name of the method or property to display in the console warning.\n * to deprecate properties.\n * @return {Function} If a fallbackMethod is supplied, returns a closure that will call the fallback method after\n * logging the warning in the console.\n */\ncreatejs.deprecate = function(fallbackMethod, name) {\n\t\"use strict\";\n\treturn function() {\n\t\tvar msg = \"Deprecated property or method '\"+name+\"'. See docs for info.\";\n\t\tconsole && (console.warn ? console.warn(msg) : console.log(msg));\n\t\treturn fallbackMethod && fallbackMethod.apply(this, arguments);\n\t}\n};\n\n//##############################################################################\n// indexOf.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement){\n\t\"use strict\";\n\n\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\tif (searchElement === array[i]) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n//##############################################################################\n// proxy.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n * createjs namespace directly.\n *\n * <h4>Example</h4>\n *\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n *\n * @class Utility Methods\n * @main Utility Methods\n */\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n\t * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n\t * method gets called in the correct scope.\n\t *\n\t * Additional arguments can be passed that will be applied to the function when it is called.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n\t *\n\t *      function myHandler(arg1, arg2) {\n\t *           // This gets called when myObject.myCallback is executed.\n\t *      }\n\t *\n\t * @method proxy\n\t * @param {Function} method The function to call\n\t * @param {Object} scope The scope to call the method name on\n\t * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n\t * @public\n\t * @static\n\t */\n\tcreatejs.proxy = function (method, scope) {\n\t\tvar aArgs = Array.prototype.slice.call(arguments, 2);\n\t\treturn function () {\n\t\t\treturn method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n\t\t};\n\t}\n\n}());\n\n//##############################################################################\n// BrowserDetect.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * An object that determines the current browser, version, operating system, and other environment\n\t * variables via user agent string.\n\t *\n\t * Used for audio because feature detection is unable to detect the many limitations of mobile devices.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      if (createjs.BrowserDetect.isIOS) { // do stuff }\n\t *\n\t * @property BrowserDetect\n\t * @type {Object}\n\t * @param {Boolean} isFirefox True if our browser is Firefox.\n\t * @param {Boolean} isOpera True if our browser is opera.\n\t * @param {Boolean} isChrome True if our browser is Chrome.  Note that Chrome for Android returns true, but is a\n\t * completely different browser with different abilities.\n\t * @param {Boolean} isIOS True if our browser is safari for iOS devices (iPad, iPhone, and iPod).\n\t * @param {Boolean} isAndroid True if our browser is Android.\n\t * @param {Boolean} isBlackberry True if our browser is Blackberry.\n\t * @constructor\n\t * @static\n\t */\n\tfunction BrowserDetect() {\n\t\tthrow \"BrowserDetect cannot be instantiated\";\n\t};\n\n\tvar agent = BrowserDetect.agent = window.navigator.userAgent;\n\tBrowserDetect.isWindowPhone = (agent.indexOf(\"IEMobile\") > -1) || (agent.indexOf(\"Windows Phone\") > -1);\n\tBrowserDetect.isFirefox = (agent.indexOf(\"Firefox\") > -1);\n\tBrowserDetect.isOpera = (window.opera != null);\n\tBrowserDetect.isChrome = (agent.indexOf(\"Chrome\") > -1);  // NOTE that Chrome on Android returns true but is a completely different browser with different abilities\n\tBrowserDetect.isIOS = (agent.indexOf(\"iPod\") > -1 || agent.indexOf(\"iPhone\") > -1 || agent.indexOf(\"iPad\") > -1) && !BrowserDetect.isWindowPhone;\n\tBrowserDetect.isAndroid = (agent.indexOf(\"Android\") > -1) && !BrowserDetect.isWindowPhone;\n\tBrowserDetect.isBlackberry = (agent.indexOf(\"Blackberry\") > -1);\n\n\tcreatejs.BrowserDetect = BrowserDetect;\n\n}());\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n\t *\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n\t * \n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n\t * \n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n\t * \n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n\t *\n\t * <h4>Example</h4>\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\n\t *\n\t *      EventDispatcher.initialize(MyClass.prototype);\n\t *\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n\t *\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\n\t *      function handlerMethod(event) {\n\t *          console.log(event.target + \" Was Clicked\");\n\t *      }\n\t *\n\t * <b>Maintaining proper scope</b><br />\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n\t * method to subscribe to events simplifies this.\n\t *\n\t *      instance.addEventListener(\"click\", function(event) {\n\t *          console.log(instance == this); // false, scope is ambiguous.\n\t *      });\n\t *      \n\t *      instance.on(\"click\", function(event) {\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n\t *      });\n\t * \n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n\t * scope.\n\t *\n\t * <b>Browser support</b>\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n\t * requires modern browsers (IE9+).\n\t *      \n\t *\n\t * @class EventDispatcher\n\t * @constructor\n\t **/\n\tfunction EventDispatcher() {\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @protected\n\t\t * @property _listeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._listeners = null;\n\t\t\n\t\t/**\n\t\t * @protected\n\t\t * @property _captureListeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._captureListeners = null;\n\t}\n\tvar p = EventDispatcher.prototype;\n\n// static public methods:\n\t/**\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\n\t * \n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n\t * \n\t * @method initialize\n\t * @static\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n\t * prototype.\n\t **/\n\tEventDispatcher.initialize = function(target) {\n\t\ttarget.addEventListener = p.addEventListener;\n\t\ttarget.on = p.on;\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\n\t\ttarget.hasEventListener = p.hasEventListener;\n\t\ttarget.dispatchEvent = p.dispatchEvent;\n\t\ttarget._dispatchEvent = p._dispatchEvent;\n\t\ttarget.willTrigger = p.willTrigger;\n\t};\n\t\n\n// public methods:\n\t/**\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n\t * multiple callbacks getting fired.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *         // Click happened.\n\t *      }\n\t *\n\t * @method addEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\n\t **/\n\tp.addEventListener = function(type, listener, useCapture) {\n\t\tvar listeners;\n\t\tif (useCapture) {\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\n\t\t} else {\n\t\t\tlisteners = this._listeners = this._listeners||{};\n\t\t}\n\t\tvar arr = listeners[type];\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\n\t\tarr = listeners[type]; // remove may have deleted the array\n\t\tif (!arr) { listeners[type] = [listener];  }\n\t\telse { arr.push(listener); }\n\t\treturn listener;\n\t};\n\t\n\t/**\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\n\t * \n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n\t * to `on` with the same params will create multiple listeners.\n\t * \n\t * <h4>Example</h4>\n\t * \n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n\t * \t\tfunction handleClick(evt, data) {\n\t * \t\t\tdata.count -= 1;\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n\t * \t\t\tif (data.count == 0) {\n\t * \t\t\t\talert(\"clicked 3 times!\");\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\n\t * \t\t\t\t// alternately: evt.remove();\n\t * \t\t\t}\n\t * \t\t}\n\t * \n\t * @method on\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n\t **/\n\tp.on = function(type, listener, scope, once, data, useCapture) {\n\t\tif (listener.handleEvent) {\n\t\t\tscope = scope||listener;\n\t\t\tlistener = listener.handleEvent;\n\t\t}\n\t\tscope = scope||this;\n\t\treturn this.addEventListener(type, function(evt) {\n\t\t\t\tlistener.call(scope, evt, data);\n\t\t\t\tonce&&evt.remove();\n\t\t\t}, useCapture);\n\t};\n\n\t/**\n\t * Removes the specified event listener.\n\t *\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n\t * closure will not work.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.removeEventListener(\"click\", handleClick);\n\t *\n\t * @method removeEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.removeEventListener = function(type, listener, useCapture) {\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\n\t\tif (!listeners) { return; }\n\t\tvar arr = listeners[type];\n\t\tif (!arr) { return; }\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\n\t\t\tif (arr[i] == listener) {\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\n\t\t\t\telse { arr.splice(i,1); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n\t * .on method.\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n\t *\n\t * @method off\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.off = p.removeEventListener;\n\n\t/**\n\t * Removes all listeners for the specified type, or all listeners of all types.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Remove all listeners\n\t *      displayObject.removeAllEventListeners();\n\t *\n\t *      // Remove all click listeners\n\t *      displayObject.removeAllEventListeners(\"click\");\n\t *\n\t * @method removeAllEventListeners\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n\t **/\n\tp.removeAllEventListeners = function(type) {\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\n\t\telse {\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the specified event to all listeners.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Use a string event\n\t *      this.dispatchEvent(\"complete\");\n\t *\n\t *      // Use an Event instance\n\t *      var event = new createjs.Event(\"progress\");\n\t *      this.dispatchEvent(event);\n\t *\n\t * @method dispatchEvent\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n\t **/\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\n\t\tif (typeof eventObj == \"string\") {\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\n\t\t\tvar listeners = this._listeners;\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\n\t\t} else if (eventObj.target && eventObj.clone) {\n\t\t\t// redispatching an active event object, so clone it:\n\t\t\teventObj = eventObj.clone();\n\t\t}\n\t\t\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\n\n\t\tif (!eventObj.bubbles || !this.parent) {\n\t\t\tthis._dispatchEvent(eventObj, 2);\n\t\t} else {\n\t\t\tvar top=this, list=[top];\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\n\t\t\tvar i, l=list.length;\n\n\t\t\t// capture & atTarget\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\n\t\t\t}\n\t\t\t// bubbling\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\n\t\t\t}\n\t\t}\n\t\treturn !eventObj.defaultPrevented;\n\t};\n\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type.\n\t * @method hasEventListener\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\n\t **/\n\tp.hasEventListener = function(type) {\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\n\t};\n\t\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n\t * specified type is dispatched from this object, it will trigger at least one listener.\n\t * \n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n\t * event flow for a listener, not just this object.\n\t * @method willTrigger\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n\t **/\n\tp.willTrigger = function(type) {\n\t\tvar o = this;\n\t\twhile (o) {\n\t\t\tif (o.hasEventListener(type)) { return true; }\n\t\t\to = o.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[EventDispatcher]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _dispatchEvent\n\t * @param {Object | Event} eventObj\n\t * @param {Object} eventPhase\n\t * @protected\n\t **/\n\tp._dispatchEvent = function(eventObj, eventPhase) {\n\t\tvar l, arr, listeners = (eventPhase <= 2) ? this._captureListeners : this._listeners;\n\t\tif (eventObj && listeners && (arr = listeners[eventObj.type]) && (l=arr.length)) {\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\n\t\t\ttry { eventObj.eventPhase = eventPhase|0; } catch (e) {}\n\t\t\teventObj.removed = false;\n\t\t\t\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\n\t\t\t\tvar o = arr[i];\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\n\t\t\t\telse { o(eventObj); }\n\t\t\t\tif (eventObj.removed) {\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\n\t\t\t\t\teventObj.removed = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (eventPhase === 2) { this._dispatchEvent(eventObj, 2.1); }\n\t};\n\n\n\tcreatejs.EventDispatcher = EventDispatcher;\n}());\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * Contains properties and methods shared by all events for use with\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n\t * \n\t * Note that Event objects are often reused, so you should never\n\t * rely on an event object's state outside of the call stack it was received in.\n\t * @class Event\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @constructor\n\t **/\n\tfunction Event(type, bubbles, cancelable) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The type of event.\n\t\t * @property type\n\t\t * @type String\n\t\t **/\n\t\tthis.type = type;\n\t\n\t\t/**\n\t\t * The object that generated an event.\n\t\t * @property target\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.target = null;\n\t\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t * @property currentTarget\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.currentTarget = null;\n\t\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t * @property eventPhase\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.eventPhase = 0;\n\t\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t * @property bubbles\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.bubbles = !!bubbles;\n\t\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t * @property cancelable\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.cancelable = !!cancelable;\n\t\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t * @property timeStamp\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.timeStamp = (new Date()).getTime();\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property defaultPrevented\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.defaultPrevented = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t * @property propagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.propagationStopped = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property immediatePropagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.immediatePropagationStopped = false;\n\t\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t * @property removed\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.removed = false;\n\t}\n\tvar p = Event.prototype;\n\n// public methods:\n\t/**\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @method preventDefault\n\t **/\n\tp.preventDefault = function() {\n\t\tthis.defaultPrevented = this.cancelable&&true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopPropagation\n\t **/\n\tp.stopPropagation = function() {\n\t\tthis.propagationStopped = true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopImmediatePropagation\n\t **/\n\tp.stopImmediatePropagation = function() {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t};\n\t\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t * \n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t * \t\t\t// do stuff...\n\t * \t\t\tevt.remove(); // removes this listener.\n\t * \t\t});\n\t * \n\t * @method remove\n\t **/\n\tp.remove = function() {\n\t\tthis.removed = true;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Event instance.\n\t * @method clone\n\t * @return {Event} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t};\n\n\tcreatejs.Event = Event;\n}());\n\n//##############################################################################\n// ErrorEvent.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\n\t * @class ErrorEvent\n\t * @param {String} [title] The error title\n\t * @param {String} [message] The error description\n\t * @param {Object} [data] Additional error data\n\t * @constructor\n\t */\n\tfunction ErrorEvent(title, message, data) {\n\t\tthis.Event_constructor(\"error\");\n\n\t\t/**\n\t\t * The short error title, which indicates the type of error that occurred.\n\t\t * @property title\n\t\t * @type String\n\t\t */\n\t\tthis.title = title;\n\n\t\t/**\n\t\t * The verbose error message, containing details about the error.\n\t\t * @property message\n\t\t * @type String\n\t\t */\n\t\tthis.message = message;\n\n\t\t/**\n\t\t * Additional data attached to an error.\n\t\t * @property data\n\t\t * @type {Object}\n\t\t */\n\t\tthis.data = data;\n\t}\n\n\tvar p = createjs.extend(ErrorEvent, createjs.Event);\n\n\tp.clone = function() {\n\t\treturn new createjs.ErrorEvent(this.title, this.message, this.data);\n\t};\n\n\tcreatejs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\n\n}());\n\n//##############################################################################\n// ProgressEvent.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function (scope) {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\n\t * @class ProgressEvent\n\t * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\n\t * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\n\t * a percentage (between 0 and 1), it can be omitted.\n\t * @todo Consider having this event be a \"fileprogress\" event as well\n\t * @constructor\n\t */\n\tfunction ProgressEvent(loaded, total) {\n\t\tthis.Event_constructor(\"progress\");\n\n\t\t/**\n\t\t * The amount that has been loaded (out of a total amount)\n\t\t * @property loaded\n\t\t * @type {Number}\n\t\t */\n\t\tthis.loaded = loaded;\n\n\t\t/**\n\t\t * The total \"size\" of the load.\n\t\t * @property total\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t */\n\t\tthis.total = (total == null) ? 1 : total;\n\n\t\t/**\n\t\t * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\n\t\t * @property progress\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.progress = (total == 0) ? 0 : this.loaded / this.total;\n\t};\n\n\tvar p = createjs.extend(ProgressEvent, createjs.Event);\n\n\t/**\n\t * Returns a clone of the ProgressEvent instance.\n\t * @method clone\n\t * @return {ProgressEvent} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new createjs.ProgressEvent(this.loaded, this.total);\n\t};\n\n\tcreatejs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\n\n}(window));\n\n//##############################################################################\n// LoadItem.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\n\t * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\n\t * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\n\t * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\n\t * @class LoadItem\n\t * @constructor\n\t * @since 0.6.0\n\t */\n\tfunction LoadItem() {\n\t\t/**\n\t\t * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\n\t\t * string (recommended), or an HTML tag.\n\t\t * This can also be an object, but in that case it has to include a type and be handled by a plugin.\n\t\t * @property src\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.src = null;\n\n\t\t/**\n\t\t * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\n\t\t * be set manually. This is helpful in cases where a file does not have an extension.\n\t\t * @property type\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.type = null;\n\n\t\t/**\n\t\t * A string identifier which can be used to reference the loaded object. If none is provided, this will be\n\t\t * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\n\t\t * @property id\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\n\t\t * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\n\t\t * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\n\t\t * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\n\t\t * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\n\t\t * @property maintainOrder\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.maintainOrder = false;\n\n\t\t/**\n\t\t * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\n\t\t * @property callback\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.callback = null;\n\n\t\t/**\n\t\t * An arbitrary data object, which is included with the loaded object.\n\t\t * @property data\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.data = null;\n\n\t\t/**\n\t\t * The request method used for HTTP calls. Both {{#crossLink \"Methods/GET:property\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Methods/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\n\t\t * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t\t * @property method\n\t\t * @type {String}\n\t\t * @default GET\n\t\t */\n\t\tthis.method = createjs.Methods.GET;\n\n\t\t/**\n\t\t * An object hash of name/value pairs to send to the server.\n\t\t * @property values\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.values = null;\n\n\t\t/**\n\t\t * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\n\t\t * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\n\t\t * default headers by including them in your headers object.\n\t\t * @property headers\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.headers = null;\n\n\t\t/**\n\t\t * Enable credentials for XHR requests.\n\t\t * @property withCredentials\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.withCredentials = false;\n\n\t\t/**\n\t\t * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\n\t\t * based files (json, xml, text, css, js).\n\t\t * @property mimeType\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.mimeType = null;\n\n\t\t/**\n\t\t * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\n\t\t * @property crossOrigin\n\t\t * @type {boolean}\n\t\t * @default Anonymous\n\t\t */\n\t\tthis.crossOrigin = null;\n\n\t\t/**\n\t\t * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t\t * @property loadTimeout\n\t\t * @type {Number}\n\t\t * @default 8000 (8 seconds)\n\t\t */\n\t\tthis.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t};\n\n\tvar p = LoadItem.prototype = {};\n\tvar s = LoadItem;\n\n\t/**\n\t * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t * @property LOAD_TIMEOUT_DEFAULT\n\t * @type {number}\n\t * @static\n\t */\n\ts.LOAD_TIMEOUT_DEFAULT = 8000;\n\n\t/**\n\t * Create a LoadItem.\n\t * <ul>\n\t *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\n\t *     <li>LoadItem instances are returned as-is</li>\n\t *     <li>Objects are returned with any needed properties added</li>\n\t * </ul>\n\t * @method create\n\t * @param {LoadItem|String|Object} value The load item value\n\t * @returns {LoadItem|Object}\n\t * @static\n\t */\n\ts.create = function (value) {\n\t\tif (typeof value == \"string\") {\n\t\t\tvar item = new LoadItem();\n\t\t\titem.src = value;\n\t\t\treturn item;\n\t\t} else if (value instanceof s) {\n\t\t\treturn value;\n\t\t} else if (value instanceof Object && value.src) {\n\t\t\tif (value.loadTimeout == null) {\n\t\t\t\tvalue.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t\t\t}\n\t\t\treturn value;\n\t\t} else {\n\t\t\tthrow new Error(\"Type not recognized.\");\n\t\t}\n\t};\n\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\n\t * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\tcreatejs.LoadItem = s;\n\n}());\n\n//##############################################################################\n// Methods.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function() {\n\tvar s = {};\n\n\t/**\n\t * Defines a POST request, use for a method value when loading data.\n\t * @property POST\n\t * @type {string}\n\t * @default post\n\t * @static\n\t */\n\ts.POST = \"POST\";\n\n\t/**\n\t * Defines a GET request, use for a method value when loading data.\n\t * @property GET\n\t * @type {string}\n\t * @default get\n\t * @static\n\t */\n\ts.GET = \"GET\";\n\n\tcreatejs.Methods = s;\n}());\n\n//##############################################################################\n// Types.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function() {\n\tvar s = {};\n\n\t/**\n\t * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\n\t * @property BINARY\n\t * @type {String}\n\t * @default binary\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.BINARY = \"binary\";\n\n\t/**\n\t * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\n\t * &lt;style&gt; tag when loaded with tags.\n\t * @property CSS\n\t * @type {String}\n\t * @default css\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.CSS = \"css\";\n\n\t/**\n\t * The preload type for font files.\n\t * @property FONT\n\t * @type {String}\n\t * @default font\n\t * @static\n\t * @since 0.9.0\n\t */\n\ts.FONT = \"font\";\n\n\t/**\n\t * The preload type for fonts specified with CSS (such as Google fonts)\n\t * @property FONTCSS\n\t * @type {String}\n\t * @default fontcss\n\t * @static\n\t * @since 0.9.0\n\t */\n\ts.FONTCSS = \"fontcss\";\n\n\t/**\n\t * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\n\t * @property IMAGE\n\t * @type {String}\n\t * @default image\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.IMAGE = \"image\";\n\n\t/**\n\t * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\n\t * &lt;script&gt; tag.\n\t *\n\t * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\n\t * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\n\t * only tag-loaded scripts are injected.\n\t * @property JAVASCRIPT\n\t * @type {String}\n\t * @default javascript\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JAVASCRIPT = \"javascript\";\n\n\t/**\n\t * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\n\t * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\n\t * must contain a matching wrapper function.\n\t * @property JSON\n\t * @type {String}\n\t * @default json\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JSON = \"json\";\n\n\t/**\n\t * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\n\t * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\n\t * property is set to.\n\t * @property JSONP\n\t * @type {String}\n\t * @default jsonp\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JSONP = \"jsonp\";\n\n\t/**\n\t * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\n\t * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\n\t * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\n\t * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\n\t * @property MANIFEST\n\t * @type {String}\n\t * @default manifest\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.MANIFEST = \"manifest\";\n\n\t/**\n\t * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\n\t * &lt;audio&gt; tag.\n\t * @property SOUND\n\t * @type {String}\n\t * @default sound\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SOUND = \"sound\";\n\n\t/**\n\t * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\n\t * &lt;video&gt; tag.\n\t * @property VIDEO\n\t * @type {String}\n\t * @default video\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.VIDEO = \"video\";\n\n\t/**\n\t * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\n\t * @property SPRITESHEET\n\t * @type {String}\n\t * @default spritesheet\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SPRITESHEET = \"spritesheet\";\n\n\t/**\n\t * The preload type for SVG files.\n\t * @property SVG\n\t * @type {String}\n\t * @default svg\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SVG = \"svg\";\n\n\t/**\n\t * The preload type for text files, which is also the default file type if the type can not be determined. Text is\n\t * loaded as raw text.\n\t * @property TEXT\n\t * @type {String}\n\t * @default text\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.TEXT = \"text\";\n\n\t/**\n\t * The preload type for xml files. XML is loaded into an XML document.\n\t * @property XML\n\t * @type {String}\n\t * @default xml\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.XML = \"xml\";\n\n\tcreatejs.Types = s;\n}());\n\n//##############################################################################\n// Elements.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Convenience methods for creating various elements used by PrelaodJS.\n\t *\n\t * @class DomUtils\n\t */\n\tvar s = {};\n\n\ts.a = function() {\n\t\treturn s.el(\"a\");\n\t}\n\n\ts.svg = function() {\n\t\treturn s.el(\"svg\");\n\t}\n\n\ts.object = function() {\n\t\treturn s.el(\"object\");\n\t}\n\n\ts.image = function() {\n\t\treturn s.el(\"image\");\n\t}\n\n\ts.img = function() {\n\t\treturn s.el(\"img\");\n\t}\n\n\ts.style = function() {\n\t\treturn s.el(\"style\");\n\t}\n\n\ts.link = function() {\n\t\treturn s.el(\"link\");\n\t}\n\n\ts.script = function() {\n\t\treturn s.el(\"script\");\n\t}\n\n\ts.audio = function() {\n\t\treturn s.el(\"audio\");\n\t}\n\n\ts.video = function() {\n\t\treturn s.el(\"video\");\n\t}\n\n\ts.text = function(value) {\n\t\treturn document.createTextNode(value);\n\t}\n\n\ts.el = function(name) {\n\t\treturn document.createElement(name);\n\t}\n\n\tcreatejs.Elements = s;\n\n}());\n\n//##############################################################################\n// DomUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * A few utilities for interacting with the dom.\n\t * @class DomUtils\n\t */\n\tvar s = {\n\t\tcontainer: null\n\t};\n\n\ts.appendToHead = function (el) {\n\t\ts.getHead().appendChild(el);\n\t}\n\n\ts.appendToBody = function (el) {\n\t\tif (s.container == null) {\n\t\t\ts.container = document.createElement(\"div\");\n\t\t\ts.container.id = \"preloadjs-container\";\n\t\t\tvar style = s.container.style;\n\t\t\tstyle.visibility = \"hidden\";\n\t\t\tstyle.position = \"absolute\";\n\t\t\tstyle.width = s.container.style.height = \"10px\";\n\t\t\tstyle.overflow = \"hidden\";\n\t\t\tstyle.transform = style.msTransform = style.webkitTransform = style.oTransform = \"translate(-10px, -10px)\"; //LM: Not working\n\t\t\ts.getBody().appendChild(s.container);\n\t\t}\n\t\ts.container.appendChild(el);\n\t}\n\n\ts.getHead = function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}\n\n\ts.getBody = function () {\n\t\treturn document.body || document.getElementsByTagName(\"body\")[0];\n\t}\n\n\ts.removeChild = function(el) {\n\t\tif (el.parent) {\n\t\t\tel.parent.removeChild(el);\n\t\t}\n\t}\n\n\t/**\n\t * Check if item is a valid HTMLImageElement\n\t * @method isImageTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isImageTag = function(item) {\n\t\treturn item instanceof HTMLImageElement;\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLAudioElement\n\t * @method isAudioTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isAudioTag = function(item) {\n\t\tif (window.HTMLAudioElement) {\n\t\t\treturn item instanceof HTMLAudioElement;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLVideoElement\n\t * @method isVideoTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isVideoTag = function(item) {\n\t\tif (window.HTMLVideoElement) {\n\t\t\treturn item instanceof HTMLVideoElement;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tcreatejs.DomUtils = s;\n\n}());\n\n//##############################################################################\n// RequestUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Utilities that assist with parsing load items, and determining file types, etc.\n\t * @class RequestUtils\n\t */\n\tvar s = {};\n\n\t/**\n\t * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\n\t * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\n\t * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\n\t * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\n\t * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t * @method isBinary\n\t * @param {String} type The item type.\n\t * @return {Boolean} If the specified type is binary.\n\t * @static\n\t */\n\ts.isBinary = function (type) {\n\t\tswitch (type) {\n\t\t\tcase createjs.Types.IMAGE:\n\t\t\tcase createjs.Types.BINARY:\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\n\t * @method isText\n\t * @param {String} type The item type.\n\t * @return {Boolean} If the specified type is text.\n\t * @static\n\t */\n\ts.isText = function (type) {\n\t\tswitch (type) {\n\t\t\tcase createjs.Types.TEXT:\n\t\t\tcase createjs.Types.JSON:\n\t\t\tcase createjs.Types.MANIFEST:\n\t\t\tcase createjs.Types.XML:\n\t\t\tcase createjs.Types.CSS:\n\t\t\tcase createjs.Types.SVG:\n\t\t\tcase createjs.Types.JAVASCRIPT:\n\t\t\tcase createjs.Types.SPRITESHEET:\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\n\t * if it is an unusual extension.\n\t * @method getTypeByExtension\n\t * @param {String} extension The file extension to use to determine the load type.\n\t * @return {String} The determined load type (for example, `createjs.Types.IMAGE`). Will return `null` if\n\t * the type can not be determined by the extension.\n\t * @static\n\t */\n\ts.getTypeByExtension = function (extension) {\n\t\tif (extension == null) {\n\t\t\treturn createjs.Types.TEXT;\n\t\t}\n\n\t\tswitch (extension.toLowerCase()) {\n\t\t\tcase \"jpeg\":\n\t\t\tcase \"jpg\":\n\t\t\tcase \"gif\":\n\t\t\tcase \"png\":\n\t\t\tcase \"webp\":\n\t\t\tcase \"bmp\":\n\t\t\t\treturn createjs.Types.IMAGE;\n\t\t\tcase \"ogg\":\n\t\t\tcase \"mp3\":\n\t\t\tcase \"webm\":\n\t\t\t\treturn createjs.Types.SOUND;\n\t\t\tcase \"mp4\":\n\t\t\tcase \"webm\":\n\t\t\tcase \"ts\":\n\t\t\t\treturn createjs.Types.VIDEO;\n\t\t\tcase \"json\":\n\t\t\t\treturn createjs.Types.JSON;\n\t\t\tcase \"xml\":\n\t\t\t\treturn createjs.Types.XML;\n\t\t\tcase \"css\":\n\t\t\t\treturn createjs.Types.CSS;\n\t\t\tcase \"js\":\n\t\t\t\treturn createjs.Types.JAVASCRIPT;\n\t\t\tcase 'svg':\n\t\t\t\treturn createjs.Types.SVG;\n\t\t\tdefault:\n\t\t\t\treturn createjs.Types.TEXT;\n\t\t}\n\t};\n\n\tcreatejs.RequestUtils = s;\n\n}());\n\n//##############################################################################\n// URLUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Utilities that assist with parsing load items, and determining file types, etc.\n\t * @class URLUtils\n\t */\n\tvar s = {};\n\n\t/**\n\t * The Regular Expression used to test file URLS for an absolute path.\n\t * @property ABSOLUTE_PATH\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\n\n\t/**\n\t * The Regular Expression used to test file URLS for a relative path.\n\t * @property RELATIVE_PATH\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.RELATIVE_PATT = (/^[./]*?\\//i);\n\n\t/**\n\t * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\n\t * removed.\n\t * @property EXTENSION_PATT\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\n\n\t/**\n\t * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\n\t * <ul>\n\t *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\n\t *     `//networkPath`)</li>\n\t *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\n\t *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\n\t *     the file path is expected to follow the format `name.ext`.</li>\n\t * </ul>\n\t *\n\t * @method parseURI\n\t * @param {String} path\n\t * @returns {Object} An Object with an `absolute` and `relative` Boolean values,\n\t * \tthe pieces of the path (protocol, hostname, port, pathname, search, hash, host)\n\t * \tas well as an optional 'extension` property, which is the lowercase extension.\n\t *\n\t * @static\n\t */\n\ts.parseURI = function (path) {\n\t\tvar info = {\n\t\t\tabsolute: false,\n\t\t\trelative: false,\n\t\t\tprotocol: null,\n\t\t\thostname: null,\n\t\t\tport: null,\n\t\t\tpathname: null,\n\t\t\tsearch: null,\n\t\t\thash: null,\n\t\t\thost: null\n\t\t};\n\n\t\tif (path == null) { return info; }\n\n\t\t// Inject the path parts.\n\t\tvar parser = createjs.Elements.a();\n\t\tparser.href = path;\n\n\t\tfor (var n in info) {\n\t\t\tif (n in parser) {\n\t\t\t\tinfo[n] = parser[n];\n\t\t\t}\n\t\t}\n\n\t\t// Drop the query string\n\t\tvar queryIndex = path.indexOf(\"?\");\n\t\tif (queryIndex > -1) {\n\t\t\tpath = path.substr(0, queryIndex);\n\t\t}\n\n\t\t// Absolute\n\t\tvar match;\n\t\tif (s.ABSOLUTE_PATT.test(path)) {\n\t\t\tinfo.absolute = true;\n\n\t\t\t// Relative\n\t\t} else if (s.RELATIVE_PATT.test(path)) {\n\t\t\tinfo.relative = true;\n\t\t}\n\n\t\t// Extension\n\t\tif (match = path.match(s.EXTENSION_PATT)) {\n\t\t\tinfo.extension = match[1].toLowerCase();\n\t\t}\n\n\t\treturn info;\n\t};\n\n\t/**\n\t * Formats an object into a query string for either a POST or GET request.\n\t * @method formatQueryString\n\t * @param {Object} data The data to convert to a query string.\n\t * @param {Array} [query] Existing name/value pairs to append on to this query.\n\t * @static\n\t */\n\ts.formatQueryString = function (data, query) {\n\t\tif (data == null) {\n\t\t\tthrow new Error(\"You must specify data.\");\n\t\t}\n\t\tvar params = [];\n\t\tfor (var n in data) {\n\t\t\tparams.push(n + \"=\" + escape(data[n]));\n\t\t}\n\t\tif (query) {\n\t\t\tparams = params.concat(query);\n\t\t}\n\t\treturn params.join(\"&\");\n\t};\n\n\t/**\n\t * A utility method that builds a file path using a source and a data object, and formats it into a new path.\n\t * @method buildURI\n\t * @param {String} src The source path to add values to.\n\t * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\n\t * path will be preserved.\n\t * @returns {string} A formatted string that contains the path and the supplied parameters.\n\t * @static\n\t */\n\ts.buildURI = function (src, data) {\n\t\tif (data == null) {\n\t\t\treturn src;\n\t\t}\n\n\t\tvar query = [];\n\t\tvar idx = src.indexOf(\"?\");\n\n\t\tif (idx != -1) {\n\t\t\tvar q = src.slice(idx + 1);\n\t\t\tquery = query.concat(q.split(\"&\"));\n\t\t}\n\n\t\tif (idx != -1) {\n\t\t\treturn src.slice(0, idx) + \"?\" + this.formatQueryString(data, query);\n\t\t} else {\n\t\t\treturn src + \"?\" + this.formatQueryString(data, query);\n\t\t}\n\t};\n\n\t/**\n\t * @method isCrossDomain\n\t * @param {LoadItem|Object} item A load item with a `src` property.\n\t * @return {Boolean} If the load item is loading from a different domain than the current location.\n\t * @static\n\t */\n\ts.isCrossDomain = function (item) {\n\t\tvar target = createjs.Elements.a();\n\t\ttarget.href = item.src;\n\n\t\tvar host = createjs.Elements.a();\n\t\thost.href = location.href;\n\n\t\tvar crossdomain = (target.hostname != \"\") &&\n\t\t\t(target.port != host.port ||\n\t\t\ttarget.protocol != host.protocol ||\n\t\t\ttarget.hostname != host.hostname);\n\t\treturn crossdomain;\n\t};\n\n\t/**\n\t * @method isLocal\n\t * @param {LoadItem|Object} item A load item with a `src` property\n\t * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\n\t * well.\n\t * @static\n\t */\n\ts.isLocal = function (item) {\n\t\tvar target = createjs.Elements.a();\n\t\ttarget.href = item.src;\n\t\treturn target.hostname == \"\" && target.protocol == \"file:\";\n\t};\n\n\tcreatejs.URLUtils = s;\n\n}());\n\n//##############################################################################\n// AbstractLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\n\t * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\n\t * @class AbstractLoader\n\t * @param {LoadItem|object|string} loadItem The item to be loaded.\n\t * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\n\t * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\n\t * other, so this is a suggested directive.\n\t * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\n\t * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\n\t * @extends EventDispatcher\n\t */\n\tfunction AbstractLoader(loadItem, preferXHR, type) {\n\t\tthis.EventDispatcher_constructor();\n\n\t\t// public properties\n\t\t/**\n\t\t * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\n\t\t * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\n\t\t * @property loaded\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.loaded = false;\n\n\t\t/**\n\t\t * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\n\t\t * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\n\t\t * instead.\n\t\t * @property canceled\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @readonly\n\t\t */\n\t\tthis.canceled = false;\n\n\t\t/**\n\t\t * The current load progress (percentage) for this item. This will be a number between 0 and 1.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     var queue = new createjs.LoadQueue();\n\t\t *     queue.loadFile(\"largeImage.png\");\n\t\t *     queue.on(\"progress\", function() {\n\t\t *         console.log(\"Progress:\", queue.progress, event.progress);\n\t\t *     });\n\t\t *\n\t\t * @property progress\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.progress = 0;\n\n\t\t/**\n\t\t * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\n\t\t * supported types.\n\t\t * @property type\n\t\t * @type {String}\n\t\t */\n\t\tthis.type = type;\n\n\t\t/**\n\t\t * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\n\t\t * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\n\t\t * can be overridden to provide custom formatting.\n\t\t *\n\t\t * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\n\t\t * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\n\t\t * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\n\t\t * called in the current scope, as well as the success and error callbacks.\n\t\t *\n\t\t * <h4>Example asynchronous resultFormatter</h4>\n\t\t *\n\t\t * \tfunction _formatResult(loader) {\n\t\t * \t\treturn function(success, error) {\n\t\t * \t\t\tif (errorCondition) { error(errorDetailEvent); }\n\t\t * \t\t\tsuccess(result);\n\t\t * \t\t}\n\t\t * \t}\n\t\t * @property resultFormatter\n\t\t * @type {Function}\n\t\t * @default null\n\t\t */\n\t\tthis.resultFormatter = null;\n\n\t\t// protected properties\n\t\t/**\n\t\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t\t * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\n\t\t * @property _item\n\t\t * @type {LoadItem|Object}\n\t\t * @private\n\t\t */\n\t\tif (loadItem) {\n\t\t\tthis._item = createjs.LoadItem.create(loadItem);\n\t\t} else {\n\t\t\tthis._item = null;\n\t\t}\n\n\t\t/**\n\t\t * Whether the loader will try and load content using XHR (true) or HTML tags (false).\n\t\t * @property _preferXHR\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._preferXHR = preferXHR;\n\n\t\t/**\n\t\t * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\n\t\t * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\n\t\t * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\n\t\t * @property _result\n\t\t * @type {Object|String}\n\t\t * @private\n\t\t */\n\t\tthis._result = null;\n\n\t\t/**\n\t\t * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\n\t\t * method, and passing `true`.\n\t\t * @property _rawResult\n\t\t * @type {Object|String}\n\t\t * @private\n\t\t */\n\t\tthis._rawResult = null;\n\n\t\t/**\n\t\t * A list of items that loaders load behind the scenes. This does not include the main item the loader is\n\t\t * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t * @property _loadItems\n\t\t * @type {null}\n\t\t * @protected\n\t\t */\n\t\tthis._loadedItems = null;\n\n\t\t/**\n\t\t * The attribute the items loaded using tags use for the source.\n\t\t * @type {string}\n\t\t * @default null\n\t\t * @private\n\t\t */\n\t\tthis._tagSrcAttribute = null;\n\n\t\t/**\n\t\t * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\n\t\t * @property _tag\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._tag = null;\n\t};\n\n\tvar p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\n\tvar s = AbstractLoader;\n\n\t// Remove these @deprecated properties after 1.0\n\ttry {\n\t\tObject.defineProperties(s, {\n\t\t\tPOST: { get: createjs.deprecate(function() { return createjs.Methods.POST; }, \"AbstractLoader.POST\") },\n\t\t\tGET: { get: createjs.deprecate(function() { return createjs.Methods.GET; }, \"AbstractLoader.GET\") },\n\n\t\t\tBINARY: { get: createjs.deprecate(function() { return createjs.Types.BINARY; }, \"AbstractLoader.BINARY\") },\n\t\t\tCSS: { get: createjs.deprecate(function() { return createjs.Types.CSS; }, \"AbstractLoader.CSS\") },\n\t\t\tFONT: { get: createjs.deprecate(function() { return createjs.Types.FONT; }, \"AbstractLoader.FONT\") },\n\t\t\tFONTCSS: { get: createjs.deprecate(function() { return createjs.Types.FONTCSS; }, \"AbstractLoader.FONTCSS\") },\n\t\t\tIMAGE: { get: createjs.deprecate(function() { return createjs.Types.IMAGE; }, \"AbstractLoader.IMAGE\") },\n\t\t\tJAVASCRIPT: { get: createjs.deprecate(function() { return createjs.Types.JAVASCRIPT; }, \"AbstractLoader.JAVASCRIPT\") },\n\t\t\tJSON: { get: createjs.deprecate(function() { return createjs.Types.JSON; }, \"AbstractLoader.JSON\") },\n\t\t\tJSONP: { get: createjs.deprecate(function() { return createjs.Types.JSONP; }, \"AbstractLoader.JSONP\") },\n\t\t\tMANIFEST: { get: createjs.deprecate(function() { return createjs.Types.MANIFEST; }, \"AbstractLoader.MANIFEST\") },\n\t\t\tSOUND: { get: createjs.deprecate(function() { return createjs.Types.SOUND; }, \"AbstractLoader.SOUND\") },\n\t\t\tVIDEO: { get: createjs.deprecate(function() { return createjs.Types.VIDEO; }, \"AbstractLoader.VIDEO\") },\n\t\t\tSPRITESHEET: { get: createjs.deprecate(function() { return createjs.Types.SPRITESHEET; }, \"AbstractLoader.SPRITESHEET\") },\n\t\t\tSVG: { get: createjs.deprecate(function() { return createjs.Types.SVG; }, \"AbstractLoader.SVG\") },\n\t\t\tTEXT: { get: createjs.deprecate(function() { return createjs.Types.TEXT; }, \"AbstractLoader.TEXT\") },\n\t\t\tXML: { get: createjs.deprecate(function() { return createjs.Types.XML; }, \"AbstractLoader.XML\") }\n\t\t});\n\t} catch (e) {}\n\n// Events\n\t/**\n\t * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\n\t * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t * @event progress\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\n\t * @event loadstart\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.3.1\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\n\t * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\n\t * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t * @event error\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\n\t * This enables loaders to maintain internal queues, and surface file load errors.\n\t * @event fileerror\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"fileerror\")\n\t * @param {LoadItem|object} The item that encountered the error\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\n\t * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\n\t * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\n\t * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"fileload\")\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a `src` property.\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t * to a usable object.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\n\t * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\n\t * @event initialize\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"initialize\")\n\t * @param {AbstractLoader} loader The loader that has been initialized.\n\t */\n\n\n\t/**\n\t * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\n\t * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\n\t * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t * @method getItem\n\t * @return {Object} The manifest item that this loader is responsible for loading.\n\t * @since 0.6.0\n\t */\n\tp.getItem = function () {\n\t\treturn this._item;\n\t};\n\n\t/**\n\t * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\n\t * event is dispatched.\n\t * @method getResult\n\t * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\n\t * data (if it exists).\n\t * @return {Object}\n\t * @since 0.6.0\n\t */\n\tp.getResult = function (raw) {\n\t\treturn raw ? this._rawResult : this._result;\n\t};\n\n\t/**\n\t * Return the `tag` this object creates or uses for loading.\n\t * @method getTag\n\t * @return {Object} The tag instance\n\t * @since 0.6.0\n\t */\n\tp.getTag = function () {\n\t\treturn this._tag;\n\t};\n\n\t/**\n\t * Set the `tag` this item uses for loading.\n\t * @method setTag\n\t * @param {Object} tag The tag instance\n\t * @since 0.6.0\n\t */\n\tp.setTag = function(tag) {\n\t  this._tag = tag;\n\t};\n\n\t/**\n\t * Begin loading the item. This method is required when using a loader by itself.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *      queue.on(\"complete\", handleComplete);\n\t *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\n\t *      queue.load();\n\t *\n\t * @method load\n\t */\n\tp.load = function () {\n\t\tthis._createRequest();\n\n\t\tthis._request.on(\"complete\", this, this);\n\t\tthis._request.on(\"progress\", this, this);\n\t\tthis._request.on(\"loadStart\", this, this);\n\t\tthis._request.on(\"abort\", this, this);\n\t\tthis._request.on(\"timeout\", this, this);\n\t\tthis._request.on(\"error\", this, this);\n\n\t\tvar evt = new createjs.Event(\"initialize\");\n\t\tevt.loader = this._request;\n\t\tthis.dispatchEvent(evt);\n\n\t\tthis._request.load();\n\t};\n\n\t/**\n\t * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\n\t * the background), but events will not longer be dispatched.\n\t * @method cancel\n\t */\n\tp.cancel = function () {\n\t\tthis.canceled = true;\n\t\tthis.destroy();\n\t};\n\n\t/**\n\t * Clean up the loader.\n\t * @method destroy\n\t */\n\tp.destroy = function() {\n\t\tif (this._request) {\n\t\t\tthis._request.removeAllEventListeners();\n\t\t\tthis._request.destroy();\n\t\t}\n\n\t\tthis._request = null;\n\n\t\tthis._item = null;\n\t\tthis._rawResult = null;\n\t\tthis._result = null;\n\n\t\tthis._loadItems = null;\n\n\t\tthis.removeAllEventListeners();\n\t};\n\n\t/**\n\t * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t * to expose items it loads internally.\n\t * @method getLoadedItems\n\t * @return {Array} A list of the items loaded by the loader.\n\t * @since 0.6.0\n\t */\n\tp.getLoadedItems = function () {\n\t\treturn this._loadedItems;\n\t};\n\n\n\t// Private methods\n\t/**\n\t * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\n\t * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\n\t * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\n\t * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\n\t * @method _createRequest\n\t * @protected\n\t */\n\tp._createRequest = function() {\n\t\tif (!this._preferXHR) {\n\t\t\tthis._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t} else {\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t}\n\t};\n\n\t/**\n\t * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\n\t * by loaders that require tag loading.\n\t * @method _createTag\n\t * @param {String} src The tag source\n\t * @return {HTMLElement} The tag that was created\n\t * @protected\n\t */\n\tp._createTag = function(src) { return null; };\n\n\t/**\n\t * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendLoadStart\n\t * @protected\n\t */\n\tp._sendLoadStart = function () {\n\t\tif (this._isCanceled()) { return; }\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\n\t * @method _sendProgress\n\t * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\n\t * and <code>total</code> properties.\n\t * @protected\n\t */\n\tp._sendProgress = function (value) {\n\t\tif (this._isCanceled()) { return; }\n\t\tvar event = null;\n\t\tif (typeof(value) == \"number\") {\n\t\t\tthis.progress = value;\n\t\t\tevent = new createjs.ProgressEvent(this.progress);\n\t\t} else {\n\t\t\tevent = value;\n\t\t\tthis.progress = value.loaded / value.total;\n\t\t\tevent.progress = this.progress;\n\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t}\n\t\tthis.hasEventListener(\"progress\") && this.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\n\t * @method _sendComplete\n\t * @protected\n\t */\n\tp._sendComplete = function () {\n\t\tif (this._isCanceled()) { return; }\n\n\t\tthis.loaded = true;\n\n\t\tvar event = new createjs.Event(\"complete\");\n\t\tevent.rawResult = this._rawResult;\n\n\t\tif (this._result != null) {\n\t\t\tevent.result = this._result;\n\t\t}\n\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendError\n\t * @param {ErrorEvent} event The event object containing specific error properties.\n\t * @protected\n\t */\n\tp._sendError = function (event) {\n\t\tif (this._isCanceled() || !this.hasEventListener(\"error\")) { return; }\n\t\tif (event == null) {\n\t\t\tevent = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\n\t\t}\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\n\t * do not cause issues after the queue has been cleaned up.\n\t * @method _isCanceled\n\t * @return {Boolean} If the loader has been canceled.\n\t * @protected\n\t */\n\tp._isCanceled = function () {\n\t\tif (window.createjs == null || this.canceled) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * A custom result formatter function, which is called just before a request dispatches its complete event. Most\n\t * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\n\t * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\n\t * @property resultFormatter\n\t * @type Function\n\t * @return {Object} The formatted result\n\t * @since 0.6.0\n\t */\n\tp.resultFormatter = null;\n\n\t/**\n\t * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\n\t * this method can be overridden for custom behaviours.\n\t * @method handleEvent\n\t * @param {Event} event The event that the internal request dispatches.\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target._response;\n\t\t\t\tvar result = this.resultFormatter && this.resultFormatter(this);\n\t\t\t\t// The resultFormatter is asynchronous\n\t\t\t\tif (result instanceof Function) {\n\t\t\t\t\tresult.call(this,\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatSuccess, this),\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatFailed, this)\n\t\t\t\t\t);\n\t\t\t\t// The result formatter is synchronous\n\t\t\t\t} else {\n\t\t\t\t\tthis._result =  result || this._rawResult;\n\t\t\t\t\tthis._sendComplete();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"progress\":\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\tbreak;\n\t\t\tcase \"error\":\n\t\t\t\tthis._sendError(event);\n\t\t\t\tbreak;\n\t\t\tcase \"loadstart\":\n\t\t\t\tthis._sendLoadStart();\n\t\t\t\tbreak;\n\t\t\tcase \"abort\":\n\t\t\tcase \"timeout\":\n\t\t\t\tif (!this._isCanceled()) {\n\t\t\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t * functions.\n\t * @method _resultFormatSuccess\n\t * @param {Object} result The formatted result\n\t * @private\n\t */\n\tp._resultFormatSuccess = function (result) {\n\t\tthis._result = result;\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t * functions.\n\t * @method _resultFormatSuccess\n\t * @param {Object} error The error event\n\t * @private\n\t */\n\tp._resultFormatFailed = function (event) {\n\t\tthis._sendError(event);\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function () {\n\t\treturn \"[PreloadJS AbstractLoader]\";\n\t};\n\n\tcreatejs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// AbstractMediaLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\n\t * handle HTML media elements, such as Video and Audio.\n\t * @class AbstractMediaLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction AbstractMediaLoader(loadItem, preferXHR, type) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, type);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\n        this.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\n\n\t// static properties\n\t// public methods\n\tp.load = function () {\n\t\t// TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\n\t\tif (!this._tag) {\n\t\t\tthis._tag = this._createTag(this._item.src);\n\t\t}\n\n\t\tthis._tag.preload = \"auto\";\n\t\tthis._tag.load();\n\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\t/**\n\t * Creates a new tag for loading if it doesn't exist yet.\n\t * @method _createTag\n\t * @private\n\t */\n\tp._createTag = function () {};\n\n\n\tp._createRequest = function() {\n\t\tif (!this._preferXHR) {\n\t\t\tthis._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t} else {\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t}\n\t};\n\n    // protected methods\n    /**\n     * Before the item loads, set its mimeType and responseType.\n     * @property _updateXHR\n     * @param {Event} event\n     * @private\n     */\n    p._updateXHR = function (event) {\n        // Only exists for XHR\n        if (event.loader.setResponseType) {\n            event.loader.setResponseType(\"blob\");\n        }\n    };\n\n\t/**\n\t * The result formatter for media files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLVideoElement|HTMLAudioElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\tthis._tag.onstalled = null;\n\t\tif (this._preferXHR) {\n            var URL = window.URL || window.webkitURL;\n            var result = loader.getResult(true);\n\n\t\t\tloader.getTag().src = URL.createObjectURL(result);\n\t\t}\n\t\treturn loader.getTag();\n\t};\n\n\tcreatejs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// AbstractRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\n\t * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\n\t * hood to get data.\n\t * @class AbstractRequest\n\t * @param {LoadItem} item\n\t * @constructor\n\t */\n\tvar AbstractRequest = function (item) {\n\t\tthis._item = item;\n\t};\n\n\tvar p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\n\n\t// public methods\n\t/**\n\t * Begin a load.\n\t * @method load\n\t */\n\tp.load =  function() {};\n\n\t/**\n\t * Clean up a request.\n\t * @method destroy\n\t */\n\tp.destroy = function() {};\n\n\t/**\n\t * Cancel an in-progress request.\n\t * @method cancel\n\t */\n\tp.cancel = function() {};\n\n\tcreatejs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// TagRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\n\t * @class TagRequest\n\t * @param {LoadItem} loadItem\n\t * @param {HTMLElement} tag\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t */\n\tfunction TagRequest(loadItem, tag, srcAttribute) {\n\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t// protected properties\n\t\t/**\n\t\t * The HTML tag instance that is used to load.\n\t\t * @property _tag\n\t\t * @type {HTMLElement}\n\t\t * @protected\n\t\t */\n\t\tthis._tag = tag;\n\n\t\t/**\n\t\t * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t\t * @property _tagSrcAttribute\n\t\t * @type {String}\n\t\t * @protected\n\t\t */\n\t\tthis._tagSrcAttribute = srcAttribute;\n\n\t\t/**\n\t\t * A method closure used for handling the tag load event.\n\t\t * @property _loadedHandler\n\t\t * @type {Function}\n\t\t * @private\n\t\t */\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\n\t\t/**\n\t\t * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\n\t\t * @property _addedToDOM\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._addedToDOM = false;\n\n\t};\n\n\tvar p = createjs.extend(TagRequest, createjs.AbstractRequest);\n\n\t// public methods\n\tp.load = function () {\n\t\tthis._tag.onload = createjs.proxy(this._handleTagComplete, this);\n\t\tthis._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\n\t\tthis._tag.onerror = createjs.proxy(this._handleError, this);\n\n\t\tvar evt = new createjs.Event(\"initialize\");\n\t\tevt.loader = this._tag;\n\n\t\tthis.dispatchEvent(evt);\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\tthis._tag[this._tagSrcAttribute] = this._item.src;\n\n\t\t// wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\n\t\tif (this._tag.parentNode == null) {\n\t\t\tcreatejs.DomUtils.appendToBody(this._tag);\n\t\t\tthis._addedToDOM = true;\n\t\t}\n\t};\n\n\tp.destroy = function() {\n\t\tthis._clean();\n\t\tthis._tag = null;\n\n\t\tthis.AbstractRequest_destroy();\n\t};\n\n\t// private methods\n\t/**\n\t * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\n\t * and LINK tags), but other cases may exist.\n\t * @method _handleReadyStateChange\n\t * @private\n\t */\n\tp._handleReadyStateChange = function () {\n\t\tclearTimeout(this._loadTimeout);\n\t\t// This is strictly for tags in browsers that do not support onload.\n\t\tvar tag = this._tag;\n\n\t\t// Complete is for old IE support.\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\tthis._handleTagComplete();\n\t\t}\n\t};\n\n\t/**\n\t * Handle any error events from the tag.\n\t * @method _handleError\n\t * @protected\n\t */\n\tp._handleError = function() {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(\"error\");\n\t};\n\n\t/**\n\t * Handle the tag's onload callback.\n\t * @method _handleTagComplete\n\t * @private\n\t */\n\tp._handleTagComplete = function () {\n\t\tthis._rawResult = this._tag;\n\t\tthis._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\n\n\t\tthis._clean();\n\n\t\tthis.dispatchEvent(\"complete\");\n\t};\n\n\t/**\n\t * The tag request has not loaded within the time specified in loadTimeout.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.Event(\"timeout\"));\n\t};\n\n\t/**\n\t * Remove event listeners, but don't destroy the request object\n\t * @method _clean\n\t * @private\n\t */\n\tp._clean = function() {\n\t\tthis._tag.onload = null;\n\t\tthis._tag.onreadystatechange = null;\n\t\tthis._tag.onerror = null;\n\t\tif (this._addedToDOM && this._tag.parentNode != null) {\n\t\t\tthis._tag.parentNode.removeChild(this._tag);\n\t\t}\n\t\tclearTimeout(this._loadTimeout);\n\t};\n\n\t/**\n\t * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\n\t * that is already in a load, but not complete.\n\t * @method _handleStalled\n\t * @private\n\t */\n\tp._handleStalled = function () {\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t};\n\n\tcreatejs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\n\n}());\n\n//##############################################################################\n// MediaTagRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\n\t * @class MediaTagRequest\n\t * @param {LoadItem} loadItem\n\t * @param {HTMLAudioElement|HTMLVideoElement} tag\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t * @constructor\n\t */\n\tfunction MediaTagRequest(loadItem, tag, srcAttribute) {\n\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t// protected properties\n\t\tthis._tag = tag;\n\t\tthis._tagSrcAttribute = srcAttribute;\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\t};\n\n\tvar p = createjs.extend(MediaTagRequest, createjs.TagRequest);\n\tvar s = MediaTagRequest;\n\n\t// public methods\n\tp.load = function () {\n\t\tvar sc = createjs.proxy(this._handleStalled, this);\n\t\tthis._stalledCallback = sc;\n\n\t\tvar pc = createjs.proxy(this._handleProgress, this);\n\t\tthis._handleProgress = pc;\n\n\t\tthis._tag.addEventListener(\"stalled\", sc);\n\t\tthis._tag.addEventListener(\"progress\", pc);\n\n\t\t// This will tell us when audio is buffered enough to play through, but not when its loaded.\n\t\t// The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\n\t\tthis._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\n\n\t\tthis.TagRequest_load();\n\t};\n\n\t// private methods\n\tp._handleReadyStateChange = function () {\n\t\tclearTimeout(this._loadTimeout);\n\t\t// This is strictly for tags in browsers that do not support onload.\n\t\tvar tag = this._tag;\n\n\t\t// Complete is for old IE support.\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\tthis._handleTagComplete();\n\t\t}\n\t};\n\n\tp._handleStalled = function () {\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t};\n\n\t/**\n\t * An XHR request has reported progress.\n\t * @method _handleProgress\n\t * @param {Object} event The XHR progress event.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t}\n\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\t// protected methods\n\tp._clean = function () {\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\tthis._tag.removeEventListener(\"stalled\", this._stalledCallback);\n\t\tthis._tag.removeEventListener(\"progress\", this._progressCallback);\n\n\t\tthis.TagRequest__clean();\n\t};\n\n\tcreatejs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\n\n}());\n\n//##############################################################################\n// XHRRequest.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\n\t * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\n\t * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\n\t * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\n\t * cross-domain loading.\n\t * @class XHRRequest\n\t * @constructor\n\t * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * for an overview of supported file properties.\n\t * @extends AbstractLoader\n\t */\n\tfunction XHRRequest (item) {\n\t\tthis.AbstractRequest_constructor(item);\n\n\t\t// protected properties\n\t\t/**\n\t\t * A reference to the XHR request used to load the content.\n\t\t * @property _request\n\t\t * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\n\t\t * @private\n\t\t */\n\t\tthis._request = null;\n\n\t\t/**\n\t\t * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\n\t\t * typically IE9).\n\t\t * @property _loadTimeout\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\t\tthis._loadTimeout = null;\n\n\t\t/**\n\t\t * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\n\t\t * the version, so we use capabilities to make a best guess.\n\t\t * @property _xhrLevel\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @private\n\t\t */\n\t\tthis._xhrLevel = 1;\n\n\t\t/**\n\t\t * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\n\t\t * null until the file is loaded.\n\t\t * @property _response\n\t\t * @type {mixed}\n\t\t * @private\n\t\t */\n\t\tthis._response = null;\n\n\t\t/**\n\t\t * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\n\t\t * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\n\t\t * want to access the raw content as it was loaded.\n\t\t * @property _rawResponse\n\t\t * @type {String|Object}\n\t\t * @private\n\t\t */\n\t\tthis._rawResponse = null;\n\n\t\tthis._canceled = false;\n\n\t\t// Setup our event handlers now.\n\t\tthis._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\n\t\tthis._handleProgressProxy = createjs.proxy(this._handleProgress, this);\n\t\tthis._handleAbortProxy = createjs.proxy(this._handleAbort, this);\n\t\tthis._handleErrorProxy = createjs.proxy(this._handleError, this);\n\t\tthis._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\n\t\tthis._handleLoadProxy = createjs.proxy(this._handleLoad, this);\n\t\tthis._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\n\n\t\tif (!this._createXHR(item)) {\n\t\t\t//TODO: Throw error?\n\t\t}\n\t};\n\n\tvar p = createjs.extend(XHRRequest, createjs.AbstractRequest);\n\n// static properties\n\t/**\n\t * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\n\t * @property ACTIVEX_VERSIONS\n\t * @type {Array}\n\t * @since 0.4.2\n\t * @private\n\t */\n\tXHRRequest.ACTIVEX_VERSIONS = [\n\t\t\"Msxml2.XMLHTTP.6.0\",\n\t\t\"Msxml2.XMLHTTP.5.0\",\n\t\t\"Msxml2.XMLHTTP.4.0\",\n\t\t\"MSXML2.XMLHTTP.3.0\",\n\t\t\"MSXML2.XMLHTTP\",\n\t\t\"Microsoft.XMLHTTP\"\n\t];\n\n// Public methods\n\t/**\n\t * Look up the loaded result.\n\t * @method getResult\n\t * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t * returned instead.\n\t * @return {Object} A result object containing the content that was loaded, such as:\n\t * <ul>\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\n\t *      HTML head.</li>\n\t *      <li>A style tag for CSS (&lt;style /&gt;)</li>\n\t *      <li>Raw text for TEXT</li>\n\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t *      <li>An XML document</li>\n\t *      <li>An binary arraybuffer loaded by XHR</li>\n\t * </ul>\n\t * Note that if a raw result is requested, but not found, the result will be returned instead.\n\t */\n\tp.getResult = function (raw) {\n\t\tif (raw && this._rawResponse) {\n\t\t\treturn this._rawResponse;\n\t\t}\n\t\treturn this._response;\n\t};\n\n\t// Overrides abstract method in AbstractRequest\n\tp.cancel = function () {\n\t\tthis.canceled = true;\n\t\tthis._clean();\n\t\tthis._request.abort();\n\t};\n\n\t// Overrides abstract method in AbstractLoader\n\tp.load = function () {\n\t\tif (this._request == null) {\n\t\t\tthis._handleError();\n\t\t\treturn;\n\t\t}\n\n\t\t//Events\n\t\tif (this._request.addEventListener != null) {\n\t\t\tthis._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\n\t\t\tthis._request.addEventListener(\"progress\", this._handleProgressProxy, false);\n\t\t\tthis._request.addEventListener(\"abort\", this._handleAbortProxy, false);\n\t\t\tthis._request.addEventListener(\"error\", this._handleErrorProxy, false);\n\t\t\tthis._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\n\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\tthis._request.addEventListener(\"load\", this._handleLoadProxy, false);\n\t\t\tthis._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\n\t\t} else {\n\t\t\t// IE9 support\n\t\t\tthis._request.onloadstart = this._handleLoadStartProxy;\n\t\t\tthis._request.onprogress = this._handleProgressProxy;\n\t\t\tthis._request.onabort = this._handleAbortProxy;\n\t\t\tthis._request.onerror = this._handleErrorProxy;\n\t\t\tthis._request.ontimeout = this._handleTimeoutProxy;\n\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\tthis._request.onload = this._handleLoadProxy;\n\t\t\tthis._request.onreadystatechange = this._handleReadyStateChangeProxy;\n\t\t}\n\n\t\t// Set up a timeout if we don't have XHR2\n\t\tif (this._xhrLevel == 1) {\n\t\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\t\t}\n\n\t\t// Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\n\t\ttry {\n\t\t\tif (!this._item.values) {\n\t\t\t\tthis._request.send();\n\t\t\t} else {\n\t\t\t\tthis._request.send(createjs.URLUtils.formatQueryString(this._item.values));\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\n\t\t}\n\t};\n\n\tp.setResponseType = function (type) {\n\t\t// Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\n\t\tif (type === 'blob') {\n\t\t\ttype = window.URL ? 'blob' : 'arraybuffer';\n\t\t\tthis._responseType = type;\n\t\t}\n\t\tthis._request.responseType = type;\n\t};\n\n\t/**\n\t * Get all the response headers from the XmlHttpRequest.\n\t *\n\t * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\n\t * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\n\t * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\n\t * pair.\n\t * @method getAllResponseHeaders\n\t * @return {String}\n\t * @since 0.4.1\n\t */\n\tp.getAllResponseHeaders = function () {\n\t\tif (this._request.getAllResponseHeaders instanceof Function) {\n\t\t\treturn this._request.getAllResponseHeaders();\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\t/**\n\t * Get a specific response header from the XmlHttpRequest.\n\t *\n\t * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\n\t * header, unless the field name is Set-Cookie or Set-Cookie2.\n\t * @method getResponseHeader\n\t * @param {String} header The header name to retrieve.\n\t * @return {String}\n\t * @since 0.4.1\n\t */\n\tp.getResponseHeader = function (header) {\n\t\tif (this._request.getResponseHeader instanceof Function) {\n\t\t\treturn this._request.getResponseHeader(header);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n// protected methods\n\t/**\n\t * The XHR request has reported progress.\n\t * @method _handleProgress\n\t * @param {Object} event The XHR progress event.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t}\n\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\t/**\n\t * The XHR request has reported a load start.\n\t * @method _handleLoadStart\n\t * @param {Object} event The XHR loadStart event.\n\t * @private\n\t */\n\tp._handleLoadStart = function (event) {\n\t\tclearTimeout(this._loadTimeout);\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * The XHR request has reported an abort event.\n\t * @method handleAbort\n\t * @param {Object} event The XHR abort event.\n\t * @private\n\t */\n\tp._handleAbort = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\n\t};\n\n\t/**\n\t * The XHR request has reported an error event.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleError = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(event.message));\n\t};\n\n\t/**\n\t * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\n\t * event, so we must monitor the readyStateChange to determine if the file is loaded.\n\t * @method _handleReadyStateChange\n\t * @param {Object} event The XHR readyStateChange event.\n\t * @private\n\t */\n\tp._handleReadyStateChange = function (event) {\n\t\tif (this._request.readyState == 4) {\n\t\t\tthis._handleLoad();\n\t\t}\n\t};\n\n\t/**\n\t * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\n\t * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\n\t *\n\t * Note that This method uses {{#crossLink \"_checkError\"}}{{/crossLink}} to determine if the server has returned an\n\t * error code.\n\t * @method _handleLoad\n\t * @param {Object} event The XHR load event.\n\t * @private\n\t */\n\tp._handleLoad = function (event) {\n\t\tif (this.loaded) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loaded = true;\n\n\t\tvar error = this._checkError();\n\t\tif (error) {\n\t\t\tthis._handleError(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._response = this._getResponse();\n\t\t// Convert arraybuffer back to blob\n\t\tif (this._responseType === 'arraybuffer') {\n\t\t\ttry {\n\t\t\t\tthis._response = new Blob([this._response]);\n\t\t\t} catch (e) {\n\t\t\t\t// Fallback to use BlobBuilder if Blob constructor is not supported\n\t\t\t\t// Tested on Android 2.3 ~ 4.2 and iOS5 safari\n\t\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\t\t\t\tif (e.name === 'TypeError' && window.BlobBuilder) {\n\t\t\t\t\tvar builder = new BlobBuilder();\n\t\t\t\t\tbuilder.append(this._response);\n\t\t\t\t\tthis._response = builder.getBlob();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._clean();\n\n\t\tthis.dispatchEvent(new createjs.Event(\"complete\"));\n\t};\n\n\t/**\n\t * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\n\t * callback.\n\t * @method _handleTimeout\n\t * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\n\t * @private\n\t */\n\tp._handleTimeout = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\n\t};\n\n// Protected\n\t/**\n\t * Determine if there is an error in the current load.\n\t * Currently this checks the status of the request for problem codes, and not actual response content:\n\t * <ul>\n\t *     <li>Status codes between 400 and 599 (HTTP error range)</li>\n\t *     <li>A status of 0, but *only when the application is running on a server*. If the application is running\n\t *     on `file:`, then it may incorrectly treat an error on local (or embedded applications) as a successful\n\t *     load.</li>\n\t * </ul>\n\t * @method _checkError\n\t * @return {Error} An error with the status code in the `message` argument.\n\t * @private\n\t */\n\tp._checkError = function () {\n\t\tvar status = parseInt(this._request.status);\n\t\tif (status >= 400 && status <= 599) {\n\t\t\treturn new Error(status);\n\t\t} else if (status == 0) {\n\t\t\tif ((/^https?:/).test(location.protocol)) { return new Error(0); }\n\t\t\treturn null; // Likely an embedded app.\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\n\t/**\n\t * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\n\t * in other browsers. If there is no response, the <code>_response</code> property will remain null.\n\t * @method _getResponse\n\t * @private\n\t */\n\tp._getResponse = function () {\n\t\tif (this._response != null) {\n\t\t\treturn this._response;\n\t\t}\n\n\t\tif (this._request.response != null) {\n\t\t\treturn this._request.response;\n\t\t}\n\n\t\t// Android 2.2 uses .responseText\n\t\ttry {\n\t\t\tif (this._request.responseText != null) {\n\t\t\t\treturn this._request.responseText;\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\t// When loading XML, IE9 does not return .response, instead it returns responseXML.xml\n\t\ttry {\n\t\t\tif (this._request.responseXML != null) {\n\t\t\t\treturn this._request.responseXML;\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t/**\n\t * Create an XHR request. Depending on a number of factors, we get totally different results.\n\t * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\n\t *      <li>XMLHttpRequest are created when available.</li>\n\t *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\n\t *      <li>Text requests override the mime type if possible</li>\n\t *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\n\t *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\n\t * @method _createXHR\n\t * @param {Object} item The requested item that is being loaded.\n\t * @return {Boolean} If an XHR request or equivalent was successfully created.\n\t * @private\n\t */\n\tp._createXHR = function (item) {\n\t\t// Check for cross-domain loads. We can't fully support them, but we can try.\n\t\tvar crossdomain = createjs.URLUtils.isCrossDomain(item);\n\t\tvar headers = {};\n\n\t\t// Create the request. Fallback to whatever support we have.\n\t\tvar req = null;\n\t\tif (window.XMLHttpRequest) {\n\t\t\treq = new XMLHttpRequest();\n\t\t\t// This is 8 or 9, so use XDomainRequest instead.\n\t\t\tif (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\n\t\t\t\treq = new XDomainRequest();\n\t\t\t}\n\t\t} else { // Old IE versions use a different approach\n\t\t\tfor (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\n\t\t\t\tvar axVersion = s.ACTIVEX_VERSIONS[i];\n\t\t\t\ttry {\n\t\t\t\t\treq = new ActiveXObject(axVersion);\n\t\t\t\t\tbreak;\n\t\t\t\t} catch (e) {\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (req == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Default to utf-8 for Text requests.\n\t\tif (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\n\t\t\titem.mimeType = \"text/plain; charset=utf-8\";\n\t\t}\n\n\t\t// IE9 doesn't support overrideMimeType(), so we need to check for it.\n\t\tif (item.mimeType && req.overrideMimeType) {\n\t\t\treq.overrideMimeType(item.mimeType);\n\t\t}\n\n\t\t// Determine the XHR level\n\t\tthis._xhrLevel = (typeof req.responseType === \"string\") ? 2 : 1;\n\n\t\tvar src = null;\n\t\tif (item.method == createjs.Methods.GET) {\n\t\t\tsrc = createjs.URLUtils.buildURI(item.src, item.values);\n\t\t} else {\n\t\t\tsrc = item.src;\n\t\t}\n\n\t\t// Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\n\t\treq.open(item.method || createjs.Methods.GET, src, true);\n\n\t\tif (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\n\t\t\theaders[\"Origin\"] = location.origin;\n\t\t}\n\n\t\t// To send data we need to set the Content-type header)\n\t\tif (item.values && item.method == createjs.Methods.POST) {\n\t\t\theaders[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n\t\t}\n\n\t\tif (!crossdomain && !headers[\"X-Requested-With\"]) {\n\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t}\n\n\t\tif (item.headers) {\n\t\t\tfor (var n in item.headers) {\n\t\t\t\theaders[n] = item.headers[n];\n\t\t\t}\n\t\t}\n\n\t\tfor (n in headers) {\n\t\t\treq.setRequestHeader(n, headers[n])\n\t\t}\n\n\t\tif (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\n\t\t\treq.withCredentials = item.withCredentials;\n\t\t}\n\n\t\tthis._request = req;\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * A request has completed (or failed or canceled), and needs to be disposed.\n\t * @method _clean\n\t * @private\n\t */\n\tp._clean = function () {\n\t\tclearTimeout(this._loadTimeout);\n\n\t\tif (this._request.removeEventListener != null) {\n\t\t\tthis._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\n\t\t\tthis._request.removeEventListener(\"progress\", this._handleProgressProxy);\n\t\t\tthis._request.removeEventListener(\"abort\", this._handleAbortProxy);\n\t\t\tthis._request.removeEventListener(\"error\", this._handleErrorProxy);\n\t\t\tthis._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\n\t\t\tthis._request.removeEventListener(\"load\", this._handleLoadProxy);\n\t\t\tthis._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\n\t\t} else {\n\t\t\tthis._request.onloadstart = null;\n\t\t\tthis._request.onprogress = null;\n\t\t\tthis._request.onabort = null;\n\t\t\tthis._request.onerror = null;\n\t\t\tthis._request.ontimeout = null;\n\t\t\tthis._request.onload = null;\n\t\t\tthis._request.onreadystatechange = null;\n\t\t}\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[PreloadJS XHRRequest]\";\n\t};\n\n\tcreatejs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\n\n}());\n\n//##############################################################################\n// SoundLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\n\t * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\n\t * external framework that handles audio playback. To load content that can be played by WebAudio, use the\n\t * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\n\t * @class SoundLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractMediaLoader\n\t * @constructor\n\t */\n\tfunction SoundLoader(loadItem, preferXHR) {\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.Types.SOUND);\n\n\t\t// protected properties\n\t\tif (createjs.DomUtils.isAudioTag(loadItem)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.DomUtils.isAudioTag(loadItem.src)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.DomUtils.isAudioTag(loadItem.tag)) {\n\t\t\tthis._tag = createjs.DomUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\n\t\t}\n\n\t\tif (this._tag != null) {\n\t\t\tthis._preferXHR = false;\n\t\t}\n\t};\n\n\tvar p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\n\tvar s = SoundLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/SOUND:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.SOUND;\n\t};\n\n\t// protected methods\n\tp._createTag = function (src) {\n\t\tvar tag = createjs.Elements.audio();\n\t\ttag.autoplay = false;\n\t\ttag.preload = \"none\";\n\n\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n\t\ttag.src = src;\n\t\treturn tag;\n\t};\n\n\tcreatejs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\n\n}());\n\n//##############################################################################\n// AudioSprite.js\n//##############################################################################\n\n//  NOTE this is \"Class\" is purely to document audioSprite Setup and usage.\n\n\n/**\n * <strong>Note: AudioSprite is not a class, but its usage is easily lost in the documentation, so it has been called\n * out here for quick reference.</strong>\n *\n * Audio sprites are much like CSS sprites or image sprite sheets: multiple audio assets grouped into a single file.\n * Audio sprites work around limitations in certain browsers, where only a single sound can be loaded and played at a\n * time. We recommend at least 300ms of silence between audio clips to deal with HTML audio tag inaccuracy, and to prevent\n * accidentally playing bits of the neighbouring clips.\n *\n * <strong>Benefits of Audio Sprites:</strong>\n * <ul>\n *     <li>More robust support for older browsers and devices that only allow a single audio instance, such as iOS 5.</li>\n *     <li>They provide a work around for the Internet Explorer 9 audio tag limit, which restricts how many different\n *     sounds that could be loaded at once.</li>\n *     <li>Faster loading by only requiring a single network request for several sounds, especially on mobile devices\n * where the network round trip for each file can add significant latency.</li>\n * </ul>\n *\n * <strong>Drawbacks of Audio Sprites</strong>\n * <ul>\n *     <li>No guarantee of smooth looping when using HTML or Flash audio. If you have a track that needs to loop\n * \t\tsmoothly and you are supporting non-web audio browsers, do not use audio sprites for that sound if you can avoid\n * \t\tit.</li>\n *     <li>No guarantee that HTML audio will play back immediately, especially the first time. In some browsers\n *     (Chrome!), HTML audio will only load enough to play through at the current download speed – so we rely on the\n *     `canplaythrough` event to determine if the audio is loaded. Since audio sprites must jump ahead to play specific\n *     sounds, the audio may not yet have downloaded fully.</li>\n *     <li>Audio sprites share the same core source, so if you have a sprite with 5 sounds and are limited to 2\n * \t\tconcurrently playing instances, you can only play 2 of the sounds at the same time.</li>\n * </ul>\n *\n * <h4>Example</h4>\n *\n *\t\tcreatejs.Sound.initializeDefaultPlugins();\n *\t\tvar assetsPath = \"./assets/\";\n *\t\tvar sounds = [{\n *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\n *\t\t\t\taudioSprite: [\n *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\n *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\n *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\n *\t\t\t\t]}\n *\t\t\t}\n *\t\t];\n *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\n *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\n *\t\t// after load is complete\n *\t\tcreatejs.Sound.play(\"sound2\");\n *\n * You can also create audio sprites on the fly by setting the startTime and duration when creating an new AbstractSoundInstance.\n *\n * \t\tcreatejs.Sound.play(\"MyAudioSprite\", {startTime: 1000, duration: 400});\n *\n * The excellent CreateJS community has created a tool to create audio sprites, available at\n * <a href=\"https://github.com/tonistiigi/audiosprite\" target=\"_blank\">https://github.com/tonistiigi/audiosprite</a>,\n * as well as a <a href=\"http://jsfiddle.net/bharat_battu/g8fFP/12/\" target=\"_blank\">jsfiddle</a> to convert the output\n * to SoundJS format.\n *\n * @class AudioSprite\n * @since 0.6.0\n */\n\n//##############################################################################\n// PlayPropsConfig.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\t/**\n\t * A class to store the optional play properties passed in {{#crossLink \"Sound/play\"}}{{/crossLink}} and\n\t * {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} calls.\n\t *\n\t * Optional Play Properties Include:\n\t * <ul>\n\t * <li>interrupt - How to interrupt any currently playing instances of audio with the same source,\n\t * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n\t * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.</li>\n\t * <li>delay - The amount of time to delay the start of audio playback, in milliseconds.</li>\n\t * <li>offset - The offset from the start of the audio to begin playback, in milliseconds.</li>\n\t * <li>loop - How many times the audio loops when it reaches the end of playback. The default is 0 (no\n\t * loops), and -1 can be used for infinite playback.</li>\n\t * <li>volume - The volume of the sound, between 0 and 1. Note that the master volume is applied\n\t * against the individual volume.</li>\n\t * <li>pan - The left-right pan of the sound (if supported), between -1 (left) and 1 (right).</li>\n\t * <li>startTime - To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.</li>\n\t * <li>duration - To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.</li>\n\t * </ul>\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \tvar props = new createjs.PlayPropsConfig().set({interrupt: createjs.Sound.INTERRUPT_ANY, loop: -1, volume: 0.5})\n\t * \tcreatejs.Sound.play(\"mySound\", props);\n\t * \t// OR\n\t * \tmySoundInstance.play(props);\n\t *\n\t * @class PlayPropsConfig\n\t * @constructor\n\t * @since 0.6.1\n\t */\n\t// TODO think of a better name for this class\n\tvar PlayPropsConfig = function () {\n// Public Properties\n\t\t/**\n\t\t * How to interrupt any currently playing instances of audio with the same source,\n\t\t * if the maximum number of instances of the sound are already playing. Values are defined as\n\t\t * <code>INTERRUPT_TYPE</code> constants on the Sound class, with the default defined by\n\t\t * {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n\t\t * @property interrupt\n\t\t * @type {string}\n\t\t * @default null\n\t\t */\n\t\tthis.interrupt = null;\n\n\t\t/**\n\t\t * The amount of time to delay the start of audio playback, in milliseconds.\n\t\t * @property delay\n\t\t * @type {Number}\n\t\t * @default null\n\t\t */\n\t\tthis.delay = null;\n\n\t\t/**\n\t\t * The offset from the start of the audio to begin playback, in milliseconds.\n\t\t * @property offset\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.offset = null;\n\n\t\t/**\n\t\t * How many times the audio loops when it reaches the end of playback. The default is 0 (no\n\t\t * loops), and -1 can be used for infinite playback.\n\t\t * @property loop\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.loop = null;\n\n\t\t/**\n\t\t * The volume of the sound, between 0 and 1. Note that the master volume is applied\n\t\t * against the individual volume.\n\t\t * @property volume\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.volume = null;\n\n\t\t/**\n\t\t * The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n\t\t * @property pan\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.pan = null;\n\n\t\t/**\n\t\t * Used to create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n\t\t * @property startTime\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.startTime = null;\n\n\t\t/**\n\t\t * Used to create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n\t\t * @property duration\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.duration = null;\n\t};\n\tvar p = PlayPropsConfig.prototype = {};\n\tvar s = PlayPropsConfig;\n\n\n// Static Methods\n\t/**\n\t * Creates a PlayPropsConfig from another PlayPropsConfig or an Object.\n\t *\n\t * @method create\n\t * @param {PlayPropsConfig|Object} value The play properties\n\t * @returns {PlayPropsConfig}\n\t * @static\n\t */\n\ts.create = function (value) {\n\t\tif (typeof(value) === \"string\") {\n\t\t\t// Handle the old API gracefully.\n\t\t\tconsole && (console.warn || console.log)(\"Deprecated behaviour. Sound.play takes a configuration object instead of individual arguments. See docs for info.\");\n\t\t\treturn new createjs.PlayPropsConfig().set({interrupt:value});\n\t\t} else if (value == null || value instanceof s || value instanceof Object) {\n\t\t\treturn new createjs.PlayPropsConfig().set(value);\n\t\t} else if (value == null) {\n\t\t\tthrow new Error(\"PlayProps configuration not recognized.\");\n\t\t}\n\t};\n\n// Public Methods\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var PlayPropsConfig = new createjs.PlayPropsConfig().set({loop:-1, volume:0.7});\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the PlayPropsConfig instance.\n\t * @return {PlayPropsConfig} Returns the instance the method is called on (useful for chaining calls.)\n\t*/\n\tp.set = function(props) {\n\t\tif (props != null) {\n\t\t\tfor (var n in props) { this[n] = props[n]; }\n\t\t}\n\t\treturn this;\n\t};\n\n\tp.toString = function() {\n\t\treturn \"[PlayPropsConfig]\";\n\t};\n\n\tcreatejs.PlayPropsConfig = s;\n\n}());\n\n//##############################################################################\n// Sound.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * The Sound class is the public API for creating sounds, controlling the overall sound levels, and managing plugins.\n\t * All Sound APIs on this class are static.\n\t *\n\t * <b>Registering and Preloading</b><br />\n\t * Before you can play a sound, it <b>must</b> be registered. You can do this with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}},\n\t * or register multiple sounds using {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}. If you don't register a\n\t * sound prior to attempting to play it using {{#crossLink \"Sound/play\"}}{{/crossLink}} or create it using {{#crossLink \"Sound/createInstance\"}}{{/crossLink}},\n\t * the sound source will be automatically registered but playback will fail as the source will not be ready. If you use\n\t * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>, registration is handled for you when the sound is\n\t * preloaded. It is recommended to preload sounds either internally using the register functions or externally using\n\t * PreloadJS so they are ready when you want to use them.\n\t *\n\t * <b>Playback</b><br />\n\t * To play a sound once it's been registered and preloaded, use the {{#crossLink \"Sound/play\"}}{{/crossLink}} method.\n\t * This method returns a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} which can be paused, resumed, muted, etc.\n\t * Please see the {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} documentation for more on the instance control APIs.\n\t *\n\t * <b>Plugins</b><br />\n\t * By default, the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} or the {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}\n\t * are used (when available), although developers can change plugin priority or add new plugins (such as the\n\t * provided {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}). Please see the {{#crossLink \"Sound\"}}{{/crossLink}} API\n\t * methods for more on the playback and plugin APIs. To install plugins, or specify a different plugin order, see\n\t * {{#crossLink \"Sound/installPlugins\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio\";\n\t *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.FlashAudioPlugin]);\n\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\n\t *      createjs.Sound.on(\"fileload\", this.loadHandler, this);\n\t *      createjs.Sound.registerSound(\"path/to/mySound.ogg\", \"sound\");\n\t *      function loadHandler(event) {\n     *          // This is fired for each sound that is registered.\n     *          var instance = createjs.Sound.play(\"sound\");  // play using id.  Could also use full source path or event.src.\n     *          instance.on(\"complete\", this.handleComplete, this);\n     *          instance.volume = 0.5;\n\t *      }\n\t *\n\t * The maximum number of concurrently playing instances of the same sound can be specified in the \"data\" argument\n\t * of {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}.  Note that if not specified, the active plugin will apply\n\t * a default limit.  Currently HTMLAudioPlugin sets a default limit of 2, while WebAudioPlugin and FlashAudioPlugin set a\n\t * default limit of 100.\n\t *\n\t *      createjs.Sound.registerSound(\"sound.mp3\", \"soundId\", 4);\n\t *\n\t * Sound can be used as a plugin with PreloadJS to help preload audio properly. Audio preloaded with PreloadJS is\n\t * automatically registered with the Sound class. When audio is not preloaded, Sound will do an automatic internal\n\t * load. As a result, it may fail to play the first time play is called if the audio is not finished loading. Use\n\t * the {{#crossLink \"Sound/fileload:event\"}}{{/crossLink}} event to determine when a sound has finished internally\n\t * preloading. It is recommended that all audio is preloaded before it is played.\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *\t\tqueue.installPlugin(createjs.Sound);\n\t *\n\t * <b>Audio Sprites</b><br />\n\t * SoundJS has added support for {{#crossLink \"AudioSprite\"}}{{/crossLink}}, available as of version 0.6.0.\n\t * For those unfamiliar with audio sprites, they are much like CSS sprites or sprite sheets: multiple audio assets\n\t * grouped into a single file.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *\t\tvar assetsPath = \"./assets/\";\n\t *\t\tvar sounds = [{\n\t *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\n\t *\t\t\t\taudioSprite: [\n\t *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\n\t *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\n\t *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\n\t *\t\t\t\t]}\n \t *\t\t\t}\n\t *\t\t];\n\t *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n\t *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\n\t *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\n\t *\t\t// after load is complete\n\t *\t\tcreatejs.Sound.play(\"sound2\");\n\t *\n\t * <b>Mobile Playback</b><br />\n\t * Devices running iOS require the WebAudio context to be \"unlocked\" by playing at least one sound inside of a user-\n\t * initiated event (such as touch/click). Earlier versions of SoundJS included a \"MobileSafe\" sample, but this is no\n\t * longer necessary as of SoundJS 0.6.2.\n\t * <ul>\n\t *     <li>\n\t *         In SoundJS 0.4.1 and above, you can either initialize plugins or use the {{#crossLink \"WebAudioPlugin/playEmptySound\"}}{{/crossLink}}\n\t *         method in the call stack of a user input event to manually unlock the audio context.\n\t *     </li>\n\t *     <li>\n\t *         In SoundJS 0.6.2 and above, SoundJS will automatically listen for the first document-level \"mousedown\"\n\t *         and \"touchend\" event, and unlock WebAudio. This will continue to check these events until the WebAudio\n\t *         context becomes \"unlocked\" (changes from \"suspended\" to \"running\")\n\t *     </li>\n\t *     <li>\n\t *         Both the \"mousedown\" and \"touchend\" events can be used to unlock audio in iOS9+, the \"touchstart\" event\n\t *         will work in iOS8 and below. The \"touchend\" event will only work in iOS9 when the gesture is interpreted\n\t *         as a \"click\", so if the user long-presses the button, it will no longer work.\n\t *     </li>\n\t *     <li>\n\t *         When using the <a href=\"http://www.createjs.com/docs/easeljs/classes/Touch.html\">EaselJS Touch class</a>,\n\t *         the \"mousedown\" event will not fire when a canvas is clicked, since MouseEvents are prevented, to ensure\n\t *         only touch events fire. To get around this, you can either rely on \"touchend\", or:\n\t *         <ol>\n\t *             <li>Set the `allowDefault` property on the Touch class constructor to `true` (defaults to `false`).</li>\n\t *             <li>Set the `preventSelection` property on the EaselJS `Stage` to `false`.</li>\n\t *         </ol>\n\t *         These settings may change how your application behaves, and are not recommended.\n\t *     </li>\n\t * </ul>\n\t *\n\t * <b>Loading Alternate Paths and Extension-less Files</b><br />\n\t * SoundJS supports loading alternate paths and extension-less files by passing an object instead of a string for\n\t * the `src` property, which is a hash using the format `{extension:\"path\", extension2:\"path2\"}`. These labels are\n\t * how SoundJS determines if the browser will support the sound. This also enables multiple formats to live in\n\t * different folders, or on CDNs, which often has completely different filenames for each file.\n\t *\n\t * Priority is determined by the property order (first property is tried first).  This is supported by both internal loading\n\t * and loading with PreloadJS.\n\t *\n\t * <em>Note: an id is required for playback.</em>\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *\t\tvar sounds = {path:\"./audioPath/\",\n\t * \t\t\t\tmanifest: [\n\t *\t\t\t\t{id: \"cool\", src: {mp3:\"mp3/awesome.mp3\", ogg:\"noExtensionOggFile\"}}\n\t *\t\t]};\n\t *\n\t *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n\t *\t\tcreatejs.Sound.addEventListener(\"fileload\", handleLoad);\n\t *\t\tcreatejs.Sound.registerSounds(sounds);\n\t *\n\t * <h3>Known Browser and OS issues</h3>\n\t * <b>IE 9 HTML Audio limitations</b><br />\n\t * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\n\t * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\n\t * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\n     * <li>MP3 encoding will not always work for audio tags, particularly in Internet Explorer. We've found default\n\t * encoding with 64kbps works.</li>\n\t * <li>Occasionally very short samples will get cut off.</li>\n\t * <li>There is a limit to how many audio tags you can load and play at once, which appears to be determined by\n\t * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe\n\t * estimate.</li></ul>\n\t *\n\t * <b>Firefox 25 Web Audio limitations</b>\n\t * <ul><li>mp3 audio files do not load properly on all windows machines, reported\n\t * <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>. </br>\n\t * For this reason it is recommended to pass another FF supported type (ie ogg) first until this bug is resolved, if\n\t * possible.</li></ul>\n\n\t * <b>Safari limitations</b><br />\n\t * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\n\t *\n\t * <b>iOS 6 Web Audio limitations</b><br />\n\t * <ul><li>Sound is initially locked, and must be unlocked via a user-initiated event. Please see the section on\n\t * Mobile Playback above.</li>\n\t * <li>A bug exists that will distort un-cached web audio when a video element is present in the DOM that has audio\n\t * at a different sampleRate.</li>\n\t * </ul>\n\t *\n\t * <b>Android HTML Audio limitations</b><br />\n\t * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\n\t * <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use\n\t * a delay.</li></ul>\n\t *\n\t * <b>Web Audio and PreloadJS</b><br />\n\t * <ul><li>Web Audio must be loaded through XHR, therefore when used with PreloadJS, tag loading is not possible.\n\t * This means that tag loading can not be used to avoid cross domain issues.</li><ul>\n\t *\n\t * @class Sound\n\t * @static\n\t * @uses EventDispatcher\n\t */\n\tfunction Sound() {\n\t\tthrow \"Sound cannot be instantiated\";\n\t}\n\n\tvar s = Sound;\n\n\n// Static Properties\n\t/**\n\t * The interrupt value to interrupt any currently playing instance with the same source, if the maximum number of\n\t * instances of the sound are already playing.\n\t * @property INTERRUPT_ANY\n\t * @type {String}\n\t * @default any\n\t * @static\n\t */\n\ts.INTERRUPT_ANY = \"any\";\n\n\t/**\n\t * The interrupt value to interrupt the earliest currently playing instance with the same source that progressed the\n\t * least distance in the audio track, if the maximum number of instances of the sound are already playing.\n\t * @property INTERRUPT_EARLY\n\t * @type {String}\n\t * @default early\n\t * @static\n\t */\n\ts.INTERRUPT_EARLY = \"early\";\n\n\t/**\n\t * The interrupt value to interrupt the currently playing instance with the same source that progressed the most\n\t * distance in the audio track, if the maximum number of instances of the sound are already playing.\n\t * @property INTERRUPT_LATE\n\t * @type {String}\n\t * @default late\n\t * @static\n\t */\n\ts.INTERRUPT_LATE = \"late\";\n\n\t/**\n\t * The interrupt value to not interrupt any currently playing instances with the same source, if the maximum number of\n\t * instances of the sound are already playing.\n\t * @property INTERRUPT_NONE\n\t * @type {String}\n\t * @default none\n\t * @static\n\t */\n\ts.INTERRUPT_NONE = \"none\";\n\n\t/**\n\t * Defines the playState of an instance that is still initializing.\n\t * @property PLAY_INITED\n\t * @type {String}\n\t * @default playInited\n\t * @static\n\t */\n\ts.PLAY_INITED = \"playInited\";\n\n\t/**\n\t * Defines the playState of an instance that is currently playing or paused.\n\t * @property PLAY_SUCCEEDED\n\t * @type {String}\n\t * @default playSucceeded\n\t * @static\n\t */\n\ts.PLAY_SUCCEEDED = \"playSucceeded\";\n\n\t/**\n\t * Defines the playState of an instance that was interrupted by another instance.\n\t * @property PLAY_INTERRUPTED\n\t * @type {String}\n\t * @default playInterrupted\n\t * @static\n\t */\n\ts.PLAY_INTERRUPTED = \"playInterrupted\";\n\n\t/**\n\t * Defines the playState of an instance that completed playback.\n\t * @property PLAY_FINISHED\n\t * @type {String}\n\t * @default playFinished\n\t * @static\n\t */\n\ts.PLAY_FINISHED = \"playFinished\";\n\n\t/**\n\t * Defines the playState of an instance that failed to play. This is usually caused by a lack of available channels\n\t * when the interrupt mode was \"INTERRUPT_NONE\", the playback stalled, or the sound could not be found.\n\t * @property PLAY_FAILED\n\t * @type {String}\n\t * @default playFailed\n\t * @static\n\t */\n\ts.PLAY_FAILED = \"playFailed\";\n\n\t/**\n\t * A list of the default supported extensions that Sound will <i>try</i> to play. Plugins will check if the browser\n\t * can play these types, so modifying this list before a plugin is initialized will allow the plugins to try to\n\t * support additional media types.\n\t *\n\t * NOTE this does not currently work for {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\n\t *\n\t * More details on file formats can be found at <a href=\"http://en.wikipedia.org/wiki/Audio_file_format\" target=\"_blank\">http://en.wikipedia.org/wiki/Audio_file_format</a>.<br />\n\t * A very detailed list of file formats can be found at <a href=\"http://www.fileinfo.com/filetypes/audio\" target=\"_blank\">http://www.fileinfo.com/filetypes/audio</a>.\n\t * @property SUPPORTED_EXTENSIONS\n\t * @type {Array[String]}\n\t * @default [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"]\n\t * @since 0.4.0\n\t * @static\n\t */\n\ts.SUPPORTED_EXTENSIONS = [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"];\n\n\t/**\n\t * Some extensions use another type of extension support to play (one of them is a codex).  This allows you to map\n\t * that support so plugins can accurately determine if an extension is supported.  Adding to this list can help\n\t * plugins determine more accurately if an extension is supported.\n\t *\n \t * A useful list of extensions for each format can be found at <a href=\"http://html5doctor.com/html5-audio-the-state-of-play/\" target=\"_blank\">http://html5doctor.com/html5-audio-the-state-of-play/</a>.\n\t * @property EXTENSION_MAP\n\t * @type {Object}\n\t * @since 0.4.0\n\t * @default {m4a:\"mp4\"}\n\t * @static\n\t */\n\ts.EXTENSION_MAP = {\n\t\tm4a:\"mp4\"\n\t};\n\n\t/**\n\t * The RegExp pattern used to parse file URIs. This supports simple file names, as well as full domain URIs with\n\t * query strings. The resulting match is: protocol:$1 domain:$2 path:$3 file:$4 extension:$5 query:$6.\n\t * @property FILE_PATTERN\n\t * @type {RegExp}\n\t * @static\n\t * @private\n\t */\n\ts.FILE_PATTERN = /^(?:(\\w+:)\\/{2}(\\w+(?:\\.\\w+)*\\/?))?([/.]*?(?:[^?]+)?\\/)?((?:[^/?]+)\\.(\\w+))(?:\\?(\\S+)?)?$/;\n\n\n// Class Public properties\n\t/**\n\t * Determines the default behavior for interrupting other currently playing instances with the same source, if the\n\t * maximum number of instances of the sound are already playing.  Currently the default is {{#crossLink \"Sound/INTERRUPT_NONE:property\"}}{{/crossLink}}\n\t * but this can be set and will change playback behavior accordingly.  This is only used when {{#crossLink \"Sound/play\"}}{{/crossLink}}\n\t * is called without passing a value for interrupt.\n\t * @property defaultInterruptBehavior\n\t * @type {String}\n\t * @default Sound.INTERRUPT_NONE, or \"none\"\n\t * @static\n\t * @since 0.4.0\n\t */\n\ts.defaultInterruptBehavior = s.INTERRUPT_NONE;  // OJR does s.INTERRUPT_ANY make more sense as default?  Needs game dev testing to see which case makes more sense.\n\n\t/**\n\t * An array of extensions to attempt to use when loading sound, if the default is unsupported by the active plugin.\n\t * These are applied in order, so if you try to Load Thunder.ogg in a browser that does not support ogg, and your\n\t * extensions array is [\"mp3\", \"m4a\", \"wav\"] it will check mp3 support, then m4a, then wav. The audio files need\n\t * to exist in the same location, as only the extension is altered.\n\t *\n\t * Note that regardless of which file is loaded, you can call {{#crossLink \"Sound/createInstance\"}}{{/crossLink}}\n\t * and {{#crossLink \"Sound/play\"}}{{/crossLink}} using the same id or full source path passed for loading.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *\tvar sounds = [\n\t *\t\t{src:\"myPath/mySound.ogg\", id:\"example\"},\n\t *\t];\n\t *\tcreatejs.Sound.alternateExtensions = [\"mp3\"]; // now if ogg is not supported, SoundJS will try asset0.mp3\n\t *\tcreatejs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\n\t *\tcreatejs.Sound.registerSounds(sounds, assetPath);\n\t *\t// ...\n\t *\tcreatejs.Sound.play(\"myPath/mySound.ogg\"); // works regardless of what extension is supported.  Note calling with ID is a better approach\n\t *\n\t * @property alternateExtensions\n\t * @type {Array}\n\t * @since 0.5.2\n\t * @static\n\t */\n\ts.alternateExtensions = [];\n\n\t/**\n\t * The currently active plugin. If this is null, then no plugin could be initialized. If no plugin was specified,\n\t * Sound attempts to apply the default plugins: {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by\n\t * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n\t * @property activePlugin\n\t * @type {Object}\n\t * @static\n\t */\n    s.activePlugin = null;\n\n\n// class getter / setter properties\n\n\t/**\n\t * Set the master volume of Sound. The master volume is multiplied against each sound's individual volume.  For\n\t * example, if master volume is 0.5 and a sound's volume is 0.5, the resulting volume is 0.25. To set individual\n\t * sound volume, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}}\n\t * instead.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     createjs.Sound.volume = 0.5;\n\t *\n\t * @property volume\n\t * @type {Number}\n\t * @default 1\n\t * @since 0.6.1\n\t */\n\n\t/**\n\t * The internal volume level. Use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} to adjust the master volume.\n\t * @property _masterVolume\n\t * @type {number}\n\t * @default 1\n\t * @private\n\t */\n\ts._masterVolume = 1;\n\n\t/**\n\t * Use the {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} property instead.\n\t * @method _getMasterVolume\n\t * @private\n\t * @static\n\t * @return {Number}\n\t **/\n\ts._getMasterVolume = function() {\n\t\treturn this._masterVolume;\n\t};\n\t// Sound.getMasterVolume is @deprecated. Remove for 1.1+\n\ts.getVolume = createjs.deprecate(s._getMasterVolume, \"Sound.getVolume\");\n\t/**\n\t * Use the {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} property instead.\n\t * @method _setMasterVolume\n\t * @static\n\t * @private\n\t **/\n\ts._setMasterVolume = function(value) {\n\t\tif (Number(value) == null) { return; }\n\t\tvalue = Math.max(0, Math.min(1, value));\n\t\ts._masterVolume = value;\n\t\tif (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\n\t\t\tvar instances = this._instances;\n\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\n\t\t\t\tinstances[i].setMasterVolume(value);\n\t\t\t}\n\t\t}\n\t};\n\t// Sound.stMasterVolume is @deprecated. Remove for 1.1+\n\ts.setVolume = createjs.deprecate(s._setMasterVolume, \"Sound.setVolume\");\n\n\t/**\n\t * Mute/Unmute all audio. Note that muted audio still plays at 0 volume. This global mute value is maintained\n\t * separately and when set will override, but not change the mute property of individual instances. To mute an individual\n\t * instance, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} instead.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     createjs.Sound.muted = true;\n\t *\n\t *\n\t * @property muted\n\t * @type {Boolean}\n\t * @default false\n\t * @since 0.6.1\n\t */\n\ts._masterMute = false;\n\n\t/**\n\t * Use the {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} property instead.\n\t * @method _getMute\n\t * @returns {Boolean}\n\t * @static\n\t * @private\n\t */\n\ts._getMute = function () {\n\t\treturn this._masterMute;\n\t};\n\t// Sound.getMute is @deprecated. Remove for 1.1+\n\ts.getMute = createjs.deprecate(s._getMute, \"Sound.getMute\");\n\n\t/**\n\t * Use the {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} property instead.\n\t * @method _setMute\n\t * @param {Boolean} value The muted value\n\t * @static\n\t * @private\n\t */\n\ts._setMute = function (value) {\n\t\tif (value == null) { return; }\n\t\tthis._masterMute = value;\n\t\tif (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\n\t\t\tvar instances = this._instances;\n\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\n\t\t\t\tinstances[i].setMasterMute(value);\n\t\t\t}\n\t\t}\n\t};\n\t// Sound.setMute is @deprecated. Remove for 1.1+\n\ts.setMute = createjs.deprecate(s._setMute, \"Sound.setMute\");\n\n\t/**\n\t * Get the active plugins capabilities, which help determine if a plugin can be used in the current environment,\n\t * or if the plugin supports a specific feature. Capabilities include:\n\t * <ul>\n\t *     <li><b>panning:</b> If the plugin can pan audio from left to right</li>\n\t *     <li><b>volume;</b> If the plugin can control audio volume.</li>\n\t *     <li><b>tracks:</b> The maximum number of audio tracks that can be played back at a time. This will be -1\n\t *     if there is no known limit.</li>\n\t * <br />An entry for each file type in {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}:\n\t *     <li><b>mp3:</b> If MP3 audio is supported.</li>\n\t *     <li><b>ogg:</b> If OGG audio is supported.</li>\n\t *     <li><b>wav:</b> If WAV audio is supported.</li>\n\t *     <li><b>mpeg:</b> If MPEG audio is supported.</li>\n\t *     <li><b>m4a:</b> If M4A audio is supported.</li>\n\t *     <li><b>mp4:</b> If MP4 audio is supported.</li>\n\t *     <li><b>aiff:</b> If aiff audio is supported.</li>\n\t *     <li><b>wma:</b> If wma audio is supported.</li>\n\t *     <li><b>mid:</b> If mid audio is supported.</li>\n\t * </ul>\n\t *\n\t * You can get a specific capability of the active plugin using standard object notation\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var mp3 = createjs.Sound.capabilities.mp3;\n\t *\n\t * Note this property is read only.\n\t *\n\t * @property capabilities\n\t * @type {Object}\n\t * @static\n\t * @readOnly\n\t * @since 0.6.1\n\t */\n\n\t/**\n\t * Use the {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} property instead.\n\t * @returns {null}\n\t * @private\n\t */\n\ts._getCapabilities = function() {\n\t\tif (s.activePlugin == null) { return null; }\n\t\treturn s.activePlugin._capabilities;\n\t};\n\t// Sound.getCapabilities is @deprecated. Remove for 1.1+\n\ts.getCapabilities = createjs.deprecate(s._getCapabilities, \"Sound.getCapabilities\");\n\n\tObject.defineProperties(s, {\n\t\tvolume: { get: s._getMasterVolume, set: s._setMasterVolume },\n\t\tmuted: { get: s._getMute, set: s._setMute },\n\t\tcapabilities: { get: s._getCapabilities }\n\t});\n\n\n// Class Private properties\n\t/**\n\t * Determines if the plugins have been registered. If false, the first call to {{#crossLink \"play\"}}{{/crossLink}} will instantiate the default\n\t * plugins ({{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}).\n\t * If plugins have been registered, but none are applicable, then sound playback will fail.\n\t * @property _pluginsRegistered\n\t * @type {Boolean}\n\t * @default false\n\t * @static\n\t * @private\n\t */\n\ts._pluginsRegistered = false;\n\n\t/**\n\t * Used internally to assign unique IDs to each AbstractSoundInstance.\n\t * @property _lastID\n\t * @type {Number}\n\t * @static\n\t * @private\n\t */\n\ts._lastID = 0;\n\n\t/**\n\t * An array containing all currently playing instances. This allows Sound to control the volume, mute, and playback of\n\t * all instances when using static APIs like {{#crossLink \"Sound/stop\"}}{{/crossLink}} and {{#crossLink \"Sound/volume:property\"}}{{/crossLink}}.\n\t * When an instance has finished playback, it gets removed via the {{#crossLink \"Sound/finishedPlaying\"}}{{/crossLink}}\n\t * method. If the user replays an instance, it gets added back in via the {{#crossLink \"Sound/_beginPlaying\"}}{{/crossLink}}\n\t * method.\n\t * @property _instances\n\t * @type {Array}\n\t * @private\n\t * @static\n\t */\n\ts._instances = [];\n\n\t/**\n\t * An object hash storing objects with sound sources, startTime, and duration via there corresponding ID.\n\t * @property _idHash\n\t * @type {Object}\n\t * @private\n\t * @static\n\t */\n\ts._idHash = {};\n\n\t/**\n\t * An object hash that stores preloading sound sources via the parsed source that is passed to the plugin.  Contains the\n\t * source, id, and data that was passed in by the user.  Parsed sources can contain multiple instances of source, id,\n\t * and data.\n\t * @property _preloadHash\n\t * @type {Object}\n\t * @private\n\t * @static\n\t */\n\ts._preloadHash = {};\n\n\t/**\n\t * An object hash storing {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} via the parsed source that is passed as defaultPlayProps in\n\t * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} and {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t * @property _defaultPlayPropsHash\n\t * @type {Object}\n\t * @private\n\t * @static\n\t * @since 0.6.1\n\t */\n\ts._defaultPlayPropsHash = {};\n\n\n// EventDispatcher methods:\n\ts.addEventListener = null;\n\ts.removeEventListener = null;\n\ts.removeAllEventListeners = null;\n\ts.dispatchEvent = null;\n\ts.hasEventListener = null;\n\ts._listeners = null;\n\n\tcreatejs.EventDispatcher.initialize(s); // inject EventDispatcher methods.\n\n\n// Events\n\t/**\n\t * This event is fired when a file finishes loading internally. This event is fired for each loaded sound,\n\t * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {String} src The source of the sound that was loaded.\n\t * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\n\t * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\n\t * @since 0.4.1\n\t */\n\n\t/**\n\t * This event is fired when a file fails loading internally. This event is fired for each loaded sound,\n\t * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\n\t * @event fileerror\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {String} src The source of the sound that was loaded.\n\t * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\n\t * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\n\t * @since 0.6.0\n\t */\n\n\n// Class Public Methods\n\t/**\n\t * Get the preload rules to allow Sound to be used as a plugin by <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n\t * Any load calls that have the matching type or extension will fire the callback method, and use the resulting\n\t * object, which is potentially modified by Sound. This helps when determining the correct path, as well as\n\t * registering the audio instance(s) with Sound. This method should not be called, except by PreloadJS.\n\t * @method getPreloadHandlers\n\t * @return {Object} An object containing:\n\t * <ul><li>callback: A preload callback that is fired when a file is added to PreloadJS, which provides\n\t *      Sound a mechanism to modify the load parameters, select the correct file format, register the sound, etc.</li>\n\t *      <li>types: A list of file types that are supported by Sound (currently supports \"sound\").</li>\n\t *      <li>extensions: A list of file extensions that are supported by Sound (see {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}).</li></ul>\n\t * @static\n\t * @private\n\t */\n\ts.getPreloadHandlers = function () {\n\t\treturn {\n\t\t\tcallback:createjs.proxy(s.initLoad, s),\n\t\t\ttypes:[\"sound\"],\n\t\t\textensions:s.SUPPORTED_EXTENSIONS\n\t\t};\n\t};\n\n\t/**\n\t * Used to dispatch fileload events from internal loading.\n\t * @method _handleLoadComplete\n\t * @param event A loader event.\n\t * @private\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts._handleLoadComplete = function(event) {\n\t\tvar src = event.target.getItem().src;\n\t\tif (!s._preloadHash[src]) {return;}\n\n\t\tfor (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\n\t\t\tvar item = s._preloadHash[src][i];\n\t\t\ts._preloadHash[src][i] = true;\n\n\t\t\tif (!s.hasEventListener(\"fileload\")) { continue; }\n\n\t\t\tvar event = new createjs.Event(\"fileload\");\n\t\t\tevent.src = item.src;\n\t\t\tevent.id = item.id;\n\t\t\tevent.data = item.data;\n\t\t\tevent.sprite = item.sprite;\n\n\t\t\ts.dispatchEvent(event);\n\t\t}\n\t};\n\n\t/**\n\t * Used to dispatch error events from internal preloading.\n\t * @param event\n\t * @private\n\t * @since 0.6.0\n\t * @static\n\t */\n\ts._handleLoadError = function(event) {\n\t\tvar src = event.target.getItem().src;\n\t\tif (!s._preloadHash[src]) {return;}\n\n\t\tfor (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\n\t\t\tvar item = s._preloadHash[src][i];\n\t\t\ts._preloadHash[src][i] = false;\n\n\t\t\tif (!s.hasEventListener(\"fileerror\")) { continue; }\n\n\t\t\tvar event = new createjs.Event(\"fileerror\");\n\t\t\tevent.src = item.src;\n\t\t\tevent.id = item.id;\n\t\t\tevent.data = item.data;\n\t\t\tevent.sprite = item.sprite;\n\n\t\t\ts.dispatchEvent(event);\n\t\t}\n\t};\n\n\t/**\n\t * Used by {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} to register a Sound plugin.\n\t *\n\t * @method _registerPlugin\n\t * @param {Object} plugin The plugin class to install.\n\t * @return {Boolean} Whether the plugin was successfully initialized.\n\t * @static\n\t * @private\n\t */\n\ts._registerPlugin = function (plugin) {\n\t\t// Note: Each plugin is passed in as a class reference, but we store the activePlugin as an instance\n\t\tif (plugin.isSupported()) {\n\t\t\ts.activePlugin = new plugin();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Register a list of Sound plugins, in order of precedence. To register a single plugin, pass a single element in the array.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\n\t *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\n\t *\n\t * @method registerPlugins\n\t * @param {Array} plugins An array of plugins classes to install.\n\t * @return {Boolean} Whether a plugin was successfully initialized.\n\t * @static\n\t */\n\ts.registerPlugins = function (plugins) {\n\t\ts._pluginsRegistered = true;\n\t\tfor (var i = 0, l = plugins.length; i < l; i++) {\n\t\t\tif (s._registerPlugin(plugins[i])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Initialize the default plugins. This method is automatically called when any audio is played or registered before\n\t * the user has manually registered plugins, and enables Sound to work without manual plugin setup. Currently, the\n\t * default plugins are {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \tif (!createjs.initializeDefaultPlugins()) { return; }\n\t *\n\t * @method initializeDefaultPlugins\n\t * @returns {Boolean} True if a plugin was initialized, false otherwise.\n\t * @since 0.4.0\n\t * @static\n\t */\n\ts.initializeDefaultPlugins = function () {\n\t\tif (s.activePlugin != null) {return true;}\n\t\tif (s._pluginsRegistered) {return false;}\n\t\tif (s.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin])) {return true;}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Determines if Sound has been initialized, and a plugin has been activated.\n\t *\n\t * <h4>Example</h4>\n\t * This example sets up a Flash fallback, but only if there is no plugin specified yet.\n\t *\n\t * \tif (!createjs.Sound.isReady()) {\n\t *\t\tcreatejs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\n\t * \t\tcreatejs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\n\t *\t}\n\t *\n\t * @method isReady\n\t * @return {Boolean} If Sound has initialized a plugin.\n\t * @static\n\t */\n\ts.isReady = function () {\n\t\treturn (s.activePlugin != null);\n\t};\n\n\t/**\n\t * Process manifest items from <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>. This method is intended\n\t * for usage by a plugin, and not for direct interaction.\n\t * @method initLoad\n\t * @param {Object} src The object to load.\n\t * @return {Object|AbstractLoader} An instance of AbstractLoader.\n\t * @private\n\t * @static\n\t */\n\ts.initLoad = function (loadItem) {\n\t\tif (loadItem.type == \"video\") { return true; } // Don't handle video. PreloadJS's plugin model is really aggressive.\n\t\treturn s._registerSound(loadItem);\n\t};\n\n\t/**\n\t * Internal method for loading sounds.  This should not be called directly.\n\t *\n\t * @method _registerSound\n\t * @param {Object} src The object to load, containing src property and optionally containing id and data.\n\t * @return {Object} An object with the modified values that were passed in, which defines the sound.\n\t * Returns false if the source cannot be parsed or no plugins can be initialized.\n\t * Returns true if the source is already loaded.\n\t * @static\n\t * @private\n\t * @since 0.6.0\n\t */\n\n\ts._registerSound = function (loadItem) {\n\t\tif (!s.initializeDefaultPlugins()) {return false;}\n\n\t\tvar details;\n\t\tif (loadItem.src instanceof Object) {\n\t\t\tdetails = s._parseSrc(loadItem.src);\n\t\t\tdetails.src = loadItem.path + details.src;\n\t\t} else {\n\t\t\tdetails = s._parsePath(loadItem.src);\n\t\t}\n\t\tif (details == null) {return false;}\n\t\tloadItem.src = details.src;\n\t\tloadItem.type = \"sound\";\n\n\t\tvar data = loadItem.data;\n\t\tvar numChannels = null;\n\t\tif (data != null) {\n\t\t\tif (!isNaN(data.channels)) {\n\t\t\t\tnumChannels = parseInt(data.channels);\n\t\t\t} else if (!isNaN(data)) {\n\t\t\t\tnumChannels = parseInt(data);\n\t\t\t}\n\n\t\t\tif(data.audioSprite) {\n\t\t\t\tvar sp;\n\t\t\t\tfor(var i = data.audioSprite.length; i--; ) {\n\t\t\t\t\tsp = data.audioSprite[i];\n\t\t\t\t\ts._idHash[sp.id] = {src: loadItem.src, startTime: parseInt(sp.startTime), duration: parseInt(sp.duration)};\n\n\t\t\t\t\tif (sp.defaultPlayProps) {\n\t\t\t\t\t\ts._defaultPlayPropsHash[sp.id] = createjs.PlayPropsConfig.create(sp.defaultPlayProps);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (loadItem.id != null) {s._idHash[loadItem.id] = {src: loadItem.src}};\n\t\tvar loader = s.activePlugin.register(loadItem);\n\n\t\tSoundChannel.create(loadItem.src, numChannels);\n\n\t\t// return the number of instances to the user.  This will also be returned in the load event.\n\t\tif (data == null || !isNaN(data)) {\n\t\t\tloadItem.data = numChannels || SoundChannel.maxPerChannel();\n\t\t} else {\n\t\t\tloadItem.data.channels = numChannels || SoundChannel.maxPerChannel();\n\t\t}\n\n\t\tif (loader.type) {loadItem.type = loader.type;}\n\n\t\tif (loadItem.defaultPlayProps) {\n\t\t\ts._defaultPlayPropsHash[loadItem.src] = createjs.PlayPropsConfig.create(loadItem.defaultPlayProps);\n\t\t}\n\t\treturn loader;\n\t};\n\n\t/**\n\t * Register an audio file for loading and future playback in Sound. This is automatically called when using\n\t * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.  It is recommended to register all sounds that\n\t * need to be played back in order to properly prepare and preload them. Sound does internal preloading when required.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\n\t *      createjs.Sound.on(\"fileload\", handleLoad); // add an event listener for when load is completed\n\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.ogg\", \"myID\", 3);\n\t *      createjs.Sound.registerSound({ogg:\"path1/mySound.ogg\", mp3:\"path2/mySoundNoExtension\"}, \"myID\", 3);\n\t *\n\t *\n\t * @method registerSound\n\t * @param {String | Object} src The source or an Object with a \"src\" property or an Object with multiple extension labeled src properties.\n\t * @param {String} [id] An id specified by the user to play the sound later.  Note id is required for when src is multiple extension labeled src properties.\n\t * @param {Number | Object} [data] Data associated with the item. Sound uses the data parameter as the number of\n\t * channels for an audio instance, however a \"channels\" property can be appended to the data object if it is used\n\t * for other information. The audio channels will set a default based on plugin if no value is found.\n\t * Sound also uses the data property to hold an {{#crossLink \"AudioSprite\"}}{{/crossLink}} array of objects in the following format {id, startTime, duration}.<br/>\n\t *   id used to play the sound later, in the same manner as a sound src with an id.<br/>\n\t *   startTime is the initial offset to start playback and loop from, in milliseconds.<br/>\n\t *   duration is the amount of time to play the clip for, in milliseconds.<br/>\n\t * This allows Sound to support audio sprites that are played back by id.\n\t * @param {string} basePath Set a path that will be prepended to src for loading.\n\t * @param {Object | PlayPropsConfig} defaultPlayProps Optional Playback properties that will be set as the defaults on any new AbstractSoundInstance.\n\t * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for options.\n\t * @return {Object} An object with the modified values that were passed in, which defines the sound.\n\t * Returns false if the source cannot be parsed or no plugins can be initialized.\n\t * Returns true if the source is already loaded.\n\t * @static\n\t * @since 0.4.0\n\t */\n\ts.registerSound = function (src, id, data, basePath, defaultPlayProps) {\n\t\tvar loadItem = {src: src, id: id, data:data, defaultPlayProps:defaultPlayProps};\n\t\tif (src instanceof Object && src.src) {\n\t\t\tbasePath = id;\n\t\t\tloadItem = src;\n\t\t}\n\t\tloadItem = createjs.LoadItem.create(loadItem);\n\t\tloadItem.path = basePath;\n\n\t\tif (basePath != null && !(loadItem.src instanceof Object)) {loadItem.src = basePath + loadItem.src;}\n\n\t\tvar loader = s._registerSound(loadItem);\n\t\tif(!loader) {return false;}\n\n\t\tif (!s._preloadHash[loadItem.src]) { s._preloadHash[loadItem.src] = [];}\n\t\ts._preloadHash[loadItem.src].push(loadItem);\n\t\tif (s._preloadHash[loadItem.src].length == 1) {\n\t\t\t// OJR note this will disallow reloading a sound if loading fails or the source changes\n\t\t\tloader.on(\"complete\", this._handleLoadComplete, this);\n\t\t\tloader.on(\"error\", this._handleLoadError, this);\n\t\t\ts.activePlugin.preload(loader);\n\t\t} else {\n\t\t\tif (s._preloadHash[loadItem.src][0] == true) {return true;}\n\t\t}\n\n\t\treturn loadItem;\n\t};\n\n\t/**\n\t * Register an array of audio files for loading and future playback in Sound. It is recommended to register all\n\t * sounds that need to be played back in order to properly prepare and preload them. Sound does internal preloading\n\t * when required.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tvar assetPath = \"./myAudioPath/\";\n\t *      var sounds = [\n\t *          {src:\"asset0.ogg\", id:\"example\"},\n\t *          {src:\"asset1.ogg\", id:\"1\", data:6},\n\t *          {src:\"asset2.mp3\", id:\"works\"}\n\t *          {src:{mp3:\"path1/asset3.mp3\", ogg:\"path2/asset3NoExtension\"}, id:\"better\"}\n\t *      ];\n\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\t// if the passed extension is not supported, try this extension\n\t *      createjs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\n\t *      createjs.Sound.registerSounds(sounds, assetPath);\n\t *\n\t * @method registerSounds\n\t * @param {Array} sounds An array of objects to load. Objects are expected to be in the format needed for\n\t * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}: <code>{src:srcURI, id:ID, data:Data}</code>\n\t * with \"id\" and \"data\" being optional.\n\t * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to load.\n\t * Note id is required if src is an object with extension labeled src properties.\n\t * @param {string} basePath Set a path that will be prepended to each src when loading.  When creating, playing, or removing\n\t * audio that was loaded with a basePath by src, the basePath must be included.\n\t * @return {Object} An array of objects with the modified values that were passed in, which defines each sound.\n\t * Like registerSound, it will return false for any values when the source cannot be parsed or if no plugins can be initialized.\n\t * Also, it will return true for any values when the source is already loaded.\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.registerSounds = function (sounds, basePath) {\n\t\tvar returnValues = [];\n\t\tif (sounds.path) {\n\t\t\tif (!basePath) {\n\t\t\t\tbasePath = sounds.path;\n\t\t\t} else {\n\t\t\t\tbasePath = basePath + sounds.path;\n\t\t\t}\n\t\t\tsounds = sounds.manifest;\n\t\t\t// TODO document this feature\n\t\t}\n\t\tfor (var i = 0, l = sounds.length; i < l; i++) {\n\t\t\treturnValues[i] = createjs.Sound.registerSound(sounds[i].src, sounds[i].id, sounds[i].data, basePath, sounds[i].defaultPlayProps);\n\t\t}\n\t\treturn returnValues;\n\t};\n\n\t/**\n\t * Remove a sound that has been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t * <br />Note this will stop playback on active instances playing this sound before deleting them.\n\t * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Sound.removeSound(\"myID\");\n\t *      createjs.Sound.removeSound(\"myAudioBasePath/mySound.ogg\");\n\t *      createjs.Sound.removeSound(\"myPath/myOtherSound.mp3\", \"myBasePath/\");\n\t *      createjs.Sound.removeSound({mp3:\"musicNoExtension\", ogg:\"music.ogg\"}, \"myBasePath/\");\n\t *\n\t * @method removeSound\n\t * @param {String | Object} src The src or ID of the audio, or an Object with a \"src\" property, or an Object with multiple extension labeled src properties.\n\t * @param {string} basePath Set a path that will be prepended to each src when removing.\n\t * @return {Boolean} True if sound is successfully removed.\n\t * @static\n\t * @since 0.4.1\n\t */\n\ts.removeSound = function(src, basePath) {\n\t\tif (s.activePlugin == null) {return false;}\n\n\t\tif (src instanceof Object && src.src) {src = src.src;}\n\n\t\tvar details;\n\t\tif (src instanceof Object) {\n\t\t\tdetails = s._parseSrc(src);\n\t\t} else {\n\t\t\tsrc = s._getSrcById(src).src;\n\t\t\tdetails = s._parsePath(src);\n\t\t}\n\t\tif (details == null) {return false;}\n\t\tsrc = details.src;\n\t\tif (basePath != null) {src = basePath + src;}\n\n\t\tfor(var prop in s._idHash){\n\t\t\tif(s._idHash[prop].src == src) {\n\t\t\t\tdelete(s._idHash[prop]);\n\t\t\t}\n\t\t}\n\n\t\t// clear from SoundChannel, which also stops and deletes all instances\n\t\tSoundChannel.removeSrc(src);\n\n\t\tdelete(s._preloadHash[src]);\n\n\t\ts.activePlugin.removeSound(src);\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * Remove an array of audio files that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t * <br />Note this will stop playback on active instances playing this audio before deleting them.\n\t * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tassetPath = \"./myPath/\";\n\t *      var sounds = [\n\t *          {src:\"asset0.ogg\", id:\"example\"},\n\t *          {src:\"asset1.ogg\", id:\"1\", data:6},\n\t *          {src:\"asset2.mp3\", id:\"works\"}\n\t *      ];\n\t *      createjs.Sound.removeSounds(sounds, assetPath);\n\t *\n\t * @method removeSounds\n\t * @param {Array} sounds An array of objects to remove. Objects are expected to be in the format needed for\n\t * {{#crossLink \"Sound/removeSound\"}}{{/crossLink}}: <code>{srcOrID:srcURIorID}</code>.\n\t * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to remove.\n\t * @param {string} basePath Set a path that will be prepended to each src when removing.\n\t * @return {Object} An array of Boolean values representing if the sounds with the same array index were\n\t * successfully removed.\n\t * @static\n\t * @since 0.4.1\n\t */\n\ts.removeSounds = function (sounds, basePath) {\n\t\tvar returnValues = [];\n\t\tif (sounds.path) {\n\t\t\tif (!basePath) {\n\t\t\t\tbasePath = sounds.path;\n\t\t\t} else {\n\t\t\t\tbasePath = basePath + sounds.path;\n\t\t\t}\n\t\t\tsounds = sounds.manifest;\n\t\t}\n\t\tfor (var i = 0, l = sounds.length; i < l; i++) {\n\t\t\treturnValues[i] = createjs.Sound.removeSound(sounds[i].src, basePath);\n\t\t}\n\t\treturn returnValues;\n\t};\n\n\t/**\n\t * Remove all sounds that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t * <br />Note this will stop playback on all active sound instances before deleting them.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     createjs.Sound.removeAllSounds();\n\t *\n\t * @method removeAllSounds\n\t * @static\n\t * @since 0.4.1\n\t */\n\ts.removeAllSounds = function() {\n\t\ts._idHash = {};\n\t\ts._preloadHash = {};\n\t\tSoundChannel.removeAll();\n\t\tif (s.activePlugin) {s.activePlugin.removeAllSounds();}\n\t};\n\n\t/**\n\t * Check if a source has been loaded by internal preloaders. This is necessary to ensure that sounds that are\n\t * not completed preloading will not kick off a new internal preload if they are played.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     var mySound = \"assetPath/asset0.ogg\";\n\t *     if(createjs.Sound.loadComplete(mySound) {\n\t *         createjs.Sound.play(mySound);\n\t *     }\n\t *\n\t * @method loadComplete\n\t * @param {String} src The src or id that is being loaded.\n\t * @return {Boolean} If the src is already loaded.\n\t * @since 0.4.0\n\t * @static\n\t */\n\ts.loadComplete = function (src) {\n\t\tif (!s.isReady()) { return false; }\n\t\tvar details = s._parsePath(src);\n\t\tif (details) {\n\t\t\tsrc = s._getSrcById(details.src).src;\n\t\t} else {\n\t\t\tsrc = s._getSrcById(src).src;\n\t\t}\n\t\tif(s._preloadHash[src] == undefined) {return false;}\n\t\treturn (s._preloadHash[src][0] == true);  // src only loads once, so if it's true for the first it's true for all\n\t};\n\n\t/**\n\t * Parse the path of a sound. Alternate extensions will be attempted in order if the\n\t * current extension is not supported\n\t * @method _parsePath\n\t * @param {String} value The path to an audio source.\n\t * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\n\t * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n\t * @private\n\t * @static\n\t */\n\ts._parsePath = function (value) {\n\t\tif (typeof(value) != \"string\") {value = value.toString();}\n\n\t\tvar match = value.match(s.FILE_PATTERN);\n\t\tif (match == null) {return false;}\n\n\t\tvar name = match[4];\n\t\tvar ext = match[5];\n\t\tvar c = s.capabilities;\n\t\tvar i = 0;\n\t\twhile (!c[ext]) {\n\t\t\text = s.alternateExtensions[i++];\n\t\t\tif (i > s.alternateExtensions.length) { return null;}\t// no extensions are supported\n\t\t}\n\t\tvalue = value.replace(\".\"+match[5], \".\"+ext);\n\n\t\tvar ret = {name:name, src:value, extension:ext};\n\t\treturn ret;\n\t};\n\n\t/**\n\t * Parse the path of a sound based on properties of src matching with supported extensions.\n\t * Returns false if none of the properties are supported\n\t * @method _parseSrc\n\t * @param {Object} value The paths to an audio source, indexed by extension type.\n\t * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\n\t * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n\t * @private\n\t * @static\n\t */\n\ts._parseSrc = function (value) {\n\t\tvar ret = {name:undefined, src:undefined, extension:undefined};\n\t\tvar c = s.capabilities;\n\n\t\tfor (var prop in value) {\n\t\t  if(value.hasOwnProperty(prop) && c[prop]) {\n\t\t\t\tret.src = value[prop];\n\t\t\t\tret.extension = prop;\n\t\t\t\tbreak;\n\t\t  }\n\t\t}\n\t\tif (!ret.src) {return false;}\t// no matches\n\n\t\tvar i = ret.src.lastIndexOf(\"/\");\n\t\tif (i != -1) {\n\t\t\tret.name = ret.src.slice(i+1);\n\t\t} else {\n\t\t\tret.name = ret.src;\n\t\t}\n\n\t\treturn ret;\n\t};\n\n\t/* ---------------\n\t Static API.\n\t --------------- */\n\t/**\n\t * Play a sound and get a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to control. If the sound fails to\n\t * play, an AbstractSoundInstance will still be returned, and have a playState of {{#crossLink \"Sound/PLAY_FAILED:property\"}}{{/crossLink}}.\n\t * Note that even on sounds with failed playback, you may still be able to call the {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}},\n\t * method, since the failure could be due to lack of available channels. If the src does not have a supported\n\t * extension or if there is no available plugin, a default AbstractSoundInstance will still be returned, which will\n\t * not play any audio, but will not generate errors.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Sound.on(\"fileload\", handleLoad);\n\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\n\t *      function handleLoad(event) {\n\t *      \tcreatejs.Sound.play(\"myID\");\n\t *      \t// store off AbstractSoundInstance for controlling\n\t *      \tvar myInstance = createjs.Sound.play(\"myID\", {interrupt: createjs.Sound.INTERRUPT_ANY, loop:-1});\n\t *      }\n\t *\n\t * NOTE: To create an audio sprite that has not already been registered, both startTime and duration need to be set.\n\t * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\n\t *\n\t * @method play\n\t * @param {String} src The src or ID of the audio.\n\t * @param {Object | PlayPropsConfig} props A PlayPropsConfig instance, or an object that contains the parameters to\n\t * play a sound. See the {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for more info.\n\t * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled\n\t * after it is created.\n\t * @static\n\t */\n\ts.play = function (src, props) {\n\t\tvar playProps = createjs.PlayPropsConfig.create(props);\n\t\tvar instance = s.createInstance(src, playProps.startTime, playProps.duration);\n\t\tvar ok = s._playInstance(instance, playProps);\n\t\tif (!ok) {instance._playFailed();}\n\t\treturn instance;\n\t};\n\n\t/**\n\t * Creates a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} using the passed in src. If the src does not have a\n\t * supported extension or if there is no available plugin, a default AbstractSoundInstance will be returned that can be\n\t * called safely but does nothing.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var myInstance = null;\n\t *      createjs.Sound.on(\"fileload\", handleLoad);\n\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\n\t *      function handleLoad(event) {\n\t *      \tmyInstance = createjs.Sound.createInstance(\"myID\");\n\t *      \t// alternately we could call the following\n\t *      \tmyInstance = createjs.Sound.createInstance(\"myAudioPath/mySound.mp3\");\n\t *      }\n\t *\n\t * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\n\t * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\n\t *\n\t * @method createInstance\n\t * @param {String} src The src or ID of the audio.\n\t * @param {Number} [startTime=null] To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n\t * @param {Number} [duration=null] To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n\t * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\n\t * Unsupported extensions will return the default AbstractSoundInstance.\n\t * @since 0.4.0\n\t * @static\n\t */\n\ts.createInstance = function (src, startTime, duration) {\n\t\tif (!s.initializeDefaultPlugins()) { return new createjs.DefaultSoundInstance(src, startTime, duration); }\n\n\t\tvar defaultPlayProps = s._defaultPlayPropsHash[src];\t// for audio sprites, which create and store defaults by id\n\t\tsrc = s._getSrcById(src);\n\n\t\tvar details = s._parsePath(src.src);\n\n\t\tvar instance = null;\n\t\tif (details != null && details.src != null) {\n\t\t\tSoundChannel.create(details.src);\n\t\t\tif (startTime == null) { startTime = src.startTime; }\n\t\t\tinstance = s.activePlugin.create(details.src, startTime, duration || src.duration);\n\n\t\t\tdefaultPlayProps = defaultPlayProps || s._defaultPlayPropsHash[details.src];\n\t\t\tif (defaultPlayProps) {\n\t\t\t\tinstance.applyPlayProps(defaultPlayProps);\n\t\t\t}\n\t\t} else {\n\t\t\tinstance = new createjs.DefaultSoundInstance(src, startTime, duration);\n\t\t}\n\n\t\tinstance.uniqueId = s._lastID++;\n\n\t\treturn instance;\n\t};\n\n\t/**\n\t * Stop all audio (global stop). Stopped audio is reset, and not paused. To play audio that has been stopped,\n\t * call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     createjs.Sound.stop();\n\t *\n\t * @method stop\n\t * @static\n\t */\n\ts.stop = function () {\n\t\tvar instances = this._instances;\n\t\tfor (var i = instances.length; i--; ) {\n\t\t\tinstances[i].stop();  // NOTE stop removes instance from this._instances\n\t\t}\n\t};\n\n\t/**\n\t * Set the default playback properties for all new SoundInstances of the passed in src or ID.\n\t * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for available properties.\n\t *\n\t * @method setDefaultPlayProps\n\t * @param {String} src The src or ID used to register the audio.\n\t * @param {Object | PlayPropsConfig} playProps The playback properties you would like to set.\n\t * @since 0.6.1\n\t */\n\ts.setDefaultPlayProps = function(src, playProps) {\n\t\tsrc = s._getSrcById(src);\n\t\ts._defaultPlayPropsHash[s._parsePath(src.src).src] = createjs.PlayPropsConfig.create(playProps);\n\t};\n\n\t/**\n\t * Get the default playback properties for the passed in src or ID.  These properties are applied to all\n\t * new SoundInstances.  Returns null if default does not exist.\n\t *\n\t * @method getDefaultPlayProps\n\t * @param {String} src The src or ID used to register the audio.\n\t * @returns {PlayPropsConfig} returns an existing PlayPropsConfig or null if one does not exist\n\t * @since 0.6.1\n\t */\n\ts.getDefaultPlayProps = function(src) {\n\t\tsrc = s._getSrcById(src);\n\t\treturn s._defaultPlayPropsHash[s._parsePath(src.src).src];\n\t};\n\n\n\t/* ---------------\n\t Internal methods\n\t --------------- */\n\t/**\n\t * Play an instance. This is called by the static API, as well as from plugins. This allows the core class to\n\t * control delays.\n\t * @method _playInstance\n\t * @param {AbstractSoundInstance} instance The {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to start playing.\n\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n\t * @return {Boolean} If the sound can start playing. Sounds that fail immediately will return false. Sounds that\n\t * have a delay will return true, but may still fail to play.\n\t * @private\n\t * @static\n\t */\n\ts._playInstance = function (instance, playProps) {\n\t\tvar defaultPlayProps = s._defaultPlayPropsHash[instance.src] || {};\n\t\tif (playProps.interrupt == null) {playProps.interrupt = defaultPlayProps.interrupt || s.defaultInterruptBehavior};\n\t\tif (playProps.delay == null) {playProps.delay = defaultPlayProps.delay || 0;}\n\t\tif (playProps.offset == null) {playProps.offset = instance.position;}\n\t\tif (playProps.loop == null) {playProps.loop = instance.loop;}\n\t\tif (playProps.volume == null) {playProps.volume = instance.volume;}\n\t\tif (playProps.pan == null) {playProps.pan = instance.pan;}\n\n\t\tif (playProps.delay == 0) {\n\t\t\tvar ok = s._beginPlaying(instance, playProps);\n\t\t\tif (!ok) {return false;}\n\t\t} else {\n\t\t\t//Note that we can't pass arguments to proxy OR setTimeout (IE only), so just wrap the function call.\n\t\t\t// OJR WebAudio may want to handle this differently, so it might make sense to move this functionality into the plugins in the future\n\t\t\tvar delayTimeoutId = setTimeout(function () {\n\t\t\t\ts._beginPlaying(instance, playProps);\n\t\t\t}, playProps.delay);\n\t\t\tinstance.delayTimeoutId = delayTimeoutId;\n\t\t}\n\n\t\tthis._instances.push(instance);\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * Begin playback. This is called immediately or after delay by {{#crossLink \"Sound/playInstance\"}}{{/crossLink}}.\n\t * @method _beginPlaying\n\t * @param {AbstractSoundInstance} instance A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to begin playback.\n\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n\t * @return {Boolean} If the sound can start playing. If there are no available channels, or the instance fails to\n\t * start, this will return false.\n\t * @private\n\t * @static\n\t */\n\ts._beginPlaying = function (instance, playProps) {\n\t\tif (!SoundChannel.add(instance, playProps.interrupt)) {\n\t\t\treturn false;\n\t\t}\n\t\tvar result = instance._beginPlaying(playProps);\n\t\tif (!result) {\n\t\t\tvar index = createjs.indexOf(this._instances, instance);\n\t\t\tif (index > -1) {this._instances.splice(index, 1);}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\t/**\n\t * Get the source of a sound via the ID passed in with a register call. If no ID is found the value is returned\n\t * instead.\n\t * @method _getSrcById\n\t * @param {String} value The ID the sound was registered with.\n\t * @return {String} The source of the sound if it has been registered with this ID or the value that was passed in.\n\t * @private\n\t * @static\n\t */\n\ts._getSrcById = function (value) {\n\t\treturn s._idHash[value] || {src: value};\n\t};\n\n\t/**\n\t * A sound has completed playback, been interrupted, failed, or been stopped. This method removes the instance from\n\t * Sound management. It will be added again, if the sound re-plays. Note that this method is called from the\n\t * instances themselves.\n\t * @method _playFinished\n\t * @param {AbstractSoundInstance} instance The instance that finished playback.\n\t * @private\n\t * @static\n\t */\n\ts._playFinished = function (instance) {\n\t\tSoundChannel.remove(instance);\n\t\tvar index = createjs.indexOf(this._instances, instance);\n\t\tif (index > -1) {this._instances.splice(index, 1);}\t// OJR this will always be > -1, there is no way for an instance to exist without being added to this._instances\n\t};\n\n\tcreatejs.Sound = Sound;\n\n\t/**\n\t * An internal class that manages the number of active {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} instances for\n\t * each sound type. This method is only used internally by the {{#crossLink \"Sound\"}}{{/crossLink}} class.\n\t *\n\t * The number of sounds is artificially limited by Sound in order to prevent over-saturation of a\n\t * single sound, as well as to stay within hardware limitations, although the latter may disappear with better\n\t * browser support.\n\t *\n\t * When a sound is played, this class ensures that there is an available instance, or interrupts an appropriate\n\t * sound that is already playing.\n\t * #class SoundChannel\n\t * @param {String} src The source of the instances\n\t * @param {Number} [max=1] The number of instances allowed\n\t * @constructor\n\t * @protected\n\t */\n\tfunction SoundChannel(src, max) {\n\t\tthis.init(src, max);\n\t}\n\n\t/* ------------\n\t Static API\n\t ------------ */\n\t/**\n\t * A hash of channel instances indexed by source.\n\t * #property channels\n\t * @type {Object}\n\t * @static\n\t */\n\tSoundChannel.channels = {};\n\n\t/**\n\t * Create a sound channel. Note that if the sound channel already exists, this will fail.\n\t * #method create\n\t * @param {String} src The source for the channel\n\t * @param {Number} max The maximum amount this channel holds. The default is {{#crossLink \"SoundChannel.maxDefault\"}}{{/crossLink}}.\n\t * @return {Boolean} If the channels were created.\n\t * @static\n\t */\n\tSoundChannel.create = function (src, max) {\n\t\tvar channel = SoundChannel.get(src);\n\t\tif (channel == null) {\n\t\t\tSoundChannel.channels[src] = new SoundChannel(src, max);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\t/**\n\t * Delete a sound channel, stop and delete all related instances. Note that if the sound channel does not exist, this will fail.\n\t * #method remove\n\t * @param {String} src The source for the channel\n\t * @return {Boolean} If the channels were deleted.\n\t * @static\n\t */\n\tSoundChannel.removeSrc = function (src) {\n\t\tvar channel = SoundChannel.get(src);\n\t\tif (channel == null) {return false;}\n\t\tchannel._removeAll();\t// this stops and removes all active instances\n\t\tdelete(SoundChannel.channels[src]);\n\t\treturn true;\n\t};\n\t/**\n\t * Delete all sound channels, stop and delete all related instances.\n\t * #method removeAll\n\t * @static\n\t */\n\tSoundChannel.removeAll = function () {\n\t\tfor(var channel in SoundChannel.channels) {\n\t\t\tSoundChannel.channels[channel]._removeAll();\t// this stops and removes all active instances\n\t\t}\n\t\tSoundChannel.channels = {};\n\t};\n\t/**\n\t * Add an instance to a sound channel.\n\t * #method add\n\t * @param {AbstractSoundInstance} instance The instance to add to the channel\n\t * @param {String} interrupt The interrupt value to use. Please see the {{#crossLink \"Sound/play\"}}{{/crossLink}}\n\t * for details on interrupt modes.\n\t * @return {Boolean} The success of the method call. If the channel is full, it will return false.\n\t * @static\n\t */\n\tSoundChannel.add = function (instance, interrupt) {\n\t\tvar channel = SoundChannel.get(instance.src);\n\t\tif (channel == null) {return false;}\n\t\treturn channel._add(instance, interrupt);\n\t};\n\t/**\n\t * Remove an instance from the channel.\n\t * #method remove\n\t * @param {AbstractSoundInstance} instance The instance to remove from the channel\n\t * @return The success of the method call. If there is no channel, it will return false.\n\t * @static\n\t */\n\tSoundChannel.remove = function (instance) {\n\t\tvar channel = SoundChannel.get(instance.src);\n\t\tif (channel == null) {return false;}\n\t\tchannel._remove(instance);\n\t\treturn true;\n\t};\n\t/**\n\t * Get the maximum number of sounds you can have in a channel.\n\t * #method maxPerChannel\n\t * @return {Number} The maximum number of sounds you can have in a channel.\n\t */\n\tSoundChannel.maxPerChannel = function () {\n\t\treturn p.maxDefault;\n\t};\n\t/**\n\t * Get a channel instance by its src.\n\t * #method get\n\t * @param {String} src The src to use to look up the channel\n\t * @static\n\t */\n\tSoundChannel.get = function (src) {\n\t\treturn SoundChannel.channels[src];\n\t};\n\n\tvar p = SoundChannel.prototype;\n\tp.constructor = SoundChannel;\n\n\t/**\n\t * The source of the channel.\n\t * #property src\n\t * @type {String}\n\t */\n\tp.src = null;\n\n\t/**\n\t * The maximum number of instances in this channel.  -1 indicates no limit\n\t * #property max\n\t * @type {Number}\n\t */\n\tp.max = null;\n\n\t/**\n\t * The default value to set for max, if it isn't passed in.  Also used if -1 is passed.\n\t * #property maxDefault\n\t * @type {Number}\n\t * @default 100\n\t * @since 0.4.0\n\t */\n\tp.maxDefault = 100;\n\n\t/**\n\t * The current number of active instances.\n\t * #property length\n\t * @type {Number}\n\t */\n\tp.length = 0;\n\n\t/**\n\t * Initialize the channel.\n\t * #method init\n\t * @param {String} src The source of the channel\n\t * @param {Number} max The maximum number of instances in the channel\n\t * @protected\n\t */\n\tp.init = function (src, max) {\n\t\tthis.src = src;\n\t\tthis.max = max || this.maxDefault;\n\t\tif (this.max == -1) {this.max = this.maxDefault;}\n\t\tthis._instances = [];\n\t};\n\n\t/**\n\t * Get an instance by index.\n\t * #method get\n\t * @param {Number} index The index to return.\n\t * @return {AbstractSoundInstance} The AbstractSoundInstance at a specific instance.\n\t */\n\tp._get = function (index) {\n\t\treturn this._instances[index];\n\t};\n\n\t/**\n\t * Add a new instance to the channel.\n\t * #method add\n\t * @param {AbstractSoundInstance} instance The instance to add.\n\t * @return {Boolean} The success of the method call. If the channel is full, it will return false.\n\t */\n\tp._add = function (instance, interrupt) {\n\t\tif (!this._getSlot(interrupt, instance)) {return false;}\n\t\tthis._instances.push(instance);\n\t\tthis.length++;\n\t\treturn true;\n\t};\n\n\t/**\n\t * Remove an instance from the channel, either when it has finished playing, or it has been interrupted.\n\t * #method remove\n\t * @param {AbstractSoundInstance} instance The instance to remove\n\t * @return {Boolean} The success of the remove call. If the instance is not found in this channel, it will\n\t * return false.\n\t */\n\tp._remove = function (instance) {\n\t\tvar index = createjs.indexOf(this._instances, instance);\n\t\tif (index == -1) {return false;}\n\t\tthis._instances.splice(index, 1);\n\t\tthis.length--;\n\t\treturn true;\n\t};\n\n\t/**\n\t * Stop playback and remove all instances from the channel.  Usually in response to a delete call.\n\t * #method removeAll\n\t */\n\tp._removeAll = function () {\n\t\t// Note that stop() removes the item from the list\n\t\tfor (var i=this.length-1; i>=0; i--) {\n\t\t\tthis._instances[i].stop();\n\t\t}\n\t};\n\n\t/**\n\t * Get an available slot depending on interrupt value and if slots are available.\n\t * #method getSlot\n\t * @param {String} interrupt The interrupt value to use.\n\t * @param {AbstractSoundInstance} instance The sound instance that will go in the channel if successful.\n\t * @return {Boolean} Determines if there is an available slot. Depending on the interrupt mode, if there are no slots,\n\t * an existing AbstractSoundInstance may be interrupted. If there are no slots, this method returns false.\n\t */\n\tp._getSlot = function (interrupt, instance) {\n\t\tvar target, replacement;\n\n\t\tif (interrupt != Sound.INTERRUPT_NONE) {\n\t\t\t// First replacement candidate\n\t\t\treplacement = this._get(0);\n\t\t\tif (replacement == null) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0, l = this.max; i < l; i++) {\n\t\t\ttarget = this._get(i);\n\n\t\t\t// Available Space\n\t\t\tif (target == null) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Audio is complete or not playing\n\t\t\tif (target.playState == Sound.PLAY_FINISHED ||\n\t\t\t\ttarget.playState == Sound.PLAY_INTERRUPTED ||\n\t\t\t\ttarget.playState == Sound.PLAY_FAILED) {\n\t\t\t\treplacement = target;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (interrupt == Sound.INTERRUPT_NONE) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Audio is a better candidate than the current target, according to playhead\n\t\t\tif ((interrupt == Sound.INTERRUPT_EARLY && target.position < replacement.position) ||\n\t\t\t\t(interrupt == Sound.INTERRUPT_LATE && target.position > replacement.position)) {\n\t\t\t\t\treplacement = target;\n\t\t\t}\n\t\t}\n\n\t\tif (replacement != null) {\n\t\t\treplacement._interrupt();\n\t\t\tthis._remove(replacement);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[Sound SoundChannel]\";\n\t};\n\t// do not add SoundChannel to namespace\n\n}());\n\n//##############################################################################\n// AbstractSoundInstance.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n/**\n * A AbstractSoundInstance is created when any calls to the Sound API method {{#crossLink \"Sound/play\"}}{{/crossLink}} or\n * {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} are made. The AbstractSoundInstance is returned by the active plugin\n * for control by the user.\n *\n * <h4>Example</h4>\n *\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\n *\n * A number of additional parameters provide a quick way to determine how a sound is played. Please see the Sound\n * API method {{#crossLink \"Sound/play\"}}{{/crossLink}} for a list of arguments.\n *\n * Once a AbstractSoundInstance is created, a reference can be stored that can be used to control the audio directly through\n * the AbstractSoundInstance. If the reference is not stored, the AbstractSoundInstance will play out its audio (and any loops), and\n * is then de-referenced from the {{#crossLink \"Sound\"}}{{/crossLink}} class so that it can be cleaned up. If audio\n * playback has completed, a simple call to the {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} instance method\n * will rebuild the references the Sound class need to control it.\n *\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\", {loop:2});\n *      myInstance.on(\"loop\", handleLoop);\n *      function handleLoop(event) {\n *          myInstance.volume = myInstance.volume * 0.5;\n *      }\n *\n * Events are dispatched from the instance to notify when the sound has completed, looped, or when playback fails\n *\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\n *      myInstance.on(\"complete\", handleComplete);\n *      myInstance.on(\"loop\", handleLoop);\n *      myInstance.on(\"failed\", handleFailed);\n *\n *\n * @class AbstractSoundInstance\n * @param {String} src The path to and file name of the sound.\n * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n * @extends EventDispatcher\n * @constructor\n */\n\n(function () {\n\t\"use strict\";\n\n\n// Constructor:\n\tvar AbstractSoundInstance = function (src, startTime, duration, playbackResource) {\n\t\tthis.EventDispatcher_constructor();\n\n\n\t// public properties:\n\t\t/**\n\t\t * The source of the sound.\n\t\t * @property src\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.src = src;\n\n\t\t/**\n\t\t * The unique ID of the instance. This is set by {{#crossLink \"Sound\"}}{{/crossLink}}.\n\t\t * @property uniqueId\n\t\t * @type {String} | Number\n\t\t * @default -1\n\t\t */\n\t\tthis.uniqueId = -1;\n\n\t\t/**\n\t\t * The play state of the sound. Play states are defined as constants on {{#crossLink \"Sound\"}}{{/crossLink}}.\n\t\t * @property playState\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.playState = null;\n\n\t\t/**\n\t\t * A Timeout created by {{#crossLink \"Sound\"}}{{/crossLink}} when this AbstractSoundInstance is played with a delay.\n\t\t * This allows AbstractSoundInstance to remove the delay if stop, pause, or cleanup are called before playback begins.\n\t\t * @property delayTimeoutId\n\t\t * @type {timeoutVariable}\n\t\t * @default null\n\t\t * @protected\n\t\t * @since 0.4.0\n\t\t */\n\t\tthis.delayTimeoutId = null;\n\t\t// TODO consider moving delay into AbstractSoundInstance so it can be handled by plugins\n\n\n\t// private properties\n\t// Getter / Setter Properties\n\t\t// OJR TODO find original reason that we didn't use defined functions.  I think it was performance related\n\t\t/**\n\t\t * The volume of the sound, between 0 and 1.\n\t\t *\n\t\t * The actual output volume of a sound can be calculated using:\n\t\t * <code>myInstance.volume * createjs.Sound._getVolume();</code>\n\t\t *\n\t\t * @property volume\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t */\n\t\tthis._volume =  1;\n\t\tObject.defineProperty(this, \"volume\", {\n\t\t\tget: this._getVolume,\n\t\t\tset: this._setVolume\n\t\t});\n\n\t\t/**\n\t\t * The pan of the sound, between -1 (left) and 1 (right). Note that pan is not supported by HTML Audio.\n\t\t *\n\t\t * Note in WebAudioPlugin this only gives us the \"x\" value of what is actually 3D audio\n\t\t * @property pan\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._pan =  0;\n\t\tObject.defineProperty(this, \"pan\", {\n\t\t\tget: this._getPan,\n\t\t\tset: this._setPan\n\t\t});\n\n\t\t/**\n\t\t * Audio sprite property used to determine the starting offset.\n\t\t * @property startTime\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @since 0.6.1\n\t\t */\n\t\tthis._startTime = Math.max(0, startTime || 0);\n\t\tObject.defineProperty(this, \"startTime\", {\n\t\t\tget: this._getStartTime,\n\t\t\tset: this._setStartTime\n\t\t});\n\n\t\t/**\n\t\t * Sets or gets the length of the audio clip, value is in milliseconds.\n\t\t *\n\t\t * @property duration\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._duration = Math.max(0, duration || 0);\n\t\tObject.defineProperty(this, \"duration\", {\n\t\t\tget: this._getDuration,\n\t\t\tset: this._setDuration\n\t\t});\n\n\t\t/**\n\t\t * Object that holds plugin specific resource need for audio playback.\n\t\t * This is set internally by the plugin.  For example, WebAudioPlugin will set an array buffer,\n\t\t * HTMLAudioPlugin will set a tag, FlashAudioPlugin will set a flash reference.\n\t\t *\n\t\t * @property playbackResource\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis._playbackResource = null;\n\t\tObject.defineProperty(this, \"playbackResource\", {\n\t\t\tget: this._getPlaybackResource,\n\t\t\tset: this._setPlaybackResource\n\t\t});\n\t\tif(playbackResource !== false && playbackResource !== true) { this._setPlaybackResource(playbackResource); }\n\n\t\t/**\n\t\t * The position of the playhead in milliseconds. This can be set while a sound is playing, paused, or stopped.\n\t\t *\n\t\t * @property position\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._position = 0;\n\t\tObject.defineProperty(this, \"position\", {\n\t\t\tget: this._getPosition,\n\t\t\tset: this._setPosition\n\t\t});\n\n\t\t/**\n\t\t * The number of play loops remaining. Negative values will loop infinitely.\n\t\t *\n\t\t * @property loop\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @public\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._loop = 0;\n\t\tObject.defineProperty(this, \"loop\", {\n\t\t\tget: this._getLoop,\n\t\t\tset: this._setLoop\n\t\t});\n\n\t\t/**\n\t\t * Mutes or unmutes the current audio instance.\n\t\t *\n\t\t * @property muted\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._muted = false;\n\t\tObject.defineProperty(this, \"muted\", {\n\t\t\tget: this._getMuted,\n\t\t\tset: this._setMuted\n\t\t});\n\n\t\t/**\n\t\t * Pauses or resumes the current audio instance.\n\t\t *\n\t\t * @property paused\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._paused = false;\n\t\tObject.defineProperty(this, \"paused\", {\n\t\t\tget: this._getPaused,\n\t\t\tset: this._setPaused\n\t\t});\n\n\n\t// Events\n\t\t/**\n\t\t * The event that is fired when playback has started successfully.\n\t\t * @event succeeded\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.4.0\n\t\t */\n\n\t\t/**\n\t\t * The event that is fired when playback is interrupted. This happens when another sound with the same\n\t\t * src property is played using an interrupt value that causes this instance to stop playing.\n\t\t * @event interrupted\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.4.0\n\t\t */\n\n\t\t/**\n\t\t * The event that is fired when playback has failed. This happens when there are too many channels with the same\n\t\t * src property already playing (and the interrupt value doesn't cause an interrupt of another instance), or\n\t\t * the sound could not be played, perhaps due to a 404 error.\n\t\t * @event failed\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.4.0\n\t\t */\n\n\t\t/**\n\t\t * The event that is fired when a sound has completed playing but has loops remaining.\n\t\t * @event loop\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.4.0\n\t\t */\n\n\t\t/**\n\t\t * The event that is fired when playback completes. This means that the sound has finished playing in its\n\t\t * entirety, including its loop iterations.\n\t\t * @event complete\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.4.0\n\t\t */\n\t};\n\n\tvar p = createjs.extend(AbstractSoundInstance, createjs.EventDispatcher);\n\n// Public Methods:\n\t/**\n\t * Play an instance. This method is intended to be called on SoundInstances that already exist (created\n\t * with the Sound API {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} or {{#crossLink \"Sound/play\"}}{{/crossLink}}).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var myInstance = createjs.Sound.createInstance(mySrc);\n\t *      myInstance.play({interrupt:createjs.Sound.INTERRUPT_ANY, loop:2, pan:0.5});\n\t *\n\t * Note that if this sound is already playing, this call will still set the passed in parameters.\n\n\t * <b>Parameters Deprecated</b><br />\n\t * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\n\t *\n\t * @method play\n\t * @param {Object | PlayPropsConfig} props A PlayPropsConfig instance, or an object that contains the parameters to\n\t * play a sound. See the {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for more info.\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t */\n\tp.play = function (props) {\n\t\tvar playProps = createjs.PlayPropsConfig.create(props);\n\t\tif (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis.applyPlayProps(playProps);\n\t\t\tif (this._paused) {\tthis._setPaused(false); }\n\t\t\treturn;\n\t\t}\n\t\tthis._cleanUp();\n\t\tcreatejs.Sound._playInstance(this, playProps);\t// make this an event dispatch??\n\t\treturn this;\n\t};\n\n\t/**\n\t * Stop playback of the instance. Stopped sounds will reset their position to 0, and calls to {{#crossLink \"AbstractSoundInstance/resume\"}}{{/crossLink}}\n\t * will fail. To start playback again, call {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\n     *\n     * If you don't want to lose your position use yourSoundInstance.paused = true instead. {{#crossLink \"AbstractSoundInstance/paused\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     myInstance.stop();\n\t *\n\t * @method stop\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t */\n\tp.stop = function () {\n\t\tthis._position = 0;\n\t\tthis._paused = false;\n\t\tthis._handleStop();\n\t\tthis._cleanUp();\n\t\tthis.playState = createjs.Sound.PLAY_FINISHED;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Remove all external references and resources from AbstractSoundInstance.  Note this is irreversible and AbstractSoundInstance will no longer work\n\t * @method destroy\n\t * @since 0.6.0\n\t */\n\tp.destroy = function() {\n\t\tthis._cleanUp();\n\t\tthis.src = null;\n\t\tthis.playbackResource = null;\n\n\t\tthis.removeAllEventListeners();\n\t};\n\n\t/**\n\t * Takes an PlayPropsConfig or Object with the same properties and sets them on this instance.\n\t * @method applyPlayProps\n\t * @param {PlayPropsConfig | Object} playProps A PlayPropsConfig or object containing the same properties.\n\t * @since 0.6.1\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t */\n\tp.applyPlayProps = function(playProps) {\n\t\tif (playProps.offset != null) { this._setPosition(playProps.offset) }\n\t\tif (playProps.loop != null) { this._setLoop(playProps.loop); }\n\t\tif (playProps.volume != null) { this._setVolume(playProps.volume); }\n\t\tif (playProps.pan != null) { this._setPan(playProps.pan); }\n\t\tif (playProps.startTime != null) {\n\t\t\tthis._setStartTime(playProps.startTime);\n\t\t\tthis._setDuration(playProps.duration);\n\t\t}\n\t\treturn this;\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[AbstractSoundInstance]\";\n\t};\n\n// get/set methods that allow support for IE8\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property.\n\t * @method _getPaused\n\t * @protected\n\t * @return {boolean} If the instance is currently paused\n\t * @since 0.6.0\n\t */\n\tp._getPaused = function() {\n\t\treturn this._paused;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property\n\t * @method _setPaused\n\t * @protected\n\t * @param {boolean} value\n\t * @since 0.6.0\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t */\n\tp._setPaused = function (value) {\n\t\tif ((value !== true && value !== false) || this._paused == value) {return;}\n\t\tif (value == true && this.playState != createjs.Sound.PLAY_SUCCEEDED) {return;}\n\t\tthis._paused = value;\n\t\tif(value) {\n\t\t\tthis._pause();\n\t\t} else {\n\t\t\tthis._resume();\n\t\t}\n\t\tclearTimeout(this.delayTimeoutId);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\n\t * @method _setVolume\n\t * @protected\n\t * @param {Number} value The volume to set, between 0 and 1.\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t */\n\tp._setVolume = function (value) {\n\t\tif (value == this._volume) { return this; }\n\t\tthis._volume = Math.max(0, Math.min(1, value));\n\t\tif (!this._muted) {\n\t\t\tthis._updateVolume();\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\n\t * @method _getVolume\n\t * @protected\n\t * @return {Number} The current volume of the sound instance.\n\t */\n\tp._getVolume = function () {\n\t\treturn this._volume;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\n\t * @method _setMuted\n\t * @protected\n\t * @param {Boolean} value If the sound should be muted.\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t * @since 0.6.0\n\t */\n\tp._setMuted = function (value) {\n\t\tif (value !== true && value !== false) {return;}\n\t\tthis._muted = value;\n\t\tthis._updateVolume();\n\t\treturn this;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\n\t * @method _getMuted\n\t * @protected\n\t * @return {Boolean} If the sound is muted.\n\t * @since 0.6.0\n\t */\n\tp._getMuted = function () {\n\t\treturn this._muted;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\n\t * @method _setPan\n\t * @protected\n\t * @param {Number} value The pan value, between -1 (left) and 1 (right).\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t */\n\tp._setPan = function (value) {\n\t\tif(value == this._pan) { return this; }\n\t\tthis._pan = Math.max(-1, Math.min(1, value));\n\t\tthis._updatePan();\n\t\treturn this;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\n\t * @method _getPan\n\t * @protected\n\t * @return {Number} The value of the pan, between -1 (left) and 1 (right).\n\t */\n\tp._getPan = function () {\n\t\treturn this._pan;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\n\t * @method _getPosition\n\t * @protected\n\t * @return {Number} The position of the playhead in the sound, in milliseconds.\n\t */\n\tp._getPosition = function () {\n\t\tif (!this._paused && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis._position = this._calculateCurrentPosition();\n\t\t}\n\t\treturn this._position;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\n\t * @method _setPosition\n\t * @protected\n\t * @param {Number} value The position to place the playhead, in milliseconds.\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t */\n\tp._setPosition = function (value) {\n\t\tthis._position = Math.max(0, value);\n\t\tif (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis._updatePosition();\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\n\t * @method _getStartTime\n\t * @protected\n\t * @return {Number} The startTime of the sound instance in milliseconds.\n\t */\n\tp._getStartTime = function () {\n\t\treturn this._startTime;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\n\t * @method _setStartTime\n\t * @protected\n\t * @param {number} value The new startTime time in milli seconds.\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t */\n\tp._setStartTime = function (value) {\n\t\tif (value == this._startTime) { return this; }\n\t\tthis._startTime = Math.max(0, value || 0);\n\t\tthis._updateStartTime();\n\t\treturn this;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\n\t * @method _getDuration\n\t * @protected\n\t * @return {Number} The duration of the sound instance in milliseconds.\n\t */\n\tp._getDuration = function () {\n\t\treturn this._duration;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\n\t * @method _setDuration\n\t * @protected\n\t * @param {number} value The new duration time in milli seconds.\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t * @since 0.6.0\n\t */\n\tp._setDuration = function (value) {\n\t\tif (value == this._duration) { return this; }\n\t\tthis._duration = Math.max(0, value || 0);\n\t\tthis._updateDuration();\n\t\treturn this;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\n\t * @method _setPlaybackResource\n\t * @protected\n\t * @param {Object} value The new playback resource.\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t * @since 0.6.0\n\t **/\n\tp._setPlaybackResource = function (value) {\n\t\tthis._playbackResource = value;\n\t\tif (this._duration == 0 && this._playbackResource) { this._setDurationFromSource(); }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\n\t * @method _getPlaybackResource\n\t * @protected\n\t * @param {Object} value The new playback resource.\n\t * @return {Object} playback resource used for playing audio\n\t * @since 0.6.0\n\t **/\n\tp._getPlaybackResource = function () {\n\t\treturn this._playbackResource;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property\n\t * @method _getLoop\n\t * @protected\n\t * @return {number}\n\t * @since 0.6.0\n\t **/\n\tp._getLoop = function () {\n\t\treturn this._loop;\n\t};\n\n\t/**\n\t * Please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property\n\t * @method _setLoop\n\t * @protected\n\t * @param {number} value The number of times to loop after play.\n\t * @since 0.6.0\n\t */\n\tp._setLoop = function (value) {\n\t\tif(this._playbackResource != null) {\n\t\t\t// remove looping\n\t\t\tif (this._loop != 0 && value == 0) {\n\t\t\t\tthis._removeLooping(value);\n\t\t\t}\n\t\t\t// add looping\n\t\t\telse if (this._loop == 0 && value != 0) {\n\t\t\t\tthis._addLooping(value);\n\t\t\t}\n\t\t}\n\t\tthis._loop = value;\n\t};\n\n\n// Private Methods:\n\t/**\n\t * A helper method that dispatches all events for AbstractSoundInstance.\n\t * @method _sendEvent\n\t * @param {String} type The event type\n\t * @protected\n\t */\n\tp._sendEvent = function (type) {\n\t\tvar event = new createjs.Event(type);\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Clean up the instance. Remove references and clean up any additional properties such as timers.\n\t * @method _cleanUp\n\t * @protected\n\t */\n\tp._cleanUp = function () {\n\t\tclearTimeout(this.delayTimeoutId); // clear timeout that plays delayed sound\n\t\tthis._handleCleanUp();\n\t\tthis._paused = false;\n\n\t\tcreatejs.Sound._playFinished(this);\t// TODO change to an event\n\t};\n\n\t/**\n\t * The sound has been interrupted.\n\t * @method _interrupt\n\t * @protected\n\t */\n\tp._interrupt = function () {\n\t\tthis._cleanUp();\n\t\tthis.playState = createjs.Sound.PLAY_INTERRUPTED;\n\t\tthis._sendEvent(\"interrupted\");\n\t};\n\n\t/**\n\t * Called by the Sound class when the audio is ready to play (delay has completed). Starts sound playing if the\n\t * src is loaded, otherwise playback will fail.\n\t * @method _beginPlaying\n\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n\t * @return {Boolean} If playback succeeded.\n\t * @protected\n\t */\n\t// OJR FlashAudioSoundInstance overwrites\n\tp._beginPlaying = function (playProps) {\n\t\tthis._setPosition(playProps.offset);\n\t\tthis._setLoop(playProps.loop);\n\t\tthis._setVolume(playProps.volume);\n\t\tthis._setPan(playProps.pan);\n\t\tif (playProps.startTime != null) {\n\t\t\tthis._setStartTime(playProps.startTime);\n\t\t\tthis._setDuration(playProps.duration);\n\t\t}\n\n\t\tif (this._playbackResource != null && this._position < this._duration) {\n\t\t\tthis._paused = false;\n\t\t\tthis._handleSoundReady();\n\t\t\tthis.playState = createjs.Sound.PLAY_SUCCEEDED;\n\t\t\tthis._sendEvent(\"succeeded\");\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis._playFailed();\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Play has failed, which can happen for a variety of reasons.\n\t * Cleans up instance and dispatches failed event\n\t * @method _playFailed\n\t * @private\n\t */\n\tp._playFailed = function () {\n\t\tthis._cleanUp();\n\t\tthis.playState = createjs.Sound.PLAY_FAILED;\n\t\tthis._sendEvent(\"failed\");\n\t};\n\n\t/**\n\t * Audio has finished playing. Manually loop it if required.\n\t * @method _handleSoundComplete\n\t * @param event\n\t * @protected\n\t */\n\tp._handleSoundComplete = function (event) {\n\t\tthis._position = 0;  // have to set this as it can be set by pause during playback\n\n\t\tif (this._loop != 0) {\n\t\t\tthis._loop--;  // NOTE this introduces a theoretical limit on loops = float max size x 2 - 1\n\t\t\tthis._handleLoop();\n\t\t\tthis._sendEvent(\"loop\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis._cleanUp();\n\t\tthis.playState = createjs.Sound.PLAY_FINISHED;\n\t\tthis._sendEvent(\"complete\");\n\t};\n\n// Plugin specific code\n\t/**\n\t * Handles starting playback when the sound is ready for playing.\n\t * @method _handleSoundReady\n\t * @protected\n \t */\n\tp._handleSoundReady = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function used to update the volume based on the instance volume, master volume, instance mute value,\n\t * and master mute value.\n\t * @method _updateVolume\n\t * @protected\n\t */\n\tp._updateVolume = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function used to update the pan\n\t * @method _updatePan\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._updatePan = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function used to update the startTime of the audio.\n\t * @method _updateStartTime\n\t * @protected\n\t * @since 0.6.1\n\t */\n\tp._updateStartTime = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function used to update the duration of the audio.\n\t * @method _updateDuration\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._updateDuration = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function used to get the duration of the audio from the source we'll be playing.\n\t * @method _updateDuration\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._setDurationFromSource = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function that calculates the current position of the playhead and sets this._position to that value\n\t * @method _calculateCurrentPosition\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._calculateCurrentPosition = function () {\n\t\t// plugin specific code that sets this.position\n\t};\n\n\t/**\n\t * Internal function used to update the position of the playhead.\n\t * @method _updatePosition\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._updatePosition = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when looping is removed during playback.\n\t * @method _removeLooping\n\t * @param {number} value The number of times to loop after play.\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._removeLooping = function (value) {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when looping is added during playback.\n\t * @method _addLooping\n\t * @param {number} value The number of times to loop after play.\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._addLooping = function (value) {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when pausing playback\n\t * @method _pause\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._pause = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when resuming playback\n\t * @method _resume\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._resume = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when stopping playback\n\t * @method _handleStop\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._handleStop = function() {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when AbstractSoundInstance is being cleaned up\n\t * @method _handleCleanUp\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._handleCleanUp = function() {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when AbstractSoundInstance has played to end and is looping\n\t * @method _handleLoop\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._handleLoop = function () {\n\t\t// plugin specific code\n\t};\n\n\tcreatejs.AbstractSoundInstance = createjs.promote(AbstractSoundInstance, \"EventDispatcher\");\n\tcreatejs.DefaultSoundInstance = createjs.AbstractSoundInstance;\t// used when no plugin is supported\n}());\n\n//##############################################################################\n// AbstractPlugin.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\n// constructor:\n \t/**\n\t * A default plugin class used as a base for all other plugins.\n\t * @class AbstractPlugin\n\t * @constructor\n\t * @since 0.6.0\n\t */\n\n\tvar AbstractPlugin = function () {\n\t// private properties:\n\t\t/**\n\t\t * The capabilities of the plugin.\n\t\t * method and is used internally.\n\t\t * @property _capabilities\n\t\t * @type {Object}\n\t\t * @default null\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\tthis._capabilities = null;\n\n\t\t/**\n\t\t * Object hash indexed by the source URI of all created loaders, used to properly destroy them if sources are removed.\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._loaders = {};\n\n\t\t/**\n\t\t * Object hash indexed by the source URI of each file to indicate if an audio source has begun loading,\n\t\t * is currently loading, or has completed loading.  Can be used to store non boolean data after loading\n\t\t * is complete (for example arrayBuffers for web audio).\n\t\t * @property _audioSources\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._audioSources = {};\n\n\t\t/**\n\t\t * Object hash indexed by the source URI of all created SoundInstances, updates the playbackResource if it loads after they are created,\n\t\t * and properly destroy them if sources are removed\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._soundInstances = {};\n\n\t\t/**\n\t\t * The internal master volume value of the plugin.\n\t\t * @property _volume\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @protected\n\t\t */\n\t\tthis._volume = 1;\n\n\t\t/**\n\t\t * A reference to a loader class used by a plugin that must be set.\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._loaderClass;\n\n\t\t/**\n\t\t * A reference to an AbstractSoundInstance class used by a plugin that must be set.\n\t\t * @type {Object}\n\t\t * @protected;\n\t\t */\n\t\tthis._soundInstanceClass;\n\t};\n\tvar p = AbstractPlugin.prototype;\n\n// Static Properties:\n// NOTE THESE PROPERTIES NEED TO BE ADDED TO EACH PLUGIN\n\t/**\n\t * The capabilities of the plugin. This is generated via the _generateCapabilities method and is used internally.\n\t * @property _capabilities\n\t * @type {Object}\n\t * @default null\n\t * @private\n\t * @static\n\t */\n\tAbstractPlugin._capabilities = null;\n\n\t/**\n\t * Determine if the plugin can be used in the current browser/OS.\n\t * @method isSupported\n\t * @return {Boolean} If the plugin can be initialized.\n\t * @static\n\t */\n\tAbstractPlugin.isSupported = function () {\n\t\treturn true;\n\t};\n\n\n// public methods:\n\t/**\n\t * Pre-register a sound for preloading and setup. This is called by {{#crossLink \"Sound\"}}{{/crossLink}}.\n\t * Note all plugins provide a <code>Loader</code> instance, which <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>\n\t * can use to assist with preloading.\n\t * @method register\n\t * @param {String} loadItem An Object containing the source of the audio\n\t * Note that not every plugin will manage this value.\n\t * @return {Object} A result object, containing a \"tag\" for preloading purposes.\n\t */\n\tp.register = function (loadItem) {\n\t\tvar loader = this._loaders[loadItem.src];\n\t\tif(loader && !loader.canceled) {return this._loaders[loadItem.src];}\t// already loading/loaded this, so don't load twice\n\t\t// OJR potential issue that we won't be firing loaded event, might need to trigger if this is already loaded?\n\t\tthis._audioSources[loadItem.src] = true;\n\t\tthis._soundInstances[loadItem.src] = [];\n\t\tloader = new this._loaderClass(loadItem);\n\t\tloader.on(\"complete\", this._handlePreloadComplete, this);\n\t\tthis._loaders[loadItem.src] = loader;\n\t\treturn loader;\n\t};\n\n\t// note sound calls register before calling preload\n\t/**\n\t * Internally preload a sound.\n\t * @method preload\n\t * @param {Loader} loader The sound URI to load.\n\t */\n\tp.preload = function (loader) {\n\t\tloader.on(\"error\", this._handlePreloadError, this);\n\t\tloader.load();\n\t};\n\n\t/**\n\t * Checks if preloading has started for a specific source. If the source is found, we can assume it is loading,\n\t * or has already finished loading.\n\t * @method isPreloadStarted\n\t * @param {String} src The sound URI to check.\n\t * @return {Boolean}\n\t */\n\tp.isPreloadStarted = function (src) {\n\t\treturn (this._audioSources[src] != null);\n\t};\n\n\t/**\n\t * Checks if preloading has finished for a specific source.\n\t * @method isPreloadComplete\n\t * @param {String} src The sound URI to load.\n\t * @return {Boolean}\n\t */\n\tp.isPreloadComplete = function (src) {\n\t\treturn (!(this._audioSources[src] == null || this._audioSources[src] == true));\n\t};\n\n\t/**\n\t * Remove a sound added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\n\t * @method removeSound\n\t * @param {String} src The sound URI to unload.\n\t */\n\tp.removeSound = function (src) {\n\t\tif (!this._soundInstances[src]) { return; }\n\t\tfor (var i = this._soundInstances[src].length; i--; ) {\n\t\t\tvar item = this._soundInstances[src][i];\n\t\t\titem.destroy();\n\t\t}\n\t\tdelete(this._soundInstances[src]);\n\t\tdelete(this._audioSources[src]);\n\t\tif(this._loaders[src]) { this._loaders[src].destroy(); }\n\t\tdelete(this._loaders[src]);\n\t};\n\n\t/**\n\t * Remove all sounds added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\n\t * @method removeAllSounds\n\t * @param {String} src The sound URI to unload.\n\t */\n\tp.removeAllSounds = function () {\n\t\tfor(var key in this._audioSources) {\n\t\t\tthis.removeSound(key);\n\t\t}\n\t};\n\n\t/**\n\t * Create a sound instance. If the sound has not been preloaded, it is internally preloaded here.\n\t * @method create\n\t * @param {String} src The sound source to use.\n\t * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n\t * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n\t * @return {AbstractSoundInstance} A sound instance for playback and control.\n\t */\n\tp.create = function (src, startTime, duration) {\n\t\tif (!this.isPreloadStarted(src)) {\n\t\t\tthis.preload(this.register(src));\n\t\t}\n\t\tvar si = new this._soundInstanceClass(src, startTime, duration, this._audioSources[src]);\n\t\tif(this._soundInstances[src]){\n\t\t\tthis._soundInstances[src].push(si);\n\t\t}\n\n\t\t// Plugins that don't have a setVolume should implement a setMasterVolune/setMasterMute\n\t\t// So we have to check that here.\n\t\tsi.setMasterVolume && si.setMasterVolume(createjs.Sound.volume);\n\t\tsi.setMasterMute && si.setMasterMute(createjs.Sound.muted);\n\n\t\treturn si;\n\t};\n\n\t// if a plugin does not support volume and mute, it should set these to null\n\t/**\n\t * Set the master volume of the plugin, which affects all SoundInstances.\n\t * @method setVolume\n\t * @param {Number} value The volume to set, between 0 and 1.\n\t * @return {Boolean} If the plugin processes the setVolume call (true). The Sound class will affect all the\n\t * instances manually otherwise.\n\t */\n\tp.setVolume = function (value) {\n\t\tthis._volume = value;\n\t\tthis._updateVolume();\n\t\treturn true;\n\t};\n\n\t/**\n\t * Get the master volume of the plugin, which affects all SoundInstances.\n\t * @method getVolume\n\t * @return {Number} The volume level, between 0 and 1.\n\t */\n\tp.getVolume = function () {\n\t\treturn this._volume;\n\t};\n\n\t/**\n\t * Mute all sounds via the plugin.\n\t * @method setMute\n\t * @param {Boolean} value If all sound should be muted or not. Note that plugin-level muting just looks up\n\t * the mute value of Sound {{#crossLink \"Sound/muted:property\"}}{{/crossLink}}, so this property is not used here.\n\t * @return {Boolean} If the mute call succeeds.\n\t */\n\tp.setMute = function (value) {\n\t\tthis._updateVolume();\n\t\treturn true;\n\t};\n\n\t// plugins should overwrite this method\n\tp.toString = function () {\n\t\treturn \"[AbstractPlugin]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * Handles internal preload completion.\n\t * @method _handlePreloadComplete\n\t * @param event\n\t * @protected\n\t */\n\tp._handlePreloadComplete = function (event) {\n\t\tvar src = event.target.getItem().src;\n\t\tthis._audioSources[src] = event.result;\n\t\tfor (var i = 0, l = this._soundInstances[src].length; i < l; i++) {\n\t\t\tvar item = this._soundInstances[src][i];\n\t\t\titem.setPlaybackResource(this._audioSources[src]);\n\t\t\t// ToDo consider adding play call here if playstate == playfailed\n\t\t\tthis._soundInstances[src] = null;\n\t\t}\n\t};\n\n\t/**\n\t * Handles internal preload errors\n\t * @method _handlePreloadError\n\t * @param event\n\t * @protected\n\t */\n\tp._handlePreloadError = function(event) {\n\t\t//delete(this._audioSources[src]);\n\t};\n\n\t/**\n\t * Set the gain value for master audio. Should not be called externally.\n\t * @method _updateVolume\n\t * @protected\n\t */\n\tp._updateVolume = function () {\n\t\t// Plugin Specific code\n\t};\n\n\tcreatejs.AbstractPlugin = AbstractPlugin;\n}());\n\n//##############################################################################\n// WebAudioLoader.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * Loader provides a mechanism to preload Web Audio content via PreloadJS or internally. Instances are returned to\n\t * the preloader, and the load method is called when the asset needs to be requested.\n\t *\n\t * @class WebAudioLoader\n\t * @param {String} loadItem The item to be loaded\n\t * @extends XHRRequest\n\t * @protected\n\t */\n\tfunction Loader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.Types.SOUND);\n\n\t};\n\tvar p = createjs.extend(Loader, createjs.AbstractLoader);\n\n\t/**\n\t * web audio context required for decoding audio\n\t * @property context\n\t * @type {AudioContext}\n\t * @static\n\t */\n\tLoader.context = null;\n\n\n// public methods\n\tp.toString = function () {\n\t\treturn \"[WebAudioLoader]\";\n\t};\n\n\n// private methods\n\tp._createRequest = function() {\n\t\tthis._request = new createjs.XHRRequest(this._item, false);\n\t\tthis._request.setResponseType(\"arraybuffer\");\n\t};\n\n\tp._sendComplete = function (event) {\n\t\t// OJR we leave this wrapped in Loader because we need to reference src and the handler only receives a single argument, the decodedAudio\n\t\tLoader.context.decodeAudioData(this._rawResult,\n\t         createjs.proxy(this._handleAudioDecoded, this),\n\t         createjs.proxy(this._sendError, this));\n\t};\n\n\n\t/**\n\t* The audio has been decoded.\n\t* @method handleAudioDecoded\n\t* @param decoded\n\t* @protected\n\t*/\n\tp._handleAudioDecoded = function (decodedAudio) {\n\t\tthis._result = decodedAudio;\n\t\tthis.AbstractLoader__sendComplete();\n\t};\n\n\tcreatejs.WebAudioLoader = createjs.promote(Loader, \"AbstractLoader\");\n}());\n\n//##############################################################################\n// WebAudioSoundInstance.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n/**\n * WebAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\n * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n *\n * WebAudioSoundInstance exposes audioNodes for advanced users.\n *\n * @param {String} src The path to and file name of the sound.\n * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n * @class WebAudioSoundInstance\n * @extends AbstractSoundInstance\n * @constructor\n */\n(function () {\n\t\"use strict\";\n\n\tfunction WebAudioSoundInstance(src, startTime, duration, playbackResource) {\n\t\tthis.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\n\n\n// public properties\n\t\t/**\n\t\t * NOTE this is only intended for use by advanced users.\n\t\t * <br />GainNode for controlling <code>WebAudioSoundInstance</code> volume. Connected to the {{#crossLink \"WebAudioSoundInstance/destinationNode:property\"}}{{/crossLink}}.\n\t\t * @property gainNode\n\t\t * @type {AudioGainNode}\n\t\t * @since 0.4.0\n\t\t *\n\t\t */\n\t\tthis.gainNode = s.context.createGain();\n\n\t\t/**\n\t\t * NOTE this is only intended for use by advanced users.\n\t\t * <br />A panNode allowing left and right audio channel panning only. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\n\t\t * @property panNode\n\t\t * @type {AudioPannerNode}\n\t\t * @since 0.4.0\n\t\t */\n\t\tthis.panNode = s.context.createPanner();\n\t\tthis.panNode.panningModel = s._panningModel;\n\t\tthis.panNode.connect(this.gainNode);\n\t\tthis._updatePan();\n\n\t\t/**\n\t\t * NOTE this is only intended for use by advanced users.\n\t\t * <br />sourceNode is the audio source. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/panNode:property\"}}{{/crossLink}}.\n\t\t * @property sourceNode\n\t\t * @type {AudioNode}\n\t\t * @since 0.4.0\n\t\t *\n\t\t */\n\t\tthis.sourceNode = null;\n\n\n// private properties\n\t\t/**\n\t\t * Timeout that is created internally to handle sound playing to completion.\n\t\t * Stored so we can remove it when stop, pause, or cleanup are called\n\t\t * @property _soundCompleteTimeout\n\t\t * @type {timeoutVariable}\n\t\t * @default null\n\t\t * @protected\n\t\t * @since 0.4.0\n\t\t */\n\t\tthis._soundCompleteTimeout = null;\n\n\t\t/**\n\t\t * NOTE this is only intended for use by very advanced users.\n\t\t * _sourceNodeNext is the audio source for the next loop, inserted in a look ahead approach to allow for smooth\n\t\t * looping. Connected to {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\n\t\t * @property _sourceNodeNext\n\t\t * @type {AudioNode}\n\t\t * @default null\n\t\t * @protected\n\t\t * @since 0.4.1\n\t\t *\n\t\t */\n\t\tthis._sourceNodeNext = null;\n\n\t\t/**\n\t\t * Time audio started playback, in seconds. Used to handle set position, get position, and resuming from paused.\n\t\t * @property _playbackStartTime\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @protected\n\t\t * @since 0.4.0\n\t\t */\n\t\tthis._playbackStartTime = 0;\n\n\t\t// Proxies, make removing listeners easier.\n\t\tthis._endedHandler = createjs.proxy(this._handleSoundComplete, this);\n\t};\n\tvar p = createjs.extend(WebAudioSoundInstance, createjs.AbstractSoundInstance);\n\tvar s = WebAudioSoundInstance;\n\n\t/**\n\t * Note this is only intended for use by advanced users.\n\t * <br />Audio context used to create nodes.  This is and needs to be the same context used by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n  \t * @property context\n\t * @type {AudioContext}\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.context = null;\n\n\t/**\n\t * Note this is only intended for use by advanced users.\n\t * <br />The scratch buffer that will be assigned to the buffer property of a source node on close.  \n\t * This is and should be the same scratch buffer referenced by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n  \t * @property _scratchBuffer\n\t * @type {AudioBufferSourceNode}\n\t * @static\n\t */\n\ts._scratchBuffer = null;\n\n\t/**\n\t * Note this is only intended for use by advanced users.\n\t * <br /> Audio node from WebAudioPlugin that sequences to <code>context.destination</code>\n\t * @property destinationNode\n\t * @type {AudioNode}\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.destinationNode = null;\n\n\t/**\n\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n\t * @property _panningModel\n\t * @type {Number / String}\n\t * @protected\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts._panningModel = \"equalpower\";\n\n\n// Public methods\n\tp.destroy = function() {\n\t\tthis.AbstractSoundInstance_destroy();\n\n\t\tthis.panNode.disconnect(0);\n\t\tthis.panNode = null;\n\t\tthis.gainNode.disconnect(0);\n\t\tthis.gainNode = null;\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[WebAudioSoundInstance]\";\n\t};\n\n\n// Private Methods\n\tp._updatePan = function() {\n\t\tthis.panNode.setPosition(this._pan, 0, -0.5);\n\t\t// z need to be -0.5 otherwise the sound only plays in left, right, or center\n\t};\n\n\tp._removeLooping = function(value) {\n\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\t};\n\n\tp._addLooping = function(value) {\n\t\tif (this.playState != createjs.Sound.PLAY_SUCCEEDED) { return; }\n\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n\t};\n\n\tp._setDurationFromSource = function () {\n\t\tthis._duration = this.playbackResource.duration * 1000;\n\t};\n\n\tp._handleCleanUp = function () {\n\t\tif (this.sourceNode && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n\t\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\t\t}\n\n\t\tif (this.gainNode.numberOfOutputs != 0) {this.gainNode.disconnect(0);}\n\t\t// OJR there appears to be a bug that this doesn't always work in webkit (Chrome and Safari). According to the documentation, this should work.\n\n\t\tclearTimeout(this._soundCompleteTimeout);\n\n\t\tthis._playbackStartTime = 0;\t// This is used by _getPosition\n\t};\n\n\t/**\n\t * Turn off and disconnect an audioNode, then set reference to null to release it for garbage collection\n\t * @method _cleanUpAudioNode\n\t * @param audioNode\n\t * @return {audioNode}\n\t * @protected\n\t * @since 0.4.1\n\t */\n\tp._cleanUpAudioNode = function(audioNode) {\n\t\tif(audioNode) {\n\t\t\taudioNode.stop(0);\n\t\t\taudioNode.disconnect(0);\n\t\t\t// necessary to prevent leak on iOS Safari 7-9. will throw in almost all other\n\t\t\t// browser implementations.\n\t\t\tif ( createjs.BrowserDetect.isIOS ) {\n\t\t\t\ttry { audioNode.buffer = s._scratchBuffer; } catch(e) {}\n\t\t\t}\n\t\t\taudioNode = null;\n\t\t}\n\t\treturn audioNode;\n\t};\n\n\tp._handleSoundReady = function (event) {\n\t\tthis.gainNode.connect(s.destinationNode);  // this line can cause a memory leak.  Nodes need to be disconnected from the audioDestination or any sequence that leads to it.\n\n\t\tvar dur = this._duration * 0.001,\n\t\t\tpos = Math.min(Math.max(0, this._position) * 0.001, dur);\n\t\tthis.sourceNode = this._createAndPlayAudioNode((s.context.currentTime - dur), pos);\n\t\tthis._playbackStartTime = this.sourceNode.startTime - pos;\n\n\t\tthis._soundCompleteTimeout = setTimeout(this._endedHandler, (dur - pos) * 1000);\n\n\t\tif(this._loop != 0) {\n\t\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n\t\t}\n\t};\n\n\t/**\n\t * Creates an audio node using the current src and context, connects it to the gain node, and starts playback.\n\t * @method _createAndPlayAudioNode\n\t * @param {Number} startTime The time to add this to the web audio context, in seconds.\n\t * @param {Number} offset The amount of time into the src audio to start playback, in seconds.\n\t * @return {audioNode}\n\t * @protected\n\t * @since 0.4.1\n\t */\n\tp._createAndPlayAudioNode = function(startTime, offset) {\n\t\tvar audioNode = s.context.createBufferSource();\n\t\taudioNode.buffer = this.playbackResource;\n\t\taudioNode.connect(this.panNode);\n\t\tvar dur = this._duration * 0.001;\n\t\taudioNode.startTime = startTime + dur;\n\t\taudioNode.start(audioNode.startTime, offset+(this._startTime*0.001), dur - offset);\n\t\treturn audioNode;\n\t};\n\n\tp._pause = function () {\n\t\tthis._position = (s.context.currentTime - this._playbackStartTime) * 1000;  // * 1000 to give milliseconds, lets us restart at same point\n\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\n\t\tif (this.gainNode.numberOfOutputs != 0) {this.gainNode.disconnect(0);}\n\n\t\tclearTimeout(this._soundCompleteTimeout);\n\t};\n\n\tp._resume = function () {\n\t\tthis._handleSoundReady();\n\t};\n\n\t/*\n\tp._handleStop = function () {\n\t\t// web audio does not need to do anything extra\n\t};\n\t*/\n\n\tp._updateVolume = function () {\n\t\tvar newVolume = this._muted ? 0 : this._volume;\n\t  \tif (newVolume != this.gainNode.gain.value) {\n\t\t  this.gainNode.gain.value = newVolume;\n  \t\t}\n\t};\n\n\tp._calculateCurrentPosition = function () {\n\t\treturn ((s.context.currentTime - this._playbackStartTime) * 1000); // pos in seconds * 1000 to give milliseconds\n\t};\n\n\tp._updatePosition = function () {\n\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\t\tclearTimeout(this._soundCompleteTimeout);\n\n\t\tif (!this._paused) {this._handleSoundReady();}\n\t};\n\n\t// OJR we are using a look ahead approach to ensure smooth looping.\n\t// We add _sourceNodeNext to the audio context so that it starts playing even if this callback is delayed.\n\t// This technique is described here:  http://www.html5rocks.com/en/tutorials/audio/scheduling/\n\t// NOTE the cost of this is that our audio loop may not always match the loop event timing precisely.\n\tp._handleLoop = function () {\n\t\tthis._cleanUpAudioNode(this.sourceNode);\n\t\tthis.sourceNode = this._sourceNodeNext;\n\t\tthis._playbackStartTime = this.sourceNode.startTime;\n\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n\t\tthis._soundCompleteTimeout = setTimeout(this._endedHandler, this._duration);\n\t};\n\n\tp._updateDuration = function () {\n\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis._pause();\n\t\t\tthis._resume();\n\t\t}\n\t};\n\n\tcreatejs.WebAudioSoundInstance = createjs.promote(WebAudioSoundInstance, \"AbstractSoundInstance\");\n}());\n\n//##############################################################################\n// WebAudioPlugin.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\n\t\"use strict\";\n\n\t/**\n\t * Play sounds using Web Audio in the browser. The WebAudioPlugin is currently the default plugin, and will be used\n\t * anywhere that it is supported. To change plugin priority, check out the Sound API\n\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} method.\n\n\t * <h4>Known Browser and OS issues for Web Audio</h4>\n\t * <b>Firefox 25</b>\n\t * <li>\n\t *     mp3 audio files do not load properly on all windows machines, reported <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>.\n\t *     <br />For this reason it is recommended to pass another FireFox-supported type (i.e. ogg) as the default\n\t *     extension, until this bug is resolved\n\t * </li>\n\t *\n\t * <b>Webkit (Chrome and Safari)</b>\n\t * <li>\n\t *     AudioNode.disconnect does not always seem to work.  This can cause the file size to grow over time if you\n\t * \t   are playing a lot of audio files.\n\t * </li>\n\t *\n\t * <b>iOS 6 limitations</b>\n\t * <ul>\n\t *     <li>\n\t *         Sound is initially muted and will only unmute through play being called inside a user initiated event\n\t *         (touch/click). Please read the mobile playback notes in the the {{#crossLink \"Sound\"}}{{/crossLink}}\n\t *         class for a full overview of the limitations, and how to get around them.\n\t *     </li>\n\t *\t   <li>\n\t *\t       A bug exists that will distort un-cached audio when a video element is present in the DOM. You can avoid\n\t *\t       this bug by ensuring the audio and video audio share the same sample rate.\n\t *\t   </li>\n\t * </ul>\n\t * @class WebAudioPlugin\n\t * @extends AbstractPlugin\n\t * @constructor\n\t * @since 0.4.0\n\t */\n\tfunction WebAudioPlugin() {\n\t\tthis.AbstractPlugin_constructor();\n\n\n// Private Properties\n\t\t/**\n\t\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n\t\t * @property _panningModel\n\t\t * @type {Number / String}\n\t\t * @protected\n\t\t */\n\t\tthis._panningModel = s._panningModel;;\n\n\t\t/**\n\t\t * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\n\t\t * need to be created within this context.\n\t\t * @property context\n\t\t * @type {AudioContext}\n\t\t */\n\t\tthis.context = s.context;\n\n\t\t/**\n\t\t * A DynamicsCompressorNode, which is used to improve sound quality and prevent audio distortion.\n\t\t * It is connected to <code>context.destination</code>.\n\t\t *\n\t\t * Can be accessed by advanced users through createjs.Sound.activePlugin.dynamicsCompressorNode.\n\t\t * @property dynamicsCompressorNode\n\t\t * @type {AudioNode}\n\t\t */\n\t\tthis.dynamicsCompressorNode = this.context.createDynamicsCompressor();\n\t\tthis.dynamicsCompressorNode.connect(this.context.destination);\n\n\t\t/**\n\t\t * A GainNode for controlling master volume. It is connected to {{#crossLink \"WebAudioPlugin/dynamicsCompressorNode:property\"}}{{/crossLink}}.\n\t\t *\n\t\t * Can be accessed by advanced users through createjs.Sound.activePlugin.gainNode.\n\t\t * @property gainNode\n\t\t * @type {AudioGainNode}\n\t\t */\n\t\tthis.gainNode = this.context.createGain();\n\t\tthis.gainNode.connect(this.dynamicsCompressorNode);\n\t\tcreatejs.WebAudioSoundInstance.destinationNode = this.gainNode;\n\n\t\tthis._capabilities = s._capabilities;\n\n\t\tthis._loaderClass = createjs.WebAudioLoader;\n\t\tthis._soundInstanceClass = createjs.WebAudioSoundInstance;\n\n\t\tthis._addPropsToClasses();\n\t}\n\tvar p = createjs.extend(WebAudioPlugin, createjs.AbstractPlugin);\n\n// Static Properties\n\tvar s = WebAudioPlugin;\n\t/**\n\t * The capabilities of the plugin. This is generated via the {{#crossLink \"WebAudioPlugin/_generateCapabilities:method\"}}{{/crossLink}}\n\t * method and is used internally.\n\t * @property _capabilities\n\t * @type {Object}\n\t * @default null\n\t * @private\n\t * @static\n\t */\n\ts._capabilities = null;\n\n\t/**\n\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n\t * @property _panningModel\n\t * @type {Number / String}\n\t * @private\n\t * @static\n\t */\n\ts._panningModel = \"equalpower\";\n\n\t/**\n\t * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\n\t * need to be created within this context.\n\t *\n\t * Advanced users can set this to an existing context, but <b>must</b> do so before they call\n\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\n\t *\n\t * @property context\n\t * @type {AudioContext}\n\t * @static\n\t */\n\ts.context = null;\n\n\t/**\n\t * The scratch buffer that will be assigned to the buffer property of a source node on close.\n\t * Works around an iOS Safari bug: https://github.com/CreateJS/SoundJS/issues/102\n\t *\n\t * Advanced users can set this to an existing source node, but <b>must</b> do so before they call\n\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\n\t *\n\t * @property _scratchBuffer\n\t * @type {AudioBuffer}\n\t * @private\n\t * @static\n\t */\n\t s._scratchBuffer = null;\n\n\t/**\n\t * Indicated whether audio on iOS has been unlocked, which requires a touchend/mousedown event that plays an\n\t * empty sound.\n\t * @property _unlocked\n\t * @type {boolean}\n\t * @since 0.6.2\n\t * @private\n\t */\n\ts._unlocked = false;\n\n\t/**\n\t * The default sample rate used when checking for iOS compatibility. See {{#crossLink \"WebAudioPlugin/_createAudioContext\"}}{{/crossLink}}.\n\t * @property DEFAULT_SAMPLE_REATE\n\t * @type {number}\n\t * @default 44100\n\t * @static\n\t */\n\ts.DEFAULT_SAMPLE_RATE = 44100;\n\n// Static Public Methods\n\t/**\n\t * Determine if the plugin can be used in the current browser/OS.\n\t * @method isSupported\n\t * @return {Boolean} If the plugin can be initialized.\n\t * @static\n\t */\n\ts.isSupported = function () {\n\t\t// check if this is some kind of mobile device, Web Audio works with local protocol under PhoneGap and it is unlikely someone is trying to run a local file\n\t\tvar isMobilePhoneGap = createjs.BrowserDetect.isIOS || createjs.BrowserDetect.isAndroid || createjs.BrowserDetect.isBlackberry;\n\t\t// OJR isMobile may be redundant with _isFileXHRSupported available.  Consider removing.\n\t\tif (location.protocol == \"file:\" && !isMobilePhoneGap && !this._isFileXHRSupported()) { return false; }  // Web Audio requires XHR, which is not usually available locally\n\t\ts._generateCapabilities();\n\t\tif (s.context == null) {return false;}\n\t\treturn true;\n\t};\n\n\t/**\n\t * Plays an empty sound in the web audio context.  This is used to enable web audio on iOS devices, as they\n\t * require the first sound to be played inside of a user initiated event (touch/click).  This is called when\n\t * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} is initialized (by Sound {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}\n\t * for example).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     function handleTouch(event) {\n\t *         createjs.WebAudioPlugin.playEmptySound();\n\t *     }\n\t *\n\t * @method playEmptySound\n\t * @static\n\t * @since 0.4.1\n\t */\n\ts.playEmptySound = function() {\n\t\tif (s.context == null) {return;}\n\t\tvar source = s.context.createBufferSource();\n\t\tsource.buffer = s._scratchBuffer;\n\t\tsource.connect(s.context.destination);\n\t\tsource.start(0, 0, 0);\n\t};\n\n\n// Static Private Methods\n\t/**\n\t * Determine if XHR is supported, which is necessary for web audio.\n\t * @method _isFileXHRSupported\n\t * @return {Boolean} If XHR is supported.\n\t * @since 0.4.2\n\t * @private\n\t * @static\n\t */\n\ts._isFileXHRSupported = function() {\n\t\t// it's much easier to detect when something goes wrong, so let's start optimistically\n\t\tvar supported = true;\n\n\t\tvar xhr = new XMLHttpRequest();\n\t\ttry {\n\t\t\txhr.open(\"GET\", \"WebAudioPluginTest.fail\", false); // loading non-existant file triggers 404 only if it could load (synchronous call)\n\t\t} catch (error) {\n\t\t\t// catch errors in cases where the onerror is passed by\n\t\t\tsupported = false;\n\t\t\treturn supported;\n\t\t}\n\t\txhr.onerror = function() { supported = false; }; // cause irrelevant\n\t\t// with security turned off, we can get empty success results, which is actually a failed read (status code 0?)\n\t\txhr.onload = function() { supported = this.status == 404 || (this.status == 200 || (this.status == 0 && this.response != \"\")); };\n\t\ttry {\n\t\t\txhr.send();\n\t\t} catch (error) {\n\t\t\t// catch errors in cases where the onerror is passed by\n\t\t\tsupported = false;\n\t\t}\n\n\t\treturn supported;\n\t};\n\n\t/**\n\t * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}}\n\t * method for an overview of plugin capabilities.\n\t * @method _generateCapabilities\n\t * @static\n\t * @private\n\t */\n\ts._generateCapabilities = function () {\n\t\tif (s._capabilities != null) {return;}\n\t\t// Web Audio can be in any formats supported by the audio element, from http://www.w3.org/TR/webaudio/#AudioContext-section\n\t\tvar t = document.createElement(\"audio\");\n\t\tif (t.canPlayType == null) {return null;}\n\n\t\tif (s.context == null) {\n\t\t\ts.context = s._createAudioContext();\n\t\t\tif (s.context == null) { return null; }\n\t\t}\n\t\tif (s._scratchBuffer == null) {\n\t\t\ts._scratchBuffer = s.context.createBuffer(1, 1, 22050);\n\t\t}\n\n\t\ts._compatibilitySetUp();\n\n\t\t// Listen for document level clicks to unlock WebAudio on iOS. See the _unlock method.\n\t\tif (\"ontouchstart\" in window && s.context.state != \"running\") {\n\t\t\ts._unlock(); // When played inside of a touch event, this will enable audio on iOS immediately.\n\t\t\tdocument.addEventListener(\"mousedown\", s._unlock, true);\n\t\t\tdocument.addEventListener(\"touchstart\", s._unlock, true);\n\t\t\tdocument.addEventListener(\"touchend\", s._unlock, true);\n\t\t}\n\n\t\ts._capabilities = {\n\t\t\tpanning:true,\n\t\t\tvolume:true,\n\t\t\ttracks:-1\n\t\t};\n\n\t\t// determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\n\t\tvar supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\n\t\tvar extensionMap = createjs.Sound.EXTENSION_MAP;\n\t\tfor (var i = 0, l = supportedExtensions.length; i < l; i++) {\n\t\t\tvar ext = supportedExtensions[i];\n\t\t\tvar playType = extensionMap[ext] || ext;\n\t\t\ts._capabilities[ext] = (t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\") || (t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\");\n\t\t}  // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\n\n\t\t// 0=no output, 1=mono, 2=stereo, 4=surround, 6=5.1 surround.\n\t\t// See http://www.w3.org/TR/webaudio/#AudioChannelSplitter for more details on channels.\n\t\tif (s.context.destination.numberOfChannels < 2) {\n\t\t\ts._capabilities.panning = false;\n\t\t}\n\t};\n\n\t/**\n\t * Create an audio context for the sound.\n\t *\n\t * This method handles both vendor prefixes (specifically webkit support), as well as a case on iOS where\n\t * audio played with a different sample rate may play garbled when first started. The default sample rate is\n\t * 44,100, however it can be changed using the {{#crossLink \"WebAudioPlugin/DEFAULT_SAMPLE_RATE:property\"}}{{/crossLink}}.\n\t * @method _createAudioContext\n\t * @return {AudioContext | webkitAudioContext}\n\t * @private\n\t * @static\n\t * @since 1.0.0\n\t */\n\ts._createAudioContext = function() {\n\t\t// Slightly modified version of https://github.com/Jam3/ios-safe-audio-context\n\t\t// Resolves issues with first-run contexts playing garbled on iOS.\n\t\tvar AudioCtor = (window.AudioContext || window.webkitAudioContext);\n\t\tif (AudioCtor == null) { return null; }\n\t\tvar context = new AudioCtor();\n\n\t\t// Check if hack is necessary. Only occurs in iOS6+ devices\n\t\t// and only when you first boot the iPhone, or play a audio/video\n\t\t// with a different sample rate\n\t\tif (/(iPhone|iPad)/i.test(navigator.userAgent)\n\t\t\t\t&& context.sampleRate !== s.DEFAULT_SAMPLE_RATE) {\n\t\t\tvar buffer = context.createBuffer(1, 1, s.DEFAULT_SAMPLE_RATE),\n\t\t\t\t\tdummy = context.createBufferSource();\n\t\t\tdummy.buffer = buffer;\n\t\t\tdummy.connect(context.destination);\n\t\t\tdummy.start(0);\n\t\t\tdummy.disconnect();\n\t\t\tcontext.close() // dispose old context\n\n\t\t\tcontext = new AudioCtor();\n\t\t}\n\t\treturn context;\n\t}\n\n\t/**\n\t * Set up compatibility if only deprecated web audio calls are supported.\n\t * See http://www.w3.org/TR/webaudio/#DeprecationNotes\n\t * Needed so we can support new browsers that don't support deprecated calls (Firefox) as well as old browsers that\n\t * don't support new calls.\n\t *\n\t * @method _compatibilitySetUp\n\t * @static\n\t * @private\n\t * @since 0.4.2\n\t */\n\ts._compatibilitySetUp = function() {\n\t\ts._panningModel = \"equalpower\";\n\t\t//assume that if one new call is supported, they all are\n\t\tif (s.context.createGain) { return; }\n\n\t\t// simple name change, functionality the same\n\t\ts.context.createGain = s.context.createGainNode;\n\n\t\t// source node, add to prototype\n\t\tvar audioNode = s.context.createBufferSource();\n\t\taudioNode.__proto__.start = audioNode.__proto__.noteGrainOn;\t// note that noteGrainOn requires all 3 parameters\n\t\taudioNode.__proto__.stop = audioNode.__proto__.noteOff;\n\n\t\t// panningModel\n\t\ts._panningModel = 0;\n\t};\n\n\t/**\n\t * Try to unlock audio on iOS. This is triggered from either WebAudio plugin setup (which will work if inside of\n\t * a `mousedown` or `touchend` event stack), or the first document touchend/mousedown event. If it fails (touchend\n\t * will fail if the user presses for too long, indicating a scroll event instead of a click event.\n\t *\n\t * Note that earlier versions of iOS supported `touchstart` for this, but iOS9 removed this functionality. Adding\n\t * a `touchstart` event to support older platforms may preclude a `mousedown` even from getting fired on iOS9, so we\n\t * stick with `mousedown` and `touchend`.\n\t * @method _unlock\n\t * @since 0.6.2\n\t * @private\n\t */\n\ts._unlock = function() {\n\t\tif (s._unlocked) { return; }\n\t\ts.playEmptySound();\n\t\tif (s.context.state == \"running\") {\n\t\t\tdocument.removeEventListener(\"mousedown\", s._unlock, true);\n\t\t\tdocument.removeEventListener(\"touchend\", s._unlock, true);\n\t\t\tdocument.removeEventListener(\"touchstart\", s._unlock, true);\n\t\t\ts._unlocked = true;\n\t\t}\n\t};\n\n\n// Public Methods\n\tp.toString = function () {\n\t\treturn \"[WebAudioPlugin]\";\n\t};\n\n\n// Private Methods\n\t/**\n\t * Set up needed properties on supported classes WebAudioSoundInstance and WebAudioLoader.\n\t * @method _addPropsToClasses\n\t * @static\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._addPropsToClasses = function() {\n\t\tvar c = this._soundInstanceClass;\n\t\tc.context = this.context;\n\t\tc._scratchBuffer = s._scratchBuffer;\n\t\tc.destinationNode = this.gainNode;\n\t\tc._panningModel = this._panningModel;\n\n\t\tthis._loaderClass.context = this.context;\n\t};\n\n\n\t/**\n\t * Set the gain value for master audio. Should not be called externally.\n\t * @method _updateVolume\n\t * @protected\n\t */\n\tp._updateVolume = function () {\n\t\tvar newVolume = createjs.Sound._masterMute ? 0 : this._volume;\n\t\tif (newVolume != this.gainNode.gain.value) {\n\t\t\tthis.gainNode.gain.value = newVolume;\n\t\t}\n\t};\n\n\tcreatejs.WebAudioPlugin = createjs.promote(WebAudioPlugin, \"AbstractPlugin\");\n}());\n\n//##############################################################################\n// HTMLAudioTagPool.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * HTMLAudioTagPool is an object pool for HTMLAudio tag instances.\n\t * @class HTMLAudioTagPool\n\t * @param {String} src The source of the channel.\n\t * @protected\n\t */\n\tfunction HTMLAudioTagPool() {\n\t\t\tthrow \"HTMLAudioTagPool cannot be instantiated\";\n\t}\n\n\tvar s = HTMLAudioTagPool;\n\n// Static Properties\n\t/**\n\t * A hash lookup of each base audio tag, indexed by the audio source.\n\t * @property _tags\n\t * @type {{}}\n\t * @static\n\t * @private\n\t */\n\ts._tags = {};\n\n\t/**\n\t * An object pool for html audio tags\n\t * @property _tagPool\n\t * @type {TagPool}\n\t * @static\n\t * @private\n\t */\n\ts._tagPool = new TagPool();\n\n\t/**\n\t * A hash lookup of if a base audio tag is available, indexed by the audio source\n\t * @property _tagsUsed\n\t * @type {{}}\n\t * @private\n\t * @static\n\t */\n\ts._tagUsed = {};\n\n// Static Methods\n\t/**\n\t  * Get an audio tag with the given source.\n\t  * @method get\n\t  * @param {String} src The source file used by the audio tag.\n\t  * @static\n\t  */\n\t s.get = function (src) {\n\t\tvar t = s._tags[src];\n\t\tif (t == null) {\n\t\t\t// create new base tag\n\t\t\tt = s._tags[src] = s._tagPool.get();\n\t\t\tt.src = src;\n\t\t} else {\n\t\t\t// get base or pool\n\t\t\tif (s._tagUsed[src]) {\n\t\t\t\tt = s._tagPool.get();\n\t\t\t\tt.src = src;\n\t\t\t} else {\n\t\t\t\ts._tagUsed[src] = true;\n\t\t\t}\n\t\t}\n\t\treturn t;\n\t };\n\n\t /**\n\t  * Return an audio tag to the pool.\n\t  * @method set\n\t  * @param {String} src The source file used by the audio tag.\n\t  * @param {HTMLElement} tag Audio tag to set.\n\t  * @static\n\t  */\n\t s.set = function (src, tag) {\n\t\t // check if this is base, if yes set boolean if not return to pool\n\t\t if(tag == s._tags[src]) {\n\t\t\t s._tagUsed[src] = false;\n\t\t } else {\n\t\t\t s._tagPool.set(tag);\n\t\t }\n\t };\n\n\t/**\n\t * Delete stored tag reference and return them to pool. Note that if the tag reference does not exist, this will fail.\n\t * @method remove\n\t * @param {String} src The source for the tag\n\t * @return {Boolean} If the TagPool was deleted.\n\t * @static\n\t */\n\ts.remove = function (src) {\n\t\tvar tag = s._tags[src];\n\t\tif (tag == null) {return false;}\n\t\ts._tagPool.set(tag);\n\t\tdelete(s._tags[src]);\n\t\tdelete(s._tagUsed[src]);\n\t\treturn true;\n\t};\n\n\t/**\n\t * Gets the duration of the src audio in milliseconds\n\t * @method getDuration\n\t * @param {String} src The source file used by the audio tag.\n\t * @return {Number} Duration of src in milliseconds\n\t * @static\n\t */\n\ts.getDuration= function (src) {\n\t\tvar t = s._tags[src];\n\t\tif (t == null || !t.duration) {return 0;}\t// OJR duration is NaN if loading has not completed\n\t\treturn t.duration * 1000;\n\t};\n\n\tcreatejs.HTMLAudioTagPool = HTMLAudioTagPool;\n\n\n// ************************************************************************************************************\n\t/**\n\t * The TagPool is an object pool for HTMLAudio tag instances.\n\t * #class TagPool\n\t * @param {String} src The source of the channel.\n\t * @protected\n\t */\n\tfunction TagPool(src) {\n\n// Public Properties\n\t\t/**\n\t\t * A list of all available tags in the pool.\n\t\t * #property tags\n\t\t * @type {Array}\n\t\t * @protected\n\t\t */\n\t\tthis._tags = [];\n\t};\n\n\tvar p = TagPool.prototype;\n\tp.constructor = TagPool;\n\n\n// Public Methods\n\t/**\n\t * Get an HTMLAudioElement for immediate playback. This takes it out of the pool.\n\t * #method get\n\t * @return {HTMLAudioElement} An HTML audio tag.\n\t */\n\tp.get = function () {\n\t\tvar tag;\n\t\tif (this._tags.length == 0) {\n\t\t\ttag = this._createTag();\n\t\t} else {\n\t\t\ttag = this._tags.pop();\n\t\t}\n\t\tif (tag.parentNode == null) {document.body.appendChild(tag);}\n\t\treturn tag;\n\t};\n\n\t/**\n\t * Put an HTMLAudioElement back in the pool for use.\n\t * #method set\n\t * @param {HTMLAudioElement} tag HTML audio tag\n\t */\n\tp.set = function (tag) {\n\t\t// OJR this first step seems unnecessary\n\t\tvar index = createjs.indexOf(this._tags, tag);\n\t\tif (index == -1) {\n\t\t\tthis._tags.src = null;\n\t\t\tthis._tags.push(tag);\n\t\t}\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[TagPool]\";\n\t};\n\n\n// Private Methods\n\t/**\n\t * Create an HTML audio tag.\n\t * #method _createTag\n\t * @param {String} src The source file to set for the audio tag.\n\t * @return {HTMLElement} Returns an HTML audio tag.\n\t * @protected\n\t */\n\tp._createTag = function () {\n\t\tvar tag = document.createElement(\"audio\");\n\t\ttag.autoplay = false;\n\t\ttag.preload = \"none\";\n\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n\t\treturn tag;\n\t};\n\n}());\n\n//##############################################################################\n// HTMLAudioSoundInstance.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * HTMLAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\n\t * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n\t *\n\t * @param {String} src The path to and file name of the sound.\n\t * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n\t * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n\t * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n\t * @class HTMLAudioSoundInstance\n\t * @extends AbstractSoundInstance\n\t * @constructor\n\t */\n\tfunction HTMLAudioSoundInstance(src, startTime, duration, playbackResource) {\n\t\tthis.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\n\n\n// Private Properties\n\t\tthis._audioSpriteStopTime = null;\n\t\tthis._delayTimeoutId = null;\n\n\t\t// Proxies, make removing listeners easier.\n\t\tthis._endedHandler = createjs.proxy(this._handleSoundComplete, this);\n\t\tthis._readyHandler = createjs.proxy(this._handleTagReady, this);\n\t\tthis._stalledHandler = createjs.proxy(this._playFailed, this);\n\t\tthis._audioSpriteEndHandler = createjs.proxy(this._handleAudioSpriteLoop, this);\n\t\tthis._loopHandler = createjs.proxy(this._handleSoundComplete, this);\n\n\t\tif (duration) {\n\t\t\tthis._audioSpriteStopTime = (startTime + duration) * 0.001;\n\t\t} else {\n\t\t\tthis._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\n\t\t}\n\t}\n\tvar p = createjs.extend(HTMLAudioSoundInstance, createjs.AbstractSoundInstance);\n\n// Public Methods\n\t/**\n\t * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master volume.\n\t * undoc'd because it is not meant to be used outside of Sound\n\t * #method setMasterVolume\n\t * @param value\n\t */\n\tp.setMasterVolume = function (value) {\n\t\tthis._updateVolume();\n\t};\n\n\t/**\n\t * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master mute.\n\t * undoc'd because it is not meant to be used outside of Sound\n\t * #method setMasterMute\n\t * @param value\n\t */\n\tp.setMasterMute = function (isMuted) {\n\t\tthis._updateVolume();\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[HTMLAudioSoundInstance]\";\n\t};\n\n//Private Methods\n\tp._removeLooping = function() {\n\t\tif(this._playbackResource == null) {return;}\n\t\tthis._playbackResource.loop = false;\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t};\n\n\tp._addLooping = function() {\n\t\tif(this._playbackResource == null  || this._audioSpriteStopTime) {return;}\n\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\tthis._playbackResource.loop = true;\n\t};\n\n\tp._handleCleanUp = function () {\n\t\tvar tag = this._playbackResource;\n\t\tif (tag != null) {\n\t\t\ttag.pause();\n\t\t\ttag.loop = false;\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\n\t\t\ttry {\n\t\t\t\ttag.currentTime = this._startTime;\n\t\t\t} catch (e) {\n\t\t\t} // Reset Position\n\t\t\tcreatejs.HTMLAudioTagPool.set(this.src, tag);\n\t\t\tthis._playbackResource = null;\n\t\t}\n\t};\n\n\tp._beginPlaying = function (playProps) {\n\t\tthis._playbackResource = createjs.HTMLAudioTagPool.get(this.src);\n\t\treturn this.AbstractSoundInstance__beginPlaying(playProps);\n\t};\n\n\tp._handleSoundReady = function (event) {\n\t\tif (this._playbackResource.readyState !== 4) {\n\t\t\tvar tag = this._playbackResource;\n\t\t\ttag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n\t\t\ttag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n\t\t\ttag.preload = \"auto\"; // This is necessary for Firefox, as it won't ever \"load\" until this is set.\n\t\t\ttag.load();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._updateVolume();\n\t\tthis._playbackResource.currentTime = (this._startTime + this._position) * 0.001;\n\t\tif (this._audioSpriteStopTime) {\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\t\t} else {\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\tif(this._loop != 0) {\n\t\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t\t\tthis._playbackResource.loop = true;\n\t\t\t}\n\t\t}\n\n\t\tthis._playbackResource.play();\n\t};\n\n\t/**\n\t * Used to handle when a tag is not ready for immediate playback when it is returned from the HTMLAudioTagPool.\n\t * @method _handleTagReady\n\t * @param event\n\t * @protected\n\t */\n\tp._handleTagReady = function (event) {\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n\n\t\tthis._handleSoundReady();\n\t};\n\n\tp._pause = function () {\n\t\tthis._playbackResource.pause();\n\t};\n\n\tp._resume = function () {\n\t\tthis._playbackResource.play();\n\t};\n\n\tp._updateVolume = function () {\n\t\tif (this._playbackResource != null) {\n\t\t\tvar newVolume = (this._muted || createjs.Sound._masterMute) ? 0 : this._volume * createjs.Sound._masterVolume;\n\t\t\tif (newVolume != this._playbackResource.volume) {this._playbackResource.volume = newVolume;}\n\t\t}\n\t};\n\n\tp._calculateCurrentPosition = function() {\n\t\treturn (this._playbackResource.currentTime * 1000) - this._startTime;\n\t};\n\n\tp._updatePosition = function() {\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\n\t\ttry {\n\t\t\tthis._playbackResource.currentTime = (this._position + this._startTime) * 0.001;\n\t\t} catch (error) { // Out of range\n\t\t\tthis._handleSetPositionSeek(null);\n\t\t}\n\t};\n\n\t/**\n\t * Used to enable setting position, as we need to wait for that seek to be done before we add back our loop handling seek listener\n\t * @method _handleSetPositionSeek\n\t * @param event\n\t * @protected\n\t */\n\tp._handleSetPositionSeek = function(event) {\n\t\tif (this._playbackResource == null) { return; }\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\n\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t};\n\n\t/**\n\t * Timer used to loop audio sprites.\n\t * NOTE because of the inaccuracies in the timeupdate event (15 - 250ms) and in setting the tag to the desired timed\n\t * (up to 300ms), it is strongly recommended not to loop audio sprites with HTML Audio if smooth looping is desired\n\t *\n\t * @method _handleAudioSpriteLoop\n\t * @param event\n\t * @private\n\t */\n\tp._handleAudioSpriteLoop = function (event) {\n\t\tif(this._playbackResource.currentTime <= this._audioSpriteStopTime) {return;}\n\t\tthis._playbackResource.pause();\n\t\tif(this._loop == 0) {\n\t\t\tthis._handleSoundComplete(null);\n\t\t} else {\n\t\t\tthis._position = 0;\n\t\t\tthis._loop--;\n\t\t\tthis._playbackResource.currentTime = this._startTime * 0.001;\n\t\t\tif(!this._paused) {this._playbackResource.play();}\n\t\t\tthis._sendEvent(\"loop\");\n\t\t}\n\t};\n\n\t// NOTE with this approach audio will loop as reliably as the browser allows\n\t// but we could end up sending the loop event after next loop playback begins\n\tp._handleLoop = function (event) {\n\t\tif(this._loop == 0) {\n\t\t\tthis._playbackResource.loop = false;\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t}\n\t};\n\n\tp._updateStartTime = function () {\n\t\tthis._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\n\n\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\t\t}\n\t};\n\n\tp._updateDuration = function () {\n\t\tthis._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\n\n\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\t\t}\n\t};\n\n\tp._setDurationFromSource = function () {\n\t\tthis._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\n\t\tthis._playbackResource = null;\n\t};\n\n\tcreatejs.HTMLAudioSoundInstance = createjs.promote(HTMLAudioSoundInstance, \"AbstractSoundInstance\");\n}());\n\n//##############################################################################\n// HTMLAudioPlugin.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\n\t\"use strict\";\n\n\t/**\n\t * Play sounds using HTML &lt;audio&gt; tags in the browser. This plugin is the second priority plugin installed\n\t * by default, after the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.  For older browsers that do not support html\n\t * audio, include and install the {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\n\t *\n\t * <h4>Known Browser and OS issues for HTML Audio</h4>\n\t * <b>All browsers</b><br />\n\t * Testing has shown in all browsers there is a limit to how many audio tag instances you are allowed.  If you exceed\n\t * this limit, you can expect to see unpredictable results. Please use {{#crossLink \"Sound.MAX_INSTANCES\"}}{{/crossLink}} as\n\t * a guide to how many total audio tags you can safely use in all browsers.  This issue is primarily limited to IE9.\n\t *\n     * <b>IE html limitations</b><br />\n     * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\n     * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\n     * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\n     * <li>MP3 encoding will not always work for audio tags if it's not default.  We've found default encoding with\n     * 64kbps works.</li>\n\t * <li>Occasionally very short samples will get cut off.</li>\n\t * <li>There is a limit to how many audio tags you can load or play at once, which appears to be determined by\n\t * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe estimate.\n\t * Note that audio sprites can be used as a solution to this issue.</li></ul>\n\t *\n\t * <b>Safari limitations</b><br />\n\t * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\n\t *\n\t * <b>iOS 6 limitations</b><br />\n\t * <ul><li>can only have one &lt;audio&gt; tag</li>\n\t * \t\t<li>can not preload or autoplay the audio</li>\n\t * \t\t<li>can not cache the audio</li>\n\t * \t\t<li>can not play the audio except inside a user initiated event.</li>\n\t *\t\t<li>Note it is recommended to use {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} for iOS (6+)</li>\n\t * \t\t<li>audio sprites can be used to mitigate some of these issues and are strongly recommended on iOS</li>\n\t * </ul>\n\t *\n\t * <b>Android Native Browser limitations</b><br />\n\t * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\n\t *      <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use a delay.</li></ul>\n\t * <b> Android Chrome 26.0.1410.58 specific limitations</b><br />\n\t * <ul> <li>Can only play 1 sound at a time.</li>\n\t *      <li>Sound is not cached.</li>\n\t *      <li>Sound can only be loaded in a user initiated touch/click event.</li>\n\t *      <li>There is a delay before a sound is played, presumably while the src is loaded.</li>\n\t * </ul>\n\t *\n\t * See {{#crossLink \"Sound\"}}{{/crossLink}} for general notes on known issues.\n\t *\n\t * @class HTMLAudioPlugin\n\t * @extends AbstractPlugin\n\t * @constructor\n\t */\n\tfunction HTMLAudioPlugin() {\n\t\tthis.AbstractPlugin_constructor();\n\n\n\t// Public Properties\n\t\tthis._capabilities = s._capabilities;\n\n\t\tthis._loaderClass = createjs.SoundLoader;\n\t\tthis._soundInstanceClass = createjs.HTMLAudioSoundInstance;\n\t}\n\n\tvar p = createjs.extend(HTMLAudioPlugin, createjs.AbstractPlugin);\n\tvar s = HTMLAudioPlugin;\n\n// Static Properties\n\t/**\n\t * The maximum number of instances that can be loaded or played. This is a browser limitation, primarily limited to IE9.\n\t * The actual number varies from browser to browser (and is largely hardware dependant), but this is a safe estimate.\n\t * Audio sprites work around this limitation.\n\t * @property MAX_INSTANCES\n\t * @type {Number}\n\t * @default 30\n\t * @static\n\t */\n\ts.MAX_INSTANCES = 30;\n\n\t/**\n\t * Event constant for the \"canPlayThrough\" event for cleaner code.\n\t * @property _AUDIO_READY\n\t * @type {String}\n\t * @default canplaythrough\n\t * @static\n\t * @private\n\t */\n\ts._AUDIO_READY = \"canplaythrough\";\n\n\t/**\n\t * Event constant for the \"ended\" event for cleaner code.\n\t * @property _AUDIO_ENDED\n\t * @type {String}\n\t * @default ended\n\t * @static\n\t * @private\n\t */\n\ts._AUDIO_ENDED = \"ended\";\n\n\t/**\n\t * Event constant for the \"seeked\" event for cleaner code.  We utilize this event for maintaining loop events.\n\t * @property _AUDIO_SEEKED\n\t * @type {String}\n\t * @default seeked\n\t * @static\n\t * @private\n\t */\n\ts._AUDIO_SEEKED = \"seeked\";\n\n\t/**\n\t * Event constant for the \"stalled\" event for cleaner code.\n\t * @property _AUDIO_STALLED\n\t * @type {String}\n\t * @default stalled\n\t * @static\n\t * @private\n\t */\n\ts._AUDIO_STALLED = \"stalled\";\n\n\t/**\n\t * Event constant for the \"timeupdate\" event for cleaner code.  Utilized for looping audio sprites.\n\t * This event callsback ever 15 to 250ms and can be dropped by the browser for performance.\n\t * @property _TIME_UPDATE\n\t * @type {String}\n\t * @default timeupdate\n\t * @static\n\t * @private\n\t */\n\ts._TIME_UPDATE = \"timeupdate\";\n\n\t/**\n\t * The capabilities of the plugin. This is generated via the {{#crossLink \"HTMLAudioPlugin/_generateCapabilities\"}}{{/crossLink}}\n\t * method. Please see the Sound {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} method for an overview of all\n\t * of the available properties.\n\t * @property _capabilities\n\t * @type {Object}\n\t * @private\n\t * @static\n\t */\n\ts._capabilities = null;\n\n\n// Static Methods\n\t/**\n\t * Determine if the plugin can be used in the current browser/OS. Note that HTML audio is available in most modern\n\t * browsers, but is disabled in iOS because of its limitations.\n\t * @method isSupported\n\t * @return {Boolean} If the plugin can be initialized.\n\t * @static\n\t */\n\ts.isSupported = function () {\n\t\ts._generateCapabilities();\n\t\treturn (s._capabilities != null);\n\t};\n\n\t/**\n\t * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}}\n\t * method for an overview of plugin capabilities.\n\t * @method _generateCapabilities\n\t * @static\n\t * @private\n\t */\n\ts._generateCapabilities = function () {\n\t\tif (s._capabilities != null) {return;}\n\t\tvar t = document.createElement(\"audio\");\n\t\tif (t.canPlayType == null) {return null;}\n\n\t\ts._capabilities = {\n\t\t\tpanning:false,\n\t\t\tvolume:true,\n\t\t\ttracks:-1\n\t\t};\n\n\t\t// determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\n\t\tvar supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\n\t\tvar extensionMap = createjs.Sound.EXTENSION_MAP;\n\t\tfor (var i = 0, l = supportedExtensions.length; i < l; i++) {\n\t\t\tvar ext = supportedExtensions[i];\n\t\t\tvar playType = extensionMap[ext] || ext;\n\t\t\ts._capabilities[ext] = (t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\") || (t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\");\n\t\t}  // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\n\t};\n\n\n// public methods\n\tp.register = function (loadItem) {\n\t\tvar tag = createjs.HTMLAudioTagPool.get(loadItem.src);\n\t\tvar loader = this.AbstractPlugin_register(loadItem);\n\t\tloader.setTag(tag);\n\n\t\treturn loader;\n\t};\n\n\tp.removeSound = function (src) {\n\t\tthis.AbstractPlugin_removeSound(src);\n\t\tcreatejs.HTMLAudioTagPool.remove(src);\n\t};\n\n\tp.create = function (src, startTime, duration) {\n\t\tvar si = this.AbstractPlugin_create(src, startTime, duration);\n\t\tsi.playbackResource = null;\n\t\treturn si;\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[HTMLAudioPlugin]\";\n\t};\n\n\t// plugin does not support these\n\tp.setVolume = p.getVolume = p.setMute = null;\n\n\n\tcreatejs.HTMLAudioPlugin = createjs.promote(HTMLAudioPlugin, \"AbstractPlugin\");\n}());\n/*!\n* TweenJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function(subclass, superclass) {\n\t\"use strict\";\n\n\tfunction o() { this.constructor = subclass; }\n\to.prototype = superclass.prototype;\n\treturn (subclass.prototype = new o());\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function(subclass, prefix) {\n\t\"use strict\";\n\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\n\tif (supP) {\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n\t\tfor (var n in supP) {\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\n\t\t}\n\t}\n\treturn subclass;\n};\n\n//##############################################################################\n// deprecate.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Wraps deprecated methods so they still be used, but throw warnings to developers.\n *\n *\tobj.deprecatedMethod = createjs.deprecate(\"Old Method Name\", obj._fallbackMethod);\n *\n * The recommended approach for deprecated properties is:\n *\n *\ttry {\n *\t\tObj\tect.defineProperties(object, {\n *\t\t\treadyOnlyProp: { get: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }) },\n *\t\t\treadWriteProp: {\n *\t\t\t\tget: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }),\n *\t\t\t\tset: createjs.deprecate(\"readOnlyProp\", function(val) { this.alternateProp = val; })\n *\t\t});\n *\t} catch (e) {}\n *\n * @method deprecate\n * @param {Function} [fallbackMethod=null] A method to call when the deprecated method is used. See the example for how\n * @param {String} [name=null] The name of the method or property to display in the console warning.\n * to deprecate properties.\n * @return {Function} If a fallbackMethod is supplied, returns a closure that will call the fallback method after\n * logging the warning in the console.\n */\ncreatejs.deprecate = function(fallbackMethod, name) {\n\t\"use strict\";\n\treturn function() {\n\t\tvar msg = \"Deprecated property or method '\"+name+\"'. See docs for info.\";\n\t\tconsole && (console.warn ? console.warn(msg) : console.log(msg));\n\t\treturn fallbackMethod && fallbackMethod.apply(this, arguments);\n\t}\n};\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * Contains properties and methods shared by all events for use with\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n\t * \n\t * Note that Event objects are often reused, so you should never\n\t * rely on an event object's state outside of the call stack it was received in.\n\t * @class Event\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @constructor\n\t **/\n\tfunction Event(type, bubbles, cancelable) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The type of event.\n\t\t * @property type\n\t\t * @type String\n\t\t **/\n\t\tthis.type = type;\n\t\n\t\t/**\n\t\t * The object that generated an event.\n\t\t * @property target\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.target = null;\n\t\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t * @property currentTarget\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.currentTarget = null;\n\t\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t * @property eventPhase\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.eventPhase = 0;\n\t\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t * @property bubbles\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.bubbles = !!bubbles;\n\t\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t * @property cancelable\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.cancelable = !!cancelable;\n\t\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t * @property timeStamp\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.timeStamp = (new Date()).getTime();\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property defaultPrevented\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.defaultPrevented = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t * @property propagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.propagationStopped = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property immediatePropagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.immediatePropagationStopped = false;\n\t\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t * @property removed\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.removed = false;\n\t}\n\tvar p = Event.prototype;\n\n// public methods:\n\t/**\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @method preventDefault\n\t **/\n\tp.preventDefault = function() {\n\t\tthis.defaultPrevented = this.cancelable&&true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopPropagation\n\t **/\n\tp.stopPropagation = function() {\n\t\tthis.propagationStopped = true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopImmediatePropagation\n\t **/\n\tp.stopImmediatePropagation = function() {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t};\n\t\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t * \n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t * \t\t\t// do stuff...\n\t * \t\t\tevt.remove(); // removes this listener.\n\t * \t\t});\n\t * \n\t * @method remove\n\t **/\n\tp.remove = function() {\n\t\tthis.removed = true;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Event instance.\n\t * @method clone\n\t * @return {Event} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t};\n\n\tcreatejs.Event = Event;\n}());\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n\t *\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n\t * \n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n\t * \n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n\t * \n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n\t *\n\t * <h4>Example</h4>\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\n\t *\n\t *      EventDispatcher.initialize(MyClass.prototype);\n\t *\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n\t *\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\n\t *      function handlerMethod(event) {\n\t *          console.log(event.target + \" Was Clicked\");\n\t *      }\n\t *\n\t * <b>Maintaining proper scope</b><br />\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n\t * method to subscribe to events simplifies this.\n\t *\n\t *      instance.addEventListener(\"click\", function(event) {\n\t *          console.log(instance == this); // false, scope is ambiguous.\n\t *      });\n\t *      \n\t *      instance.on(\"click\", function(event) {\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n\t *      });\n\t * \n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n\t * scope.\n\t *\n\t * <b>Browser support</b>\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n\t * requires modern browsers (IE9+).\n\t *      \n\t *\n\t * @class EventDispatcher\n\t * @constructor\n\t **/\n\tfunction EventDispatcher() {\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @protected\n\t\t * @property _listeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._listeners = null;\n\t\t\n\t\t/**\n\t\t * @protected\n\t\t * @property _captureListeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._captureListeners = null;\n\t}\n\tvar p = EventDispatcher.prototype;\n\n// static public methods:\n\t/**\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\n\t * \n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n\t * \n\t * @method initialize\n\t * @static\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n\t * prototype.\n\t **/\n\tEventDispatcher.initialize = function(target) {\n\t\ttarget.addEventListener = p.addEventListener;\n\t\ttarget.on = p.on;\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\n\t\ttarget.hasEventListener = p.hasEventListener;\n\t\ttarget.dispatchEvent = p.dispatchEvent;\n\t\ttarget._dispatchEvent = p._dispatchEvent;\n\t\ttarget.willTrigger = p.willTrigger;\n\t};\n\t\n\n// public methods:\n\t/**\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n\t * multiple callbacks getting fired.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *         // Click happened.\n\t *      }\n\t *\n\t * @method addEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\n\t **/\n\tp.addEventListener = function(type, listener, useCapture) {\n\t\tvar listeners;\n\t\tif (useCapture) {\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\n\t\t} else {\n\t\t\tlisteners = this._listeners = this._listeners||{};\n\t\t}\n\t\tvar arr = listeners[type];\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\n\t\tarr = listeners[type]; // remove may have deleted the array\n\t\tif (!arr) { listeners[type] = [listener];  }\n\t\telse { arr.push(listener); }\n\t\treturn listener;\n\t};\n\t\n\t/**\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\n\t * \n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n\t * to `on` with the same params will create multiple listeners.\n\t * \n\t * <h4>Example</h4>\n\t * \n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n\t * \t\tfunction handleClick(evt, data) {\n\t * \t\t\tdata.count -= 1;\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n\t * \t\t\tif (data.count == 0) {\n\t * \t\t\t\talert(\"clicked 3 times!\");\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\n\t * \t\t\t\t// alternately: evt.remove();\n\t * \t\t\t}\n\t * \t\t}\n\t * \n\t * @method on\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n\t **/\n\tp.on = function(type, listener, scope, once, data, useCapture) {\n\t\tif (listener.handleEvent) {\n\t\t\tscope = scope||listener;\n\t\t\tlistener = listener.handleEvent;\n\t\t}\n\t\tscope = scope||this;\n\t\tlet d=this,listnr = function (evt) {\n\t\t\tonce&&d.removeEventListener(type, listnr, useCapture)\n\t\t\tlistener.call(scope, evt, data);\n\t\t}\n\t\treturn this.addEventListener(type, listnr, useCapture);\n\n\t};\n\n\t/**\n\t * Removes the specified event listener.\n\t *\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n\t * closure will not work.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.removeEventListener(\"click\", handleClick);\n\t *\n\t * @method removeEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.removeEventListener = function(type, listener, useCapture) {\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\n\t\tif (!listeners) { return; }\n\t\tvar arr = listeners[type];\n\t\tif (!arr) { return; }\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\n\t\t\tif (arr[i] == listener) {\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\n\t\t\t\telse { arr.splice(i,1); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n\t * .on method.\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n\t *\n\t * @method off\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.off = p.removeEventListener;\n\n\t/**\n\t * Removes all listeners for the specified type, or all listeners of all types.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Remove all listeners\n\t *      displayObject.removeAllEventListeners();\n\t *\n\t *      // Remove all click listeners\n\t *      displayObject.removeAllEventListeners(\"click\");\n\t *\n\t * @method removeAllEventListeners\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n\t **/\n\tp.removeAllEventListeners = function(type) {\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\n\t\telse {\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the specified event to all listeners.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Use a string event\n\t *      this.dispatchEvent(\"complete\");\n\t *\n\t *      // Use an Event instance\n\t *      var event = new createjs.Event(\"progress\");\n\t *      this.dispatchEvent(event);\n\t *\n\t * @method dispatchEvent\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n\t **/\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\n\t\tif (typeof eventObj == \"string\") {\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\n\t\t\tvar listeners = this._listeners;\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\n\t\t} else if (eventObj.target && eventObj.clone) {\n\t\t\t// redispatching an active event object, so clone it:\n\t\t\teventObj = eventObj.clone();\n\t\t}\n\t\t\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\n\n\t\tif (!eventObj.bubbles || !this.parent) {\n\t\t\tthis._dispatchEvent(eventObj, 2);\n\t\t} else {\n\t\t\tvar top=this, list=[top];\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\n\t\t\tvar i, l=list.length;\n\n\t\t\t// capture & atTarget\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\n\t\t\t}\n\t\t\t// bubbling\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\n\t\t\t}\n\t\t}\n\t\treturn !eventObj.defaultPrevented;\n\t};\n\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type.\n\t * @method hasEventListener\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\n\t **/\n\tp.hasEventListener = function(type) {\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\n\t};\n\t\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n\t * specified type is dispatched from this object, it will trigger at least one listener.\n\t * \n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n\t * event flow for a listener, not just this object.\n\t * @method willTrigger\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n\t **/\n\tp.willTrigger = function(type) {\n\t\tvar o = this;\n\t\twhile (o) {\n\t\t\tif (o.hasEventListener(type)) { return true; }\n\t\t\to = o.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[EventDispatcher]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _dispatchEvent\n\t * @param {Object | Event} eventObj\n\t * @param {Object} eventPhase\n\t * @protected\n\t **/\n\tp._dispatchEvent = function(eventObj, eventPhase) {\n\t\tvar l, arr, listeners = (eventPhase <= 2) ? this._captureListeners : this._listeners;\n\t\tif (eventObj && listeners && (arr = listeners[eventObj.type]) && (l=arr.length)) {\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\n\t\t\ttry { eventObj.eventPhase = eventPhase|0; } catch (e) {}\n\t\t\teventObj.removed = false;\n\t\t\t\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\n\t\t\t\tvar o = arr[i];\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\n\t\t\t\telse { o(eventObj); }\n\t\t\t\tif (eventObj.removed) {\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\n\t\t\t\t\teventObj.removed = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (eventPhase === 2) { this._dispatchEvent(eventObj, 2.1); }\n\t};\n\n\n\tcreatejs.EventDispatcher = EventDispatcher;\n}());\n\n//##############################################################################\n// Ticker.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The Ticker provides a centralized tick or heartbeat broadcast at a set interval. Listeners can subscribe to the tick\n\t * event to be notified when a set time interval has elapsed.\n\t *\n\t * Note that the interval that the tick event is called is a target interval, and may be broadcast at a slower interval\n\t * when under high CPU load. The Ticker class uses a static interface (ex. `Ticker.framerate = 30;`) and\n\t * can not be instantiated.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          // Actions carried out each tick (aka frame)\n\t *          if (!event.paused) {\n\t *              // Actions carried out when the Ticker is not paused.\n\t *          }\n\t *      }\n\t *\n\t * @class Ticker\n\t * @uses EventDispatcher\n\t * @static\n\t **/\n\tfunction Ticker() {\n\t\tthrow \"Ticker cannot be instantiated.\";\n\t}\n\n\n// constants:\n\t/**\n\t * In this mode, Ticker uses the requestAnimationFrame API, but attempts to synch the ticks to target framerate. It\n\t * uses a simple heuristic that compares the time of the RAF return to the target time for the current frame and\n\t * dispatches the tick when the time is within a certain threshold.\n\t *\n\t * This mode has a higher variance for time between frames than {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}},\n\t * but does not require that content be time based as with {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}} while\n\t * gaining the benefits of that API (screen synch, background throttling).\n\t *\n\t * Variance is usually lowest for framerates that are a divisor of the RAF frequency. This is usually 60, so\n\t * framerates of 10, 12, 15, 20, and 30 work well.\n\t *\n\t * Falls back to {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t * supported.\n\t * @property RAF_SYNCHED\n\t * @static\n\t * @type {String}\n\t * @default \"synched\"\n\t * @readonly\n\t **/\n\tTicker.RAF_SYNCHED = \"synched\";\n\n\t/**\n\t * In this mode, Ticker passes through the requestAnimationFrame heartbeat, ignoring the target framerate completely.\n\t * Because requestAnimationFrame frequency is not deterministic, any content using this mode should be time based.\n\t * You can leverage {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} and the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event object's \"delta\" properties to make this easier.\n\t *\n\t * Falls back on {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t * supported.\n\t * @property RAF\n\t * @static\n\t * @type {String}\n\t * @default \"raf\"\n\t * @readonly\n\t **/\n\tTicker.RAF = \"raf\";\n\n\t/**\n\t * In this mode, Ticker uses the setTimeout API. This provides predictable, adaptive frame timing, but does not\n\t * provide the benefits of requestAnimationFrame (screen synch, background throttling).\n\t * @property TIMEOUT\n\t * @static\n\t * @type {String}\n\t * @default \"timeout\"\n\t * @readonly\n\t **/\n\tTicker.TIMEOUT = \"timeout\";\n\n\n// static events:\n\t/**\n\t * Dispatched each tick. The event will be dispatched to each listener even when the Ticker has been paused using\n\t * {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          console.log(\"Paused:\", event.paused, event.delta);\n\t *      }\n\t *\n\t * @event tick\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Boolean} paused Indicates whether the ticker is currently paused.\n\t * @param {Number} delta The time elapsed in ms since the last tick.\n\t * @param {Number} time The total time in ms since Ticker was initialized.\n\t * @param {Number} runTime The total time in ms that Ticker was not paused since it was initialized. For example,\n\t * \tyou could determine the amount of time that the Ticker has been paused since initialization with `time-runTime`.\n\t * @since 0.6.0\n\t */\n\n\n// public static properties:\n\t/**\n\t * Specifies the timing api (setTimeout or requestAnimationFrame) and mode to use. See\n\t * {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}}, {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}}, and\n\t * {{#crossLink \"Ticker/RAF_SYNCHED:property\"}}{{/crossLink}} for mode details.\n\t * @property timingMode\n\t * @static\n\t * @type {String}\n\t * @default Ticker.TIMEOUT\n\t **/\n\tTicker.timingMode = null;\n\n\t/**\n\t * Specifies a maximum value for the delta property in the tick event object. This is useful when building time\n\t * based animations and systems to prevent issues caused by large time gaps caused by background tabs, system sleep,\n\t * alert dialogs, or other blocking routines. Double the expected frame duration is often an effective value\n\t * (ex. maxDelta=50 when running at 40fps).\n\t * \n\t * This does not impact any other values (ex. time, runTime, etc), so you may experience issues if you enable maxDelta\n\t * when using both delta and other values.\n\t * \n\t * If 0, there is no maximum.\n\t * @property maxDelta\n\t * @static\n\t * @type {number}\n\t * @default 0\n\t */\n\tTicker.maxDelta = 0;\n\t\n\t/**\n\t * When the ticker is paused, all listeners will still receive a tick event, but the <code>paused</code> property\n\t * of the event will be `true`. Also, while paused the `runTime` will not increase. See {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}},\n\t * {{#crossLink \"Ticker/getTime\"}}{{/crossLink}}, and {{#crossLink \"Ticker/getEventTime\"}}{{/crossLink}} for more\n\t * info.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      createjs.Ticker.paused = true;\n\t *      function handleTick(event) {\n\t *          console.log(event.paused,\n\t *          \tcreatejs.Ticker.getTime(false),\n\t *          \tcreatejs.Ticker.getTime(true));\n\t *      }\n\t *\n\t * @property paused\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tTicker.paused = false;\n\n\n// mix-ins:\n\t// EventDispatcher methods:\n\tTicker.removeEventListener = null;\n\tTicker.removeAllEventListeners = null;\n\tTicker.dispatchEvent = null;\n\tTicker.hasEventListener = null;\n\tTicker._listeners = null;\n\tcreatejs.EventDispatcher.initialize(Ticker); // inject EventDispatcher methods.\n\tTicker._addEventListener = Ticker.addEventListener;\n\tTicker.addEventListener = function() {\n\t\t!Ticker._inited&&Ticker.init();\n\t\treturn Ticker._addEventListener.apply(Ticker, arguments);\n\t};\n\n\n// private static properties:\n\t/**\n\t * @property _inited\n\t * @static\n\t * @type {Boolean}\n\t * @private\n\t **/\n\tTicker._inited = false;\n\n\t/**\n\t * @property _startTime\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._startTime = 0;\n\n\t/**\n\t * @property _pausedTime\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._pausedTime=0;\n\n\t/**\n\t * The number of ticks that have passed\n\t * @property _ticks\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._ticks = 0;\n\n\t/**\n\t * The number of ticks that have passed while Ticker has been paused\n\t * @property _pausedTicks\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._pausedTicks = 0;\n\n\t/**\n\t * @property _interval\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._interval = 50;\n\n\t/**\n\t * @property _lastTime\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._lastTime = 0;\n\n\t/**\n\t * @property _times\n\t * @static\n\t * @type {Array}\n\t * @private\n\t **/\n\tTicker._times = null;\n\n\t/**\n\t * @property _tickTimes\n\t * @static\n\t * @type {Array}\n\t * @private\n\t **/\n\tTicker._tickTimes = null;\n\n\t/**\n\t * Stores the timeout or requestAnimationFrame id.\n\t * @property _timerId\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._timerId = null;\n\t\n\t/**\n\t * True if currently using requestAnimationFrame, false if using setTimeout. This may be different than timingMode\n\t * if that property changed and a tick hasn't fired.\n\t * @property _raf\n\t * @static\n\t * @type {Boolean}\n\t * @private\n\t **/\n\tTicker._raf = true;\n\t\n\n// static getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t * @method _setInterval\n\t * @private\n\t * @static\n\t * @param {Number} interval\n\t **/\n\tTicker._setInterval = function(interval) {\n\t\tTicker._interval = interval;\n\t\tif (!Ticker._inited) { return; }\n\t\tTicker._setupTick();\n\t};\n\t// Ticker.setInterval is @deprecated. Remove for 1.1+\n\tTicker.setInterval = createjs.deprecate(Ticker._setInterval, \"Ticker.setInterval\");\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t * @method _getInterval\n\t * @private\n\t * @static\n\t * @return {Number}\n\t **/\n\tTicker._getInterval = function() {\n\t\treturn Ticker._interval;\n\t};\n\t// Ticker.getInterval is @deprecated. Remove for 1.1+\n\tTicker.getInterval = createjs.deprecate(Ticker._getInterval, \"Ticker.getInterval\");\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t * @method _setFPS\n\t * @private\n\t * @static\n\t * @param {Number} value\n\t **/\n\tTicker._setFPS = function(value) {\n\t\tTicker._setInterval(1000/value);\n\t};\n\t// Ticker.setFPS is @deprecated. Remove for 1.1+\n\tTicker.setFPS = createjs.deprecate(Ticker._setFPS, \"Ticker.setFPS\");\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t * @method _getFPS\n\t * @static\n\t * @private\n\t * @return {Number}\n\t **/\n\tTicker._getFPS = function() {\n\t\treturn 1000/Ticker._interval;\n\t};\n\t// Ticker.getFPS is @deprecated. Remove for 1.1+\n\tTicker.getFPS = createjs.deprecate(Ticker._getFPS, \"Ticker.getFPS\");\n\n\t/**\n\t * Indicates the target time (in milliseconds) between ticks. Default is 50 (20 FPS).\n\t * Note that actual time between ticks may be more than specified depending on CPU load.\n\t * This property is ignored if the ticker is using the `RAF` timing mode.\n\t * @property interval\n\t * @static\n\t * @type {Number}\n\t **/\n\t \n\t/**\n\t * Indicates the target frame rate in frames per second (FPS). Effectively just a shortcut to `interval`, where\n\t * `framerate == 1000/interval`.\n\t * @property framerate\n\t * @static\n\t * @type {Number}\n\t **/\n\ttry {\n\t\tObject.defineProperties(Ticker, {\n\t\t\tinterval: { get: Ticker._getInterval, set: Ticker._setInterval },\n\t\t\tframerate: { get: Ticker._getFPS, set: Ticker._setFPS }\n\t\t});\n\t} catch (e) { console.log(e); }\n\n\n// public static methods:\n\t/**\n\t * Starts the tick. This is called automatically when the first listener is added.\n\t * @method init\n\t * @static\n\t **/\n\tTicker.init = function() {\n\t\tif (Ticker._inited) { return; }\n\t\tTicker._inited = true;\n\t\tTicker._times = [];\n\t\tTicker._tickTimes = [];\n\t\tTicker._startTime = Ticker._getTime();\n\t\tTicker._times.push(Ticker._lastTime = 0);\n\t\tTicker.interval = Ticker._interval;\n\t};\n\t\n\t/**\n\t * Stops the Ticker and removes all listeners. Use init() to restart the Ticker.\n\t * @method reset\n\t * @static\n\t **/\n\tTicker.reset = function() {\n\t\tif (Ticker._raf) {\n\t\t\tvar f = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame;\n\t\t\tf&&f(Ticker._timerId);\n\t\t} else {\n\t\t\tclearTimeout(Ticker._timerId);\n\t\t}\n\t\tTicker.removeAllEventListeners(\"tick\");\n\t\tTicker._timerId = Ticker._times = Ticker._tickTimes = null;\n\t\tTicker._startTime = Ticker._lastTime = Ticker._ticks = Ticker._pausedTime = 0;\n\t\tTicker._inited = false;\n\t};\n\n\t/**\n\t * Returns the average time spent within a tick. This can vary significantly from the value provided by getMeasuredFPS\n\t * because it only measures the time spent within the tick execution stack. \n\t * \n\t * Example 1: With a target FPS of 20, getMeasuredFPS() returns 20fps, which indicates an average of 50ms between \n\t * the end of one tick and the end of the next. However, getMeasuredTickTime() returns 15ms. This indicates that \n\t * there may be up to 35ms of \"idle\" time between the end of one tick and the start of the next.\n\t *\n\t * Example 2: With a target FPS of 30, {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} returns 10fps, which\n\t * indicates an average of 100ms between the end of one tick and the end of the next. However, {{#crossLink \"Ticker/getMeasuredTickTime\"}}{{/crossLink}}\n\t * returns 20ms. This would indicate that something other than the tick is using ~80ms (another script, DOM\n\t * rendering, etc).\n\t * @method getMeasuredTickTime\n\t * @static\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the average time spent in a tick.\n\t * Defaults to the number of ticks per second. To get only the last tick's time, pass in 1.\n\t * @return {Number} The average time spent in a tick in milliseconds.\n\t **/\n\tTicker.getMeasuredTickTime = function(ticks) {\n\t\tvar ttl=0, times=Ticker._tickTimes;\n\t\tif (!times || times.length < 1) { return -1; }\n\n\t\t// by default, calculate average for the past ~1 second:\n\t\tticks = Math.min(times.length, ticks||(Ticker._getFPS()|0));\n\t\tfor (var i=0; i<ticks; i++) { ttl += times[i]; }\n\t\treturn ttl/ticks;\n\t};\n\n\t/**\n\t * Returns the actual frames / ticks per second.\n\t * @method getMeasuredFPS\n\t * @static\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the actual frames / ticks per second.\n\t * Defaults to the number of ticks per second.\n\t * @return {Number} The actual frames / ticks per second. Depending on performance, this may differ\n\t * from the target frames per second.\n\t **/\n\tTicker.getMeasuredFPS = function(ticks) {\n\t\tvar times = Ticker._times;\n\t\tif (!times || times.length < 2) { return -1; }\n\n\t\t// by default, calculate fps for the past ~1 second:\n\t\tticks = Math.min(times.length-1, ticks||(Ticker._getFPS()|0));\n\t\treturn 1000/((times[0]-times[ticks])/ticks);\n\t};\n\n\t/**\n\t * Returns the number of milliseconds that have elapsed since Ticker was initialized via {{#crossLink \"Ticker/init\"}}.\n\t * Returns -1 if Ticker has not been initialized. For example, you could use\n\t * this in a time synchronized animation to determine the exact amount of time that has elapsed.\n\t * @method getTime\n\t * @static\n\t * @param {Boolean} [runTime=false] If true only time elapsed while Ticker was not paused will be returned.\n\t * If false, the value returned will be total time elapsed since the first tick event listener was added.\n\t * @return {Number} Number of milliseconds that have elapsed since Ticker was initialized or -1.\n\t **/\n\tTicker.getTime = function(runTime) {\n\t\treturn Ticker._startTime ? Ticker._getTime() - (runTime ? Ticker._pausedTime : 0) : -1;\n\t};\n\n\t/**\n\t * Similar to the {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} method, but returns the time on the most recent {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event object.\n\t * @method getEventTime\n\t * @static\n\t * @param runTime {Boolean} [runTime=false] If true, the runTime property will be returned instead of time.\n\t * @returns {number} The time or runTime property from the most recent tick event or -1.\n\t */\n\tTicker.getEventTime = function(runTime) {\n\t\treturn Ticker._startTime ? (Ticker._lastTime || Ticker._startTime) - (runTime ? Ticker._pausedTime : 0) : -1;\n\t};\n\t\n\t/**\n\t * Returns the number of ticks that have been broadcast by Ticker.\n\t * @method getTicks\n\t * @static\n\t * @param {Boolean} pauseable Indicates whether to include ticks that would have been broadcast\n\t * while Ticker was paused. If true only tick events broadcast while Ticker is not paused will be returned.\n\t * If false, tick events that would have been broadcast while Ticker was paused will be included in the return\n\t * value. The default value is false.\n\t * @return {Number} of ticks that have been broadcast.\n\t **/\n\tTicker.getTicks = function(pauseable) {\n\t\treturn  Ticker._ticks - (pauseable ? Ticker._pausedTicks : 0);\n\t};\n\n\n// private static methods:\n\t/**\n\t * @method _handleSynch\n\t * @static\n\t * @private\n\t **/\n\tTicker._handleSynch = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\n\t\t// run if enough time has elapsed, with a little bit of flexibility to be early:\n\t\tif (Ticker._getTime() - Ticker._lastTime >= (Ticker._interval-1)*0.97) {\n\t\t\tTicker._tick();\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleRAF\n\t * @static\n\t * @private\n\t **/\n\tTicker._handleRAF = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\t\tTicker._tick();\n\t};\n\n\t/**\n\t * @method _handleTimeout\n\t * @static\n\t * @private\n\t **/\n\tTicker._handleTimeout = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\t\tTicker._tick();\n\t};\n\n\t/**\n\t * @method _setupTick\n\t * @static\n\t * @private\n\t **/\n\tTicker._setupTick = function() {\n\t\tif (Ticker._timerId != null) { return; } // avoid duplicates\n\n\t\tvar mode = Ticker.timingMode;\n\t\tif (mode == Ticker.RAF_SYNCHED || mode == Ticker.RAF) {\n\t\t\tvar f = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\n\t\t\tif (f) {\n\t\t\t\tTicker._timerId = f(mode == Ticker.RAF ? Ticker._handleRAF : Ticker._handleSynch);\n\t\t\t\tTicker._raf = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tTicker._raf = false;\n\t\tTicker._timerId = setTimeout(Ticker._handleTimeout, Ticker._interval);\n\t};\n\n\t/**\n\t * @method _tick\n\t * @static\n\t * @private\n\t **/\n\tTicker._tick = function() {\n\t\tvar paused = Ticker.paused;\n\t\tvar time = Ticker._getTime();\n\t\tvar elapsedTime = time-Ticker._lastTime;\n\t\tTicker._lastTime = time;\n\t\tTicker._ticks++;\n\t\t\n\t\tif (paused) {\n\t\t\tTicker._pausedTicks++;\n\t\t\tTicker._pausedTime += elapsedTime;\n\t\t}\n\t\t\n\t\tif (Ticker.hasEventListener(\"tick\")) {\n\t\t\tvar event = new createjs.Event(\"tick\");\n\t\t\tvar maxDelta = Ticker.maxDelta;\n\t\t\tevent.delta = (maxDelta && elapsedTime > maxDelta) ? maxDelta : elapsedTime;\n\t\t\tevent.paused = paused;\n\t\t\tevent.time = time;\n\t\t\tevent.runTime = time-Ticker._pausedTime;\n\t\t\tTicker.dispatchEvent(event);\n\t\t}\n\t\t\n\t\tTicker._tickTimes.unshift(Ticker._getTime()-time);\n\t\twhile (Ticker._tickTimes.length > 100) { Ticker._tickTimes.pop(); }\n\n\t\tTicker._times.unshift(time);\n\t\twhile (Ticker._times.length > 100) { Ticker._times.pop(); }\n\t};\n\n\t/**\n\t * @method _getTime\n\t * @static\n\t * @private\n\t **/\n\tvar w=window, now=w.performance.now || w.performance.mozNow || w.performance.msNow || w.performance.oNow || w.performance.webkitNow;\n\tTicker._getTime = function() {\n\t\treturn ((now&&now.call(w.performance))||(new Date().getTime())) - Ticker._startTime;\n\t};\n\n\n\tcreatejs.Ticker = Ticker;\n}());\n\n//##############################################################################\n// AbstractTween.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor\n\t/**\n\t * Base class that both {{#crossLink \"Tween\"}}{{/crossLink}} and {{#crossLink \"Timeline\"}}{{/crossLink}} extend. Should not be instantiated directly.\n\t * @class AbstractTween\n\t * @param {Object} [props] The configuration properties to apply to this instance (ex. `{loop:-1, paused:true}`).\n\t * Supported props are listed below. These props are set on the corresponding instance properties except where\n\t * specified.\n\t * @param {boolean} [props.useTicks=false]  See the {{#crossLink \"AbstractTween/useTicks:property\"}}{{/crossLink}} property for more information.\n\t * @param {boolean} [props.ignoreGlobalPause=false] See the {{#crossLink \"AbstractTween/ignoreGlobalPause:property\"}}{{/crossLink}} for more information.\n\t * @param {number|boolean} [props.loop=0] See the {{#crossLink \"AbstractTween/loop:property\"}}{{/crossLink}} for more information.\n\t * @param {boolean} [props.reversed=false] See the {{#crossLink \"AbstractTween/reversed:property\"}}{{/crossLink}} for more information.\n\t * @param {boolean} [props.bounce=false] See the {{#crossLink \"AbstractTween/bounce:property\"}}{{/crossLink}} for more information.\n\t * @param {number} [props.timeScale=1] See the {{#crossLink \"AbstractTween/timeScale:property\"}}{{/crossLink}} for more information.\n\t * @param {Function} [props.onChange] Adds the specified function as a listener to the {{#crossLink \"AbstractTween/change:event\"}}{{/crossLink}} event\n\t * @param {Function} [props.onComplete] Adds the specified function as a listener to the {{#crossLink \"AbstractTween/complete:event\"}}{{/crossLink}} event\n\t * @extends EventDispatcher\n\t * @constructor\n\t */\n\tfunction AbstractTween(props) {\n\t\tthis.EventDispatcher_constructor();\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * Causes this tween to continue playing when a global pause is active. For example, if TweenJS is using {{#crossLink \"Ticker\"}}{{/crossLink}},\n\t\t * then setting this to false (the default) will cause this tween to be paused when `Ticker.paused` is set to\n\t\t * `true`. See the {{#crossLink \"Tween/tick\"}}{{/crossLink}} method for more info. Can be set via the `props`\n\t\t * parameter.\n\t\t * @property ignoreGlobalPause\n\t\t * @type Boolean\n\t\t * @default false\n\t\t */\n\t\tthis.ignoreGlobalPause = false;\n\t\n\t\t/**\n\t\t * Indicates the number of times to loop. If set to -1, the tween will loop continuously.\n\t\t *\n\t\t * Note that a tween must loop at _least_ once to see it play in both directions when `{{#crossLink \"AbstractTween/bounce:property\"}}{{/crossLink}}`\n\t\t * is set to `true`.\n\t\t * @property loop\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.loop = 0;\n\t\n\t\t/**\n\t\t * Uses ticks for all durations instead of milliseconds. This also changes the behaviour of some actions (such as `call`).\n\t\t * Changing this value on a running tween could have unexpected results.\n\t\t * @property useTicks\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @readonly\n\t\t */\n\t\tthis.useTicks = false;\n\t\t\n\t\t/**\n\t\t * Causes the tween to play in reverse.\n\t\t * @property reversed\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.reversed = false;\n\t\t\n\t\t/**\n\t\t * Causes the tween to reverse direction at the end of each loop. Each single-direction play-through of the\n\t\t * tween counts as a single bounce. For example, to play a tween once forward, and once back, set the\n\t\t * `{{#crossLink \"AbstractTween/loop:property\"}}{{/crossLink}}` to `1`.\n\t\t * @property bounce\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.bounce = false;\n\t\t\n\t\t/**\n\t\t * Changes the rate at which the tween advances. For example, a `timeScale` value of `2` will double the\n\t\t * playback speed, a value of `0.5` would halve it.\n\t\t * @property timeScale\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t */\n\t\tthis.timeScale = 1;\n\t\n\t\t/**\n\t\t * Indicates the duration of this tween in milliseconds (or ticks if `useTicks` is true), irrespective of `loops`.\n\t\t * This value is automatically updated as you modify the tween. Changing it directly could result in unexpected\n\t\t * behaviour.\n\t\t * @property duration\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @readonly\n\t\t */\n\t\tthis.duration = 0;\n\t\n\t\t/**\n\t\t * The current normalized position of the tween. This will always be a value between 0 and `duration`.\n\t\t * Changing this property directly will have unexpected results, use {{#crossLink \"Tween/setPosition\"}}{{/crossLink}}.\n\t\t * @property position\n\t\t * @type {Object}\n\t\t * @default 0\n\t\t * @readonly\n\t\t */\n\t\tthis.position = 0;\n\t\t\n\t\t/**\n\t\t * The raw tween position. This value will be between `0` and `loops * duration` while the tween is active, or -1 before it activates.\n\t\t * @property rawPosition\n\t\t * @type {Number}\n\t\t * @default -1\n\t\t * @readonly\n\t\t */\n\t\tthis.rawPosition = -1;\n\t\t\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * @property _paused\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @protected\n\t\t */\n\t\tthis._paused = true;\n\t\t\n\t\t/**\n\t\t * @property _next\n\t\t * @type {Tween}\n\t\t * @default null\n\t\t * @protected\n\t\t */\n\t\tthis._next = null;\n\t\t\n\t\t/**\n\t\t * @property _prev\n\t\t * @type {Tween}\n\t\t * @default null\n\t\t * @protected\n\t\t */\n\t\tthis._prev = null;\n\t\t\n\t\t/**\n\t\t * @property _parent\n\t\t * @type {Object}\n\t\t * @default null\n\t\t * @protected\n\t\t */\n\t\tthis._parent = null;\n\n\t\t/**\n\t\t * @property _labels\n\t\t * @type Object\n\t\t * @protected\n\t\t **/\n\t\tthis._labels = null;\n\n\t\t/**\n\t\t * @property _labelList\n\t\t * @type Array[Object]\n\t\t * @protected\n\t\t **/\n\t\tthis._labelList = null;\n\n\t\tif (props) {\n\t\t\tthis.useTicks = !!props.useTicks;\n\t\t\tthis.ignoreGlobalPause = !!props.ignoreGlobalPause;\n\t\t\tthis.loop = props.loop === true ? -1 : (props.loop||0);\n\t\t\tthis.reversed = !!props.reversed;\n\t\t\tthis.bounce = !!props.bounce;\n\t\t\tthis.timeScale = props.timeScale||1;\n\t\t\tprops.onChange && this.addEventListener(\"change\", props.onChange);\n\t\t\tprops.onComplete && this.addEventListener(\"complete\", props.onComplete);\n\t\t}\n\t\t\n\t\t// while `position` is shared, it needs to happen after ALL props are set, so it's handled in _init()\n\t};\n\n\tvar p = createjs.extend(AbstractTween, createjs.EventDispatcher);\n\n// events:\n\t/**\n\t * Dispatched whenever the tween's position changes. It occurs after all tweened properties are updated and actions\n\t * are executed.\n\t * @event change\n\t **/\n\t \n\t/**\n\t * Dispatched when the tween reaches its end and has paused itself. This does not fire until all loops are complete;\n\t * tweens that loop continuously will never fire a complete event.\n\t * @event complete\n\t **/\n\t\n// getter / setters:\n\t\n\t/**\n\t * Use the {{#crossLink \"AbstractTween/paused:property\"}}{{/crossLink}} property instead.\n\t * @method _setPaused\n\t * @param {Boolean} [value=true] Indicates whether the tween should be paused (`true`) or played (`false`).\n\t * @return {AbstractTween} This tween instance (for chaining calls)\n\t * @protected\n\t * @chainable\n\t */\n\tp._setPaused = function(value) {\n\t\tcreatejs.Tween._register(this, value);\n\t\treturn this;\n\t};\n\tp.setPaused = createjs.deprecate(p._setPaused, \"AbstractTween.setPaused\");\n\t\n\t/**\n\t * Use the {{#crossLink \"AbstractTween/paused:property\"}}{{/crossLink}} property instead.\n\t * @method _getPaused\n\t * @protected\n\t */\n\tp._getPaused = function() {\n\t\treturn this._paused;\n\t};\n\tp.getPaused = createjs.deprecate(p._getPaused, \"AbstactTween.getPaused\");\n\t\n\t/**\n\t * Use the {{#crossLink \"AbstractTween/currentLabel:property\"}}{{/crossLink}} property instead.\n\t * @method _getCurrentLabel\n\t * @protected\n\t * @return {String} The name of the current label or null if there is no label\n\t **/\n\tp._getCurrentLabel = function(pos) {\n\t\tvar labels = this.getLabels();\n\t\tif (pos == null) { pos = this.position; }\n\t\tfor (var i = 0, l = labels.length; i<l; i++) { if (pos < labels[i].position) { break; } }\n\t\treturn (i===0) ? null : labels[i-1].label;\n\t};\n\tp.getCurrentLabel = createjs.deprecate(p._getCurrentLabel, \"AbstractTween.getCurrentLabel\");\n\t\n\t/**\n\t * Pauses or unpauses the tween. A paused tween is removed from the global registry and is eligible for garbage\n\t * collection if no other references to it exist.\n\t * @property paused\n\t * @type Boolean\n\t * @readonly\n\t **/\n\t \n\t/**\n\t * Returns the name of the label on or immediately before the current position. For example, given a tween with\n\t * two labels, \"first\" on frame index 4, and \"second\" on frame 8, `currentLabel` would return:\n\t * <UL>\n\t * \t\t<LI>null if the current position is 2.</LI>\n\t * \t\t<LI>\"first\" if the current position is 4.</LI>\n\t * \t\t<LI>\"first\" if the current position is 7.</LI>\n\t * \t\t<LI>\"second\" if the current position is 15.</LI>\n\t * </UL>\n\t * @property currentLabel\n\t * @type String\n\t * @readonly\n\t **/\n\t \n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tpaused: { set: p._setPaused, get: p._getPaused },\n\t\t\tcurrentLabel: { get: p._getCurrentLabel }\n\t\t});\n\t} catch (e) {}\n\n// public methods:\n\t/**\n\t * Advances the tween by a specified amount.\n\t * @method advance\n\t * @param {Number} delta The amount to advance in milliseconds (or ticks if useTicks is true). Negative values are supported.\n\t * @param {Number} [ignoreActions=false] If true, actions will not be executed due to this change in position.\n\t */\n\tp.advance = function(delta, ignoreActions) {\n\t\tthis.setPosition(this.rawPosition+delta*this.timeScale, ignoreActions);\n\t};\n\t\n\t/**\n\t * Advances the tween to a specified position.\n\t * @method setPosition\n\t * @param {Number} rawPosition The raw position to seek to in milliseconds (or ticks if useTicks is true).\n\t * @param {Boolean} [ignoreActions=false] If true, do not run any actions that would be triggered by this operation.\n\t * @param {Boolean} [jump=false] If true, only actions at the new position will be run. If false, actions between the old and new position are run.\n\t * @param {Function} [callback] Primarily for use with MovieClip, this callback is called after properties are updated, but before actions are run.\n\t */\n\tp.setPosition = function(rawPosition, ignoreActions, jump, callback) {\n\t\tvar d=this.duration, loopCount=this.loop, prevRawPos = this.rawPosition;\n\t\tvar loop=0, t=0, end=false;\n\t\t\n\t\t// normalize position:\n\t\tif (rawPosition < 0) { rawPosition = 0; }\n\t\t\n\t\tif (d === 0) {\n\t\t\t// deal with 0 length tweens.\n\t\t\tend = true;\n\t\t\tif (prevRawPos !== -1) { return end; } // we can avoid doing anything else if we're already at 0.\n\t\t} else {\n\t\t\tloop = rawPosition/d|0;\n\t\t\tt = rawPosition-loop*d;\n\t\t\t\n\t\t\tend = (loopCount !== -1 && rawPosition >= loopCount*d+d);\n\t\t\tif (end) { rawPosition = (t=d)*(loop=loopCount)+d; }\n\t\t\tif (rawPosition === prevRawPos) { return end; } // no need to update\n\t\t\t\n\t\t\tvar rev = !this.reversed !== !(this.bounce && loop%2); // current loop is reversed\n\t\t\tif (rev) { t = d-t; }\n\t\t}\n\t\t\n\t\t// set this in advance in case an action modifies position:\n\t\tthis.position = t;\n\t\tthis.rawPosition = rawPosition;\n\t\t\n\t\tthis._updatePosition(jump, end);\n\t\tif (end) { this.paused = true; }\n\t\t\n\t\tcallback&&callback(this);\n\t\t\n\t\tif (!ignoreActions) { this._runActions(prevRawPos, rawPosition, jump, !jump && prevRawPos === -1); }\n\t\t\n\t\tthis.dispatchEvent(\"change\");\n\t\tif (end) { this.dispatchEvent(\"complete\"); }\n\t};\n\t\n\t/**\n\t * Calculates a normalized position based on a raw position. For example, given a tween with a duration of 3000ms set to loop:\n\t * \tconsole.log(myTween.calculatePosition(3700); // 700\n\t * @method calculatePosition\n\t * @param {Number} rawPosition A raw position.\n\t */\n\tp.calculatePosition = function(rawPosition) {\n\t\t// largely duplicated from setPosition, but necessary to avoid having to instantiate generic objects to pass values (end, loop, position) back.\n\t\tvar d=this.duration, loopCount=this.loop, loop=0, t=0;\n\t\t\n\t\tif (d===0) { return 0; }\n\t\tif (loopCount !== -1 && rawPosition >= loopCount*d+d) { t = d; loop = loopCount } // end\n\t\telse if (rawPosition < 0) { t = 0; }\n\t\telse { loop = rawPosition/d|0; t = rawPosition-loop*d;  }\n\t\t\n\t\tvar rev = !this.reversed !== !(this.bounce && loop%2); // current loop is reversed\n\t\treturn rev ? d-t : t;\n\t};\n\t\n\t/**\n\t * Returns a list of the labels defined on this tween sorted by position.\n\t * @method getLabels\n\t * @return {Array[Object]} A sorted array of objects with label and position properties.\n\t **/\n\tp.getLabels = function() {\n\t\tvar list = this._labelList;\n\t\tif (!list) {\n\t\t\tlist = this._labelList = [];\n\t\t\tvar labels = this._labels;\n\t\t\tfor (var n in labels) {\n\t\t\t\tlist.push({label:n, position:labels[n]});\n\t\t\t}\n\t\t\tlist.sort(function (a,b) { return a.position- b.position; });\n\t\t}\n\t\treturn list;\n\t};\n\t\n\n\t/**\n\t * Defines labels for use with gotoAndPlay/Stop. Overwrites any previously set labels.\n\t * @method setLabels\n\t * @param {Object} labels An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}\n\t * in the form `{myLabelName:time}` where time is in milliseconds (or ticks if `useTicks` is `true`).\n\t **/\n\tp.setLabels = function(labels) {\n\t\tthis._labels = labels;\n\t\tthis._labelList = null;\n\t};\n\n\t/**\n\t * Adds a label that can be used with {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\n\t * @method addLabel\n\t * @param {String} label The label name.\n\t * @param {Number} position The position this label represents.\n\t **/\n\tp.addLabel = function(label, position) {\n\t\tif (!this._labels) { this._labels = {}; }\n\t\tthis._labels[label] = position;\n\t\tvar list = this._labelList;\n\t\tif (list) {\n\t\t\tfor (var i= 0,l=list.length; i<l; i++) { if (position < list[i].position) { break; } }\n\t\t\tlist.splice(i, 0, {label:label, position:position});\n\t\t}\n\t};\n\t\n\t/**\n\t * Unpauses this timeline and jumps to the specified position or label.\n\t * @method gotoAndPlay\n\t * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`)\n\t * or label to jump to.\n\t **/\n\tp.gotoAndPlay = function(positionOrLabel) {\n\t\tthis.paused = false;\n\t\tthis._goto(positionOrLabel);\n\t};\n\n\t/**\n\t * Pauses this timeline and jumps to the specified position or label.\n\t * @method gotoAndStop\n\t * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`) or label\n\t * to jump to.\n\t **/\n\tp.gotoAndStop = function(positionOrLabel) {\n\t\tthis.paused = true;\n\t\tthis._goto(positionOrLabel);\n\t};\n\t\n\t/**\n\t * If a numeric position is passed, it is returned unchanged. If a string is passed, the position of the\n\t * corresponding frame label will be returned, or `null` if a matching label is not defined.\n\t * @method resolve\n\t * @param {String|Number} positionOrLabel A numeric position value or label string.\n\t **/\n\tp.resolve = function(positionOrLabel) {\n\t\tvar pos = Number(positionOrLabel);\n\t\tif (isNaN(pos)) { pos = this._labels && this._labels[positionOrLabel]; }\n\t\treturn pos;\n\t};\n\t\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function() {\n\t\treturn \"[AbstractTween]\";\n\t};\n\n\t/**\n\t * @method clone\n\t * @protected\n\t */\n\tp.clone = function() {\n\t\tthrow(\"AbstractTween can not be cloned.\")\n\t};\n\n\n// private methods:\n\t/**\n\t * Shared logic that executes at the end of the subclass constructor.\n\t * @method _init\n\t * @protected\n\t */\n\tp._init = function(props) {\n\t\tif (!props || !props.paused) { this.paused = false; }\n\t\tif (props&&(props.position!=null)) { this.setPosition(props.position); }\n\t};\n\n\t/**\n\t * @method _updatePosition\n\t * @protected\n\t */\n\tp._updatePosition = function(jump, end) {\n\t\t// abstract.\n\t};\n\t\n\t/**\n\t * @method _goto\n\t * @protected\n\t **/\n\tp._goto = function(positionOrLabel) {\n\t\tvar pos = this.resolve(positionOrLabel);\n\t\tif (pos != null) { this.setPosition(pos, false, true); }\n\t};\n\t\n\t/**\n\t * @method _runActions\n\t * @protected\n\t */\n\tp._runActions = function(startRawPos, endRawPos, jump, includeStart) {\n\t\t// runs actions between startPos & endPos. Separated to support action deferral.\n\t\t\n\t\t//console.log(this.passive === false ? \" > Tween\" : \"Timeline\", \"run\", startRawPos, endRawPos, jump, includeStart);\n\t\t\n\t\t// if we don't have any actions, and we're not a Timeline, then return:\n\t\t// TODO: a cleaner way to handle this would be to override this method in Tween, but I'm not sure it's worth the overhead.\n\t\tif (!this._actionHead && !this.tweens) { return; } \n\t\t\n\t\tvar d=this.duration, reversed=this.reversed, bounce=this.bounce, loopCount=this.loop;\n\t\tvar loop0, loop1, t0, t1;\n\t\t\n\t\tif (d === 0) {\n\t\t\t// deal with 0 length tweens:\n\t\t\tloop0 = loop1 = t0 = t1 = 0;\n\t\t\treversed = bounce = false;\n\t\t} else {\n\t\t\tloop0=startRawPos/d|0;\n\t\t\tloop1=endRawPos/d|0;\n\t\t\tt0=startRawPos-loop0*d;\n\t\t\tt1=endRawPos-loop1*d;\n\t\t}\n\t\t\n\t\t// catch positions that are past the end:\n\t\tif (loopCount !== -1) {\n\t\t\tif (loop1 > loopCount) { t1=d; loop1=loopCount; }\n\t\t\tif (loop0 > loopCount) { t0=d; loop0=loopCount; }\n\t\t}\n\t\t\n\t\t// special cases:\n\t\tif (jump) { return this._runActionsRange(t1, t1, jump, includeStart); } // jump.\n\t\telse if (loop0 === loop1 && t0 === t1 && !jump && !includeStart) { return; } // no actions if the position is identical and we aren't including the start\n\t\telse if (loop0 === -1) { loop0 = t0 = 0; } // correct the -1 value for first advance, important with useTicks.\n\t\t\n\t\tvar dir = (startRawPos <= endRawPos), loop = loop0;\n\t\tdo {\n\t\t\tvar rev = !reversed !== !(bounce && loop % 2);\n\n\t\t\tvar start = (loop === loop0) ? t0 : dir ? 0 : d;\n\t\t\tvar end = (loop === loop1) ? t1 : dir ? d : 0;\n\t\t\t\n\t\t\tif (rev) {\n\t\t\t\tstart = d - start;\n\t\t\t\tend = d - end;\n\t\t\t}\n\t\t\t\n\t\t\tif (bounce && loop !== loop0 && start === end) { /* bounced onto the same time/frame, don't re-execute end actions */ }\n\t\t\telse if (this._runActionsRange(start, end, jump, includeStart || (loop !== loop0 && !bounce))) { return true; }\n\t\t\t\t\n\t\t\tincludeStart = false;\n\t\t} while ((dir && ++loop <= loop1) || (!dir && --loop >= loop1));\n\t};\n\t\n\tp._runActionsRange = function(startPos, endPos, jump, includeStart) {\n\t\t// abstract\n\t};\n\n\tcreatejs.AbstractTween = createjs.promote(AbstractTween, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// Tween.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor\n\t/**\n\t * Tweens properties for a single target. Methods can be chained to create complex animation sequences:\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *\tcreatejs.Tween.get(target)\n\t *\t\t.wait(500)\n\t *\t\t.to({alpha:0, visible:false}, 1000)\n\t *\t\t.call(handleComplete);\n\t *\n\t * Multiple tweens can share a target, however if they affect the same properties there could be unexpected\n\t * behaviour. To stop all tweens on an object, use {{#crossLink \"Tween/removeTweens\"}}{{/crossLink}} or pass `override:true`\n\t * in the props argument.\n\t *\n\t * \tcreatejs.Tween.get(target, {override:true}).to({x:100});\n\t *\n\t * Subscribe to the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event to be notified when the tween position changes.\n\t *\n\t * \tcreatejs.Tween.get(target, {override:true}).to({x:100}).addEventListener(\"change\", handleChange);\n\t * \tfunction handleChange(event) {\n\t * \t\t// The tween changed.\n\t * \t}\n\t *\n\t * See the {{#crossLink \"Tween/get\"}}{{/crossLink}} method also.\n\t * @class Tween\n\t * @param {Object} target The target object that will have its properties tweened.\n\t * @param {Object} [props] The configuration properties to apply to this instance (ex. `{loop:-1, paused:true}`).\n\t * Supported props are listed below. These props are set on the corresponding instance properties except where\n\t * specified.\n\t * @param {boolean} [props.useTicks=false]  See the {{#crossLink \"AbstractTween/useTicks:property\"}}{{/crossLink}} property for more information.\n\t * @param {boolean} [props.ignoreGlobalPause=false] See the {{#crossLink \"AbstractTween/ignoreGlobalPause:property\"}}{{/crossLink}} for more information.\n\t * @param {number|boolean} [props.loop=0] See the {{#crossLink \"AbstractTween/loop:property\"}}{{/crossLink}} for more information.\n\t * @param {boolean} [props.reversed=false] See the {{#crossLink \"AbstractTween/reversed:property\"}}{{/crossLink}} for more information.\n\t * @param {boolean} [props.bounce=false] See the {{#crossLink \"AbstractTween/bounce:property\"}}{{/crossLink}} for more information.\n\t * @param {number} [props.timeScale=1] See the {{#crossLink \"AbstractTween/timeScale:property\"}}{{/crossLink}} for more information.\n\t * @param {object} [props.pluginData] See the {{#crossLink \"Tween/pluginData:property\"}}{{/crossLink}} for more information.\n\t * @param {boolean} [props.paused=false] See the {{#crossLink \"AbstractTween/paused:property\"}}{{/crossLink}} for more information.\n\t * @param {number} [props.position=0] The initial position for this tween. See {{#crossLink \"AbstractTween/position:property\"}}{{/crossLink}}\n\t * @param {Function} [props.onChange] Adds the specified function as a listener to the {{#crossLink \"AbstractTween/change:event\"}}{{/crossLink}} event\n\t * @param {Function} [props.onComplete] Adds the specified function as a listener to the {{#crossLink \"AbstractTween/complete:event\"}}{{/crossLink}} event\n\t * @param {boolean} [props.override=false] Removes all existing tweens for the target when set to `true`.\n\t * </UL>\n\t * @extends AbstractTween\n\t * @constructor\n\t */\n\tfunction Tween(target, props) {\n\t\tthis.AbstractTween_constructor(props);\n\t\t\n\t// public properties:\n\t\n\t\t/**\n\t\t * Allows you to specify data that will be used by installed plugins. Each plugin uses this differently, but in general\n\t\t * you specify data by assigning it to a property of `pluginData` with the same name as the plugin.\n\t\t * Note that in many cases, this data is used as soon as the plugin initializes itself for the tween.\n\t\t * As such, this data should be set before the first `to` call in most cases.\n\t\t * @example\n\t\t *\tmyTween.pluginData.SmartRotation = data;\n\t\t * \n\t\t * Most plugins also support a property to disable them for a specific tween. This is typically the plugin name followed by \"_disabled\".\n\t\t * @example\n\t\t *\tmyTween.pluginData.SmartRotation_disabled = true;\n\t\t * \n\t\t * Some plugins also store working data in this object, usually in a property named `_PluginClassName`.\n\t\t * See the documentation for individual plugins for more details.\n\t\t * @property pluginData\n\t\t * @type {Object}\n\t\t */\n\t\tthis.pluginData = null;\n\t\n\t\t/**\n\t\t * The target of this tween. This is the object on which the tweened properties will be changed.\n\t\t * @property target\n\t\t * @type {Object}\n\t\t * @readonly\n\t\t */\n\t\tthis.target = target;\n\t\n\t\t/**\n\t\t * Indicates the tween's current position is within a passive wait.\n\t\t * @property passive\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @readonly\n\t\t **/\n\t\tthis.passive = false;\n\t\t\n\t\t\n\t// private properties:\n\t\n\t\t/**\n\t\t * @property _stepHead\n\t\t * @type {TweenStep}\n\t\t * @protected\n\t\t */\n\t\tthis._stepHead = new TweenStep(null, 0, 0, {}, null, true);\n\t\t\n\t\t/**\n\t\t * @property _stepTail\n\t\t * @type {TweenStep}\n\t\t * @protected\n\t\t */\n\t\tthis._stepTail = this._stepHead;\n\t\t\n\t\t/**\n\t\t * The position within the current step. Used by MovieClip.\n\t\t * @property _stepPosition\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @protected\n\t\t */\n\t\tthis._stepPosition = 0;\n\t\t\n\t\t/**\n\t\t * @property _actionHead\n\t\t * @type {TweenAction}\n\t\t * @protected\n\t\t */\n\t\tthis._actionHead = null;\n\t\t\n\t\t/**\n\t\t * @property _actionTail\n\t\t * @type {TweenAction}\n\t\t * @protected\n\t\t */\n\t\tthis._actionTail = null;\n\t\t\n\t\t/**\n\t\t * Plugins added to this tween instance.\n\t\t * @property _plugins\n\t\t * @type Array[Object]\n\t\t * @default null\n\t\t * @protected\n\t\t */\n\t\tthis._plugins = null;\n\t\t\n\t\t/**\n\t\t * Hash for quickly looking up added plugins. Null until a plugin is added.\n\t\t * @property _plugins\n\t\t * @type Object\n\t\t * @default null\n\t\t * @protected\n\t\t */\n\t\tthis._pluginIds = null;\n\t\t\n\t\t/**\n\t\t * Used by plugins to inject new properties.\n\t\t * @property _injected\n\t\t * @type {Object}\n\t\t * @default null\n\t\t * @protected\n\t\t */\n\t\tthis._injected = null;\n\n\t\tif (props) {\n\t\t\tthis.pluginData = props.pluginData;\n\t\t\tif (props.override) { Tween.removeTweens(target); }\n\t\t}\n\t\tif (!this.pluginData) { this.pluginData = {}; }\n\t\t\n\t\tthis._init(props);\n\t};\n\n\tvar p = createjs.extend(Tween, createjs.AbstractTween);\n\n// static properties\n\n\t/**\n\t * Constant returned by plugins to tell the tween not to use default assignment.\n\t * @property IGNORE\n\t * @type Object\n\t * @static\n\t */\n\tTween.IGNORE = {};\n\n\t/**\n\t * @property _listeners\n\t * @type Array[Tween]\n\t * @static\n\t * @protected\n\t */\n\tTween._tweens = [];\n\n\t/**\n\t * @property _plugins\n\t * @type Object\n\t * @static\n\t * @protected\n\t */\n\tTween._plugins = null;\n\t\n\t/**\n\t * @property _tweenHead\n\t * @type Tween\n\t * @static\n\t * @protected\n\t */\n\tTween._tweenHead = null;\n\t\n\t/**\n\t * @property _tweenTail\n\t * @type Tween\n\t * @static\n\t * @protected\n\t */\n\tTween._tweenTail = null;\n\n\n// static methods\t\n\t/**\n\t * Returns a new tween instance. This is functionally identical to using `new Tween(...)`, but may look cleaner\n\t * with the chained syntax of TweenJS.\n\t * <h4>Example</h4>\n\t *\n\t *\tvar tween = createjs.Tween.get(target).to({x:100}, 500);\n\t *\t// equivalent to:\n\t *\tvar tween = new createjs.Tween(target).to({x:100}, 500);\n\t *\n\t * @method get\n\t * @param {Object} target The target object that will have its properties tweened.\n\t * @param {Object} [props] The configuration properties to apply to this instance (ex. `{loop:-1, paused:true}`).\n\t * Supported props are listed below. These props are set on the corresponding instance properties except where\n\t * specified.\n\t * @param {boolean} [props.useTicks=false]  See the {{#crossLink \"AbstractTween/useTicks:property\"}}{{/crossLink}} property for more information.\n\t * @param {boolean} [props.ignoreGlobalPause=false] See the {{#crossLink \"AbstractTween/ignoreGlobalPause:property\"}}{{/crossLink}} for more information.\n\t * @param {number|boolean} [props.loop=0] See the {{#crossLink \"AbstractTween/loop:property\"}}{{/crossLink}} for more information.\n\t * @param {boolean} [props.reversed=false] See the {{#crossLink \"AbstractTween/reversed:property\"}}{{/crossLink}} for more information.\n\t * @param {boolean} [props.bounce=false] See the {{#crossLink \"AbstractTween/bounce:property\"}}{{/crossLink}} for more information.\n\t * @param {number} [props.timeScale=1] See the {{#crossLink \"AbstractTween/timeScale:property\"}}{{/crossLink}} for more information.\n\t * @param {object} [props.pluginData] See the {{#crossLink \"Tween/pluginData:property\"}}{{/crossLink}} for more information.\n\t * @param {boolean} [props.paused=false] See the {{#crossLink \"AbstractTween/paused:property\"}}{{/crossLink}} for more information.\n\t * @param {number} [props.position=0] The initial position for this tween. See {{#crossLink \"AbstractTween/position:property\"}}{{/crossLink}}\n\t * @param {Function} [props.onChange] Adds the specified function as a listener to the {{#crossLink \"AbstractTween/change:event\"}}{{/crossLink}} event\n\t * @param {Function} [props.onComplete] Adds the specified function as a listener to the {{#crossLink \"AbstractTween/complete:event\"}}{{/crossLink}} event\n\t * @param {boolean} [props.override=false] Removes all existing tweens for the target when set to `true`.\n\t * @return {Tween} A reference to the created tween.\n\t * @static\n\t */\n\tTween.get = function(target, props) {\n\t\treturn new Tween(target, props);\n\t};\n\n\t/**\n\t * Advances all tweens. This typically uses the {{#crossLink \"Ticker\"}}{{/crossLink}} class, but you can call it\n\t * manually if you prefer to use your own \"heartbeat\" implementation.\n\t * @method tick\n\t * @param {Number} delta The change in time in milliseconds since the last tick. Required unless all tweens have\n\t * `useTicks` set to true.\n\t * @param {Boolean} paused Indicates whether a global pause is in effect. Tweens with {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}}\n\t * will ignore this, but all others will pause if this is `true`.\n\t * @static\n\t */\n\tTween.tick = function(delta, paused) {\n\t\tvar tween = Tween._tweenHead;\n\t\twhile (tween) {\n\t\t\tvar next = tween._next; // in case it completes and wipes its _next property\n\t\t\tif ((paused && !tween.ignoreGlobalPause) || tween._paused) { /* paused */ }\n\t\t\telse { tween.advance(tween.useTicks?1:delta); }\n\t\t\ttween = next;\n\t\t}\n\t};\n\n\t/**\n\t * Handle events that result from Tween being used as an event handler. This is included to allow Tween to handle\n\t * {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} events from the createjs {{#crossLink \"Ticker\"}}{{/crossLink}}.\n\t * No other events are handled in Tween.\n\t * @method handleEvent\n\t * @param {Object} event An event object passed in by the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}. Will\n\t * usually be of type \"tick\".\n\t * @private\n\t * @static\n\t * @since 0.4.2\n\t */\n\tTween.handleEvent = function(event) {\n\t\tif (event.type === \"tick\") {\n\t\t\tthis.tick(event.delta, event.paused);\n\t\t}\n\t};\n\n\t/**\n\t * Removes all existing tweens for a target. This is called automatically by new tweens if the `override`\n\t * property is `true`.\n\t * @method removeTweens\n\t * @param {Object} target The target object to remove existing tweens from.\n\t * @static\n\t */\n\tTween.removeTweens = function(target) {\n\t\tif (!target.tweenjs_count) { return; }\n\t\tvar tween = Tween._tweenHead;\n\t\twhile (tween) {\n\t\t\tvar next = tween._next;\n\t\t\tif (tween.target === target) { Tween._register(tween, true); }\n\t\t\ttween = next;\n\t\t}\n\t\ttarget.tweenjs_count = 0;\n\t};\n\n\t/**\n\t * Stop and remove all existing tweens.\n\t * @method removeAllTweens\n\t * @static\n\t * @since 0.4.1\n\t */\n\tTween.removeAllTweens = function() {\n\t\tvar tween = Tween._tweenHead;\n\t\twhile (tween) {\n\t\t\tvar next = tween._next;\n\t\t\ttween._paused = true;\n\t\t\ttween.target&&(tween.target.tweenjs_count = 0);\n\t\t\ttween._next = tween._prev = null;\n\t\t\ttween = next;\n\t\t}\n\t\tTween._tweenHead = Tween._tweenTail = null;\n\t};\n\n\t/**\n\t * Indicates whether there are any active tweens on the target object (if specified) or in general.\n\t * @method hasActiveTweens\n\t * @param {Object} [target] The target to check for active tweens. If not specified, the return value will indicate\n\t * if there are any active tweens on any target.\n\t * @return {Boolean} Indicates if there are active tweens.\n\t * @static\n\t */\n\tTween.hasActiveTweens = function(target) {\n\t\tif (target) { return !!target.tweenjs_count; }\n\t\treturn !!Tween._tweenHead;\n\t};\n\n\t/**\n\t * Installs a plugin, which can modify how certain properties are handled when tweened. See the {{#crossLink \"SamplePlugin\"}}{{/crossLink}}\n\t * for an example of how to write TweenJS plugins. Plugins should generally be installed via their own `install` method, in order to provide\n\t * the plugin with an opportunity to configure itself.\n\t * @method _installPlugin\n\t * @param {Object} plugin The plugin to install\n\t * @static\n\t * @protected\n\t */\n\tTween._installPlugin = function(plugin) {\n\t\tvar priority = (plugin.priority = plugin.priority||0), arr = (Tween._plugins = Tween._plugins || []);\n\t\tfor (var i=0,l=arr.length;i<l;i++) {\n\t\t\tif (priority < arr[i].priority) { break; }\n\t\t}\n\t\tarr.splice(i,0,plugin);\n\t};\n\n\t/**\n\t * Registers or unregisters a tween with the ticking system.\n\t * @method _register\n\t * @param {Tween} tween The tween instance to register or unregister.\n\t * @param {Boolean} paused If `false`, the tween is registered. If `true` the tween is unregistered.\n\t * @static\n\t * @protected\n\t */\n\tTween._register = function(tween, paused) {\n\t\tvar target = tween.target;\n\t\tif (!paused && tween._paused) {\n\t\t\t// TODO: this approach might fail if a dev is using sealed objects\n\t\t\tif (target) { target.tweenjs_count = target.tweenjs_count ? target.tweenjs_count+1 : 1; }\n\t\t\tvar tail = Tween._tweenTail;\n\t\t\tif (!tail) { Tween._tweenHead = Tween._tweenTail = tween; }\n\t\t\telse {\n\t\t\t\tTween._tweenTail = tail._next = tween;\n\t\t\t\ttween._prev = tail;\n\t\t\t}\n\t\t\tif (!Tween._inited && createjs.Ticker) { createjs.Ticker.addEventListener(\"tick\", Tween); Tween._inited = true; }\n\t\t} else if (paused && !tween._paused) {\n\t\t\tif (target) { target.tweenjs_count--; }\n\t\t\tvar next = tween._next, prev = tween._prev;\n\t\t\t\n\t\t\tif (next) { next._prev = prev; }\n\t\t\telse { Tween._tweenTail = prev; } // was tail\n\t\t\tif (prev) { prev._next = next; }\n\t\t\telse { Tween._tweenHead = next; } // was head.\n\t\t\t\n\t\t\ttween._next = tween._prev = null;\n\t\t}\n\t\ttween._paused = paused;\n\t};\n\n\n// events:\n\n// public methods:\n\t/**\n\t * Adds a wait (essentially an empty tween).\n\t * <h4>Example</h4>\n\t *\n\t *\t//This tween will wait 1s before alpha is faded to 0.\n\t *\tcreatejs.Tween.get(target).wait(1000).to({alpha:0}, 1000);\n\t *\n\t * @method wait\n\t * @param {Number} duration The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\n\t * @param {Boolean} [passive=false] Tween properties will not be updated during a passive wait. This\n\t * is mostly useful for use with {{#crossLink \"Timeline\"}}{{/crossLink}} instances that contain multiple tweens\n\t * affecting the same target at different times.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t * @chainable\n\t **/\n\tp.wait = function(duration, passive) {\n\t\tif (duration > 0) { this._addStep(+duration, this._stepTail.props, null, passive); }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Adds a tween from the current values to the specified properties. Set duration to 0 to jump to these value.\n\t * Numeric properties will be tweened from their current value in the tween to the target value. Non-numeric\n\t * properties will be set at the end of the specified duration.\n\t * <h4>Example</h4>\n\t *\n\t *\tcreatejs.Tween.get(target).to({alpha:0, visible:false}, 1000);\n\t *\n\t * @method to\n\t * @param {Object} props An object specifying property target values for this tween (Ex. `{x:300}` would tween the x\n\t * property of the target to 300).\n\t * @param {Number} [duration=0] The duration of the tween in milliseconds (or in ticks if `useTicks` is true).\n\t * @param {Function} [ease=\"linear\"] The easing function to use for this tween. See the {{#crossLink \"Ease\"}}{{/crossLink}}\n\t * class for a list of built-in ease functions.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t * @chainable\n\t */\n\tp.to = function(props, duration, ease) {\n\t\tif (duration == null || duration < 0) { duration = 0; }\n\t\tvar step = this._addStep(+duration, null, ease);\n\t\tthis._appendProps(props, step);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Adds a label that can be used with {{#crossLink \"Tween/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Tween/gotoAndStop\"}}{{/crossLink}}\n\t * at the current point in the tween. For example:\n\t * \n\t * \tvar tween = createjs.Tween.get(foo)\n\t * \t\t\t\t\t.to({x:100}, 1000)\n\t * \t\t\t\t\t.label(\"myLabel\")\n\t * \t\t\t\t\t.to({x:200}, 1000);\n\t * // ...\n\t * tween.gotoAndPlay(\"myLabel\"); // would play from 1000ms in.\n\t * \n\t * @method addLabel\n\t * @param {String} label The label name.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t * @chainable\n\t **/\n\tp.label = function(name) {\n\t\tthis.addLabel(name, this.duration);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Adds an action to call the specified function.\n\t * <h4>Example</h4>\n\t *\n\t * \t//would call myFunction() after 1 second.\n\t * \tcreatejs.Tween.get().wait(1000).call(myFunction);\n\t *\n\t * @method call\n\t * @param {Function} callback The function to call.\n\t * @param {Array} [params]. The parameters to call the function with. If this is omitted, then the function\n\t * will be called with a single param pointing to this tween.\n\t * @param {Object} [scope]. The scope to call the function in. If omitted, it will be called in the target's scope.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t * @chainable\n\t */\n\tp.call = function(callback, params, scope) {\n\t\treturn this._addAction(scope||this.target, callback, params||[this]);\n\t};\n\n\t/**\n\t * Adds an action to set the specified props on the specified target. If `target` is null, it will use this tween's\n\t * target. Note that for properties on the target object, you should consider using a zero duration {{#crossLink \"Tween/to\"}}{{/crossLink}}\n\t * operation instead so the values are registered as tweened props.\n\t * <h4>Example</h4>\n\t *\n\t *\tmyTween.wait(1000).set({visible:false}, foo);\n\t *\n\t * @method set\n\t * @param {Object} props The properties to set (ex. `{visible:false}`).\n\t * @param {Object} [target] The target to set the properties on. If omitted, they will be set on the tween's target.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t * @chainable\n\t */\n\tp.set = function(props, target) {\n\t\treturn this._addAction(target||this.target, this._set, [props]);\n\t};\n\n\t/**\n\t * Adds an action to play (unpause) the specified tween. This enables you to sequence multiple tweens.\n\t * <h4>Example</h4>\n\t *\n\t *\tmyTween.to({x:100}, 500).play(otherTween);\n\t *\n\t * @method play\n\t * @param {Tween} [tween] The tween to play. Defaults to this tween.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t * @chainable\n\t */\n\tp.play = function(tween) {\n\t\treturn this._addAction(tween||this, this._set, [{paused:false}]);\n\t};\n\n\t/**\n\t * Adds an action to pause the specified tween.\n\t * \n\t * \tmyTween.pause(otherTween).to({alpha:1}, 1000).play(otherTween);\n\t * \n\t * Note that this executes at the end of a tween update, so the tween may advance beyond the time the pause\n\t * action was inserted at. For example:\n\t * \n\t * myTween.to({foo:0}, 1000).pause().to({foo:1}, 1000);\n\t * \n\t * At 60fps the tween will advance by ~16ms per tick, if the tween above was at 999ms prior to the current tick, it\n\t * will advance to 1015ms (15ms into the second \"step\") and then pause.\n\t * \n\t * @method pause\n\t * @param {Tween} [tween] The tween to pause. Defaults to this tween.\n\t * @return {Tween} This tween instance (for chaining calls)\n\t * @chainable\n\t */\n\tp.pause = function(tween) {\n\t\treturn this._addAction(tween||this, this._set, [{paused:true}]);\n\t};\n\n\t// tiny api (primarily for tool output):\n\tp.w = p.wait;\n\tp.t = p.to;\n\tp.c = p.call;\n\tp.s = p.set;\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function() {\n\t\treturn \"[Tween]\";\n\t};\n\n\t/**\n\t * @method clone\n\t * @protected\n\t */\n\tp.clone = function() {\n\t\tthrow(\"Tween can not be cloned.\")\n\t};\n\n\n// private methods:\n\t/**\n\t * Adds a plugin to this tween.\n\t * @method _addPlugin\n\t * @param {Object} plugin\n\t * @protected\n\t */\n\tp._addPlugin = function(plugin) {\n\t\tvar ids = this._pluginIds || (this._pluginIds = {}), id = plugin.ID;\n\t\tif (!id || ids[id]) { return; } // already added\n\t\t\n\t\tids[id] = true;\n\t\tvar plugins = this._plugins || (this._plugins = []), priority = plugin.priority || 0;\n\t\tfor (var i=0,l=plugins.length; i<l; i++) {\n\t\t\tif (priority < plugins[i].priority) {\n\t\t\t\tplugins.splice(i,0,plugin);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tplugins.push(plugin);\n\t};\n\t\n\t// Docced in AbstractTween\n\tp._updatePosition = function(jump, end) {\n\t\tvar step = this._stepHead.next, t=this.position, d=this.duration;\n\t\tif (this.target && step) {\n\t\t\t// find our new step index:\n\t\t\tvar stepNext = step.next;\n\t\t\twhile (stepNext && stepNext.t <= t) { step = step.next; stepNext = step.next; }\n\t\t\tvar ratio = end ? d === 0 ? 1 : t/d : (t-step.t)/step.d; // TODO: revisit this.\n\t\t\tthis._updateTargetProps(step, ratio, end);\n\t\t}\n\t\tthis._stepPosition = step ? t-step.t : 0;\n\t};\n\t\n\t/**\n\t * @method _updateTargetProps\n\t * @param {Object} step\n\t * @param {Number} ratio\n\t * @param {Boolean} end Indicates to plugins that the full tween has ended.\n\t * @protected\n\t */\n\tp._updateTargetProps = function(step, ratio, end) {\n\t\tif (this.passive = !!step.passive) { return; } // don't update props.\n\t\t\n\t\tvar v, v0, v1, ease;\n\t\tvar p0 = step.prev.props;\n\t\tvar p1 = step.props;\n\t\tif (ease = step.ease) { ratio = ease(ratio,0,1,1); }\n\t\t\n\t\tvar plugins = this._plugins;\n\t\tproploop : for (var n in p0) {\n\t\t\tv0 = p0[n];\n\t\t\tv1 = p1[n];\n\t\t\t\n\t\t\t// values are different & it is numeric then interpolate:\n\t\t\tif (v0 !== v1 && (typeof(v0) === \"number\")) {\n\t\t\t\tv = v0+(v1-v0)*ratio;\n\t\t\t} else {\n\t\t\t\tv = ratio >= 1 ? v1 : v0;\n\t\t\t}\n\t\t\t\n\t\t\tif (plugins) {\n\t\t\t\tfor (var i=0,l=plugins.length;i<l;i++) {\n\t\t\t\t\tvar value = plugins[i].change(this, step, n, v, ratio, end);\n\t\t\t\t\tif (value === Tween.IGNORE) { continue proploop; }\n\t\t\t\t\tif (value !== undefined) { v = value; }\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.target[n] = v;\n\t\t}\n\n\t};\n\t\n\t/**\n\t * @method _runActionsRange\n\t * @param {Number} startPos\n\t * @param {Number} endPos\n\t * @param {Boolean} includeStart\n\t * @protected\n\t */\n\tp._runActionsRange = function(startPos, endPos, jump, includeStart) {\n\t\tvar rev = startPos > endPos;\n\t\tvar action = rev ? this._actionTail : this._actionHead;\n\t\tvar ePos = endPos, sPos = startPos;\n\t\tif (rev) { ePos=startPos; sPos=endPos; }\n\t\tvar t = this.position;\n\t\twhile (action) {\n\t\t\tvar pos = action.t;\n\t\t\tif (pos === endPos || (pos > sPos && pos < ePos) || (includeStart && pos === startPos)) {\n\t\t\t\taction.funct.apply(action.scope, action.params);\n\t\t\t\tif (t !== this.position) { return true; }\n\t\t\t}\n\t\t\taction = rev ? action.prev : action.next;\n\t\t}\n\t};\n\n\t/**\n\t * @method _appendProps\n\t * @param {Object} props\n\t * @protected\n\t */\n\tp._appendProps = function(props, step, stepPlugins) {\n\t\tvar initProps = this._stepHead.props, target = this.target, plugins = Tween._plugins;\n\t\tvar n, i, value, initValue, inject;\n\t\tvar oldStep = step.prev, oldProps = oldStep.props;\n\t\tvar stepProps = step.props || (step.props = this._cloneProps(oldProps));\n\t\tvar cleanProps = {}; // TODO: is there some way to avoid this additional object?\n\n\t\tfor (n in props) {\n\t\t\tif (!props.hasOwnProperty(n)) { continue; }\n\t\t\tcleanProps[n] = stepProps[n] = props[n];\n\n\t\t\tif (initProps[n] !== undefined) { continue; }\n\n\t\t\tinitValue = undefined; // accessing missing properties on DOMElements when using CSSPlugin is INSANELY expensive, so we let the plugin take a first swing at it.\n\t\t\tif (plugins) {\n\t\t\t\tfor (i = plugins.length-1; i >= 0; i--) {\n\t\t\t\t\tvalue = plugins[i].init(this, n, initValue);\n\t\t\t\t\tif (value !== undefined) { initValue = value; }\n\t\t\t\t\tif (initValue === Tween.IGNORE) {\n\t\t\t\t\t\tdelete(stepProps[n]);\n\t\t\t\t\t\tdelete(cleanProps[n]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (initValue !== Tween.IGNORE) {\n\t\t\t\tif (initValue === undefined) { initValue = target[n]; }\n\t\t\t\toldProps[n] = (initValue === undefined) ? null : initValue;\n\t\t\t}\n\t\t}\n\t\t\n\t\tfor (n in cleanProps) {\n\t\t\tvalue = props[n];\n\n\t\t\t// propagate old value to previous steps:\n\t\t\tvar o, prev=oldStep;\n\t\t\twhile ((o = prev) && (prev = o.prev)) {\n\t\t\t\tif (prev.props === o.props) { continue; } // wait step\n\t\t\t\tif (prev.props[n] !== undefined) { break; } // already has a value, we're done.\n\t\t\t\tprev.props[n] = oldProps[n];\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (stepPlugins !== false && (plugins = this._plugins)) {\n\t\t\tfor (i = plugins.length-1; i >= 0; i--) {\n\t\t\t\tplugins[i].step(this, step, cleanProps);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (inject = this._injected) {\n\t\t\tthis._injected = null;\n\t\t\tthis._appendProps(inject, step, false);\n\t\t}\n\t};\n\t\n\t/**\n\t * Used by plugins to inject properties onto the current step. Called from within `Plugin.step` calls.\n\t * For example, a plugin dealing with color, could read a hex color, and inject red, green, and blue props into the tween.\n\t * See the SamplePlugin for more info.\n\t * @method _injectProp\n\t * @param {String} name\n\t * @param {Object} value\n\t * @protected\n\t */\n\tp._injectProp = function(name, value) {\n\t\tvar o = this._injected || (this._injected = {});\n\t\to[name] = value;\n\t};\n\n\t/**\n\t * @method _addStep\n\t * @param {Number} duration\n\t * @param {Object} props\n\t * @param {Function} ease\n\t * @param {Boolean} passive\n\t * @protected\n\t */\n\tp._addStep = function(duration, props, ease, passive) {\n\t\tvar step = new TweenStep(this._stepTail, this.duration, duration, props, ease, passive||false);\n\t\tthis.duration += duration;\n\t\treturn this._stepTail = (this._stepTail.next = step);\n\t};\n\n\t/**\n\t * @method _addAction\n\t * @param {Object} scope\n\t * @param {Function} funct\n\t * @param {Array} params\n\t * @protected\n\t */\n\tp._addAction = function(scope, funct, params) {\n\t\tvar action = new TweenAction(this._actionTail, this.duration, scope, funct, params);\n\t\tif (this._actionTail) { this._actionTail.next = action; }\n\t\telse { this._actionHead = action; }\n\t\tthis._actionTail = action;\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method _set\n\t * @param {Object} props\n\t * @protected\n\t */\n\tp._set = function(props) {\n\t\tfor (var n in props) {\n\t\t\tthis[n] = props[n];\n\t\t}\n\t};\n\n\t/**\n\t * @method _cloneProps\n\t * @param {Object} props\n\t * @protected\n\t */\n\tp._cloneProps = function(props) {\n\t\tvar o = {};\n\t\tfor (var n in props) { o[n] = props[n]; }\n\t\treturn o;\n\t};\n\n\tcreatejs.Tween = createjs.promote(Tween, \"AbstractTween\");\n\t\n\tfunction TweenStep(prev, t, d, props, ease, passive) {\n\t\tthis.next = null;\n\t\tthis.prev = prev;\n\t\tthis.t = t;\n\t\tthis.d = d;\n\t\tthis.props = props;\n\t\tthis.ease = ease;\n\t\tthis.passive = passive;\n\t\tthis.index = prev ? prev.index+1 : 0;\n\t};\n\t\n\tfunction TweenAction(prev, t, scope, funct, params) {\n\t\tthis.next = null;\n\t\tthis.prev = prev;\n\t\tthis.t = t;\n\t\tthis.d = 0;\n\t\tthis.scope = scope;\n\t\tthis.funct = funct;\n\t\tthis.params = params;\n\t};\n}());\n\n//##############################################################################\n// Timeline.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n\n(function() {\n\t\"use strict\";\n\t\n\n// constructor\t\n\t/**\n\t * The Timeline class synchronizes multiple tweens and allows them to be controlled as a group. Please note that if a\n\t * timeline is looping, the tweens on it may appear to loop even if the \"loop\" property of the tween is false.\n\t * \n\t * NOTE: Timeline currently also accepts a param list in the form: `tweens, labels, props`. This is for backwards\n\t * compatibility only and will be removed in the future. Include tweens and labels as properties on the props object.\n\t * @class Timeline\n\t * @param {Object} [props] The configuration properties to apply to this instance (ex. `{loop:-1, paused:true}`).\n\t * Supported props are listed below. These props are set on the corresponding instance properties except where\n\t * specified.<UL>\n\t *    <LI> `useTicks`</LI>\n\t *    <LI> `ignoreGlobalPause`</LI>\n\t *    <LI> `loop`</LI>\n\t *    <LI> `reversed`</LI>\n\t *    <LI> `bounce`</LI>\n\t *    <LI> `timeScale`</LI>\n\t *    <LI> `paused`</LI>\n\t *    <LI> `position`: indicates the initial position for this tween.</LI>\n\t *    <LI> `onChange`: adds the specified function as a listener to the `change` event</LI>\n\t *    <LI> `onComplete`: adds the specified function as a listener to the `complete` event</LI>\n\t * </UL>\n\t * @extends AbstractTween\n\t * @constructor\n\t **/\n\tfunction Timeline(props) {\n\t\tvar tweens, labels;\n\t\t// handle old params (tweens, labels, props):\n\t\t// TODO: deprecated.\n\t\tif (props instanceof Array || (props == null && arguments.length > 1)) {\n\t\t\ttweens = props;\n\t\t\tlabels = arguments[1];\n\t\t\tprops = arguments[2];\n\t\t} else if (props) {\n\t\t\ttweens = props.tweens;\n\t\t\tlabels = props.labels;\n\t\t}\n\t\t\n\t\tthis.AbstractTween_constructor(props);\n\n\t// private properties:\n\t\t/**\n\t\t * The array of tweens in the timeline. It is *strongly* recommended that you use\n\t\t * {{#crossLink \"Tween/addTween\"}}{{/crossLink}} and {{#crossLink \"Tween/removeTween\"}}{{/crossLink}},\n\t\t * rather than accessing this directly, but it is included for advanced uses.\n\t\t * @property tweens\n\t\t * @type Array\n\t\t **/\n\t\tthis.tweens = [];\n\t\t\n\t\tif (tweens) { this.addTween.apply(this, tweens); }\n\t\tthis.setLabels(labels);\n\t\t\n\t\tthis._init(props);\n\t};\n\t\n\tvar p = createjs.extend(Timeline, createjs.AbstractTween);\n\n\t\n// events:\n\t// docced in AbstractTween.\n\n\n// public methods:\n\t/**\n\t * Adds one or more tweens (or timelines) to this timeline. The tweens will be paused (to remove them from the\n\t * normal ticking system) and managed by this timeline. Adding a tween to multiple timelines will result in\n\t * unexpected behaviour.\n\t * @method addTween\n\t * @param {Tween} ...tween The tween(s) to add. Accepts multiple arguments.\n\t * @return {Tween} The first tween that was passed in.\n\t **/\n\tp.addTween = function(tween) {\n\t\tif (tween._parent) { tween._parent.removeTween(tween); }\n\t\t\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tfor (var i=0; i<l; i++) { this.addTween(arguments[i]); }\n\t\t\treturn arguments[l-1];\n\t\t} else if (l === 0) { return null; }\n\t\t\n\t\tthis.tweens.push(tween);\n\t\ttween._parent = this;\n\t\ttween.paused = true;\n\t\tvar d = tween.duration;\n\t\tif (tween.loop > 0) { d *= tween.loop+1; }\n\t\tif (d > this.duration) { this.duration = d; }\n\t\t\n\t\tif (this.rawPosition >= 0) { tween.setPosition(this.rawPosition); }\n\t\treturn tween;\n\t};\n\n\t/**\n\t * Removes one or more tweens from this timeline.\n\t * @method removeTween\n\t * @param {Tween} ...tween The tween(s) to remove. Accepts multiple arguments.\n\t * @return Boolean Returns `true` if all of the tweens were successfully removed.\n\t **/\n\tp.removeTween = function(tween) {\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tvar good = true;\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeTween(arguments[i]); }\n\t\t\treturn good;\n\t\t} else if (l === 0) { return true; }\n\n\t\tvar tweens = this.tweens;\n\t\tvar i = tweens.length;\n\t\twhile (i--) {\n\t\t\tif (tweens[i] === tween) {\n\t\t\t\ttweens.splice(i, 1);\n\t\t\t\ttween._parent = null;\n\t\t\t\tif (tween.duration >= this.duration) { this.updateDuration(); }\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Recalculates the duration of the timeline. The duration is automatically updated when tweens are added or removed,\n\t * but this method is useful if you modify a tween after it was added to the timeline.\n\t * @method updateDuration\n\t **/\n\tp.updateDuration = function() {\n\t\tthis.duration = 0;\n\t\tfor (var i=0,l=this.tweens.length; i<l; i++) {\n\t\t\tvar tween = this.tweens[i];\n\t\t\tvar d = tween.duration;\n\t\t\tif (tween.loop > 0) { d *= tween.loop+1; }\n\t\t\tif (d > this.duration) { this.duration = d; }\n\t\t}\n\t};\n\n\t/**\n\t* Returns a string representation of this object.\n\t* @method toString\n\t* @return {String} a string representation of the instance.\n\t**/\n\tp.toString = function() {\n\t\treturn \"[Timeline]\";\n\t};\n\n\t/**\n\t * @method clone\n\t * @protected\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"Timeline can not be cloned.\")\n\t};\n\n// private methods:\n\t\n\t// Docced in AbstractTween\n\tp._updatePosition = function(jump, end) {\n\t\tvar t = this.position;\n\t\tfor (var i=0, l=this.tweens.length; i<l; i++) {\n\t\t\tthis.tweens[i].setPosition(t, true, jump); // actions will run after all the tweens update.\n\t\t}\n\t};\n\t\n\t// Docced in AbstractTween\n\tp._runActionsRange = function(startPos, endPos, jump, includeStart) {\n\t\t//console.log(\"\trange\", startPos, endPos, jump, includeStart);\n\t\tvar t = this.position;\n\t\tfor (var i=0, l=this.tweens.length; i<l; i++) {\n\t\t\tthis.tweens[i]._runActions(startPos, endPos, jump, includeStart);\n\t\t\tif (t !== this.position) { return true; } // an action changed this timeline's position.\n\t\t}\n\t};\n\n\n\tcreatejs.Timeline = createjs.promote(Timeline, \"AbstractTween\");\n\n}());\n\n//##############################################################################\n// Ease.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * The Ease class provides a collection of easing functions for use with TweenJS. It does not use the standard 4 param\n\t * easing signature. Instead it uses a single param which indicates the current linear ratio (0 to 1) of the tween.\n\t *\n\t * Most methods on Ease can be passed directly as easing functions:\n\t *\n\t *      Tween.get(target).to({x:100}, 500, Ease.linear);\n\t *\n\t * However, methods beginning with \"get\" will return an easing function based on parameter values:\n\t *\n\t *      Tween.get(target).to({y:200}, 500, Ease.getPowIn(2.2));\n\t *\n\t * Please see the <a href=\"http://www.createjs.com/Demos/TweenJS/Tween_SparkTable\">spark table demo</a> for an\n\t * overview of the different ease types on <a href=\"http://tweenjs.com\">TweenJS.com</a>.\n\t *\n\t * <em>Equations derived from work by Robert Penner.</em>\n\t * @class Ease\n\t * @static\n\t **/\n\tfunction Ease() {\n\t\tthrow \"Ease cannot be instantiated.\";\n\t}\n\n\n// static methods and properties\n\t/**\n\t * @method linear\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.linear = function(t) { return t; };\n\n\t/**\n\t * Identical to linear.\n\t * @method none\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.none = Ease.linear;\n\n\t/**\n\t * Mimics the simple -100 to 100 easing in Adobe Flash/Animate.\n\t * @method get\n\t * @param {Number} amount A value from -1 (ease in) to 1 (ease out) indicating the strength and direction of the ease.\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.get = function(amount) {\n\t\tif (amount < -1) { amount = -1; }\n\t\telse if (amount > 1) { amount = 1; }\n\t\treturn function(t) {\n\t\t\tif (amount==0) { return t; }\n\t\t\tif (amount<0) { return t*(t*-amount+1+amount); }\n\t\t\treturn t*((2-t)*amount+(1-amount));\n\t\t};\n\t};\n\n\t/**\n\t * Configurable exponential ease.\n\t * @method getPowIn\n\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getPowIn = function(pow) {\n\t\treturn function(t) {\n\t\t\treturn Math.pow(t,pow);\n\t\t};\n\t};\n\n\t/**\n\t * Configurable exponential ease.\n\t * @method getPowOut\n\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getPowOut = function(pow) {\n\t\treturn function(t) {\n\t\t\treturn 1-Math.pow(1-t,pow);\n\t\t};\n\t};\n\n\t/**\n\t * Configurable exponential ease.\n\t * @method getPowInOut\n\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getPowInOut = function(pow) {\n\t\treturn function(t) {\n\t\t\tif ((t*=2)<1) return 0.5*Math.pow(t,pow);\n\t\t\treturn 1-0.5*Math.abs(Math.pow(2-t,pow));\n\t\t};\n\t};\n\n\t/**\n\t * @method quadIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quadIn = Ease.getPowIn(2);\n\t/**\n\t * @method quadOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quadOut = Ease.getPowOut(2);\n\t/**\n\t * @method quadInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quadInOut = Ease.getPowInOut(2);\n\n\t/**\n\t * @method cubicIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.cubicIn = Ease.getPowIn(3);\n\t/**\n\t * @method cubicOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.cubicOut = Ease.getPowOut(3);\n\t/**\n\t * @method cubicInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.cubicInOut = Ease.getPowInOut(3);\n\n\t/**\n\t * @method quartIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quartIn = Ease.getPowIn(4);\n\t/**\n\t * @method quartOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quartOut = Ease.getPowOut(4);\n\t/**\n\t * @method quartInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quartInOut = Ease.getPowInOut(4);\n\n\t/**\n\t * @method quintIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quintIn = Ease.getPowIn(5);\n\t/**\n\t * @method quintOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quintOut = Ease.getPowOut(5);\n\t/**\n\t * @method quintInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quintInOut = Ease.getPowInOut(5);\n\n\t/**\n\t * @method sineIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.sineIn = function(t) {\n\t\treturn 1-Math.cos(t*Math.PI/2);\n\t};\n\n\t/**\n\t * @method sineOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.sineOut = function(t) {\n\t\treturn Math.sin(t*Math.PI/2);\n\t};\n\n\t/**\n\t * @method sineInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.sineInOut = function(t) {\n\t\treturn -0.5*(Math.cos(Math.PI*t) - 1);\n\t};\n\n\t/**\n\t * Configurable \"back in\" ease.\n\t * @method getBackIn\n\t * @param {Number} amount The strength of the ease.\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getBackIn = function(amount) {\n\t\treturn function(t) {\n\t\t\treturn t*t*((amount+1)*t-amount);\n\t\t};\n\t};\n\t/**\n\t * @method backIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.backIn = Ease.getBackIn(1.7);\n\n\t/**\n\t * Configurable \"back out\" ease.\n\t * @method getBackOut\n\t * @param {Number} amount The strength of the ease.\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getBackOut = function(amount) {\n\t\treturn function(t) {\n\t\t\treturn (--t*t*((amount+1)*t + amount) + 1);\n\t\t};\n\t};\n\t/**\n\t * @method backOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.backOut = Ease.getBackOut(1.7);\n\n\t/**\n\t * Configurable \"back in out\" ease.\n\t * @method getBackInOut\n\t * @param {Number} amount The strength of the ease.\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getBackInOut = function(amount) {\n\t\tamount*=1.525;\n\t\treturn function(t) {\n\t\t\tif ((t*=2)<1) return 0.5*(t*t*((amount+1)*t-amount));\n\t\t\treturn 0.5*((t-=2)*t*((amount+1)*t+amount)+2);\n\t\t};\n\t};\n\t/**\n\t * @method backInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.backInOut = Ease.getBackInOut(1.7);\n\n\t/**\n\t * @method circIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.circIn = function(t) {\n\t\treturn -(Math.sqrt(1-t*t)- 1);\n\t};\n\n\t/**\n\t * @method circOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.circOut = function(t) {\n\t\treturn Math.sqrt(1-(--t)*t);\n\t};\n\n\t/**\n\t * @method circInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.circInOut = function(t) {\n\t\tif ((t*=2) < 1) return -0.5*(Math.sqrt(1-t*t)-1);\n\t\treturn 0.5*(Math.sqrt(1-(t-=2)*t)+1);\n\t};\n\n\t/**\n\t * @method bounceIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.bounceIn = function(t) {\n\t\treturn 1-Ease.bounceOut(1-t);\n\t};\n\n\t/**\n\t * @method bounceOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.bounceOut = function(t) {\n\t\tif (t < 1/2.75) {\n\t\t\treturn (7.5625*t*t);\n\t\t} else if (t < 2/2.75) {\n\t\t\treturn (7.5625*(t-=1.5/2.75)*t+0.75);\n\t\t} else if (t < 2.5/2.75) {\n\t\t\treturn (7.5625*(t-=2.25/2.75)*t+0.9375);\n\t\t} else {\n\t\t\treturn (7.5625*(t-=2.625/2.75)*t +0.984375);\n\t\t}\n\t};\n\n\t/**\n\t * @method bounceInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.bounceInOut = function(t) {\n\t\tif (t<0.5) return Ease.bounceIn (t*2) * .5;\n\t\treturn Ease.bounceOut(t*2-1)*0.5+0.5;\n\t};\n\n\t/**\n\t * Configurable elastic ease.\n\t * @method getElasticIn\n\t * @param {Number} amplitude\n\t * @param {Number} period\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getElasticIn = function(amplitude,period) {\n\t\tvar pi2 = Math.PI*2;\n\t\treturn function(t) {\n\t\t\tif (t==0 || t==1) return t;\n\t\t\tvar s = period/pi2*Math.asin(1/amplitude);\n\t\t\treturn -(amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-s)*pi2/period));\n\t\t};\n\t};\n\t/**\n\t * @method elasticIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.elasticIn = Ease.getElasticIn(1,0.3);\n\n\t/**\n\t * Configurable elastic ease.\n\t * @method getElasticOut\n\t * @param {Number} amplitude\n\t * @param {Number} period\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getElasticOut = function(amplitude,period) {\n\t\tvar pi2 = Math.PI*2;\n\t\treturn function(t) {\n\t\t\tif (t==0 || t==1) return t;\n\t\t\tvar s = period/pi2 * Math.asin(1/amplitude);\n\t\t\treturn (amplitude*Math.pow(2,-10*t)*Math.sin((t-s)*pi2/period )+1);\n\t\t};\n\t};\n\t/**\n\t * @method elasticOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.elasticOut = Ease.getElasticOut(1,0.3);\n\n\t/**\n\t * Configurable elastic ease.\n\t * @method getElasticInOut\n\t * @param {Number} amplitude\n\t * @param {Number} period\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getElasticInOut = function(amplitude,period) {\n\t\tvar pi2 = Math.PI*2;\n\t\treturn function(t) {\n\t\t\tvar s = period/pi2 * Math.asin(1/amplitude);\n\t\t\tif ((t*=2)<1) return -0.5*(amplitude*Math.pow(2,10*(t-=1))*Math.sin( (t-s)*pi2/period ));\n\t\t\treturn amplitude*Math.pow(2,-10*(t-=1))*Math.sin((t-s)*pi2/period)*0.5+1;\n\t\t};\n\t};\n\t/**\n\t * @method elasticInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.elasticInOut = Ease.getElasticInOut(1,0.3*1.5);\n\n\tcreatejs.Ease = Ease;\n\n}());\n\n//##############################################################################\n// MotionGuidePlugin.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A TweenJS plugin for working with motion guides. Defined paths which objects can follow or orient along.\n\t *\n\t * To use the plugin, install the plugin after TweenJS has loaded. To define a path, add\n\t *\n\t * \t\tcreatejs.MotionGuidePlugin.install();\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\t// Using a Motion Guide\n\t * \t\tcreatejs.Tween.get(target).to({guide:{ path:[0,0, 0,200,200,200, 200,0,0,0] }},7000);\n\t * \t\t// Visualizing the line\n\t * \t\tgraphics.moveTo(0,0).curveTo(0,200,200,200).curveTo(200,0,0,0);\n\t *\n\t * Each path needs pre-computation to ensure there's fast performance. Because of the pre-computation there's no\n\t * built in support for path changes mid tween. These are the Guide Object's properties:<UL>\n\t * \t\t<LI> path: Required, Array : The x/y points used to draw the path with a moveTo and 1 to n curveTo calls.</LI>\n\t * \t\t<LI> start: Optional, 0-1 : Initial position, default 0 except for when continuing along the same path.</LI>\n\t * \t\t<LI> end: Optional, 0-1 : Final position, default 1 if not specified.</LI>\n\t * \t\t<LI> orient: Optional, string : \"fixed\"/\"auto\"/\"cw\"/\"ccw\"<UL>\n\t *\t\t\t\t<LI>\"fixed\" forces the object to face down the path all movement (relative to start rotation),</LI>\n\t * \t\t\t\t<LI>\"auto\" rotates the object along the path relative to the line.</LI>\n\t * \t\t\t\t<LI>\"cw\"/\"ccw\" force clockwise or counter clockwise rotations including Adobe Flash/Animate-like\n\t * \t\t\t\tbehaviour. This may override your end rotation value.</LI>\n\t * \t\t</UL></LI>\n\t * </UL>\n\t * Guide objects should not be shared between tweens even if all properties are identical, the library stores\n\t * information on these objects in the background and sharing them can cause unexpected behaviour. Values\n\t * outside 0-1 range of tweens will be a \"best guess\" from the appropriate part of the defined curve.\n\t *\n\t * @class MotionGuidePlugin\n\t * @constructor\n\t */\n\tfunction MotionGuidePlugin() {\n\t\tthrow(\"MotionGuidePlugin cannot be instantiated.\")\n\t}\n\tvar s = MotionGuidePlugin;\n\n\n// static properties:\n\t/**\n\t * @property priority\n\t * @protected\n\t * @static\n\t */\n\ts.priority = 0; // high priority, should run sooner\n\n\t/**\n\t * READ-ONLY. A unique identifying string for this plugin. Used by TweenJS to ensure duplicate plugins are not installed on a tween.\n\t * @property ID\n\t * @type {String}\n\t * @static\n\t * @readonly\n\t */\n\ts.ID = \"MotionGuide\";\n\n// static methods\n\t/**\n\t * Installs this plugin for use with TweenJS. Call this once after TweenJS is loaded to enable this plugin.\n\t * @method install\n\t * @static\n\t */\n\ts.install = function() {\n\t\tcreatejs.Tween._installPlugin(MotionGuidePlugin);\n\t\treturn createjs.Tween.IGNORE;\n\t};\n\n\t/**\n\t * Called by TweenJS when a new property initializes on a tween.\n\t * See {{#crossLink \"SamplePlugin/init\"}}{{/crossLink}} for more info.\n\t * @method init\n\t * @param {Tween} tween\n\t * @param {String} prop\n\t * @param {any} value\n\t * @return {any}\n\t * @static\n\t */\n\ts.init = function(tween, prop, value) {\n\t\tif(prop == \"guide\") {\n\t\t\ttween._addPlugin(s);\n\t\t}\n\t};\n\n\t/**\n\t * Called when a new step is added to a tween (ie. a new \"to\" action is added to a tween).\n\t * See {{#crossLink \"SamplePlugin/step\"}}{{/crossLink}} for more info.\n\t * @method step\n\t * @param {Tween} tween\n\t * @param {TweenStep} step\n\t * @param {Object} props\n\t * @static\n\t */\n\ts.step = function(tween, step, props) {\n\t\tfor (var n in props) {\n\t\t\tif(n !== \"guide\") { continue; }\n\n\t\t\tvar guideData = step.props.guide;\n\t\t\tvar error = s._solveGuideData(props.guide, guideData);\n\t\t\tguideData.valid = !error;\n\n\t\t\tvar end = guideData.endData;\n\t\t\ttween._injectProp(\"x\", end.x);\n\t\t\ttween._injectProp(\"y\", end.y);\n\n\t\t\tif(error || !guideData.orient) { break; }\n\n\t\t\tvar initRot = step.prev.props.rotation === undefined ? (tween.target.rotation || 0) : step.prev.props.rotation;\n\n\t\t\tguideData.startOffsetRot = initRot - guideData.startData.rotation;\n\n\t\t\tif(guideData.orient == \"fixed\") {\n\t\t\t\t// controlled rotation\n\t\t\t\tguideData.endAbsRot = end.rotation + guideData.startOffsetRot;\n\t\t\t\tguideData.deltaRotation = 0;\n\t\t\t} else {\n\t\t\t\t// interpreted rotation\n\n\t\t\t\tvar finalRot = props.rotation === undefined ? (tween.target.rotation || 0) : props.rotation;\n\t\t\t\tvar deltaRot = (finalRot - guideData.endData.rotation) - guideData.startOffsetRot;\n\t\t\t\tvar modRot = deltaRot % 360;\n\n\t\t\t\tguideData.endAbsRot = finalRot;\n\n\t\t\t\tswitch(guideData.orient) {\n\t\t\t\t\tcase \"auto\":\n\t\t\t\t\t\tguideData.deltaRotation = deltaRot;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"cw\":\n\t\t\t\t\t\tguideData.deltaRotation = ((modRot + 360) % 360) + (360 * Math.abs((deltaRot/360) |0));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ccw\":\n\t\t\t\t\t\tguideData.deltaRotation = ((modRot - 360) % 360) + (-360 * Math.abs((deltaRot/360) |0));\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttween._injectProp(\"rotation\", guideData.endAbsRot);\n\t\t}\n\t};\n\n\t/**\n\t * Called before a property is updated by the tween.\n\t * See {{#crossLink \"SamplePlugin/change\"}}{{/crossLink}} for more info.\n\t * @method change\n\t * @param {Tween} tween\n\t * @param {TweenStep} step\n\t * @param {String} prop\n\t * @param {any} value\n\t * @param {Number} ratio\n\t * @param {Boolean} end\n\t * @return {any}\n\t * @static\n\t */\n\ts.change = function(tween, step, prop, value, ratio, end) {\n\t\tvar guideData = step.props.guide;\n\n\t\tif(\n\t\t\t\t!guideData ||\t\t\t\t\t\t\t// Missing data\n\t\t\t\t(step.props === step.prev.props) || \t// In a wait()\n\t\t\t\t(guideData === step.prev.props.guide) \t// Guide hasn't changed\n\t\t) {\n\t\t\treturn; // have no business making decisions\n\t\t}\n\t\tif(\n\t\t\t\t(prop === \"guide\" && !guideData.valid) ||\t\t// this data is broken\n\t\t\t\t(prop == \"x\" || prop == \"y\") ||\t\t\t\t\t// these always get over-written\n\t\t\t\t(prop === \"rotation\" && guideData.orient)\t\t// currently over-written\n\t\t){\n\t\t\treturn createjs.Tween.IGNORE;\n\t\t}\n\n\t\ts._ratioToPositionData(ratio, guideData, tween.target);\n\t};\n\n// public methods\n\t/**\n\t * Provide potentially useful debugging information, like running the error detection system, and rendering the path\n\t * defined in the guide data.\n\t *\n\t * NOTE: you will need to transform your context 2D to the local space of the guide if you wish to line it up.\n\t * @param {Object} guideData All the information describing the guide to be followed.\n\t * @param {DrawingContext2D} [ctx=undefined] The context to draw the object into.\n\t * @param {Array} [higlight=undefined] Array of ratio positions to highlight\n\t * @returns {undefined|String}\n\t */\n\ts.debug = function(guideData, ctx, higlight) {\n\t\tguideData = guideData.guide || guideData;\n\n\t\t// errors\n\t\tvar err = s._findPathProblems(guideData);\n\t\tif(err) {\n\t\t\tconsole.error(\"MotionGuidePlugin Error found: \\n\" + err);\n\t\t}\n\n\t\t// drawing\n\t\tif(!ctx){ return err; }\n\n\t\tvar i;\n\t\tvar path = guideData.path;\n\t\tvar pathLength = path.length;\n\t\tvar width = 3;\n\t\tvar length = 9;\n\n\t\tctx.save();\n\t\t//ctx.resetTransform();\n\n\t\tctx.lineCap = \"round\";\n\t\tctx.lineJoin = \"miter\";\n\t\tctx.beginPath();\n\n\t\t// curve\n\t\tctx.moveTo(path[0], path[1]);\n\t\tfor(i=2; i < pathLength; i+=4) {\n\t\t\tctx.quadraticCurveTo(\n\t\t\t\tpath[i], path[i+1],\n\t\t\t\tpath[i+2], path[i+3]\n\t\t\t);\n\t\t}\n\n\t\tctx.strokeStyle = \"black\";\n\t\tctx.lineWidth = width*1.5;\n\t\tctx.stroke();\n\t\tctx.strokeStyle = \"white\";\n\t\tctx.lineWidth = width;\n\t\tctx.stroke();\n\t\tctx.closePath();\n\n\t\t// highlights\n\t\tvar hiCount = higlight.length;\n\t\tif(higlight && hiCount) {\n\t\t\tvar tempStore = {};\n\t\t\tvar tempLook = {};\n\t\t\ts._solveGuideData(guideData, tempStore);\n\n\t\t\tfor(var i=0; i<hiCount; i++){\n\t\t\t\ttempStore.orient = \"fixed\";\n\t\t\t\ts._ratioToPositionData(higlight[i], tempStore, tempLook);\n\n\t\t\t\tctx.beginPath();\n\n\t\t\t\tctx.moveTo(tempLook.x, tempLook.y);\n\t\t\t\tctx.lineTo(\n\t\t\t\t\ttempLook.x + Math.cos(tempLook.rotation * 0.0174533) * length,\n\t\t\t\t\ttempLook.y + Math.sin(tempLook.rotation * 0.0174533) * length\n\t\t\t\t);\n\n\t\t\t\tctx.strokeStyle = \"black\";\n\t\t\t\tctx.lineWidth = width*1.5;\n\t\t\t\tctx.stroke();\n\t\t\t\tctx.strokeStyle = \"red\";\n\t\t\t\tctx.lineWidth = width;\n\t\t\t\tctx.stroke();\n\t\t\t\tctx.closePath();\n\t\t\t}\n\t\t}\n\n\t\t// end draw\n\t\tctx.restore();\n\n\t\treturn err;\n\t};\n\n// private methods\n\t/**\n\t * Calculate and store optimization data about the desired path to improve performance and accuracy of positions.\n\t * @param {Object} source The guide data provided to the tween call\n\t * @param {Object} storage the guide data used by the step calls and plugin to do the job, will be overwritten\n\t * @returns {undefined|String} Can return an error if unable to generate the data.\n\t * @private\n\t */\n\ts._solveGuideData = function(source, storage) {\n\t\tvar err = undefined;\n\t\tif(err = s.debug(source)) { return err; }\n\n\t\tvar path = storage.path = source.path;\n\t\tvar orient = storage.orient = source.orient;\n\t\tstorage.subLines = [];\n\t\tstorage.totalLength = 0;\n\t\tstorage.startOffsetRot = 0;\n\t\tstorage.deltaRotation = 0;\n\t\tstorage.startData = {ratio: 0};\n\t\tstorage.endData = {ratio: 1};\n\t\tstorage.animSpan = 1;\n\n\t\tvar pathLength = path.length;\n\n\t\tvar precision = 10;\n\t\tvar sx,sy, cx,cy, ex,ey, i,j, len, temp = {};\n\n\t\tsx = path[0];\t\tsy = path[1];\n\n\t\t// get the data for each curve\n\t\tfor(i=2; i < pathLength; i+=4) {\n\t\t\tcx = path[i];\t\t\tcy = path[i+1];\n\t\t\tex = path[i+2];\t\t\tey = path[i+3];\n\n\t\t\tvar subLine = {\n\t\t\t\tweightings: [],\n\t\t\t\testLength: 0,\n\t\t\t\tportion: 0\n\t\t\t};\n\n\t\t\tvar subX = sx, subY = sy;\n\t\t\t// get the distance data for each point\n\t\t\tfor(j=1; j <= precision;j++) {\t// we need to evaluate t = 1 not t = 0\n\t\t\t\ts._getParamsForCurve(sx,sy, cx,cy, ex,ey, j/precision, false, temp);\n\n\t\t\t\tvar dx = temp.x - subX, dy = temp.y - subY;\n\t\t\t\tlen = Math.sqrt(dx*dx + dy*dy);\n\t\t\t\tsubLine.weightings.push(len);\n\t\t\t\tsubLine.estLength += len;\n\n\t\t\t\tsubX = temp.x;\n\t\t\t\tsubY = temp.y;\n\t\t\t}\n\n\t\t\t// figure out full lengths\n\t\t\tstorage.totalLength += subLine.estLength;\n\n\t\t\t// use length to figure out proportional weightings\n\t\t\tfor(j=0; j < precision; j++) {\n\t\t\t\tlen = subLine.estLength;\n\t\t\t\tsubLine.weightings[j] = subLine.weightings[j] / len;\n\t\t\t}\n\n\t\t\tstorage.subLines.push(subLine);\n\t\t\tsx = ex;\n\t\t\tsy = ey;\n\t\t}\n\n\t\t// use length to figure out proportional weightings\n\t\tlen = storage.totalLength;\n\t\tvar l = storage.subLines.length;\n\t\tfor(i=0; i<l; i++) {\n\t\t\tstorage.subLines[i].portion = storage.subLines[i].estLength / len;\n\t\t}\n\n\t\t// determine start and end data\n\t\tvar startRatio = isNaN(source.start) ? 0 : source.start;\n\t\tvar endRatio = isNaN(source.end) ? 1 : source.end;\n\t\ts._ratioToPositionData(startRatio, storage, storage.startData);\n\t\ts._ratioToPositionData(endRatio, storage, storage.endData);\n\n\t\t// this has to be done last else the prev ratios will be out of place\n\t\tstorage.startData.ratio = startRatio;\n\t\tstorage.endData.ratio = endRatio;\n\t\tstorage.animSpan = storage.endData.ratio - storage.startData.ratio;\n\t};\n\n\t/**\n\t * Convert a percentage along the line into, a local line (start, control, end) t-value for calculation.\n\t * @param {Number} ratio The (euclidean distance) percentage into the whole curve.\n\t * @param {Object} guideData All the information describing the guide to be followed.\n\t * @param {Object} output Object to save output properties of x,y, and rotation onto.\n\t * @returns {Object} The output object, useful for isolated calls.\n\t * @private\n\t */\n\ts._ratioToPositionData = function(ratio, guideData, output) {\n\t\tvar lineSegments = guideData.subLines;\n\n\t\tvar i,l, t, test, target;\n\n\t\tvar look = 0;\n\t\tvar precision = 10;\n\t\tvar effRatio = (ratio * guideData.animSpan) + guideData.startData.ratio;\n\n\t\t// find subline\n\t\tl = lineSegments.length;\n\t\tfor(i=0; i<l; i++) {\n\t\t\ttest = lineSegments[i].portion;\n\t\t\tif(look + test >= effRatio){ target = i; break; }\n\t\t\tlook += test;\n\t\t}\n\t\tif(target === undefined) { target = l-1;  look -= test; }\n\n\t\t// find midline weighting\n\t\tvar subLines = lineSegments[target].weightings;\n\t\tvar portion = test;\n\t\tl = subLines.length;\n\t\tfor(i=0; i<l; i++) {\n\t\t\ttest = subLines[i] * portion;\n\t\t\tif(look + test >= effRatio){ break; }\n\t\t\tlook += test;\n\t\t}\n\n\t\t// translate the subline index into a position in the path data\n\t\ttarget = (target*4) + 2;\n\t\t// take the distance we've covered in our ratio, and scale it to distance into the weightings\n\t\tt = (i/precision) + (((effRatio-look) / test) * (1/precision));\n\n\t\t// position\n\t\tvar pathData = guideData.path;\n\t\ts._getParamsForCurve(\n\t\t\tpathData[target-2],\t\t\tpathData[target-1],\n\t\t\tpathData[target],\t\t\tpathData[target+1],\n\t\t\tpathData[target+2],\t\t\tpathData[target+3],\n\t\t\tt,\n\t\t\tguideData.orient,\n\t\t\toutput\n\t\t);\n\n\t\tif(guideData.orient) {\n\t\t\tif(ratio >= 0.99999 && ratio <= 1.00001 && guideData.endAbsRot !== undefined) {\n\t\t\t\toutput.rotation = guideData.endAbsRot;\n\t\t\t} else {\n\t\t\t\toutput.rotation += guideData.startOffsetRot + (ratio * guideData.deltaRotation);\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t};\n\n\t/**\n\t * For a given quadratic bezier t-value, what is the position and rotation. Save it onto the output object.\n\t * @param {Number} sx Start x.\n\t * @param {Number} sy Start y.\n\t * @param {Number} cx Control x.\n\t * @param {Number} cy Control y.\n\t * @param {Number} ex End x.\n\t * @param {Number} ey End y.\n\t * @param {Number} t T value (parametric distance into curve).\n\t * @param {Boolean} orient Save rotation data.\n\t * @param {Object} output Object to save output properties of x,y, and rotation onto.\n\t * @private\n\t */\n\ts._getParamsForCurve = function(sx,sy, cx,cy, ex,ey, t, orient, output) {\n\t\tvar inv = 1 - t;\n\n\t\t// finding a point on a bezier curve\n\t\toutput.x =\tinv*inv * sx + 2 * inv * t * cx + t*t * ex;\n\t\toutput.y =\tinv*inv * sy + 2 * inv * t * cy + t*t * ey;\n\n\t\t// finding an angle on a bezier curve\n\t\tif(orient) {\n\t\t\t// convert from radians back to degrees\n\t\t\toutput.rotation = 57.2957795 * Math.atan2(\n\t\t\t\t(cy - sy)*inv + (ey - cy)*t,\n\t\t\t\t(cx - sx)*inv + (ex - cx)*t\n\t\t\t);\n\t\t}\n\t};\n\n\t/**\n\t * Perform a check to validate path information so plugin can avoid later error checking.\n\t * @param {Object} guideData All the information describing the guide to be followed.\n\t * @returns {undefined|String} The problem found, or undefined if no problems.\n\t * @private\n\t */\n\ts._findPathProblems = function(guideData) {\n\t\tvar path = guideData.path;\n\t\tvar valueCount = (path && path.length) || 0;\t// ensure this is a number to simplify later logic\n\t\tif(valueCount < 6 || (valueCount-2) % 4) {\n\t\t\tvar message =\t\"\\tCannot parse 'path' array due to invalid number of entries in path. \";\n\t\t\tmessage +=\t\t\"There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). \";\n\t\t\tmessage +=\t\t\"See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\\n\\n\";\n\t\t\tmessage +=\t\t\"Only [ \"+ valueCount +\" ] values found. Expected: \"+ Math.max(Math.ceil((valueCount-2)/4)*4+2, 6); //6, 10, 14,...\n\t\t\treturn message;\n\t\t}\n\n\t\tfor(var i=0; i<valueCount; i++) {\n\t\t\tif(isNaN(path[i])){\n\t\t\t\treturn \"All data in path array must be numeric\";\n\t\t\t}\n\t\t}\n\n\t\tvar start = guideData.start;\n\t\tif(isNaN(start) && !(start === undefined)/* || start < 0 || start > 1*/) {\t// outside 0-1 is unpredictable, but not breaking\n\t\t\treturn \"'start' out of bounds. Expected 0 to 1, got: \"+ start;\n\t\t}\n\t\tvar end = guideData.end;\n\t\tif(isNaN(end) && (end !== undefined)/* || end < 0 || end > 1*/) {\t// outside 0-1 is unpredictable, but not breaking\n\t\t\treturn \"'end' out of bounds. Expected 0 to 1, got: \"+ end;\n\t\t}\n\n\t\tvar orient = guideData.orient;\n\t\tif(orient) { // mirror the check used elsewhere\n\t\t\tif(orient != \"fixed\" && orient != \"auto\" && orient != \"cw\" && orient != \"ccw\") {\n\t\t\t\treturn 'Invalid orientation value. Expected [\"fixed\", \"auto\", \"cw\", \"ccw\", undefined], got: '+ orient;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t};\n\n\tcreatejs.MotionGuidePlugin = MotionGuidePlugin;\n\n}());\n\n//##############################################################################\n// version.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of\n\t * the library.\n\t * @class TweenJS\n\t **/\n\tvar s = createjs.TweenJS = createjs.TweenJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type String\n\t * @static\n\t **/\n\ts.version = /*=version*/\"1.0.0\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type String\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 14 Sep 2017 19:47:47 GMT\"; // injected by build process\n\n})();\n/* Createjs Compiled: Mon Jul 11 2022 19:27:01 GMT-0700 (Pacific Daylight Time) */\nif(typeof module !== \"undefined\" && typeof module.exports !== \"undefined\") module.exports = this.createjs;\n","import { GameConfig } from '@types';\n\nexport const gameConfig: GameConfig = {\n  canvas: {\n    width: 1400,\n    height: 800\n  },\n  viewport: {\n    targetWidth: 1400,\n    targetHeight: 800,\n    minWidth: 800,\n    maxWidth: 1920,\n    aspectRatio: 1400 / 800\n  },\n  ui: {\n    waveDisplay: { x: 2, y: 2.5, anchor: { x: 'left', y: 'top' } },\n    enemyCounter: { x: 2, y: 6.25, anchor: { x: 'left', y: 'top' } },\n    experienceCounter: { x: 98, y: 2.5, anchor: { x: 'right', y: 'top' } },\n    timerDisplay: { x: 50, y: 2.5, anchor: { x: 'center', y: 'top' } },\n    healthBar: { x: 2, y: 95, width: 200, height: 10 },\n    ammoBar: { x: 98, y: 95, width: 200, height: 10 }\n  },\n  fps: 55,\n  player: {\n    maxVelocity: 9,\n    maxAcceleration: 2,\n    acceleration: 0.08,\n    maxHealth: 100,\n    invulnerabilityDuration: 1.0,\n    damagePerCollision: 10\n  },\n  enemy: {\n    baseSpeed: 7.5,\n    acceleration: 0.12,\n    hp: 50,\n    circleAttack: {\n      radius: 40,\n      angularSpeed: 0.01,\n      shootCooldown: 2.0,\n      projectileSpeed: 3,\n      projectileDamage: 15,\n      projectileLifetime: 5\n    },\n    bigShooter: {\n      speed: 2,\n      hp: 150,\n      size: 30,\n      shootCooldown: 1.2,\n      projectileSpeed: 10,\n      projectileDamage: 20,\n      projectileLifetime: 6\n    },\n    dashWorm: {\n      speed: 4,\n      hp: 25,\n      dashSpeed: 15,\n      dashCooldown: 2.5,\n      dashDuration: 0.3,\n      detectionRadius: 80,\n      segmentCount: 5,\n      segmentSize: 8  ,\n      headSize: 6\n    }\n  },\n  weapons: {\n    phaser: {\n      limit: 200,\n      speed: -16,\n      maxAmmo: 100,\n      ammoRegenRate: 2,\n      ammoConsumption: 1,\n      shotCooldown: 0.05\n    },\n    circle: {\n      limit: 50,\n      speed: -4,\n      maxAmmo: 100,\n      ammoRegenRate: 2,\n      ammoConsumption: 3,\n      shotCooldown: 0.15,\n      projectileSize: 8\n    },\n    kick: {\n      maxRadius: 200,\n      expandRate: 1,\n      decayRate: 100\n    }\n  },\n  experienceOrb: {\n    baseSpeed: 0.5, // Slow drift speed towards player\n    magnetRange: 100, // Distance at which orbs start accelerating\n    magnetSpeed: 4, // Additional speed when in magnetic range\n    collectionRadius: 20, // Distance at which orbs are collected\n    baseValue: 5 // Base experience points per orb\n  },\n  enemyHealthBar: {\n    width: 30, // Width of regular enemy health bar\n    height: 4, // Height of regular enemy health bar\n    bigShooterWidth: 40, // Width for big shooter health bar\n    bigShooterHeight: 6, // Height for big shooter health bar\n    offsetY: 15, // Distance above enemy\n    fadeDelay: 2000, // Time before fade starts (ms)\n    fadeDuration: 500 // Fade animation duration (ms)\n  },\n  waves: {\n    restDuration: 15, // 15 seconds rest between waves\n    baseEnemyCount: 3, // Wave 1 starts with 3 enemies\n    enemyScaling: 2, // Each wave adds 2 more enemies\n    spawnDelay: 1.5, // 1.5 seconds between enemy spawns\n    difficultyScaling: {\n      hpMultiplier: 1.2, // 20% HP increase per wave\n      speedMultiplier: 1.1 // 10% speed increase per wave\n    },\n    pointsPerKill: 10 // 10 points per enemy killed\n  }\n};","import * as createjs from '@thegraid/createjs-module';\nimport { GameEntity, Position, Velocity } from '@types';\nimport { gameConfig } from '@config/gameConfig';\n\nexport class Player implements GameEntity {\n  public shape: createjs.Shape;\n  public position: Position;\n  public velocity: Velocity;\n  public angle: number = 0;\n  \n  private acceleration: { x: number; y: number };\n  private negDirection: { x: number; y: number };\n  private blurFilterX: createjs.BlurFilter;\n  private blurFilterY: createjs.BlurFilter;\n  private stage: createjs.Stage;\n  \n  // Health system\n  private maxHealth: number;\n  private currentHealth: number;\n  private isInvulnerable: boolean = false;\n  private invulnerabilityTimer: number = 0;\n  private damageFlashTimer: number = 0;\n\n  constructor(stage: createjs.Stage, x: number, y: number) {\n    this.stage = stage;\n    this.position = { x, y };\n    this.velocity = { x: 0, y: 0 };\n    this.acceleration = { \n      x: gameConfig.player.acceleration, \n      y: gameConfig.player.acceleration \n    };\n    this.negDirection = { x: 1, y: 1 };\n    \n    // Initialize health\n    this.maxHealth = gameConfig.player.maxHealth;\n    this.currentHealth = this.maxHealth;\n    \n    // Create player shape (diamond)\n    this.shape = new createjs.Shape();\n    this.shape.graphics\n      .beginFill(\"rgb(0, 180, 174)\")\n      .drawPolyStar(0, 0, 14, 2, 0.7, 90);\n    \n    this.shape.regX = 0;\n    this.shape.regY = 0;\n    this.shape.x = window.innerWidth / 2;\n    this.shape.y = window.innerHeight / 2;\n    \n    // Create blur filters\n    this.blurFilterX = new createjs.BlurFilter(120, 0, 1);\n    this.blurFilterY = new createjs.BlurFilter(0, 120, 1);\n    \n    stage.addChild(this.shape);\n    \n    this.position.x = this.shape.x;\n    this.position.y = this.shape.y;\n  }\n\n  public update(): void {\n    const deltaTime = 1 / gameConfig.fps;\n    \n    // Update invulnerability timer\n    if (this.isInvulnerable) {\n      this.invulnerabilityTimer -= deltaTime;\n      if (this.invulnerabilityTimer <= 0) {\n        this.isInvulnerable = false;\n      }\n    }\n    \n    // Update damage flash timer\n    if (this.damageFlashTimer > 0) {\n      this.damageFlashTimer -= deltaTime;\n    }\n    \n    this.shape.rotation = this.angle;\n    this.shape.filters = [];\n    \n    // Update position\n    this.shape.x = this.position.x;\n    this.shape.y = this.position.y;\n    \n    // Apply visual effects\n    this.updateVisualEffects();\n    \n    // Cache the shape if filters are applied\n    if (this.shape.filters && this.shape.filters.length > 0) {\n      this.shape.cache(-20, -20, 40, 40);\n    } else {\n      this.shape.uncache();\n    }\n  }\n\n  public handleMovement(keys: Set<string>): void {\n    // Get actual canvas bounds from the stage\n    const canvas = this.stage.canvas as HTMLCanvasElement;\n    const playerRadius = 14; // Player shape radius\n    const minX = playerRadius;\n    const maxX = canvas.width - playerRadius;\n    const minY = playerRadius;\n    const maxY = canvas.height - playerRadius;\n    \n    // Vertical movement\n    if (keys.has('ArrowUp') || keys.has('KeyW') || keys.has('ArrowDown') || keys.has('KeyS')) {\n      this.shape.filters = [this.blurFilterY];\n      \n      if (keys.has('ArrowUp') || keys.has('KeyW')) {\n        this.position.y -= this.velocity.y;\n        this.accelerateY();\n        this.negDirection.y = -1;\n      }\n      \n      if (keys.has('ArrowDown') || keys.has('KeyS')) {\n        this.position.y += this.velocity.y;\n        this.accelerateY();\n        this.negDirection.y = 1;\n      }\n    } else if (this.velocity.y > 0.005) {\n      this.velocity.y -= this.velocity.y / 15;\n      this.position.y += this.velocity.y * this.negDirection.y;\n      if (this.acceleration.y > 0.05) {\n        this.acceleration.y -= this.acceleration.y / 30;\n      }\n    } else {\n      this.velocity.y = 0;\n    }\n    \n    // Horizontal movement\n    if (keys.has('ArrowLeft') || keys.has('KeyA') || keys.has('ArrowRight') || keys.has('KeyD')) {\n      this.shape.filters = [this.blurFilterX];\n      \n      if (keys.has('ArrowLeft') || keys.has('KeyA')) {\n        this.position.x -= this.velocity.x;\n        this.accelerateX();\n        this.negDirection.x = -1;\n      }\n      \n      if (keys.has('ArrowRight') || keys.has('KeyD')) {\n        this.position.x += this.velocity.x;\n        this.accelerateX();\n        this.negDirection.x = 1;\n      }\n    } else if (this.velocity.x > 0.005) {\n      this.velocity.x -= this.velocity.x / 15;\n      this.position.x += this.velocity.x * this.negDirection.x;\n      if (this.acceleration.x > 0.05) {\n        this.acceleration.x -= this.acceleration.x / 30;\n      }\n    } else {\n      this.velocity.x = 0;\n    }\n    \n    // Clamp position to canvas bounds\n    this.position.x = Math.max(minX, Math.min(maxX, this.position.x));\n    this.position.y = Math.max(minY, Math.min(maxY, this.position.y));\n    \n    // Stop velocity only in the direction of the boundary hit\n    if ((this.position.x <= minX && this.negDirection.x < 0) || \n        (this.position.x >= maxX && this.negDirection.x > 0)) {\n      this.velocity.x = 0;\n      this.acceleration.x = gameConfig.player.acceleration;\n    }\n    if ((this.position.y <= minY && this.negDirection.y < 0) || \n        (this.position.y >= maxY && this.negDirection.y > 0)) {\n      this.velocity.y = 0;\n      this.acceleration.y = gameConfig.player.acceleration;\n    }\n  }\n\n  private accelerateY(): void {\n    const { maxVelocity, maxAcceleration } = gameConfig.player;\n    \n    if (this.velocity.y < maxVelocity) {\n      this.velocity.y += this.acceleration.y;\n      if (this.acceleration.y < maxAcceleration) {\n        this.acceleration.y += this.acceleration.y / 4;\n      }\n    } else if (this.velocity.y >= maxVelocity) {\n      this.acceleration.y = 0.05;\n    }\n  }\n\n  private accelerateX(): void {\n    const { maxVelocity, maxAcceleration } = gameConfig.player;\n    \n    if (this.velocity.x < maxVelocity) {\n      this.velocity.x += this.acceleration.x;\n      if (this.acceleration.x < maxAcceleration) {\n        this.acceleration.x += this.acceleration.x / 4;\n      }\n    }\n  }\n\n  public setAngle(angle: number): void {\n    this.angle = angle;\n  }\n\n  public getPosition(): Position {\n    return { ...this.position };\n  }\n\n  // Health system methods\n  public takeDamage(amount: number): boolean {\n    if (this.isInvulnerable) return false;\n    \n    this.currentHealth = Math.max(0, this.currentHealth - amount);\n    this.isInvulnerable = true;\n    this.invulnerabilityTimer = gameConfig.player.invulnerabilityDuration;\n    this.damageFlashTimer = 0.2; // Flash for 0.2 seconds\n    \n    return true; // Damage was applied\n  }\n\n  public addHealth(amount: number): number {\n    const oldHealth = this.currentHealth;\n    this.currentHealth = Math.min(this.maxHealth, this.currentHealth + amount);\n    return this.currentHealth - oldHealth; // Return actual health gained\n  }\n\n  public isAlive(): boolean {\n    return this.currentHealth > 0;\n  }\n\n  public getHealthPercentage(): number {\n    return this.currentHealth / this.maxHealth;\n  }\n\n  public getCurrentHealth(): number {\n    return this.currentHealth;\n  }\n\n  public getMaxHealth(): number {\n    return this.maxHealth;\n  }\n\n  public getIsInvulnerable(): boolean {\n    return this.isInvulnerable;\n  }\n\n  private updateVisualEffects(): void {\n    // Damage flash effect\n    if (this.damageFlashTimer > 0) {\n      // Flash red when damaged\n      this.shape.graphics.clear();\n      this.shape.graphics\n        .beginFill(\"rgb(255, 100, 100)\")\n        .drawPolyStar(0, 0, 14, 2, 0.7, 90);\n    } else {\n      // Normal color with invulnerability transparency\n      this.shape.graphics.clear();\n      this.shape.graphics\n        .beginFill(\"rgb(0, 180, 174)\")\n        .drawPolyStar(0, 0, 14, 2, 0.7, 90);\n      \n      // Semi-transparent when invulnerable\n      if (this.isInvulnerable) {\n        this.shape.alpha = 0.6;\n      } else {\n        this.shape.alpha = 1.0;\n      }\n    }\n  }\n}","import * as createjs from '@thegraid/createjs-module';\n\nexport interface GameObject {\n  update(): void;\n}\n\nexport interface Position {\n  x: number;\n  y: number;\n}\n\nexport interface Velocity {\n  x: number;\n  y: number;\n}\n\nexport interface GameEntity extends GameObject {\n  position: Position;\n  velocity: Velocity;\n  shape: createjs.Shape;\n}\n\nexport enum WeaponType {\n  LASER = 'laser',\n  DUB = 'dub',\n  CIRCLE = 'circle'\n}\n\nexport enum EnemyAttackPattern {\n  CHASE = 'chase',\n  CIRCLE_SHOOT = 'circle_shoot',\n  BIG_SHOOTER = 'big_shooter',\n  SWIPE = 'swipe',\n  DASH_WORM = 'dash_worm'\n}\n\nexport interface WeaponProjectile {\n  shape: createjs.Shape;\n  rotation: number;\n  alpha: number;\n}\n\nexport interface ViewportConfig {\n  targetWidth: number;\n  targetHeight: number;\n  minWidth: number;\n  maxWidth: number;\n  aspectRatio: number;\n}\n\nexport interface ResponsiveUILayout {\n  waveDisplay: { x: number; y: number; anchor: { x: string; y: string } };\n  enemyCounter: { x: number; y: number; anchor: { x: string; y: string } };\n  experienceCounter: { x: number; y: number; anchor: { x: string; y: string } };\n  timerDisplay: { x: number; y: number; anchor: { x: string; y: string } };\n  healthBar: { x: number; y: number; width: number; height: number };\n  ammoBar: { x: number; y: number; width: number; height: number };\n}\n\nexport interface GameConfig {\n  canvas: {\n    width: number;\n    height: number;\n  };\n  viewport: ViewportConfig;\n  ui: ResponsiveUILayout;\n  fps: number;\n  player: {\n    maxVelocity: number;\n    maxAcceleration: number;\n    acceleration: number;\n    maxHealth: number;\n    invulnerabilityDuration: number;\n    damagePerCollision: number;\n  };\n  enemy: {\n    baseSpeed: number;\n    acceleration: number;\n    hp: number;\n    circleAttack: {\n      radius: number;\n      angularSpeed: number;\n      shootCooldown: number;\n      projectileSpeed: number;\n      projectileDamage: number;\n      projectileLifetime: number;\n    };\n    bigShooter: {\n      speed: number;\n      hp: number;\n      size: number;\n      shootCooldown: number;\n      projectileSpeed: number;\n      projectileDamage: number;\n      projectileLifetime: number;\n    };\n    dashWorm: {\n      speed: number;\n      hp: number;\n      dashSpeed: number;\n      dashCooldown: number;\n      dashDuration: number;\n      detectionRadius: number;\n      segmentCount: number;\n      segmentSize: number;\n      headSize: number;\n    };\n  };\n  weapons: {\n    phaser: {\n      limit: number;\n      speed: number;\n      maxAmmo: number;\n      ammoRegenRate: number;\n      ammoConsumption: number;\n      shotCooldown: number;\n    };\n    circle: {\n      limit: number;\n      speed: number;\n      maxAmmo: number;\n      ammoRegenRate: number;\n      ammoConsumption: number;\n      shotCooldown: number;\n      projectileSize: number;\n    };\n    kick: {\n      maxRadius: number;\n      expandRate: number;\n      decayRate: number;\n    };\n  };\n  experienceOrb: {\n    baseSpeed: number;\n    magnetRange: number;\n    magnetSpeed: number;\n    collectionRadius: number;\n    baseValue: number;\n  };\n  enemyHealthBar: {\n    width: number;\n    height: number;\n    bigShooterWidth: number;\n    bigShooterHeight: number;\n    offsetY: number;\n    fadeDelay: number;\n    fadeDuration: number;\n  };\n  waves: WaveConfig;\n}\n\nexport interface WaveConfig {\n  restDuration: number; // seconds between waves\n  baseEnemyCount: number; // starting number of enemies in wave 1\n  enemyScaling: number; // additional enemies per wave\n  spawnDelay: number; // seconds between enemy spawns\n  difficultyScaling: {\n    hpMultiplier: number; // HP increase per wave\n    speedMultiplier: number; // Speed increase per wave\n  };\n  pointsPerKill: number; // Points awarded per enemy kill\n}\n\nexport enum WaveState {\n  PREPARATION = 'preparation',\n  ACTIVE = 'active',\n  REST = 'rest',\n  COMPLETE = 'complete'\n}\n\nexport interface WaveData {\n  number: number;\n  totalEnemies: number;\n  enemiesRemaining: number;\n  enemiesSpawned: number;\n  state: WaveState;\n}\n\nexport interface UIElements {\n  waveDisplay: createjs.Text;\n  enemyCounter: createjs.Text;\n  timerDisplay: createjs.Text;\n  wavePopup: createjs.Container;\n  healthBar: HealthBarElements;\n}\n\nexport interface PlayerStats {\n  maxHealth: number;\n  currentHealth: number;\n  invulnerabilityDuration: number;\n  damagePerCollision: number;\n}\n\nexport interface HealthBarElements {\n  container: createjs.Container;\n  background: createjs.Shape;\n  fill: createjs.Shape;\n  border: createjs.Shape;\n  label: createjs.Text;\n}\n\nexport interface HealthBarConfig {\n  width: number;\n  height: number;\n  x: number;\n  y: number;\n  backgroundColor: string;\n  fillColor: string;\n  borderColor: string;\n  lowHealthThreshold: number;\n}\n\nexport interface FontConfig {\n  small: number;\n  medium: number;\n  large: number;\n  xlarge: number;\n}","import * as createjs from '@thegraid/createjs-module';\nimport { GameEntity, Position, Velocity } from '../types/index';\nimport { gameConfig } from '@config/gameConfig';\n\nexport class EnemyProjectile implements GameEntity {\n  public shape: createjs.Shape;\n  public position: Position;\n  public velocity: Velocity;\n  \n  private stage: createjs.Stage;\n  private lifetime: number;\n  private maxLifetime: number;\n  private damage: number;\n  private isActive: boolean = true;\n\n  constructor(\n    stage: createjs.Stage, \n    startX: number, \n    startY: number, \n    targetX: number, \n    targetY: number,\n    projectileSpeed?: number,\n    projectileDamage?: number,\n    projectileLifetime?: number\n  ) {\n    this.stage = stage;\n    this.position = { x: startX, y: startY };\n    \n    // Calculate direction toward target\n    const dx = targetX - startX;\n    const dy = targetY - startY;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    const normalizedDx = dx / distance;\n    const normalizedDy = dy / distance;\n    \n    const speed = projectileSpeed || gameConfig.enemy.circleAttack.projectileSpeed;\n    this.velocity = {\n      x: normalizedDx * speed,\n      y: normalizedDy * speed\n    };\n    \n    this.damage = projectileDamage || gameConfig.enemy.circleAttack.projectileDamage;\n    this.maxLifetime = projectileLifetime || gameConfig.enemy.circleAttack.projectileLifetime;\n    this.lifetime = 0;\n    \n    // Create projectile visual\n    this.shape = new createjs.Shape();\n    this.updateVisual();\n    \n    this.shape.x = startX;\n    this.shape.y = startY;\n    \n    stage.addChild(this.shape);\n  }\n\n  public update(): void {\n    if (!this.isActive) return;\n    \n    const deltaTime = 1 / gameConfig.fps;\n    this.lifetime += deltaTime;\n    \n    // Update position\n    this.position.x += this.velocity.x;\n    this.position.y += this.velocity.y;\n    \n    // Update shape position\n    this.shape.x = this.position.x;\n    this.shape.y = this.position.y;\n    \n    // Update visual with fading effect as lifetime progresses\n    this.updateVisual();\n    \n    // Check if projectile should be destroyed\n    if (this.lifetime >= this.maxLifetime || this.isOutOfBounds()) {\n      this.isActive = false;\n    }\n  }\n\n  private updateVisual(): void {\n    const lifetimePercentage = this.lifetime / this.maxLifetime;\n    const alpha = 1 - (lifetimePercentage * 0.3); // Slight fade over time\n    const size = 4 + Math.sin(this.lifetime * 8) * 0.5; // Subtle pulsing effect\n    \n    this.shape.graphics.clear();\n    \n    // Outer glow\n    this.shape.graphics\n      .beginFill(`rgba(255, 100, 50, ${alpha * 0.3})`)\n      .drawCircle(0, 0, size + 2);\n    \n    // Main projectile body\n    this.shape.graphics\n      .beginFill(`rgba(255, 120, 60, ${alpha})`)\n      .drawCircle(0, 0, size);\n    \n    // Bright center\n    this.shape.graphics\n      .beginFill(`rgba(255, 200, 150, ${alpha})`)\n      .drawCircle(0, 0, size * 0.4);\n  }\n\n  private isOutOfBounds(): boolean {\n    const dims = gameConfig.canvas;\n    const buffer = 50; // Allow projectiles to travel a bit off-screen\n    \n    return (\n      this.position.x < -buffer ||\n      this.position.x > dims.width + buffer ||\n      this.position.y < -buffer ||\n      this.position.y > dims.height + buffer\n    );\n  }\n\n  public isAlive(): boolean {\n    return this.isActive;\n  }\n\n  public getDamage(): number {\n    return this.damage;\n  }\n\n  public getPosition(): Position {\n    return { ...this.position };\n  }\n\n  public destroy(): void {\n    this.isActive = false;\n    this.stage.removeChild(this.shape);\n  }\n\n  public getRadius(): number {\n    return 4; // Collision radius\n  }\n}","import * as createjs from '@thegraid/createjs-module';\nimport { GameObject, Position } from '@types';\n\nexport class SwipeAttack implements GameObject {\n  private stage: createjs.Stage;\n  private shape: createjs.Shape;\n  private enemyPosition: Position;\n  private playerPosition: Position;\n  \n  private active: boolean = false;\n  private revealProgress: number = 0; // 0 to 1 for horizontal reveal\n  private maxRadius: number = 42; // Final half circle radius (30% bigger than 30px)\n  private animationDuration: number = 0.3; // 0.3 seconds for reveal and fade\n  private elapsed: number = 0;\n  private angle: number = 0; // Direction toward player\n  private revealDirection: number = 1; // 1 for left-to-right, -1 for right-to-left\n  \n  constructor(stage: createjs.Stage) {\n    this.stage = stage;\n    this.enemyPosition = { x: 0, y: 0 };\n    this.playerPosition = { x: 0, y: 0 };\n    \n    // Create the swipe shape\n    this.shape = new createjs.Shape();\n    this.shape.alpha = 0;\n    stage.addChild(this.shape);\n  }\n\n  public update(): void {\n    if (!this.active) return;\n    \n    const deltaTime = 1 / 55; // Game runs at 55 FPS\n    this.elapsed += deltaTime;\n    \n    if (this.elapsed <= this.animationDuration) {\n      // Reveal phase - horizontal reveal and then fade\n      this.revealProgress = this.elapsed / this.animationDuration;\n      this.drawSwipe();\n      \n      // Fade out during the same 0.3 seconds\n      this.shape.alpha = 1 - this.revealProgress;\n    } else {\n      // Animation complete\n      this.reset();\n    }\n    \n    // Position is updated by the enemy via updatePosition method\n  }\n\n  public trigger(enemyPosition: Position, playerPosition: Position): void {\n    if (this.active) return; // Already active\n    \n    this.active = true;\n    this.elapsed = 0;\n    this.revealProgress = 0;\n    this.enemyPosition = { ...enemyPosition };\n    this.playerPosition = { ...playerPosition };\n    \n    // Calculate angle toward player\n    const dx = playerPosition.x - enemyPosition.x;\n    const dy = playerPosition.y - enemyPosition.y;\n    this.angle = Math.atan2(dy, dx);\n    \n    // Determine reveal direction based on player position relative to enemy\n    // If player is to the right of enemy, reveal left-to-right (1)\n    // If player is to the left of enemy, reveal right-to-left (-1)\n    this.revealDirection = dx >= 0 ? 1 : -1;\n    \n    // Position at enemy location\n    this.shape.x = enemyPosition.x;\n    this.shape.y = enemyPosition.y;\n    this.shape.alpha = 1;\n    \n    // Start the reveal animation\n    this.drawSwipe();\n  }\n\n  private drawSwipe(): void {\n    this.shape.graphics.clear();\n    \n    if (this.revealProgress === 0) {\n      // Draw initial 2px dot\n      this.shape.graphics\n        .setStrokeStyle(2)\n        .beginStroke('#ff0000')\n        .drawCircle(0, 0, 1);\n    } else {\n      // Draw half circle with horizontal reveal effect\n      const startAngle = this.angle - Math.PI / 2; // 90 degrees left of direction\n      const endAngle = this.angle + Math.PI / 2;   // 90 degrees right of direction\n      \n      // Calculate how much of the arc to reveal based on progress and direction\n      let currentStartAngle = startAngle;\n      let currentEndAngle = endAngle;\n      \n      if (this.revealDirection === 1) {\n        // Left-to-right reveal\n        currentEndAngle = startAngle + (endAngle - startAngle) * this.revealProgress;\n      } else {\n        // Right-to-left reveal\n        currentStartAngle = endAngle - (endAngle - startAngle) * this.revealProgress;\n      }\n      \n      this.shape.graphics\n        .setStrokeStyle(2)\n        .beginStroke('#ff0000')\n        .arc(0, 0, this.maxRadius, currentStartAngle, currentEndAngle, false);\n    }\n  }\n\n  private reset(): void {\n    this.active = false;\n    this.elapsed = 0;\n    this.revealProgress = 0;\n    this.shape.alpha = 0;\n    this.shape.graphics.clear();\n  }\n\n  public isActive(): boolean {\n    return this.active && this.revealProgress > 0;\n  }\n\n  public checkCollision(position: Position, radius: number): boolean {\n    if (!this.isActive()) return false;\n    \n    // Calculate distance from swipe center (enemy position) to target\n    const dx = position.x - this.enemyPosition.x;\n    const dy = position.y - this.enemyPosition.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    \n    // Check if within swipe radius\n    if (distance > this.maxRadius + radius) return false;\n    \n    // Check if position is within the revealed portion of the half-circle arc\n    const angleToTarget = Math.atan2(dy, dx);\n    const startAngle = this.angle - Math.PI / 2;\n    const endAngle = this.angle + Math.PI / 2;\n    \n    // Calculate revealed arc bounds\n    let revealedStartAngle = startAngle;\n    let revealedEndAngle = endAngle;\n    \n    if (this.revealDirection === 1) {\n      // Left-to-right reveal\n      revealedEndAngle = startAngle + (endAngle - startAngle) * this.revealProgress;\n    } else {\n      // Right-to-left reveal\n      revealedStartAngle = endAngle - (endAngle - startAngle) * this.revealProgress;\n    }\n    \n    // Normalize angles to [0, 2π] range for comparison\n    const normalizeAngle = (angle: number) => {\n      while (angle < 0) angle += 2 * Math.PI;\n      while (angle >= 2 * Math.PI) angle -= 2 * Math.PI;\n      return angle;\n    };\n    \n    const normTarget = normalizeAngle(angleToTarget);\n    const normStart = normalizeAngle(revealedStartAngle);\n    const normEnd = normalizeAngle(revealedEndAngle);\n    \n    // Check if angle is within the revealed arc\n    if (normStart <= normEnd) {\n      return normTarget >= normStart && normTarget <= normEnd;\n    } else {\n      // Handle wrap-around case\n      return normTarget >= normStart || normTarget <= normEnd;\n    }\n  }\n\n  public getDamage(): number {\n    return 15; // Swipe attack damage\n  }\n\n  public updatePosition(enemyPosition: Position): void {\n    this.enemyPosition = { ...enemyPosition };\n    this.shape.x = enemyPosition.x;\n    this.shape.y = enemyPosition.y;\n  }\n\n  public checkPlayerCollision(playerPosition: Position, playerRadius: number = 14): boolean {\n    return this.checkCollision(playerPosition, playerRadius);\n  }\n\n  public destroy(): void {\n    this.stage.removeChild(this.shape);\n  }\n}","import * as createjs from '@thegraid/createjs-module';\nimport { GameEntity, Position, Velocity, EnemyAttackPattern } from '@types';\nimport { gameConfig } from '@config/gameConfig';\nimport { Player } from './Player';\nimport { EnemyProjectile } from './EnemyProjectile';\nimport { SwipeAttack } from './weapons/SwipeAttack';\n\nexport class Enemy implements GameEntity {\n  public shape: createjs.Shape;\n  public position: Position;\n  public velocity: Velocity;\n  public hp: number;\n  \n  private maxHp: number;\n  private speed: number;\n  private acceleration: number;\n  private angle: number = 0;\n  private stage: createjs.Stage;\n  private player: Player;\n  private attackPattern: EnemyAttackPattern;\n  private projectiles: EnemyProjectile[] = [];\n  \n  // Circle attack properties\n  private circleAngle: number = 0;\n  private lastShotTime: number = 0;\n  private desiredRadius: number;\n  \n  // Health bar properties\n  private healthBarContainer: createjs.Container | null = null;\n  private healthBarBackground: createjs.Shape | null = null;\n  private healthBarFill: createjs.Shape | null = null;\n  private healthBarBorder: createjs.Shape | null = null;\n  private healthBarVisible: boolean = false;\n  private lastDamageTime: number = 0;\n\n  // Swipe attack properties\n  private swipeAttack: SwipeAttack | null = null;\n  private lastSwipeTime: number = 0;\n  private swipeRange: number = 42; // Distance at which to trigger swipe\n  private swipeCooldown: number = 3; // 3 seconds between swipes\n  private hasSwipeHitPlayer: boolean = false; // Track if current swipe has hit player\n\n  // Dash worm properties\n  private segments: createjs.Shape[] = [];\n  private connectors: createjs.Shape[] = [];\n  private segmentPositions: Position[] = [];\n  private dashCooldown: number = 2.5;\n  private dashDuration: number = 0.3;\n  private dashSpeed: number = 15;\n  private detectionRadius: number = 80;\n  private lastDashTime: number = 0;\n  private isDashing: boolean = false;\n  private dashDirection: Position = { x: 0, y: 0 };\n  private dashTimer: number = 0;\n\n  constructor(stage: createjs.Stage, player: Player, x: number = 0, y: number = 0, hp?: number, speed?: number, attackPattern: EnemyAttackPattern = EnemyAttackPattern.CHASE) {\n    this.stage = stage;\n    this.player = player;\n    this.position = { x, y };\n    this.velocity = { x: 0, y: 0 };\n    this.attackPattern = attackPattern;\n    \n    // Set properties based on attack pattern\n    if (attackPattern === EnemyAttackPattern.BIG_SHOOTER) {\n      this.hp = hp || gameConfig.enemy.bigShooter.hp;\n      this.speed = speed || gameConfig.enemy.bigShooter.speed;\n    } else if (attackPattern === EnemyAttackPattern.DASH_WORM) {\n      this.hp = hp || gameConfig.enemy.dashWorm.hp;\n      this.speed = speed || gameConfig.enemy.dashWorm.speed;\n      this.dashCooldown = gameConfig.enemy.dashWorm.dashCooldown;\n      this.dashDuration = gameConfig.enemy.dashWorm.dashDuration;\n      this.dashSpeed = gameConfig.enemy.dashWorm.dashSpeed;\n      this.detectionRadius = gameConfig.enemy.dashWorm.detectionRadius;\n    } else {\n      this.hp = hp || gameConfig.enemy.hp;\n      this.speed = speed || gameConfig.enemy.baseSpeed;\n    }\n    \n    // Store max HP for health bar percentage calculation\n    this.maxHp = this.hp;\n    \n    this.acceleration = gameConfig.enemy.acceleration;\n    this.desiredRadius = gameConfig.enemy.circleAttack.radius;\n    \n    // Set random starting angle for circle pattern\n    this.circleAngle = Math.random() * Math.PI * 2;\n    \n    // Create enemy shape based on attack pattern\n    this.shape = new createjs.Shape();\n    this.createVisual();\n    \n    this.shape.x = x;\n    this.shape.y = y;\n    \n    stage.addChild(this.shape);\n    \n    // Initialize swipe attack for CHASE pattern enemies\n    if (attackPattern === EnemyAttackPattern.CHASE) {\n      this.swipeAttack = new SwipeAttack(stage);\n    }\n    \n    // Initialize worm segments for DASH_WORM pattern\n    if (attackPattern === EnemyAttackPattern.DASH_WORM) {\n      this.createWormSegments();\n    }\n  }\n\n  public update(): void {\n    if (this.attackPattern === EnemyAttackPattern.CHASE) {\n      this.updateChasePattern();\n    } else if (this.attackPattern === EnemyAttackPattern.CIRCLE_SHOOT) {\n      this.updateCirclePattern();\n    } else if (this.attackPattern === EnemyAttackPattern.BIG_SHOOTER) {\n      this.updateBigShooterPattern();\n    } else if (this.attackPattern === EnemyAttackPattern.DASH_WORM) {\n      this.updateDashWormPattern();\n    }\n    \n    this.updatePosition();\n    this.updateProjectiles();\n    \n    // Update swipe attack if present\n    if (this.swipeAttack) {\n      this.swipeAttack.updatePosition(this.position);\n      this.swipeAttack.update();\n      \n      // Collision detection is now handled by GameManager\n      \n      // Reset hit flag when swipe is no longer active\n      if (!this.swipeAttack.isActive()) {\n        this.hasSwipeHitPlayer = false;\n      }\n    }\n    \n    // Update shape position\n    this.shape.x = this.position.x;\n    this.shape.y = this.position.y;\n    this.shape.rotation = this.angle;\n    \n    // Update health bar\n    this.updateHealthBarPosition();\n    this.checkHealthBarFade();\n  }\n\n  private updateChasePattern(): void {\n    const playerPos = this.player.getPosition();\n    \n    // Calculate direction to player with more direct pursuit\n    const dx = playerPos.x - this.position.x;\n    const dy = playerPos.y - this.position.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    \n    if (distance > 0) {\n      // Normalize direction and apply stronger acceleration\n      const normalizedDx = dx / distance;\n      const normalizedDy = dy / distance;\n      \n      // More aggressive acceleration toward player\n      this.velocity.x += normalizedDx * this.acceleration * 1.5;\n      this.velocity.y += normalizedDy * this.acceleration * 1.5;\n    }\n    \n    // Apply boundary forces to keep enemies on screen\n    this.applyBoundaryForces();\n    \n    // Limit velocity to max speed\n    const currentSpeed = Math.sqrt(this.velocity.x ** 2 + this.velocity.y ** 2);\n    if (currentSpeed > this.speed) {\n      const scale = this.speed / currentSpeed;\n      this.velocity.x *= scale;\n      this.velocity.y *= scale;\n    }\n    \n    // Calculate rotation angle based on movement direction\n    if (this.velocity.x !== 0 || this.velocity.y !== 0) {\n      this.angle = Math.atan2(this.velocity.y, this.velocity.x) * (180 / Math.PI) + 90;\n    }\n    \n    // Check for swipe attack opportunity\n    if (this.swipeAttack && distance <= this.swipeRange && distance > 0) {\n      const currentTime = Date.now() / 1000;\n      if (currentTime - this.lastSwipeTime >= this.swipeCooldown) {\n        this.swipeAttack.trigger(this.position, playerPos);\n        this.lastSwipeTime = currentTime;\n        this.hasSwipeHitPlayer = false; // Reset hit flag for new swipe\n      }\n    }\n  }\n\n  private updatePosition(): void {\n    this.position.x += this.velocity.x;\n    this.position.y += this.velocity.y;\n  }\n\n  private applyBoundaryForces(): void {\n    const margin = 50; // Distance from edge to start applying force\n    const boundaryForce = 0.3; // Strength of boundary repulsion\n    const canvasWidth = gameConfig.canvas.width;\n    const canvasHeight = gameConfig.canvas.height;\n    \n    // Left boundary\n    if (this.position.x < margin) {\n      const force = (margin - this.position.x) / margin;\n      this.velocity.x += boundaryForce * force;\n    }\n    \n    // Right boundary\n    if (this.position.x > canvasWidth - margin) {\n      const force = (this.position.x - (canvasWidth - margin)) / margin;\n      this.velocity.x -= boundaryForce * force;\n    }\n    \n    // Top boundary\n    if (this.position.y < margin) {\n      const force = (margin - this.position.y) / margin;\n      this.velocity.y += boundaryForce * force;\n    }\n    \n    // Bottom boundary\n    if (this.position.y > canvasHeight - margin) {\n      const force = (this.position.y - (canvasHeight - margin)) / margin;\n      this.velocity.y -= boundaryForce * force;\n    }\n  }\n\n  public takeDamage(amount: number): void {\n    this.hp -= amount;\n    \n    // Show and update health bar when damaged\n    this.showHealthBar();\n    this.updateHealthBarFill();\n    \n    if (this.hp <= 0) {\n      this.destroy();\n    }\n  }\n\n  public destroy(): Position | null {\n    // Clean up projectiles\n    this.clearProjectiles();\n    \n    // Clean up health bar\n    this.destroyHealthBar();\n    \n    // Clean up swipe attack\n    if (this.swipeAttack) {\n      this.swipeAttack.destroy();\n      this.swipeAttack = null;\n    }\n    \n    // Clean up worm segments and connectors\n    for (const segment of this.segments) {\n      this.stage.removeChild(segment);\n    }\n    for (const connector of this.connectors) {\n      this.stage.removeChild(connector);\n    }\n    this.segments = [];\n    this.connectors = [];\n    this.segmentPositions = [];\n    \n    // Return the position before destroying for orb spawning\n    const deathPosition = { ...this.position };\n    this.stage.removeChild(this.shape);\n    return deathPosition;\n  }\n\n  public getPosition(): Position {\n    return { ...this.position };\n  }\n\n  public isAlive(): boolean {\n    return this.hp > 0;\n  }\n\n  private createVisual(): void {\n    if (this.attackPattern === EnemyAttackPattern.CHASE) {\n      // Red triangle for chase enemies\n      this.shape.graphics\n        .beginFill(\"rgb(126, 0, 0)\")\n        .drawPolyStar(0, 0, 7, 3, 2, 90);\n    } else if (this.attackPattern === EnemyAttackPattern.CIRCLE_SHOOT) {\n      // Orange/yellow triangle for circling enemies\n      this.shape.graphics\n        .beginFill(\"rgb(200, 100, 20)\")\n        .drawPolyStar(0, 0, 8, 3, 2, 90);\n    } else if (this.attackPattern === EnemyAttackPattern.BIG_SHOOTER) {\n      // Large red circle for big shooter enemies\n      const size = gameConfig.enemy.bigShooter.size;\n      \n      // Outer glow\n      this.shape.graphics\n        .beginFill(\"rgba(200, 0, 0, 0.3)\")\n        .drawCircle(0, 0, size + 3);\n      \n      // Main body\n      this.shape.graphics\n        .beginFill(\"rgb(180, 0, 0)\")\n        .drawCircle(0, 0, size);\n        \n      // Inner highlight\n      this.shape.graphics\n        .beginFill(\"rgb(220, 50, 50)\")\n        .drawCircle(0, 0, size * 0.6);\n    } else if (this.attackPattern === EnemyAttackPattern.DASH_WORM) {\n      // For dash worm, the main shape is invisible as we use segments\n      // But we need a shape for collision detection (using head size)\n      this.shape.graphics\n        .beginFill(\"rgba(200, 0, 0, 0)\") // Invisible\n        .drawCircle(0, 0, gameConfig.enemy.dashWorm.headSize);\n    }\n  }\n\n  private updateCirclePattern(): void {\n    const playerPos = this.player.getPosition();\n    const currentTime = Date.now() / 1000;\n    \n    // Calculate desired position on circle around player with faster rotation\n    this.circleAngle += gameConfig.enemy.circleAttack.angularSpeed * 1.5;\n    const desiredX = playerPos.x + Math.cos(this.circleAngle) * this.desiredRadius;\n    const desiredY = playerPos.y + Math.sin(this.circleAngle) * this.desiredRadius;\n    \n    // Clamp desired position to stay on screen\n    const margin = 30;\n    const clampedX = Math.max(margin, Math.min(gameConfig.canvas.width - margin, desiredX));\n    const clampedY = Math.max(margin, Math.min(gameConfig.canvas.height - margin, desiredY));\n    \n    // Move toward desired circle position more aggressively\n    const dx = clampedX - this.position.x;\n    const dy = clampedY - this.position.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    \n    if (distance > 0) {\n      const normalizedDx = dx / distance;\n      const normalizedDy = dy / distance;\n      \n      // More aggressive movement\n      this.velocity.x = normalizedDx * this.speed * 0.9;\n      this.velocity.y = normalizedDy * this.speed * 0.9;\n    }\n    \n    // Apply boundary forces\n    this.applyBoundaryForces();\n    \n    // Face toward player\n    const angleToPlayer = Math.atan2(\n      playerPos.y - this.position.y,\n      playerPos.x - this.position.x\n    ) * (180 / Math.PI) + 90;\n    this.angle = angleToPlayer;\n    \n    // Shoot at player periodically\n    if (currentTime - this.lastShotTime >= gameConfig.enemy.circleAttack.shootCooldown) {\n      this.shootAtPlayer();\n      this.lastShotTime = currentTime;\n    }\n  }\n\n  private createWormSegments(): void {\n    const config = gameConfig.enemy.dashWorm;\n    \n    // Clear any existing segments and connectors\n    for (const segment of this.segments) {\n      this.stage.removeChild(segment);\n    }\n    for (const connector of this.connectors) {\n      this.stage.removeChild(connector);\n    }\n    this.segments = [];\n    this.connectors = [];\n    this.segmentPositions = [];\n    \n    // Create segments starting from current position\n    for (let i = 0; i < config.segmentCount; i++) {\n      const segment = new createjs.Shape();\n      \n      if (i === 0) {\n        // Head is larger and darker red\n        segment.graphics\n          .beginFill(\"rgb(200, 0, 0)\")\n          .drawCircle(0, 0, config.headSize);\n      } else {\n        // Body segments are smaller and lighter red\n        const alpha = 1 - (i * 0.15); // Fade towards tail\n        segment.graphics\n          .beginFill(`rgba(180, 20, 20, ${alpha})`)\n          .drawCircle(0, 0, config.segmentSize);\n      }\n      \n      // Position segments behind the head\n      const segmentPosition = {\n        x: this.position.x - (i * config.segmentSize * 1.5),\n        y: this.position.y\n      };\n      \n      segment.x = segmentPosition.x;\n      segment.y = segmentPosition.y;\n      \n      this.segments.push(segment);\n      this.segmentPositions.push(segmentPosition);\n      this.stage.addChild(segment);\n      \n      // Create connector oval between this segment and the previous one\n      if (i > 0) {\n        const connector = new createjs.Shape();\n        this.connectors.push(connector);\n        this.stage.addChild(connector);\n      }\n    }\n    \n    // Initial update of connectors\n    this.updateWormConnectors();\n  }\n\n  private updateDashWormPattern(): void {\n    const playerPos = this.player.getPosition();\n    const currentTime = Date.now() / 1000;\n    \n    // Check if we should dash to dodge bullets\n    const shouldDash = this.shouldDashToDodgeBullets(playerPos);\n    \n    if (this.isDashing) {\n      // Continue dashing\n      this.dashTimer += 1 / gameConfig.fps;\n      \n      // Move in dash direction\n      this.velocity.x = this.dashDirection.x * this.dashSpeed;\n      this.velocity.y = this.dashDirection.y * this.dashSpeed;\n      \n      // Check if dash is complete\n      if (this.dashTimer >= this.dashDuration) {\n        this.isDashing = false;\n        this.dashTimer = 0;\n        this.lastDashTime = currentTime;\n      }\n    } else if (shouldDash && currentTime - this.lastDashTime >= this.dashCooldown) {\n      // Start a new dash\n      this.startDash(playerPos);\n    } else {\n      // Normal movement toward player (slower than chase enemies)\n      const dx = playerPos.x - this.position.x;\n      const dy = playerPos.y - this.position.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      \n      if (distance > 0) {\n        const normalizedDx = dx / distance;\n        const normalizedDy = dy / distance;\n        \n        // More cautious approach\n        this.velocity.x += normalizedDx * this.acceleration * 0.8;\n        this.velocity.y += normalizedDy * this.acceleration * 0.8;\n      }\n    }\n    \n    // Apply boundary forces\n    this.applyBoundaryForces();\n    \n    // Limit velocity to max speed (unless dashing)\n    if (!this.isDashing) {\n      const currentSpeed = Math.sqrt(this.velocity.x ** 2 + this.velocity.y ** 2);\n      if (currentSpeed > this.speed) {\n        const scale = this.speed / currentSpeed;\n        this.velocity.x *= scale;\n        this.velocity.y *= scale;\n      }\n    }\n    \n    // Calculate rotation angle based on movement direction\n    if (this.velocity.x !== 0 || this.velocity.y !== 0) {\n      this.angle = Math.atan2(this.velocity.y, this.velocity.x) * (180 / Math.PI) + 90;\n    }\n    \n    // Update worm segments to follow the head\n    this.updateWormSegments();\n  }\n\n  private shouldDashToDodgeBullets(playerPos: Position): boolean {\n    // Get player's projectiles from the game manager (we'll need to add this)\n    // For now, use simple distance-based dodging when player is aiming at us\n    \n    const dx = playerPos.x - this.position.x;\n    const dy = playerPos.y - this.position.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    \n    // If player is close and we're in their line of sight, consider dashing\n    if (distance < this.detectionRadius) {\n      // Add some randomness to make it feel more organic\n      const dashChance = 0.3; // 30% chance per frame when in danger\n      return Math.random() < dashChance;\n    }\n    \n    return false;\n  }\n\n  private startDash(playerPos: Position): void {\n    this.isDashing = true;\n    this.dashTimer = 0;\n    \n    // Calculate dash direction (perpendicular to player direction with some randomness)\n    const dx = playerPos.x - this.position.x;\n    const dy = playerPos.y - this.position.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    \n    if (distance > 0) {\n      // Perpendicular direction (90 degrees rotated)\n      const perpX = -dy / distance;\n      const perpY = dx / distance;\n      \n      // Add some randomness to the dash direction\n      const randomAngle = (Math.random() - 0.5) * Math.PI * 0.5; // ±45 degrees\n      const cos = Math.cos(randomAngle);\n      const sin = Math.sin(randomAngle);\n      \n      this.dashDirection.x = perpX * cos - perpY * sin;\n      this.dashDirection.y = perpX * sin + perpY * cos;\n    } else {\n      // Random direction if player is at same position\n      const randomAngle = Math.random() * Math.PI * 2;\n      this.dashDirection.x = Math.cos(randomAngle);\n      this.dashDirection.y = Math.sin(randomAngle);\n    }\n  }\n\n  private updateWormSegments(): void {\n    if (this.segments.length === 0) return;\n    \n    // Update head position (segment 0)\n    this.segments[0].x = this.position.x;\n    this.segments[0].y = this.position.y;\n    this.segmentPositions[0] = { x: this.position.x, y: this.position.y };\n    \n    // Update body segments to follow\n    for (let i = 1; i < this.segments.length; i++) {\n      const currentSeg = this.segmentPositions[i];\n      const targetSeg = this.segmentPositions[i - 1];\n      \n      // Calculate direction to previous segment\n      const dx = targetSeg.x - currentSeg.x;\n      const dy = targetSeg.y - currentSeg.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      \n      const segmentDistance = gameConfig.enemy.dashWorm.segmentSize * 1.2;\n      \n      if (distance > segmentDistance) {\n        // Move toward previous segment\n        const moveRatio = (distance - segmentDistance) / distance;\n        currentSeg.x += dx * moveRatio * 0.1; // Smooth following\n        currentSeg.y += dy * moveRatio * 0.1;\n      }\n      \n      // Update visual position\n      this.segments[i].x = currentSeg.x;\n      this.segments[i].y = currentSeg.y;\n    }\n    \n    // Update connectors between segments\n    this.updateWormConnectors();\n  }\n\n  private updateWormConnectors(): void {\n    if (this.connectors.length === 0) return;\n    \n    const config = gameConfig.enemy.dashWorm;\n    \n    for (let i = 0; i < this.connectors.length; i++) {\n      const connector = this.connectors[i];\n      const segmentIndex = i + 1; // Connector i connects segment i+1 to segment i\n      \n      if (segmentIndex < this.segmentPositions.length) {\n        const fromPos = this.segmentPositions[i];\n        const toPos = this.segmentPositions[segmentIndex];\n        \n        // Calculate connector properties\n        const dx = toPos.x - fromPos.x;\n        const dy = toPos.y - fromPos.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        const angle = Math.atan2(dy, dx);\n        \n        // Calculate connector dimensions\n        const connectorWidth = Math.max(distance, config.segmentSize * 0.5);\n        const connectorHeight = config.segmentSize * 1.12; // 40% thicker (0.8 * 1.4)\n        \n        // Calculate alpha for fading effect\n        const alpha = Math.max(0.3, 1 - (segmentIndex * 0.12)); // Fade but not completely transparent\n        \n        // Clear and redraw connector\n        connector.graphics.clear();\n        connector.graphics\n          .beginFill(`rgba(160, 20, 20, ${alpha})`)\n          .drawEllipse(-connectorWidth/2, -connectorHeight/2, connectorWidth, connectorHeight);\n        \n        // Position and rotate connector\n        connector.x = fromPos.x + dx * 0.5; // Center between segments\n        connector.y = fromPos.y + dy * 0.5;\n        connector.rotation = angle * (180 / Math.PI);\n      }\n    }\n  }\n\n  private updateBigShooterPattern(): void {\n    const playerPos = this.player.getPosition();\n    const currentTime = Date.now() / 1000;\n    \n    // Move toward player but maintain some distance\n    const dx = playerPos.x - this.position.x;\n    const dy = playerPos.y - this.position.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    \n    // Try to maintain optimal shooting distance (not too close, not too far)\n    const optimalDistance = 200;\n    let accelerationMultiplier = 0.8;\n    \n    if (distance < optimalDistance * 0.7) {\n      // Too close, back away slightly\n      accelerationMultiplier = -0.3;\n    } else if (distance > optimalDistance * 1.5) {\n      // Too far, move closer more aggressively\n      accelerationMultiplier = 1.2;\n    }\n    \n    if (distance > 0) {\n      const normalizedDx = dx / distance;\n      const normalizedDy = dy / distance;\n      \n      // Apply velocity towards/away from player\n      this.velocity.x += normalizedDx * this.acceleration * accelerationMultiplier;\n      this.velocity.y += normalizedDy * this.acceleration * accelerationMultiplier;\n    }\n    \n    // Apply boundary forces to stay on screen\n    this.applyBoundaryForces();\n    \n    // Limit velocity to max speed\n    const currentSpeed = Math.sqrt(this.velocity.x ** 2 + this.velocity.y ** 2);\n    if (currentSpeed > this.speed) {\n      const scale = this.speed / currentSpeed;\n      this.velocity.x *= scale;\n      this.velocity.y *= scale;\n    }\n    \n    // Face toward player\n    if (distance > 0) {\n      this.angle = Math.atan2(dy, dx) * (180 / Math.PI) + 90;\n    }\n    \n    // Shoot at player periodically\n    if (currentTime - this.lastShotTime >= gameConfig.enemy.bigShooter.shootCooldown) {\n      this.shootAtPlayerBigShooter();\n      this.lastShotTime = currentTime;\n    }\n  }\n\n  private shootAtPlayer(): void {\n    const playerPos = this.player.getPosition();\n    \n    // Add some leading to the shot based on player movement (predictive aiming)\n    const playerVelocity = { x: 0, y: 0 }; // Could be enhanced later\n    const leadTime = 0.5;\n    const targetX = playerPos.x + playerVelocity.x * leadTime;\n    const targetY = playerPos.y + playerVelocity.y * leadTime;\n    \n    const projectile = new EnemyProjectile(\n      this.stage,\n      this.position.x,\n      this.position.y,\n      targetX,\n      targetY\n    );\n    \n    this.projectiles.push(projectile);\n  }\n\n  private shootAtPlayerBigShooter(): void {\n    const playerPos = this.player.getPosition();\n    \n    // Create projectile with big shooter configuration\n    const projectile = new EnemyProjectile(\n      this.stage,\n      this.position.x,\n      this.position.y,\n      playerPos.x,\n      playerPos.y,\n      gameConfig.enemy.bigShooter.projectileSpeed,\n      gameConfig.enemy.bigShooter.projectileDamage,\n      gameConfig.enemy.bigShooter.projectileLifetime\n    );\n    \n    this.projectiles.push(projectile);\n  }\n\n  private updateProjectiles(): void {\n    for (let i = this.projectiles.length - 1; i >= 0; i--) {\n      const projectile = this.projectiles[i];\n      projectile.update();\n      \n      if (!projectile.isAlive()) {\n        projectile.destroy();\n        this.projectiles.splice(i, 1);\n      }\n    }\n  }\n\n  public getProjectiles(): EnemyProjectile[] {\n    return this.projectiles;\n  }\n\n  public clearProjectiles(): void {\n    for (const projectile of this.projectiles) {\n      projectile.destroy();\n    }\n    this.projectiles = [];\n  }\n\n  public getCollisionRadius(): number {\n    if (this.attackPattern === EnemyAttackPattern.BIG_SHOOTER) {\n      return gameConfig.enemy.bigShooter.size;\n    } else if (this.attackPattern === EnemyAttackPattern.CIRCLE_SHOOT) {\n      return 8; // Slightly larger than chase enemies\n    } else if (this.attackPattern === EnemyAttackPattern.DASH_WORM) {\n      return gameConfig.enemy.dashWorm.headSize;\n    } else {\n      return 7; // Default chase enemy size\n    }\n  }\n\n  public checkWormCollision(position: Position, radius: number): boolean {\n    if (this.attackPattern !== EnemyAttackPattern.DASH_WORM) {\n      // Fallback to normal collision for non-worm enemies\n      const dx = position.x - this.position.x;\n      const dy = position.y - this.position.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      return distance < (radius + this.getCollisionRadius());\n    }\n\n    const config = gameConfig.enemy.dashWorm;\n    \n    // Check collision with each segment\n    for (let i = 0; i < this.segmentPositions.length; i++) {\n      const segmentPos = this.segmentPositions[i];\n      const segmentRadius = i === 0 ? config.headSize : config.segmentSize;\n      \n      const dx = position.x - segmentPos.x;\n      const dy = position.y - segmentPos.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      \n      if (distance < (radius + segmentRadius)) {\n        return true;\n      }\n    }\n    \n    // Check collision with connectors (oval-shaped areas between segments)\n    for (let i = 0; i < this.segmentPositions.length - 1; i++) {\n      const fromPos = this.segmentPositions[i];\n      const toPos = this.segmentPositions[i + 1];\n      \n      if (this.checkOvalCollision(position, radius, fromPos, toPos, config.segmentSize * 1.12)) {\n        return true;\n      }\n    }\n    \n    return false;\n  }\n\n  private checkOvalCollision(point: Position, pointRadius: number, ovalStart: Position, ovalEnd: Position, ovalHeight: number): boolean {\n    // Simplified oval collision - treat as capsule (line segment with rounded ends)\n    const dx = ovalEnd.x - ovalStart.x;\n    const dy = ovalEnd.y - ovalStart.y;\n    const length = Math.sqrt(dx * dx + dy * dy);\n    \n    if (length === 0) return false;\n    \n    // Normalize the line direction\n    const unitX = dx / length;\n    const unitY = dy / length;\n    \n    // Project point onto the line\n    const pointDx = point.x - ovalStart.x;\n    const pointDy = point.y - ovalStart.y;\n    const projection = pointDx * unitX + pointDy * unitY;\n    \n    // Clamp projection to line segment\n    const clampedProjection = Math.max(0, Math.min(length, projection));\n    \n    // Find closest point on line segment\n    const closestX = ovalStart.x + clampedProjection * unitX;\n    const closestY = ovalStart.y + clampedProjection * unitY;\n    \n    // Check distance from point to closest point on oval\n    const distanceX = point.x - closestX;\n    const distanceY = point.y - closestY;\n    const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n    \n    return distance < (pointRadius + ovalHeight / 2);\n  }\n\n  public getSwipeAttack(): SwipeAttack | null {\n    return this.swipeAttack;\n  }\n\n  public hasSwipeHitPlayerAlready(): boolean {\n    return this.hasSwipeHitPlayer;\n  }\n\n  public markSwipeAsHit(): void {\n    this.hasSwipeHitPlayer = true;\n  }\n\n  // Health bar methods\n  private createHealthBar(): void {\n    if (this.healthBarContainer) return; // Already created\n    \n    // Create container for health bar components\n    this.healthBarContainer = new createjs.Container();\n    \n    // Get appropriate dimensions based on enemy type\n    const config = gameConfig.enemyHealthBar;\n    const width = this.attackPattern === EnemyAttackPattern.BIG_SHOOTER \n      ? config.bigShooterWidth \n      : config.width;\n    const height = this.attackPattern === EnemyAttackPattern.BIG_SHOOTER \n      ? config.bigShooterHeight \n      : config.height;\n    \n    // Create background (dark gray)\n    this.healthBarBackground = new createjs.Shape();\n    this.healthBarBackground.graphics\n      .beginFill('#333333')\n      .drawRect(-width/2, -height/2, width, height);\n    \n    // Create fill (will be updated based on health)\n    this.healthBarFill = new createjs.Shape();\n    this.updateHealthBarFill();\n    \n    // Create border (white)\n    this.healthBarBorder = new createjs.Shape();\n    this.healthBarBorder.graphics\n      .setStrokeStyle(1)\n      .beginStroke('#ffffff')\n      .drawRect(-width/2, -height/2, width, height);\n    \n    // Add components to container\n    this.healthBarContainer.addChild(this.healthBarBackground);\n    this.healthBarContainer.addChild(this.healthBarFill);\n    this.healthBarContainer.addChild(this.healthBarBorder);\n    \n    // Add container to stage\n    this.stage.addChild(this.healthBarContainer);\n    \n    // Initially hide it\n    this.healthBarContainer.alpha = 0;\n    this.healthBarVisible = false;\n  }\n\n  private updateHealthBarFill(): void {\n    if (!this.healthBarFill) return;\n    \n    const config = gameConfig.enemyHealthBar;\n    const width = this.attackPattern === EnemyAttackPattern.BIG_SHOOTER \n      ? config.bigShooterWidth \n      : config.width;\n    const height = this.attackPattern === EnemyAttackPattern.BIG_SHOOTER \n      ? config.bigShooterHeight \n      : config.height;\n    \n    // Calculate health percentage\n    const healthPercent = Math.max(0, this.hp / this.maxHp);\n    const fillWidth = width * healthPercent;\n    \n    // Determine color based on health percentage\n    let color = '#00ff00'; // Green\n    if (healthPercent < 0.3) {\n      color = '#ff0000'; // Red\n    } else if (healthPercent < 0.6) {\n      color = '#ffff00'; // Yellow\n    }\n    \n    // Clear and redraw fill\n    this.healthBarFill.graphics.clear();\n    if (fillWidth > 0) {\n      this.healthBarFill.graphics\n        .beginFill(color)\n        .drawRect(-width/2, -height/2, fillWidth, height);\n    }\n  }\n\n  private updateHealthBarPosition(): void {\n    if (!this.healthBarContainer) return;\n    \n    // Position health bar above enemy\n    const offsetY = this.getCollisionRadius() + gameConfig.enemyHealthBar.offsetY;\n    this.healthBarContainer.x = this.position.x;\n    this.healthBarContainer.y = this.position.y - offsetY;\n  }\n\n  private showHealthBar(): void {\n    if (!this.healthBarContainer) {\n      this.createHealthBar();\n    }\n    \n    if (!this.healthBarContainer) return;\n    \n    // Show health bar immediately\n    this.healthBarVisible = true;\n    this.lastDamageTime = Date.now();\n    \n    // Cancel any existing fade tween\n    createjs.Tween.removeTweens(this.healthBarContainer);\n    \n    // Make fully visible\n    this.healthBarContainer.alpha = 1;\n  }\n\n  private checkHealthBarFade(): void {\n    if (!this.healthBarContainer || !this.healthBarVisible) return;\n    \n    const currentTime = Date.now();\n    const timeSinceLastDamage = currentTime - this.lastDamageTime;\n    \n    // Start fade after delay\n    if (timeSinceLastDamage >= gameConfig.enemyHealthBar.fadeDelay) {\n      this.healthBarVisible = false;\n      \n      // Fade out over duration\n      createjs.Tween.get(this.healthBarContainer)\n        .to({ alpha: 0 }, gameConfig.enemyHealthBar.fadeDuration);\n    }\n  }\n\n  private destroyHealthBar(): void {\n    if (this.healthBarContainer) {\n      this.stage.removeChild(this.healthBarContainer);\n      this.healthBarContainer = null;\n      this.healthBarBackground = null;\n      this.healthBarFill = null;\n      this.healthBarBorder = null;\n    }\n  }\n}","import * as createjs from '@thegraid/createjs-module';\nimport { GameEntity, Position, Velocity } from '../types/index';\nimport { gameConfig } from '@config/gameConfig';\nimport { Player } from './Player';\n\nexport class ExperienceOrb implements GameEntity {\n  public shape: createjs.Shape;\n  public position: Position;\n  public velocity: Velocity;\n  \n  private stage: createjs.Stage;\n  private player: Player;\n  private experienceValue: number;\n  private baseSpeed: number;\n  private glowAnimation: number = 0;\n  private collected: boolean = false;\n  \n  constructor(stage: createjs.Stage, player: Player, x: number, y: number, experienceValue?: number) {\n    this.stage = stage;\n    this.player = player;\n    this.position = { x, y };\n    this.velocity = { x: 0, y: 0 };\n    this.experienceValue = experienceValue || gameConfig.experienceOrb.baseValue;\n    this.baseSpeed = gameConfig.experienceOrb.baseSpeed;\n    \n    // Create orb shape with glow effect\n    this.shape = new createjs.Shape();\n    this.updateVisual();\n    \n    this.shape.x = x;\n    this.shape.y = y;\n    \n    // Add a subtle shadow filter for glow effect\n    const shadow = new createjs.Shadow(\"#00ff88\", 0, 0, 8);\n    this.shape.shadow = shadow;\n    \n    stage.addChild(this.shape);\n  }\n  \n  public update(): void {\n    if (this.collected) return;\n    \n    // Update glow animation\n    this.glowAnimation += 0.1;\n    \n    // Get player position\n    const playerPos = this.player.getPosition();\n    \n    // Calculate distance to player\n    const dx = playerPos.x - this.position.x;\n    const dy = playerPos.y - this.position.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    \n    // Normalize direction\n    const dirX = dx / distance;\n    const dirY = dy / distance;\n    \n    // Determine movement speed based on distance (magnetic effect)\n    let speed = this.baseSpeed;\n    if (distance < gameConfig.experienceOrb.magnetRange) {\n      // Increase speed as player gets closer (magnetic attraction)\n      const magnetStrength = 1 - (distance / gameConfig.experienceOrb.magnetRange);\n      speed = this.baseSpeed + (gameConfig.experienceOrb.magnetSpeed * magnetStrength);\n    }\n    \n    // Update velocity\n    this.velocity.x = dirX * speed;\n    this.velocity.y = dirY * speed;\n    \n    // Update position\n    this.position.x += this.velocity.x;\n    this.position.y += this.velocity.y;\n    \n    // Update shape position\n    this.shape.x = this.position.x;\n    this.shape.y = this.position.y;\n    \n    // Update visual with pulsing effect\n    this.updateVisual();\n  }\n  \n  private updateVisual(): void {\n    const pulseSize = Math.sin(this.glowAnimation) * 1 + 5; // Radius oscillates between 4 and 6\n    const pulseAlpha = 0.8 + Math.sin(this.glowAnimation * 2) * 0.2; // Alpha oscillates between 0.6 and 1.0\n    \n    this.shape.graphics.clear();\n    \n    // Outer glow circle\n    this.shape.graphics\n      .beginFill(\"rgba(0, 255, 136, 0.3)\")\n      .drawCircle(0, 0, pulseSize + 3);\n    \n    // Inner core\n    this.shape.graphics\n      .beginFill(`rgba(0, 255, 136, ${pulseAlpha})`)\n      .drawCircle(0, 0, pulseSize);\n    \n    // Bright center\n    this.shape.graphics\n      .beginFill(\"rgba(200, 255, 220, 1)\")\n      .drawCircle(0, 0, 2);\n  }\n  \n  public collect(): void {\n    if (this.collected) return;\n    \n    this.collected = true;\n    \n    // Create collection animation (quick scale up and fade out)\n    createjs.Tween.get(this.shape)\n      .to({ scaleX: 1.5, scaleY: 1.5, alpha: 0 }, 200, createjs.Ease.quadOut)\n      .call(() => {\n        this.destroy();\n      });\n  }\n  \n  public isCollected(): boolean {\n    return this.collected;\n  }\n  \n  public getExperienceValue(): number {\n    return this.experienceValue;\n  }\n  \n  public getPosition(): Position {\n    return { ...this.position };\n  }\n  \n  public destroy(): void {\n    this.stage.removeChild(this.shape);\n  }\n}","import { Position } from '@types';\n\nexport function calculateAngle(from: Position, to: Position): number {\n  const xOff = from.x - to.x;\n  const yOff = from.y - to.y;\n  let angle = (Math.atan(xOff / yOff) / Math.PI) * 180;\n  \n  if (yOff > 0) {\n    angle += -180;\n  }\n  \n  return angle;\n}\n\nexport function calculateDistance(from: Position, to: Position): number {\n  const xOff = from.x - to.x;\n  const yOff = from.y - to.y;\n  return Math.sqrt(Math.pow(xOff, 2) + Math.pow(yOff, 2));\n}\n\nexport function degreesToRadians(degrees: number): number {\n  return (degrees * Math.PI) / 180;\n}\n\nexport function radiansToDegrees(radians: number): number {\n  return (radians * 180) / Math.PI;\n}\n\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport function lerp(start: number, end: number, t: number): number {\n  return start + (end - start) * t;\n}","import * as createjs from '@thegraid/createjs-module';\nimport { GameObject, Position } from '@types';\nimport { calculateAngle, calculateDistance } from '@utils/math';\n\nexport class Mouse implements GameObject {\n  private shape: createjs.Shape;\n  private stage: createjs.Stage;\n  private position: Position;\n  private playerPosition: Position;\n  private angle: number = 0;\n  private distance: number = 0;\n\n  constructor(stage: createjs.Stage) {\n    this.stage = stage;\n    this.position = { x: 0, y: 0 };\n    this.playerPosition = { x: 0, y: 0 };\n    \n    // Create crosshair shape\n    this.shape = new createjs.Shape();\n    this.shape.graphics\n      .beginFill(\"rgb(0, 232, 255)\")\n      .drawPolyStar(0, 0, 15, 4, 0.95, 0);\n    \n    stage.addChild(this.shape);\n  }\n\n  public update(): void {\n    // Update crosshair position to follow mouse\n    this.shape.x = this.position.x;\n    this.shape.y = this.position.y;\n    \n    // Calculate angle and distance from player\n    this.angle = calculateAngle(this.playerPosition, this.position);\n    this.distance = calculateDistance(this.playerPosition, this.position);\n  }\n\n  public updateMousePosition(x: number, y: number): void {\n    this.position.x = x;\n    this.position.y = y;\n  }\n\n  public updatePlayerPosition(position: Position): void {\n    this.playerPosition = position;\n  }\n\n  public getAngle(): number {\n    return this.angle * -1; // Invert for player rotation\n  }\n\n  public getDistance(): number {\n    return this.distance;\n  }\n\n  public getPosition(): Position {\n    return { ...this.position };\n  }\n}","import * as createjs from '@thegraid/createjs-module';\nimport { GameObject, Position, WeaponType, WeaponProjectile } from '@types';\nimport { gameConfig } from '@config/gameConfig';\nimport { degreesToRadians } from '@utils/math';\n\ninterface Projectile extends WeaponProjectile {\n  velocityX: number;\n  velocityY: number;\n  amplitude?: number;\n}\n\nexport class Phaser implements GameObject {\n  private stage: createjs.Stage;\n  private type: WeaponType;\n  private projectiles: Projectile[] = [];\n  private playerPosition: Position;\n  private mousePosition: Position;\n  private angle: number = 0;\n  \n  private limit: number;\n  private speed: number;\n  private firing: boolean = false;\n  \n  // Ammo system - separate for each weapon type\n  private weaponAmmo: Map<WeaponType, { current: number; max: number; regenTimer: number; }> = new Map();\n  private lastShotTime: Map<WeaponType, number> = new Map();\n  \n  // Weapon configs\n  private weaponConfigs: Map<WeaponType, {\n    limit: number;\n    speed: number;\n    maxAmmo: number;\n    ammoRegenRate: number;\n    ammoConsumption: number;\n    shotCooldown: number;\n    projectileSize?: number;\n  }> = new Map();\n  \n  // Dub cannon specific\n  private cycle: number = 0;\n  private cycleDown: boolean = false;\n  private cycleMax: number = 2;\n  private baseAmplitude: number = 40;\n  private flip: number = 1;\n  \n  // Blur filters\n  private blurX: createjs.BlurFilter;\n  private blurY: createjs.BlurFilter;\n  private superBlur: createjs.BlurFilter;\n  \n  // Beam connector for circle weapon\n  private beamConnector: createjs.Shape;\n\n  constructor(stage: createjs.Stage, type: WeaponType = WeaponType.LASER) {\n    this.stage = stage;\n    this.type = type;\n    \n    const { phaser, circle } = gameConfig.weapons;\n    \n    // Initialize weapon configs\n    this.weaponConfigs.set(WeaponType.LASER, {\n      limit: phaser.limit,\n      speed: phaser.speed,\n      maxAmmo: phaser.maxAmmo,\n      ammoRegenRate: phaser.ammoRegenRate,\n      ammoConsumption: phaser.ammoConsumption,\n      shotCooldown: phaser.shotCooldown\n    });\n    \n    this.weaponConfigs.set(WeaponType.DUB, {\n      limit: phaser.limit,\n      speed: phaser.speed,\n      maxAmmo: phaser.maxAmmo,\n      ammoRegenRate: phaser.ammoRegenRate,\n      ammoConsumption: phaser.ammoConsumption * 2, // Dub uses more ammo\n      shotCooldown: phaser.shotCooldown\n    });\n    \n    this.weaponConfigs.set(WeaponType.CIRCLE, {\n      limit: circle.limit,\n      speed: circle.speed,\n      maxAmmo: circle.maxAmmo,\n      ammoRegenRate: circle.ammoRegenRate,\n      ammoConsumption: circle.ammoConsumption,\n      shotCooldown: circle.shotCooldown,\n      projectileSize: circle.projectileSize\n    });\n    \n    // Initialize ammo for each weapon type\n    for (const [weaponType, config] of this.weaponConfigs.entries()) {\n      this.weaponAmmo.set(weaponType, {\n        current: config.maxAmmo,\n        max: config.maxAmmo,\n        regenTimer: 0\n      });\n      this.lastShotTime.set(weaponType, 0);\n    }\n    \n    // Set compatibility variables for legacy code\n    this.limit = phaser.limit;\n    this.speed = phaser.speed;\n    \n    this.playerPosition = { x: 0, y: 0 };\n    this.mousePosition = { x: 0, y: 0 };\n    \n    // Create blur filters with smaller values for better visibility\n    this.blurX = new createjs.BlurFilter(5, 0, 1);\n    this.blurY = new createjs.BlurFilter(0, 5, 1);\n    this.superBlur = new createjs.BlurFilter(10, 10, 1);\n    \n    // Create beam connector shape for circle weapon\n    this.beamConnector = new createjs.Shape();\n    this.stage.addChild(this.beamConnector);\n  }\n\n  public update(): void {\n    this.updateAngle();\n    this.updateAmmo();\n    \n    if (this.firing && this.canFire()) {\n      this.createProjectile();\n    }\n    \n    this.updateProjectiles();\n  }\n\n  private updateAngle(): void {\n    const xOff = (this.playerPosition.x - this.mousePosition.x) * -1;\n    const yOff = this.playerPosition.y - this.mousePosition.y;\n    \n    this.angle = (Math.atan(xOff / yOff) / Math.PI) * 180;\n    if (yOff > 0) {\n      this.angle += -180;\n    }\n  }\n\n  private createProjectile(): void {\n    if (this.type === WeaponType.LASER) {\n      this.createLaserProjectile();\n    } else if (this.type === WeaponType.DUB) {\n      this.createDubProjectile();\n    } else if (this.type === WeaponType.CIRCLE) {\n      this.createCircleProjectile();\n    }\n    \n    // Consume ammo for current weapon\n    const config = this.weaponConfigs.get(this.type)!;\n    const ammo = this.weaponAmmo.get(this.type)!;\n    ammo.current = Math.max(0, ammo.current - config.ammoConsumption);\n    this.lastShotTime.set(this.type, Date.now() / 1000);\n  }\n\n  private createLaserProjectile(): void {\n    const shape = new createjs.Shape();\n    shape.graphics\n      .beginFill(\"rgb(107, 233, 255)\")\n      .drawRect(0, 0, 2, 22);\n    \n    // Use fixed values instead of getBounds()\n    shape.regY = 11; // height / 2\n    shape.regX = -1;\n    shape.rotation = this.angle;\n    shape.x = this.playerPosition.x;\n    shape.y = this.playerPosition.y;\n    shape.alpha = 1;\n    \n    // Temporarily disable filters for visibility\n    // shape.filters = [this.blurX, this.blurY, this.superBlur];\n    // shape.cache(-15, -15, 40, 40);\n    \n    this.stage.addChild(shape);\n    \n    const angleRad = degreesToRadians(this.angle + 270);\n    const projectile: Projectile = {\n      shape,\n      rotation: this.angle,\n      alpha: 1,\n      velocityX: Math.cos(angleRad) * this.speed,\n      velocityY: Math.sin(angleRad) * this.speed\n    };\n    \n    this.projectiles.push(projectile);\n  }\n\n  private createDubProjectile(): void {\n    const amplitude = this.baseAmplitude - Math.random() * 10;\n    const shape = new createjs.Shape();\n    shape.graphics\n      .beginFill(\"rgb(107, 233, 255)\")\n      .drawRect(0, 0, amplitude, 6);\n    \n    // Use fixed values based on the drawn rectangle\n    shape.regY = 3; // center Y\n    shape.regX = amplitude / 2; // center X\n    shape.rotation = this.angle;\n    \n    const angleRad = degreesToRadians(shape.rotation + 270);\n    const offsetX = this.playerPosition.x + \n      Math.cos(angleRad) * 3.5 - \n      Math.cos(angleRad) * amplitude / 2;\n    const offsetY = this.playerPosition.y + \n      Math.sin(angleRad) * 3.5 - \n      Math.sin(angleRad) * amplitude / 2;\n    \n    shape.x = offsetX + 2.5 * this.flip;\n    shape.y = offsetY + 2.5 * this.flip;\n    shape.alpha = 0.7;\n    \n    // Temporarily disable filters for visibility\n    // shape.filters = [this.blurX, this.blurY, this.superBlur];\n    // shape.cache(-amplitude, -10, amplitude * 2 + 20, 20);\n    \n    this.stage.addChild(shape);\n    \n    const projectile: Projectile = {\n      shape,\n      rotation: this.angle,\n      alpha: 0.7,\n      velocityX: Math.cos(angleRad) * (this.speed / 2),\n      velocityY: Math.sin(angleRad) * (this.speed / 2),\n      amplitude\n    };\n    \n    this.projectiles.push(projectile);\n    this.flip *= -1;\n  }\n\n  private createCircleProjectile(): void {\n    const config = this.weaponConfigs.get(WeaponType.CIRCLE)!;\n    const shape = new createjs.Shape();\n    shape.graphics\n      .beginFill(\"rgb(138, 43, 226)\") // Purple color\n      .drawCircle(0, 0, config.projectileSize!);\n    \n    shape.x = this.playerPosition.x;\n    shape.y = this.playerPosition.y;\n    shape.alpha = 0.9;\n    \n    this.stage.addChild(shape);\n    \n    const angleRad = degreesToRadians(this.angle + 270);\n    const projectile: Projectile = {\n      shape,\n      rotation: this.angle,\n      alpha: 0.9,\n      velocityX: Math.cos(angleRad) * config.speed,\n      velocityY: Math.sin(angleRad) * config.speed\n    };\n    \n    this.projectiles.push(projectile);\n  }\n\n  private updateProjectiles(): void {\n    if (this.type === WeaponType.DUB) {\n      this.updateDubCycle();\n    }\n    \n    // Clear beam connector at the start of each frame\n    this.beamConnector.graphics.clear();\n    \n    // Collect circle projectiles for beam drawing\n    const circleProjectiles: Projectile[] = [];\n    \n    for (let i = this.projectiles.length - 1; i >= 0; i--) {\n      const projectile = this.projectiles[i];\n      \n      // Update position\n      if (this.type === WeaponType.LASER) {\n        projectile.shape.x += projectile.velocityX * (1 - Math.random() * 0.25);\n        projectile.shape.y += projectile.velocityY * (1 - Math.random() * 0.25);\n      } else {\n        projectile.shape.x += projectile.velocityX;\n        projectile.shape.y += projectile.velocityY;\n        \n        if (this.type === WeaponType.DUB) {\n          projectile.shape.scaleX = this.cycle * this.flip;\n        }\n      }\n      \n      // Fade out (slower for circles)\n      const fadeRate = this.type === WeaponType.CIRCLE ? 0.005 : (this.type === WeaponType.LASER ? 0.015 : 0.02);\n      projectile.shape.alpha -= fadeRate;\n      \n      // Remove if out of bounds or faded\n      if (this.isProjectileOutOfBounds(projectile.shape) || projectile.shape.alpha <= 0) {\n        this.stage.removeChild(projectile.shape);\n        this.projectiles.splice(i, 1);\n      } else if (this.type === WeaponType.CIRCLE) {\n        // Collect circle projectiles that are still active\n        circleProjectiles.push(projectile);\n      }\n    }\n    \n    // Draw beam connections for circle weapon\n    if (this.type === WeaponType.CIRCLE && circleProjectiles.length > 1) {\n      this.drawBeamConnections(circleProjectiles);\n    }\n  }\n\n  private updateDubCycle(): void {\n    if (this.cycle < this.cycleMax && !this.cycleDown) {\n      this.cycle += 0.001;\n    } else {\n      this.cycleDown = true;\n    }\n    \n    if (this.cycleDown && this.cycle > 0) {\n      this.cycle -= 0.001;\n    }\n    \n    if (this.cycle <= 0) {\n      this.cycleDown = false;\n    }\n    \n    if (!this.firing && this.cycle > 0.4) {\n      this.cycleDown = true;\n      this.cycle -= 0.001;\n    }\n  }\n\n  private isProjectileOutOfBounds(shape: createjs.Shape): boolean {\n    return shape.x < 0 || \n           shape.x > window.innerWidth || \n           shape.y < 0 || \n           shape.y > window.innerHeight;\n  }\n\n  public startFiring(): void {\n    this.firing = true;\n  }\n\n  public stopFiring(): void {\n    this.firing = false;\n  }\n\n  public updatePositions(playerPos: Position, mousePos: Position): void {\n    this.playerPosition = playerPos;\n    this.mousePosition = mousePos;\n  }\n\n  public setType(type: WeaponType): void {\n    this.type = type;\n  }\n\n  public getProjectiles(): Projectile[] {\n    return this.projectiles;\n  }\n\n  private updateAmmo(): void {\n    const deltaTime = 1 / gameConfig.fps; // Frame time in seconds\n    \n    // Regenerate ammo for all weapon types\n    for (const [weaponType, config] of this.weaponConfigs.entries()) {\n      const ammo = this.weaponAmmo.get(weaponType)!;\n      \n      if (ammo.current < ammo.max) {\n        ammo.regenTimer += deltaTime;\n        const ammoToRegen = ammo.regenTimer * config.ammoRegenRate;\n        \n        if (ammoToRegen >= 1) {\n          const ammoGained = Math.floor(ammoToRegen);\n          ammo.current = Math.min(ammo.max, ammo.current + ammoGained);\n          ammo.regenTimer = ammoToRegen - ammoGained; // Keep fractional part\n        }\n      } else {\n        ammo.regenTimer = 0; // Reset timer when full\n      }\n    }\n  }\n\n  private canFire(): boolean {\n    const currentTime = Date.now() / 1000;\n    const config = this.weaponConfigs.get(this.type)!;\n    const ammo = this.weaponAmmo.get(this.type)!;\n    const lastShot = this.lastShotTime.get(this.type) || 0;\n    \n    const hasAmmo = ammo.current >= config.ammoConsumption;\n    const cooldownReady = (currentTime - lastShot) >= config.shotCooldown;\n    const hasProjectileSpace = this.projectiles.length < config.limit;\n    \n    return hasAmmo && cooldownReady && hasProjectileSpace;\n  }\n\n  public getCurrentAmmo(): number {\n    const ammo = this.weaponAmmo.get(this.type)!;\n    return ammo.current;\n  }\n\n  public getMaxAmmo(): number {\n    const ammo = this.weaponAmmo.get(this.type)!;\n    return ammo.max;\n  }\n\n  public getAmmoPercentage(): number {\n    const ammo = this.weaponAmmo.get(this.type)!;\n    return ammo.current / ammo.max;\n  }\n  \n  public getType(): WeaponType {\n    return this.type;\n  }\n\n  public refillAllAmmo(): void {\n    // Refill ammo for all weapon types\n    for (const [weaponType, config] of this.weaponConfigs.entries()) {\n      const ammo = this.weaponAmmo.get(weaponType)!;\n      ammo.current = ammo.max;\n      ammo.regenTimer = 0;\n    }\n  }\n  \n  private drawBeamConnections(circleProjectiles: Projectile[]): void {\n    // Sort projectiles by distance from player (closest first)\n    const sortedProjectiles = circleProjectiles.sort((a, b) => {\n      const distA = Math.sqrt(\n        Math.pow(a.shape.x - this.playerPosition.x, 2) + \n        Math.pow(a.shape.y - this.playerPosition.y, 2)\n      );\n      const distB = Math.sqrt(\n        Math.pow(b.shape.x - this.playerPosition.x, 2) + \n        Math.pow(b.shape.y - this.playerPosition.y, 2)\n      );\n      return distA - distB;\n    });\n    \n    // Draw connections between consecutive projectiles\n    this.beamConnector.graphics.setStrokeStyle(12, 'round', 'round');\n    \n    for (let i = 0; i < sortedProjectiles.length - 1; i++) {\n      const current = sortedProjectiles[i];\n      const next = sortedProjectiles[i + 1];\n      \n      // Calculate distance between projectiles\n      const dx = next.shape.x - current.shape.x;\n      const dy = next.shape.y - current.shape.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      \n      // Only connect if within 60 pixels\n      if (distance <= 60) {\n        // Calculate alpha based on the average of the two projectiles\n        const avgAlpha = (current.shape.alpha + next.shape.alpha) / 2 * 0.7;\n        \n        // Draw the beam segment\n        this.beamConnector.graphics\n          .beginStroke(`rgba(138, 43, 226, ${avgAlpha})`)\n          .moveTo(current.shape.x, current.shape.y)\n          .lineTo(next.shape.x, next.shape.y);\n      }\n    }\n    \n    // Optional: Connect first projectile to player\n    if (sortedProjectiles.length > 0) {\n      const first = sortedProjectiles[0];\n      const dx = first.shape.x - this.playerPosition.x;\n      const dy = first.shape.y - this.playerPosition.y;\n      const distToPlayer = Math.sqrt(dx * dx + dy * dy);\n      \n      // Only connect if within 25 pixels of player\n      if (distToPlayer <= 25) {\n        this.beamConnector.graphics\n          .beginStroke(`rgba(138, 43, 226, ${first.shape.alpha * 0.5})`)\n          .moveTo(this.playerPosition.x, this.playerPosition.y)\n          .lineTo(first.shape.x, first.shape.y);\n      }\n    }\n  }\n}","import * as createjs from '@thegraid/createjs-module';\nimport { GameObject, Position } from '@types';\nimport { gameConfig } from '@config/gameConfig';\n\nexport class Kick implements GameObject {\n  private shape: createjs.Shape;\n  private stage: createjs.Stage;\n  private playerPosition: Position;\n  \n  private thickness: number = 6;\n  private expandRate: number;\n  private decayRate: number;\n  private maxRadius: number;\n  private currentDecayRate: number;\n  \n  private active: boolean = false;\n  private elapsed: boolean = false;\n  private loop: boolean = false;\n\n  constructor(stage: createjs.Stage) {\n    this.stage = stage;\n    this.playerPosition = { x: 0, y: 0 };\n    \n    const { kick } = gameConfig.weapons;\n    this.expandRate = kick.expandRate;\n    this.decayRate = kick.decayRate;\n    this.maxRadius = kick.maxRadius;\n    this.currentDecayRate = this.decayRate;\n    \n    // Create kick effect shape\n    this.shape = new createjs.Shape();\n    this.shape.graphics\n      .beginFill(\"rgb(120, 162, 171)\")\n      .drawCircle(0, 0, 1);\n    this.shape.alpha = 0;\n    \n    stage.addChild(this.shape);\n  }\n\n  public update(): void {\n    if (this.elapsed) {\n      this.currentDecayRate -= 1;\n      if (this.currentDecayRate < 0) {\n        this.loop = false;\n        this.elapsed = false;\n        this.currentDecayRate = this.decayRate;\n      }\n    }\n    \n    if (this.active) {\n      this.loop = true;\n      this.shape.alpha = 0.85;\n      this.active = false;\n    }\n    \n    if (this.loop) {\n      // Expand the circle\n      this.shape.scaleX += 0.5 + 0.44 * this.shape.scaleX;\n      this.shape.scaleY += 0.5 + 0.44 * this.shape.scaleY;\n      \n      // Position at player location\n      this.shape.x = this.playerPosition.x;\n      this.shape.y = this.playerPosition.y;\n      \n      // Fade out\n      this.shape.alpha -= 0.06;\n      \n      // Reset when too large or too faded\n      if (this.shape.scaleX > this.maxRadius || this.shape.alpha <= 0) {\n        this.reset();\n      }\n    } else {\n      this.reset();\n    }\n  }\n\n  public trigger(playerPosition: Position): void {\n    if (!this.loop) {\n      this.playerPosition = playerPosition;\n      this.active = true;\n      this.elapsed = true;\n    }\n  }\n\n  private reset(): void {\n    this.shape.scaleX = 1;\n    this.shape.scaleY = 1;\n    this.shape.alpha = 0;\n    this.loop = false;\n  }\n\n  public isActive(): boolean {\n    return this.loop;\n  }\n\n  public getPosition(): Position {\n    return { x: this.shape.x, y: this.shape.y };\n  }\n\n  public getCurrentRadius(): number {\n    return this.maxRadius * this.shape.scaleX;\n  }\n\n  public checkCollision(position: Position, radius: number): boolean {\n    if (!this.loop) return false;\n    \n    const dx = position.x - this.shape.x;\n    const dy = position.y - this.shape.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    const kickRadius = this.shape.scaleX;\n    \n    return distance < kickRadius + radius;\n  }\n}","import * as createjs from '@thegraid/createjs-module';\nimport { GameObject, Position } from '@types';\nimport { ViewportManager } from '@utils/viewport';\n\nexport class WaveTriggerZone implements GameObject {\n  private stage: createjs.Stage;\n  private shape: createjs.Shape;\n  private glowShape: createjs.Shape;\n  private container: createjs.Container;\n  private position: Position;\n  private size: number = 60;\n  private glowIntensity: number = 0;\n  private glowDirection: number = 1;\n  private visible: boolean = false;\n  private viewportManager: ViewportManager;\n\n  constructor(stage: createjs.Stage, viewportManager: ViewportManager) {\n    this.stage = stage;\n    this.viewportManager = viewportManager;\n    \n    // Position at bottom center of screen using viewport dimensions\n    const dims = this.viewportManager.getDimensions();\n    this.position = {\n      x: dims.width / 2,\n      y: dims.height - 100 // 100px from bottom\n    };\n\n    // Create container for the trigger zone\n    this.container = new createjs.Container();\n    this.container.x = this.position.x;\n    this.container.y = this.position.y;\n\n    // Create glow effect (larger, semi-transparent)\n    this.glowShape = new createjs.Shape();\n    this.glowShape.graphics\n      .beginFill('rgba(255, 255, 255, 0.3)')\n      .drawRect(-this.size / 2 - 10, -this.size / 2 - 10, this.size + 20, this.size + 20);\n\n    // Create main trigger zone square\n    this.shape = new createjs.Shape();\n    this.shape.graphics\n      .beginFill('#ffffff')\n      .drawRect(-this.size / 2, -this.size / 2, this.size, this.size);\n\n    // Add shapes to container\n    this.container.addChild(this.glowShape);\n    this.container.addChild(this.shape);\n    \n    // Initially hidden\n    this.container.alpha = 0;\n    this.stage.addChild(this.container);\n  }\n\n  public update(): void {\n    if (!this.visible) return;\n\n    // Animate pulsing glow effect\n    this.glowIntensity += this.glowDirection * 0.03;\n    \n    if (this.glowIntensity >= 1) {\n      this.glowIntensity = 1;\n      this.glowDirection = -1;\n    } else if (this.glowIntensity <= 0.3) {\n      this.glowIntensity = 0.3;\n      this.glowDirection = 1;\n    }\n\n    // Update glow appearance\n    this.glowShape.graphics.clear();\n    this.glowShape.graphics\n      .beginFill(`rgba(255, 255, 255, ${this.glowIntensity * 0.4})`)\n      .drawRect(-this.size / 2 - 15, -this.size / 2 - 15, this.size + 30, this.size + 30);\n\n    // Update main square brightness\n    this.shape.graphics.clear();\n    this.shape.graphics\n      .beginFill(`rgba(255, 255, 255, ${0.8 + this.glowIntensity * 0.2})`)\n      .drawRect(-this.size / 2, -this.size / 2, this.size, this.size);\n  }\n\n  public show(): void {\n    this.visible = true;\n    this.container.alpha = 1;\n  }\n\n  public hide(): void {\n    this.visible = false;\n    this.container.alpha = 0;\n  }\n\n  public isVisible(): boolean {\n    return this.visible;\n  }\n\n  public checkCollision(playerPosition: Position, playerRadius: number = 14): boolean {\n    if (!this.visible) return false;\n\n    const dx = playerPosition.x - this.position.x;\n    const dy = playerPosition.y - this.position.y;\n    \n    // Check if player is within the square bounds\n    const halfSize = this.size / 2;\n    return Math.abs(dx) < halfSize + playerRadius && \n           Math.abs(dy) < halfSize + playerRadius;\n  }\n\n  public updatePosition(): void {\n    // Update position based on current viewport dimensions\n    const dims = this.viewportManager.getDimensions();\n    this.position = {\n      x: dims.width / 2,\n      y: dims.height - 100 // 100px from bottom\n    };\n    \n    this.container.x = this.position.x;\n    this.container.y = this.position.y;\n  }\n\n  public getPosition(): Position {\n    return { ...this.position };\n  }\n\n  public destroy(): void {\n    this.stage.removeChild(this.container);\n  }\n}","import * as createjs from '@thegraid/createjs-module';\nimport { GameObject, Position } from '@types';\nimport { ViewportManager } from '@utils/viewport';\n\nexport class HealthTradingZone implements GameObject {\n  private stage: createjs.Stage;\n  private shape: createjs.Shape;\n  private glowShape: createjs.Shape;\n  private container: createjs.Container;\n  private position: Position;\n  private size: number = 50;\n  private viewportManager: ViewportManager;\n  \n  // Visual state management\n  private visible: boolean = false;\n  private isPlayerInZone: boolean = false;\n  private dimAlpha: number = 0.3;\n  private activeAlpha: number = 1.0;\n  private glowIntensity: number = 0;\n  private glowDirection: number = 1;\n  \n  // Trading mechanics\n  private tradingTimer: number = 0;\n  private tradingCooldown: number = 2; // 2 seconds between trades\n  private experienceCost: number = 5;\n  private healthGain: number = 10;\n\n  constructor(stage: createjs.Stage, viewportManager: ViewportManager) {\n    this.stage = stage;\n    this.viewportManager = viewportManager;\n    \n    // Position above health bar using viewport dimensions\n    this.updatePosition();\n\n    // Create container for the trading zone\n    this.container = new createjs.Container();\n    this.container.x = this.position.x;\n    this.container.y = this.position.y;\n\n    // Create glow effect (larger, semi-transparent)\n    this.glowShape = new createjs.Shape();\n    this.drawGlowShape();\n\n    // Create main trading zone square\n    this.shape = new createjs.Shape();\n    this.drawMainShape();\n\n    // Add shapes to container\n    this.container.addChild(this.glowShape);\n    this.container.addChild(this.shape);\n    \n    // Initially hidden\n    this.container.alpha = 0;\n    this.stage.addChild(this.container);\n  }\n\n  public update(): void {\n    if (!this.visible) return;\n\n    // Update trading timer\n    if (this.isPlayerInZone) {\n      this.tradingTimer += 1 / 55; // Game runs at 55 FPS\n    } else {\n      this.tradingTimer = 0; // Reset timer when player leaves\n    }\n\n    // Update visual effects\n    this.updateVisualEffects();\n  }\n\n  private updateVisualEffects(): void {\n    if (this.isPlayerInZone) {\n      // Active state - bright with pulsing glow\n      this.glowIntensity += this.glowDirection * 0.04;\n      \n      if (this.glowIntensity >= 1) {\n        this.glowIntensity = 1;\n        this.glowDirection = -1;\n      } else if (this.glowIntensity <= 0.5) {\n        this.glowIntensity = 0.5;\n        this.glowDirection = 1;\n      }\n\n      // Update shapes for active state\n      this.drawGlowShape();\n      this.drawMainShape();\n    } else {\n      // Dim state - subtle static glow\n      this.glowIntensity = 0.2;\n      this.drawGlowShape();\n      this.drawMainShape();\n    }\n  }\n\n  private drawGlowShape(): void {\n    const glowAlpha = this.isPlayerInZone ? this.glowIntensity * 0.4 : 0.1;\n    const glowSize = this.isPlayerInZone ? 20 : 10;\n    \n    this.glowShape.graphics.clear();\n    this.glowShape.graphics\n      .beginFill(`rgba(0, 180, 174, ${glowAlpha})`)\n      .drawRect(-this.size / 2 - glowSize, -this.size / 2 - glowSize, \n                this.size + glowSize * 2, this.size + glowSize * 2);\n  }\n\n  private drawMainShape(): void {\n    const shapeAlpha = this.isPlayerInZone ? this.activeAlpha : this.dimAlpha;\n    const brightness = this.isPlayerInZone ? (0.8 + this.glowIntensity * 0.2) : 0.6;\n    \n    this.shape.graphics.clear();\n    this.shape.graphics\n      .beginFill(`rgba(0, ${Math.floor(180 * brightness)}, ${Math.floor(174 * brightness)}, ${shapeAlpha})`)\n      .drawRect(-this.size / 2, -this.size / 2, this.size, this.size);\n  }\n\n  public show(): void {\n    this.visible = true;\n    this.container.alpha = 1;\n  }\n\n  public hide(): void {\n    this.visible = false;\n    this.isPlayerInZone = false;\n    this.tradingTimer = 0;\n    this.container.alpha = 0;\n  }\n\n  public isVisible(): boolean {\n    return this.visible;\n  }\n\n  public setPlayerInZone(inZone: boolean): void {\n    this.isPlayerInZone = inZone;\n    if (!inZone) {\n      this.tradingTimer = 0;\n    }\n  }\n\n  public getIsPlayerInZone(): boolean {\n    return this.isPlayerInZone;\n  }\n\n  public canTrade(): boolean {\n    return this.isPlayerInZone && this.tradingTimer >= this.tradingCooldown;\n  }\n\n  public resetTradingTimer(): void {\n    this.tradingTimer = 0;\n  }\n\n  public getExperienceCost(): number {\n    return this.experienceCost;\n  }\n\n  public getHealthGain(): number {\n    return this.healthGain;\n  }\n\n  public checkCollision(playerPosition: Position, playerRadius: number = 14): boolean {\n    if (!this.visible) return false;\n\n    const dx = playerPosition.x - this.position.x;\n    const dy = playerPosition.y - this.position.y;\n    \n    // Check if player is within the square bounds\n    const halfSize = this.size / 2;\n    return Math.abs(dx) < halfSize + playerRadius && \n           Math.abs(dy) < halfSize + playerRadius;\n  }\n\n  public updatePosition(): void {\n    // Position above health bar\n    const dims = this.viewportManager.getDimensions();\n    \n    // Health bar is at bottom-left, 20px from left, 30px from bottom\n    // Position trading zone above it\n    this.position = {\n      x: 20 + 100, // Center over health bar (health bar is 200px wide)\n      y: dims.height - 100 // 70px above health bar\n    };\n    \n    if (this.container) {\n      this.container.x = this.position.x;\n      this.container.y = this.position.y;\n    }\n  }\n\n  public getPosition(): Position {\n    return { ...this.position };\n  }\n\n  public destroy(): void {\n    this.stage.removeChild(this.container);\n  }\n}","export class InputManager {\n  private pressedKeys: Set<string> = new Set();\n  private mousePosition: { x: number; y: number } = { x: 0, y: 0 };\n  private mouseDown: boolean = false;\n  private stage: createjs.Stage;\n\n  constructor(stage: createjs.Stage) {\n    this.stage = stage;\n    this.initializeEventListeners();\n  }\n\n  private initializeEventListeners(): void {\n    // Keyboard events\n    document.addEventListener('keydown', this.handleKeyDown.bind(this));\n    document.addEventListener('keyup', this.handleKeyUp.bind(this));\n    \n    // Mouse events\n    document.addEventListener('mousedown', this.handleMouseDown.bind(this));\n    document.addEventListener('mouseup', this.handleMouseUp.bind(this));\n    document.addEventListener('mousemove', this.handleMouseMove.bind(this));\n    \n    // Handle mouse leaving the window\n    document.addEventListener('mouseleave', () => {\n      this.mouseDown = false;\n    });\n    \n    // Prevent right-click context menu in game\n    document.addEventListener('contextmenu', (e) => {\n      e.preventDefault();\n    });\n  }\n\n  private handleKeyDown(event: KeyboardEvent): void {\n    this.pressedKeys.add(event.code);\n  }\n\n  private handleKeyUp(event: KeyboardEvent): void {\n    this.pressedKeys.delete(event.code);\n  }\n\n  private handleMouseDown(event: MouseEvent): void {\n    if (event.button === 0) { // Left click only\n      this.mouseDown = true;\n    }\n  }\n\n  private handleMouseUp(event: MouseEvent): void {\n    if (event.button === 0) {\n      this.mouseDown = false;\n    }\n  }\n\n  private handleMouseMove(event: MouseEvent): void {\n    const canvas = this.stage.canvas as HTMLCanvasElement;\n    const rect = canvas.getBoundingClientRect();\n    \n    this.mousePosition.x = (event.clientX - rect.left) * (canvas.width / rect.width);\n    this.mousePosition.y = (event.clientY - rect.top) * (canvas.height / rect.height);\n  }\n\n  public isKeyPressed(key: string): boolean {\n    return this.pressedKeys.has(key);\n  }\n\n  public isAnyKeyPressed(keys: string[]): boolean {\n    return keys.some(key => this.pressedKeys.has(key));\n  }\n\n  public getPressedKeys(): Set<string> {\n    return new Set(this.pressedKeys);\n  }\n\n  public isMouseDown(): boolean {\n    return this.mouseDown && this.isMouseInBounds();\n  }\n\n  public getMousePosition(): { x: number; y: number } {\n    return { ...this.mousePosition };\n  }\n\n  private isMouseInBounds(): boolean {\n    const canvas = this.stage.canvas as HTMLCanvasElement;\n    return this.mousePosition.x >= 0 && \n           this.mousePosition.x <= canvas.width &&\n           this.mousePosition.y >= 0 && \n           this.mousePosition.y <= canvas.height;\n  }\n\n  public destroy(): void {\n    document.removeEventListener('keydown', this.handleKeyDown);\n    document.removeEventListener('keyup', this.handleKeyUp);\n    document.removeEventListener('mousedown', this.handleMouseDown);\n    document.removeEventListener('mouseup', this.handleMouseUp);\n    document.removeEventListener('mousemove', this.handleMouseMove);\n  }\n}","import { GameObject, WaveData, WaveState, WaveConfig } from '@types';\nimport { gameConfig } from '@config/gameConfig';\n\nexport interface EnemySpawnInfo {\n  x: number;\n  y: number;\n  hp: number;\n  speed: number;\n}\n\nexport class WaveManager implements GameObject {\n  private waveData: WaveData;\n  private config: WaveConfig;\n  private restTimer: number = 0;\n  private spawnTimer: number = 0;\n  private countdownTimer: number = 0;\n  private countingDown: boolean = false;\n  private onWaveStart: () => void;\n  private onWaveComplete: () => void;\n  private onEnemySpawn: (spawnInfo: EnemySpawnInfo) => void;\n\n  constructor(\n    onWaveStart: () => void,\n    onWaveComplete: () => void,\n    onEnemySpawn: (spawnInfo: EnemySpawnInfo) => void\n  ) {\n    this.config = gameConfig.waves;\n    this.onWaveStart = onWaveStart;\n    this.onWaveComplete = onWaveComplete;\n    this.onEnemySpawn = onEnemySpawn;\n\n    // Initialize first wave\n    this.waveData = {\n      number: 1,\n      totalEnemies: this.calculateEnemiesForWave(1),\n      enemiesRemaining: 0,\n      enemiesSpawned: 0,\n      state: WaveState.PREPARATION\n    };\n\n    this.waveData.enemiesRemaining = this.waveData.totalEnemies;\n  }\n\n  public update(): void {\n    const deltaTime = 1 / gameConfig.fps; // Time per frame in seconds\n\n    switch (this.waveData.state) {\n      case WaveState.PREPARATION:\n        this.handlePreparation();\n        break;\n\n      case WaveState.ACTIVE:\n        this.handleActiveWave(deltaTime);\n        break;\n\n      case WaveState.REST:\n        this.handleRestPeriod(deltaTime);\n        break;\n\n      case WaveState.COMPLETE:\n        // Game complete state - could add end game logic here\n        break;\n    }\n  }\n\n  private handlePreparation(): void {\n    // Start the wave immediately after preparation\n    this.startWave();\n  }\n\n  private handleActiveWave(deltaTime: number): void {\n    // Check if we need to spawn more enemies\n    if (this.waveData.enemiesSpawned < this.waveData.totalEnemies) {\n      this.spawnTimer -= deltaTime;\n      \n      if (this.spawnTimer <= 0) {\n        this.spawnEnemy();\n        this.spawnTimer = this.config.spawnDelay;\n      }\n    }\n  }\n\n  private handleRestPeriod(deltaTime: number): void {\n    // Handle countdown if triggered manually\n    if (this.countingDown) {\n      this.countdownTimer -= deltaTime;\n      \n      if (this.countdownTimer <= 0) {\n        this.countingDown = false;\n        this.startNextWave();\n      }\n    }\n    // No automatic progression - waves only start manually\n  }\n\n  private startWave(): void {\n    this.waveData.state = WaveState.ACTIVE;\n    this.spawnTimer = 0; // Start spawning immediately\n    this.onWaveStart();\n  }\n\n  private spawnEnemy(): void {\n    const spawnInfo = this.generateEnemySpawnInfo();\n    this.onEnemySpawn(spawnInfo);\n    this.waveData.enemiesSpawned++;\n  }\n\n  private generateEnemySpawnInfo(): EnemySpawnInfo {\n    // Calculate enemy stats for current wave\n    const baseHp = gameConfig.enemy.hp;\n    const baseSpeed = gameConfig.enemy.baseSpeed;\n    \n    const hpMultiplier = Math.pow(this.config.difficultyScaling.hpMultiplier, this.waveData.number - 1);\n    const speedMultiplier = Math.pow(this.config.difficultyScaling.speedMultiplier, this.waveData.number - 1);\n    \n    const hp = Math.floor(baseHp * hpMultiplier);\n    const speed = baseSpeed * speedMultiplier;\n\n    // Generate spawn position at random edge\n    const { x, y } = this.generateSpawnPosition();\n\n    return { x, y, hp, speed };\n  }\n\n  private generateSpawnPosition(): { x: number; y: number } {\n    const { width, height } = gameConfig.canvas;\n    const side = Math.floor(Math.random() * 4);\n    let x = 0, y = 0;\n    \n    switch (side) {\n      case 0: // Top\n        x = Math.random() * width;\n        y = -50;\n        break;\n      case 1: // Right\n        x = width + 50;\n        y = Math.random() * height;\n        break;\n      case 2: // Bottom\n        x = Math.random() * width;\n        y = height + 50;\n        break;\n      case 3: // Left\n        x = -50;\n        y = Math.random() * height;\n        break;\n    }\n    \n    return { x, y };\n  }\n\n  private calculateEnemiesForWave(waveNumber: number): number {\n    return this.config.baseEnemyCount + (waveNumber - 1) * this.config.enemyScaling;\n  }\n\n  public onEnemyKilled(): void {\n    this.waveData.enemiesRemaining--;\n    \n    if (this.waveData.enemiesRemaining <= 0) {\n      this.completeWave();\n    }\n  }\n\n  private completeWave(): void {\n    this.waveData.state = WaveState.REST;\n    this.restTimer = 0; // No automatic timer\n    this.onWaveComplete();\n  }\n\n  private startNextWave(): void {\n    this.waveData.number++;\n    this.waveData.totalEnemies = this.calculateEnemiesForWave(this.waveData.number);\n    this.waveData.enemiesRemaining = this.waveData.totalEnemies;\n    this.waveData.enemiesSpawned = 0;\n    this.waveData.state = WaveState.PREPARATION;\n  }\n\n  public getWaveData(): WaveData {\n    return { ...this.waveData };\n  }\n\n  public getRestTimeRemaining(): number {\n    return Math.max(0, this.restTimer);\n  }\n\n  public getCountdownTimeRemaining(): number {\n    return Math.max(0, this.countdownTimer);\n  }\n\n  public isCountingDown(): boolean {\n    return this.countingDown;\n  }\n\n  public isInRestPeriod(): boolean {\n    return this.waveData.state === WaveState.REST;\n  }\n\n  public triggerWaveStart(): void {\n    if (this.waveData.state === WaveState.REST && !this.countingDown) {\n      this.countingDown = true;\n      this.countdownTimer = 3; // 3 second countdown\n    }\n  }\n\n  public getCurrentWave(): number {\n    return this.waveData.number;\n  }\n\n  public getPointsPerKill(): number {\n    return this.config.pointsPerKill;\n  }\n}","import * as createjs from '@thegraid/createjs-module';\nimport { GameObject, WaveData, WaveState, HealthBarElements, HealthBarConfig, WeaponType } from '@types';\nimport { ViewportManager, ViewportDimensions } from '@utils/viewport';\nimport { gameConfig } from '@config/gameConfig';\n\nexport class UIManager implements GameObject {\n  private stage: createjs.Stage;\n  private viewportManager: ViewportManager;\n  private waveCircles: createjs.Shape[] = [];\n  private enemyCircles: createjs.Shape[] = [];\n  private experienceCircles: createjs.Shape[] = [];\n  private waveContainer: createjs.Container;\n  private enemyContainer: createjs.Container;\n  private experienceContainer: createjs.Container;\n  private timerDisplay: createjs.Text;\n  private wavePopup: createjs.Container | null = null;\n  private score: number = 0;\n  \n  // Health bar - simplified approach\n  private healthBackground: createjs.Shape;\n  private healthFill: createjs.Shape;\n  private healthBorder: createjs.Shape;\n  private lowHealthWarning: boolean = false;\n  private lowHealthFlashTimer: number = 0;\n  \n  // Ammo bar\n  private ammoBackground: createjs.Shape;\n  private ammoFill: createjs.Shape;\n  private ammoBorder: createjs.Shape;\n  private lowAmmoWarning: boolean = false;\n  private lowAmmoFlashTimer: number = 0;\n  \n  // Track current values for resize operations\n  private currentHealthPercentage: number = 1;\n  private currentHealth: number = 100;\n  private maxHealth: number = 100;\n  private currentAmmoPercentage: number = 1;\n  private currentAmmo: number = 100;\n  private maxAmmo: number = 100;\n  private currentWeaponType: WeaponType = WeaponType.LASER;\n  \n  // Game over screen\n  private gameOverContainer: createjs.Container | null = null;\n\n  constructor(stage: createjs.Stage, viewportManager: ViewportManager) {\n    this.stage = stage;\n    this.viewportManager = viewportManager;\n    this.createUIElements();\n    \n    // Listen for viewport changes\n    this.viewportManager.onResize((dimensions) => {\n      this.handleResize(dimensions);\n    });\n  }\n\n  private createUIElements(): void {\n    const ui = gameConfig.ui;\n\n    // Wave circles (top-left) - blue circles\n    this.waveContainer = new createjs.Container();\n    const wavePos = this.viewportManager.getResponsivePosition(ui.waveDisplay.x, ui.waveDisplay.y, 'left', 'top');\n    this.waveContainer.x = wavePos.x;\n    this.waveContainer.y = wavePos.y;\n    this.stage.addChild(this.waveContainer);\n    this.updateWaveCircles(1); // Start with wave 1\n\n    // Enemy circles (top-left, below wave) - red circles\n    this.enemyContainer = new createjs.Container();\n    const enemyPos = this.viewportManager.getResponsivePosition(ui.enemyCounter.x, ui.enemyCounter.y, 'left', 'top');\n    this.enemyContainer.x = enemyPos.x;\n    this.enemyContainer.y = enemyPos.y;\n    this.stage.addChild(this.enemyContainer);\n    this.updateEnemyCircles(0); // Start with 0 enemies\n\n    // Experience circles (top-right) - green circles\n    this.experienceContainer = new createjs.Container();\n    const expPos = this.viewportManager.getResponsivePosition(ui.experienceCounter.x, ui.experienceCounter.y, 'right', 'top');\n    this.experienceContainer.x = expPos.x;\n    this.experienceContainer.y = expPos.y;\n    this.stage.addChild(this.experienceContainer);\n    this.updateExperienceCircles(0); // Start with 0 experience\n\n    // Timer display (top-center)\n    this.timerDisplay = new createjs.Text('', `${this.viewportManager.getScaledFont(20)}px Hammersmith One`, '#ffff00');\n    const timerPos = this.viewportManager.getResponsivePosition(ui.timerDisplay.x, ui.timerDisplay.y, 'center', 'top');\n    this.timerDisplay.x = timerPos.x;\n    this.timerDisplay.y = timerPos.y;\n    this.timerDisplay.textAlign = 'center';\n    this.timerDisplay.alpha = 0;\n    this.stage.addChild(this.timerDisplay);\n\n    // Score display removed for clean UI\n\n    // Create diamond health bar\n    this.createDiamondHealthBar();\n    \n    // Create ammo bar\n    this.createAmmoBar();\n  }\n\n  public update(): void {\n    // Update low health warning animation\n    const deltaTime = 1 / 60; // Assume 60 FPS for UI updates\n    this.lowHealthFlashTimer += deltaTime;\n    this.lowAmmoFlashTimer += deltaTime;\n    \n    if (this.lowHealthWarning) {\n      // Flash cycle every 0.8 seconds\n      const flashCycle = Math.sin(this.lowHealthFlashTimer * Math.PI * 2.5);\n      this.healthFill.alpha = 0.7 + (flashCycle * 0.3); // Range: 0.4 to 1.0\n    } else {\n      this.healthFill.alpha = 1.0;\n    }\n    \n    if (this.lowAmmoWarning) {\n      // Flash cycle every 0.6 seconds (slightly faster than health)\n      const flashCycle = Math.sin(this.lowAmmoFlashTimer * Math.PI * 3);\n      this.ammoFill.alpha = 0.6 + (flashCycle * 0.4); // Range: 0.2 to 1.0\n    } else {\n      this.ammoFill.alpha = 1.0;\n    }\n  }\n\n  public updateWaveInfo(waveData: WaveData): void {\n    this.updateWaveCircles(waveData.number);\n    this.updateEnemyCircles(waveData.enemiesRemaining);\n  }\n\n  public updateExperienceDisplay(experienceCount: number): void {\n    this.updateExperienceCircles(experienceCount);\n  }\n  \n  private updateWaveCircles(waveNumber: number): void {\n    // Clear existing circles\n    this.waveContainer.removeAllChildren();\n    this.waveCircles = [];\n    \n    // Create blue circles for wave count\n    const circleSize = 6;\n    const spacing = 16;\n    \n    for (let i = 0; i < waveNumber; i++) {\n      const circle = new createjs.Shape();\n      circle.graphics\n        .setStrokeStyle(2)\n        .beginStroke('#003366') // Dark blue border\n        .beginFill('#0099ff')\n        .drawCircle(0, 0, circleSize);\n      circle.x = i * spacing;\n      circle.y = 0;\n      \n      this.waveContainer.addChild(circle);\n      this.waveCircles.push(circle);\n    }\n  }\n  \n  private updateEnemyCircles(enemyCount: number): void {\n    // Clear existing circles\n    this.enemyContainer.removeAllChildren();\n    this.enemyCircles = [];\n    \n    // Create red circles for enemy count (limit display to prevent UI overflow)\n    const maxDisplay = 20; // Maximum circles to display\n    const displayCount = Math.min(enemyCount, maxDisplay);\n    const circleSize = 4;\n    const spacing = 12;\n    const circlesPerRow = 10;\n    \n    for (let i = 0; i < displayCount; i++) {\n      const circle = new createjs.Shape();\n      circle.graphics\n        .setStrokeStyle(1.5)\n        .beginStroke('#660000') // Dark red border\n        .beginFill('#ff0033')\n        .drawCircle(0, 0, circleSize);\n      \n      // Arrange in rows\n      const row = Math.floor(i / circlesPerRow);\n      const col = i % circlesPerRow;\n      circle.x = col * spacing;\n      circle.y = row * spacing;\n      \n      this.enemyContainer.addChild(circle);\n      this.enemyCircles.push(circle);\n    }\n    \n    // If more enemies than max display, add a \"+\" indicator\n    if (enemyCount > maxDisplay) {\n      const plusText = new createjs.Text(`+${enemyCount - maxDisplay}`, '10px Hammersmith One', '#ff0033');\n      const lastRow = Math.floor((displayCount - 1) / circlesPerRow);\n      plusText.x = (displayCount % circlesPerRow) * spacing + 16;\n      plusText.y = lastRow * spacing - 5;\n      this.enemyContainer.addChild(plusText);\n    }\n  }\n\n  private updateExperienceCircles(experienceCount: number): void {\n    // Clear existing circles\n    this.experienceContainer.removeAllChildren();\n    this.experienceCircles = [];\n    \n    // Each circle represents 5 experience points\n    const experiencePerCircle = 5;\n    const circleCount = Math.floor(experienceCount / experiencePerCircle);\n    \n    // Create green circles for experience count (limit display to prevent UI overflow)\n    const maxDisplay = 15; // Maximum circles to display\n    const displayCount = Math.min(circleCount, maxDisplay);\n    const circleSize = 5;\n    const spacing = 14;\n    const circlesPerRow = 8;\n    \n    for (let i = 0; i < displayCount; i++) {\n      const circle = new createjs.Shape();\n      circle.graphics\n        .setStrokeStyle(2)\n        .beginStroke('#004400') // Dark green border\n        .beginFill('#00cc44')   // Bright green fill\n        .drawCircle(0, 0, circleSize);\n      \n      // Arrange in rows, stacking to the left (reverse order)\n      const row = Math.floor(i / circlesPerRow);\n      const col = i % circlesPerRow;\n      circle.x = -(col * spacing); // Negative X to stack left\n      circle.y = row * spacing;\n      \n      this.experienceContainer.addChild(circle);\n      this.experienceCircles.push(circle);\n    }\n    \n    // If more circles than max display, add a \"+\" indicator\n    if (circleCount > maxDisplay) {\n      const remainingCircles = circleCount - maxDisplay;\n      const remainingExperience = remainingCircles * experiencePerCircle;\n      const plusText = new createjs.Text(`+${remainingExperience}`, '10px Hammersmith One', '#00cc44');\n      const lastRow = Math.floor((displayCount - 1) / circlesPerRow);\n      plusText.x = -((displayCount % circlesPerRow) * spacing + 16); // Negative X for left stacking\n      plusText.y = lastRow * spacing - 5;\n      this.experienceContainer.addChild(plusText);\n    }\n  }\n\n  public showTimer(timeRemaining: number): void {\n    if (timeRemaining <= 3) {\n      // Show countdown during wave start countdown\n      this.timerDisplay.text = `Wave starting in: ${Math.ceil(timeRemaining)}s`;\n      this.timerDisplay.color = '#ff0000'; // Red for countdown\n    } else {\n      // This shouldn't happen with new system, but fallback\n      this.timerDisplay.text = `Next Wave in: ${Math.ceil(timeRemaining)}s`;\n      this.timerDisplay.color = '#ffff00'; // Yellow for normal timer\n    }\n    this.timerDisplay.alpha = 1;\n  }\n\n  public hideTimer(): void {\n    this.timerDisplay.alpha = 0;\n  }\n\n  public showWaveStartPopup(waveNumber: number): void {\n    // Remove existing popup if any\n    this.hideWavePopup();\n\n    // Create popup container\n    this.wavePopup = new createjs.Container();\n\n    // Use canvas dimensions directly for now\n    const width = this.stage.canvas.width;\n    const height = this.stage.canvas.height;\n    const centerX = width / 2;\n    const centerY = height / 2;\n    \n    // Background overlay\n    const overlay = new createjs.Shape();\n    overlay.graphics.beginFill('rgba(0, 0, 0, 0.7)').drawRect(0, 0, width, height);\n    this.wavePopup.addChild(overlay);\n\n    // Main text - responsive sizing and positioning\n    const mainText = new createjs.Text(\n      `WAVE ${waveNumber}`,\n      `bold ${this.viewportManager.getScaledFont(72)}px Hammersmith One`,\n      '#00ffff'\n    );\n    mainText.x = centerX;\n    mainText.y = centerY - 40;\n    mainText.textAlign = 'center';\n    mainText.textBaseline = 'middle';\n    this.wavePopup.addChild(mainText);\n\n    // Subtitle - responsive sizing and positioning\n    const subtitle = new createjs.Text(\n      'GET READY!',\n      `${this.viewportManager.getScaledFont(36)}px Hammersmith One`,\n      '#ffffff'\n    );\n    subtitle.x = centerX;\n    subtitle.y = centerY + 60;\n    subtitle.textAlign = 'center';\n    subtitle.textBaseline = 'middle';\n    this.wavePopup.addChild(subtitle);\n\n    // Add to stage\n    this.stage.addChild(this.wavePopup);\n\n    // Animate popup\n    this.animateWavePopup();\n  }\n\n  private animateWavePopup(): void {\n    if (!this.wavePopup) return;\n\n    // Start with larger scale and fade in\n    this.wavePopup.scaleX = 1.5;\n    this.wavePopup.scaleY = 1.5;\n    this.wavePopup.alpha = 0;\n\n    // Tween to normal size and full opacity\n    createjs.Tween.get(this.wavePopup)\n      .to({ scaleX: 1, scaleY: 1, alpha: 1 }, 500, createjs.Ease.backOut)\n      .wait(1500) // Show for 1.5 seconds\n      .to({ alpha: 0 }, 500)\n      .call(() => {\n        this.hideWavePopup();\n      });\n  }\n\n  public hideWavePopup(): void {\n    if (this.wavePopup) {\n      this.stage.removeChild(this.wavePopup);\n      this.wavePopup = null;\n    }\n  }\n  \n  public showGameOverScreen(killCount: number, waveReached: number): void {\n    // Remove existing game over screen if any\n    this.hideGameOverScreen();\n    \n    // Create game over container\n    this.gameOverContainer = new createjs.Container();\n    \n    // Use canvas dimensions directly\n    const width = this.stage.canvas.width;\n    const height = this.stage.canvas.height;\n    const centerX = width / 2;\n    const centerY = height / 2;\n    \n    // Background overlay\n    const overlay = new createjs.Shape();\n    overlay.graphics.beginFill('rgba(0, 0, 0, 0.8)').drawRect(0, 0, width, height);\n    this.gameOverContainer.addChild(overlay);\n    \n    // Game Over title\n    const gameOverText = new createjs.Text(\n      'GAME OVER',\n      `bold ${this.viewportManager.getScaledFont(72)}px Hammersmith One`,\n      '#ff0000'\n    );\n    gameOverText.x = centerX;\n    gameOverText.y = centerY - 120;\n    gameOverText.textAlign = 'center';\n    gameOverText.textBaseline = 'middle';\n    this.gameOverContainer.addChild(gameOverText);\n    \n    // Kill count\n    const killText = new createjs.Text(\n      `Enemies Defeated: ${killCount}`,\n      `${this.viewportManager.getScaledFont(36)}px Hammersmith One`,\n      '#ffffff'\n    );\n    killText.x = centerX;\n    killText.y = centerY - 40;\n    killText.textAlign = 'center';\n    killText.textBaseline = 'middle';\n    this.gameOverContainer.addChild(killText);\n    \n    // Wave reached\n    const waveText = new createjs.Text(\n      `Wave Reached: ${waveReached}`,\n      `${this.viewportManager.getScaledFont(36)}px Hammersmith One`,\n      '#ffffff'\n    );\n    waveText.x = centerX;\n    waveText.y = centerY + 20;\n    waveText.textAlign = 'center';\n    waveText.textBaseline = 'middle';\n    this.gameOverContainer.addChild(waveText);\n    \n    // Restart prompt\n    const restartText = new createjs.Text(\n      'Press SPACE to restart',\n      `${this.viewportManager.getScaledFont(24)}px Hammersmith One`,\n      '#00ffff'\n    );\n    restartText.x = centerX;\n    restartText.y = centerY + 80;\n    restartText.textAlign = 'center';\n    restartText.textBaseline = 'middle';\n    this.gameOverContainer.addChild(restartText);\n    \n    // Add pulsing effect to restart text\n    createjs.Tween.get(restartText, { loop: true })\n      .to({ alpha: 0.5 }, 1000)\n      .to({ alpha: 1 }, 1000);\n    \n    // Add to stage\n    this.stage.addChild(this.gameOverContainer);\n  }\n  \n  public hideGameOverScreen(): void {\n    if (this.gameOverContainer) {\n      createjs.Tween.removeTweens(this.gameOverContainer);\n      this.stage.removeChild(this.gameOverContainer);\n      this.gameOverContainer = null;\n    }\n  }\n  \n  public resetCounters(): void {\n    // Reset to initial state: Wave 1, 0 enemies, 0 experience\n    this.updateWaveCircles(1);\n    this.updateEnemyCircles(0);\n    this.updateExperienceCircles(0);\n  }\n  \n  public destroy(): void {\n    // Clean up all UI elements\n    if (this.waveContainer) this.stage.removeChild(this.waveContainer);\n    if (this.enemyContainer) this.stage.removeChild(this.enemyContainer);\n    if (this.experienceContainer) this.stage.removeChild(this.experienceContainer);\n    if (this.timerDisplay) this.stage.removeChild(this.timerDisplay);\n    if (this.healthBackground) this.stage.removeChild(this.healthBackground);\n    if (this.healthFill) this.stage.removeChild(this.healthFill);\n    if (this.healthBorder) this.stage.removeChild(this.healthBorder);\n    if (this.ammoBackground) this.stage.removeChild(this.ammoBackground);\n    if (this.ammoFill) this.stage.removeChild(this.ammoFill);\n    if (this.ammoBorder) this.stage.removeChild(this.ammoBorder);\n    if (this.gameOverContainer) this.stage.removeChild(this.gameOverContainer);\n    if (this.wavePopup) this.stage.removeChild(this.wavePopup);\n  }\n\n  public showWaveCompletePopup(): void {\n    // Remove existing popup if any\n    this.hideWavePopup();\n\n    // Create popup container\n    this.wavePopup = new createjs.Container();\n\n    // Use canvas dimensions directly\n    const width = this.stage.canvas.width;\n    const height = this.stage.canvas.height;\n    const centerX = width / 2;\n    const centerY = height / 2;\n\n    // Background overlay\n    const overlay = new createjs.Shape();\n    overlay.graphics.beginFill('rgba(0, 100, 0, 0.8)').drawRect(0, 0, width, height);\n    this.wavePopup.addChild(overlay);\n\n    // Main text - responsive sizing and positioning\n    const mainText = new createjs.Text(\n      'WAVE COMPLETE!',\n      `bold ${this.viewportManager.getScaledFont(56)}px Hammersmith One`,\n      '#00ff00'\n    );\n    mainText.x = centerX;\n    mainText.y = centerY - 40;\n    mainText.textAlign = 'center';\n    mainText.textBaseline = 'middle';\n    this.wavePopup.addChild(mainText);\n\n    // Subtitle - responsive sizing and positioning\n    const subtitle = new createjs.Text(\n      'Walk into the white zone to start',\n      `${this.viewportManager.getScaledFont(24)}px Hammersmith One`,\n      '#ffffff'\n    );\n    subtitle.x = centerX;\n    subtitle.y = centerY + 60;\n    subtitle.textAlign = 'center';\n    subtitle.textBaseline = 'middle';\n    this.wavePopup.addChild(subtitle);\n\n    // Add to stage\n    this.stage.addChild(this.wavePopup);\n\n    // Auto-hide after 2 seconds\n    setTimeout(() => {\n      this.hideWavePopup();\n    }, 2000);\n  }\n\n  public addScore(points: number): void {\n    this.score += points;\n    // Score display removed for clean UI - just track internally\n  }\n\n  public getScore(): number {\n    return this.score;\n  }\n\n  private createDiamondHealthBar(): void {\n    const dims = this.viewportManager.getDimensions();\n    const ui = gameConfig.ui;\n    \n    // Fixed position in bottom left (in pixels, not percentage)\n    const leftX = 20; // 20px from left edge\n    const bottomY = dims.height - 30; // 30px from bottom\n    const width = 200; // Fixed 200px width\n    const height = 10; // Fixed 10px height\n    const skew = 15; // Amount of rhombus skew\n\n    // Create health background (rhombus shape)\n    this.healthBackground = new createjs.Shape();\n    this.healthBackground.graphics\n      .beginFill('#222222')\n      .moveTo(leftX, bottomY)                    // Bottom left\n      .lineTo(leftX + skew, bottomY - height)    // Top left (skewed)\n      .lineTo(leftX + width + skew, bottomY - height) // Top right (skewed)\n      .lineTo(leftX + width, bottomY)            // Bottom right\n      .closePath();\n\n    // Create health fill (rhombus shape - starts full)\n    this.healthFill = new createjs.Shape();\n    this.updateDiamondFill(1.0, leftX, bottomY, width, height, skew); // Start at 100%\n\n    // Create health border (rhombus outline with dark teal)\n    this.healthBorder = new createjs.Shape();\n    this.healthBorder.graphics\n      .setStrokeStyle(2)\n      .beginStroke('#005555') // Dark teal border\n      .moveTo(leftX, bottomY)                    // Bottom left\n      .lineTo(leftX + skew, bottomY - height)    // Top left (skewed)\n      .lineTo(leftX + width + skew, bottomY - height) // Top right (skewed)\n      .lineTo(leftX + width, bottomY)            // Bottom right\n      .closePath();\n\n    // Add all elements to stage in order\n    this.stage.addChild(this.healthBackground);\n    this.stage.addChild(this.healthFill);\n    this.stage.addChild(this.healthBorder);\n  }\n\n  private updateDiamondFill(healthPercentage: number, leftX: number, bottomY: number, width: number, height: number, skew?: number): void {\n    const fillWidth = width * healthPercentage;\n    const actualSkew = skew || 15; // Default skew if not provided\n    \n    this.healthFill.graphics.clear();\n    if (fillWidth > 0) {\n      this.healthFill.graphics\n        .beginFill('rgb(0, 180, 174)') // Player diamond color\n        .moveTo(leftX, bottomY)                        // Bottom left (fixed)\n        .lineTo(leftX + actualSkew, bottomY - height)  // Top left (fixed)\n        .lineTo(leftX + fillWidth + actualSkew, bottomY - height) // Top right (shrinks from right)\n        .lineTo(leftX + fillWidth, bottomY)            // Bottom right (shrinks from right)\n        .closePath();\n    }\n  }\n\n  public updateHealthBar(healthPercentage: number, currentHealth: number, maxHealth: number): void {\n    // Store current values\n    this.currentHealthPercentage = healthPercentage;\n    this.currentHealth = currentHealth;\n    this.maxHealth = maxHealth;\n    \n    const dims = this.viewportManager.getDimensions();\n    \n    // Fixed position in bottom left\n    const leftX = 20;\n    const bottomY = dims.height - 30;\n    const width = 200;\n    const height = 10;\n    const skew = 15;\n    \n    // Update the rhombus fill\n    this.updateDiamondFill(healthPercentage, leftX, bottomY, width, height, skew);\n\n    // Health text removed for clean UI\n\n    // Check if we should show low health warning\n    const wasLowHealth = this.lowHealthWarning;\n    this.lowHealthWarning = healthPercentage <= 0.3;\n    \n    if (this.lowHealthWarning && !wasLowHealth) {\n      this.lowHealthFlashTimer = 0; // Reset timer when starting warning\n    }\n\n    // Debug logging\n    if (Math.random() < 0.05) {\n      console.log(`Diamond Health: ${Math.ceil(currentHealth)}/${maxHealth} (${Math.round(healthPercentage * 100)}%)`);\n    }\n  }\n\n  private createAmmoBar(): void {\n    const dims = this.viewportManager.getDimensions();\n    \n    // Fixed position in bottom right (mirroring health bar)\n    const rightX = dims.width - 220; // 220px from right edge (200px width + 20px margin)\n    const bottomY = dims.height - 30; // 30px from bottom\n    const width = 200; // Fixed 200px width\n    const height = 10; // Fixed 10px height\n    const skew = -15; // Negative skew for right-side rhombus\n\n    // Create ammo background (rhombus shape)\n    this.ammoBackground = new createjs.Shape();\n    this.ammoBackground.graphics\n      .beginFill('#222222')\n      .moveTo(rightX, bottomY)                    // Bottom left\n      .lineTo(rightX + skew, bottomY - height)    // Top left (skewed left)\n      .lineTo(rightX + width + skew, bottomY - height) // Top right (skewed left)\n      .lineTo(rightX + width, bottomY)            // Bottom right\n      .closePath();\n\n    // Create ammo fill (rhombus shape - starts full)\n    this.ammoFill = new createjs.Shape();\n    this.updateAmmoFill(1.0, rightX, bottomY, width, height, skew); // Start at 100%\n\n    // Create ammo border (rhombus outline with dark teal)\n    this.ammoBorder = new createjs.Shape();\n    this.ammoBorder.graphics\n      .setStrokeStyle(2)\n      .beginStroke('#005555') // Dark teal border to match health\n      .moveTo(rightX, bottomY)                    // Bottom left\n      .lineTo(rightX + skew, bottomY - height)    // Top left (skewed left)\n      .lineTo(rightX + width + skew, bottomY - height) // Top right (skewed left)\n      .lineTo(rightX + width, bottomY)            // Bottom right\n      .closePath();\n\n    // Add all elements to stage in order\n    this.stage.addChild(this.ammoBackground);\n    this.stage.addChild(this.ammoFill);\n    this.stage.addChild(this.ammoBorder);\n  }\n\n  private updateAmmoFill(ammoPercentage: number, rightX: number, bottomY: number, width: number, height: number, skew?: number | WeaponType, weaponType?: WeaponType): void {\n    // Handle parameter overloading for backward compatibility\n    let actualSkew: number;\n    let actualWeaponType: WeaponType | undefined;\n    \n    if (typeof skew === 'string') {\n      // Old signature: skew is actually weaponType\n      actualSkew = -15; // Default skew for right side\n      actualWeaponType = skew as WeaponType;\n    } else {\n      actualSkew = skew || -15;\n      actualWeaponType = weaponType || this.currentWeaponType;\n    }\n    \n    const fillWidth = width * ammoPercentage;\n    \n    this.ammoFill.graphics.clear();\n    if (fillWidth > 0) {\n      // Color based on weapon type and ammo percentage\n      let fillColor = '#6be9ff'; // Default cyan for laser/dub\n      \n      if (actualWeaponType === WeaponType.CIRCLE) {\n        // Purple for circle weapon\n        fillColor = '#8a2be2';\n      } else {\n        // Cyan for laser/dub with warning colors\n        if (ammoPercentage <= 0.25) {\n          fillColor = '#ff0000'; // Red for critical ammo\n        } else if (ammoPercentage <= 0.75) {\n          fillColor = '#ffff00'; // Yellow for medium ammo\n        }\n      }\n      \n      // Fill from left side, shrinking from right (opposite of health bar)\n      const fillOffset = width - fillWidth; // How much to offset from left\n      this.ammoFill.graphics\n        .beginFill(fillColor)\n        .moveTo(rightX + fillOffset, bottomY)                    // Bottom left (shrinks from left)\n        .lineTo(rightX + fillOffset + actualSkew, bottomY - height)    // Top left (shrinks from left)\n        .lineTo(rightX + width + actualSkew, bottomY - height)   // Top right (fixed)\n        .lineTo(rightX + width, bottomY)                         // Bottom right (fixed)\n        .closePath();\n    }\n  }\n\n  public updateAmmoBar(ammoPercentage: number, currentAmmo: number, maxAmmo: number, weaponType?: WeaponType): void {\n    // Store current values\n    this.currentAmmoPercentage = ammoPercentage;\n    this.currentAmmo = currentAmmo;\n    this.maxAmmo = maxAmmo;\n    if (weaponType) {\n      this.currentWeaponType = weaponType;\n    }\n    \n    const dims = this.viewportManager.getDimensions();\n    \n    // Fixed position in bottom right\n    const rightX = dims.width - 220;\n    const bottomY = dims.height - 30;\n    const width = 200;\n    const height = 10;\n    const skew = -15;\n    \n    // Update the rhombus fill\n    this.updateAmmoFill(ammoPercentage, rightX, bottomY, width, height, skew, this.currentWeaponType);\n\n    // Ammo text removed for clean UI\n\n    // Check if we should show low ammo warning\n    const wasLowAmmo = this.lowAmmoWarning;\n    this.lowAmmoWarning = ammoPercentage <= 0.25;\n    \n    if (this.lowAmmoWarning && !wasLowAmmo) {\n      this.lowAmmoFlashTimer = 0; // Reset timer when starting warning\n    }\n  }\n\n  private handleResize(_dimensions: ViewportDimensions): void {\n    // Update all UI element positions and sizes\n    const ui = gameConfig.ui;\n\n    // Update circle containers\n    const wavePos = this.viewportManager.getResponsivePosition(ui.waveDisplay.x, ui.waveDisplay.y, 'left', 'top');\n    this.waveContainer.x = wavePos.x;\n    this.waveContainer.y = wavePos.y;\n\n    const enemyPos = this.viewportManager.getResponsivePosition(ui.enemyCounter.x, ui.enemyCounter.y, 'left', 'top');\n    this.enemyContainer.x = enemyPos.x;\n    this.enemyContainer.y = enemyPos.y;\n\n    const expPos = this.viewportManager.getResponsivePosition(ui.experienceCounter.x, ui.experienceCounter.y, 'right', 'top');\n    this.experienceContainer.x = expPos.x;\n    this.experienceContainer.y = expPos.y;\n\n    const timerPos = this.viewportManager.getResponsivePosition(ui.timerDisplay.x, ui.timerDisplay.y, 'center', 'top');\n    this.timerDisplay.x = timerPos.x;\n    this.timerDisplay.y = timerPos.y;\n    this.timerDisplay.font = `${this.viewportManager.getScaledFont(20)}px Hammersmith One`;\n\n    // Score display removed for clean UI\n\n    // Recreate health and ammo bars with new dimensions\n    this.recreateHealthBar();\n    this.recreateAmmoBar();\n  }\n\n  private recreateHealthBar(): void {\n    // Remove existing elements\n    this.stage.removeChild(this.healthBackground);\n    this.stage.removeChild(this.healthFill);\n    this.stage.removeChild(this.healthBorder);\n\n    // Recreate with new dimensions\n    this.createDiamondHealthBar();\n    \n    // Re-apply current health state using stored values\n    this.updateHealthBar(this.currentHealthPercentage, this.currentHealth, this.maxHealth);\n  }\n\n  private recreateAmmoBar(): void {\n    // Remove existing elements\n    this.stage.removeChild(this.ammoBackground);\n    this.stage.removeChild(this.ammoFill);\n    this.stage.removeChild(this.ammoBorder);\n\n    // Recreate with new dimensions\n    this.createAmmoBar();\n    \n    // Re-apply current ammo state using stored values\n    this.updateAmmoBar(this.currentAmmoPercentage, this.currentAmmo, this.maxAmmo, this.currentWeaponType);\n  }\n\n  public setWaveState(state: WaveState, timeRemaining?: number): void {\n    switch (state) {\n      case WaveState.PREPARATION:\n        this.hideTimer();\n        break;\n      case WaveState.ACTIVE:\n        this.hideTimer();\n        break;\n      case WaveState.REST:\n        if (timeRemaining !== undefined) {\n          this.showTimer(timeRemaining);\n        }\n        break;\n      case WaveState.COMPLETE:\n        this.hideTimer();\n        break;\n    }\n  }\n}","import { Position } from '../types/index';\n\nexport interface ViewportDimensions {\n  width: number;\n  height: number;\n  scaleX: number;\n  scaleY: number;\n  offsetX: number;\n  offsetY: number;\n}\n\nexport interface ResponsivePosition {\n  x: number;\n  y: number;\n  anchorX?: 'left' | 'center' | 'right';\n  anchorY?: 'top' | 'center' | 'bottom';\n}\n\nexport class ViewportManager {\n  private canvas: HTMLCanvasElement;\n  private stage: createjs.Stage;\n  private targetWidth: number;\n  private targetHeight: number;\n  private targetAspectRatio: number;\n  private minWidth: number;\n  private maxWidth: number;\n  private currentDimensions: ViewportDimensions;\n  private resizeCallbacks: Array<(dimensions: ViewportDimensions) => void> = [];\n\n  constructor(\n    canvas: HTMLCanvasElement,\n    stage: createjs.Stage,\n    targetWidth: number = 1400,\n    targetHeight: number = 800,\n    minWidth: number = 800,\n    maxWidth: number = 1920\n  ) {\n    this.canvas = canvas;\n    this.stage = stage;\n    this.targetWidth = targetWidth;\n    this.targetHeight = targetHeight;\n    this.targetAspectRatio = targetWidth / targetHeight;\n    this.minWidth = minWidth;\n    this.maxWidth = maxWidth;\n\n    this.currentDimensions = {\n      width: targetWidth,\n      height: targetHeight,\n      scaleX: 1,\n      scaleY: 1,\n      offsetX: 0,\n      offsetY: 0\n    };\n\n    this.setupResizeListener();\n    this.updateViewport();\n  }\n\n  private setupResizeListener(): void {\n    const handleResize = () => {\n      this.updateViewport();\n    };\n\n    window.addEventListener('resize', handleResize);\n    window.addEventListener('orientationchange', () => {\n      // Delay to account for mobile orientation change\n      setTimeout(handleResize, 100);\n    });\n  }\n\n  public updateViewport(): void {\n    const containerWidth = window.innerWidth;\n    const containerHeight = window.innerHeight;\n\n    // Calculate the best fit while maintaining aspect ratio\n    let canvasWidth = containerWidth;\n    let canvasHeight = containerWidth / this.targetAspectRatio;\n\n    // If height exceeds container, scale by height instead\n    if (canvasHeight > containerHeight) {\n      canvasHeight = containerHeight;\n      canvasWidth = containerHeight * this.targetAspectRatio;\n    }\n\n    // Enforce min/max constraints\n    canvasWidth = Math.max(this.minWidth, Math.min(this.maxWidth, canvasWidth));\n    canvasHeight = canvasWidth / this.targetAspectRatio;\n\n    // Calculate scaling factors for coordinate conversion\n    const scaleX = canvasWidth / this.targetWidth;\n    const scaleY = canvasHeight / this.targetHeight;\n\n    // Center the canvas\n    const offsetX = (containerWidth - canvasWidth) / 2;\n    const offsetY = (containerHeight - canvasHeight) / 2;\n\n    // Update canvas dimensions\n    this.canvas.width = canvasWidth;\n    this.canvas.height = canvasHeight;\n    this.canvas.style.width = `${canvasWidth}px`;\n    this.canvas.style.height = `${canvasHeight}px`;\n\n    // Update stage bounds\n    this.stage.canvas = this.canvas;\n\n    // Store current dimensions\n    this.currentDimensions = {\n      width: canvasWidth,\n      height: canvasHeight,\n      scaleX,\n      scaleY,\n      offsetX,\n      offsetY\n    };\n\n    // Notify all callbacks about the viewport change\n    this.notifyResizeCallbacks();\n  }\n\n  public onResize(callback: (dimensions: ViewportDimensions) => void): void {\n    this.resizeCallbacks.push(callback);\n  }\n\n  private notifyResizeCallbacks(): void {\n    this.resizeCallbacks.forEach(callback => {\n      callback(this.currentDimensions);\n    });\n  }\n\n  public getDimensions(): ViewportDimensions {\n    return { ...this.currentDimensions };\n  }\n\n  public getResponsivePosition(\n    xPercent: number,\n    yPercent: number,\n    anchorX: 'left' | 'center' | 'right' = 'left',\n    anchorY: 'top' | 'center' | 'bottom' = 'top'\n  ): Position {\n    const dims = this.currentDimensions;\n    \n    let x = (xPercent / 100) * dims.width;\n    let y = (yPercent / 100) * dims.height;\n\n    // Apply anchor adjustments\n    if (anchorX === 'center') {\n      // No adjustment needed for center\n    } else if (anchorX === 'right') {\n      // No adjustment needed for right positioning\n    }\n\n    if (anchorY === 'center') {\n      // No adjustment needed for center\n    } else if (anchorY === 'bottom') {\n      // No adjustment needed for bottom positioning\n    }\n\n    return { x, y };\n  }\n\n  public scaleValue(value: number): number {\n    // Use the smaller scale factor to ensure elements fit\n    const scale = Math.min(this.currentDimensions.scaleX, this.currentDimensions.scaleY);\n    return value * scale;\n  }\n\n  public getScaledFont(baseFontSize: number): number {\n    const scale = Math.min(this.currentDimensions.scaleX, this.currentDimensions.scaleY);\n    return Math.max(12, Math.round(baseFontSize * scale));\n  }\n\n  public getCanvasCenter(): Position {\n    return {\n      x: this.currentDimensions.width / 2,\n      y: this.currentDimensions.height / 2\n    };\n  }\n\n  public destroy(): void {\n    window.removeEventListener('resize', this.updateViewport);\n    window.removeEventListener('orientationchange', this.updateViewport);\n    this.resizeCallbacks = [];\n  }\n}","import * as createjs from '@thegraid/createjs-module';\nimport { Player } from '@entities/Player';\nimport { Enemy } from '@entities/Enemy';\nimport { ExperienceOrb } from '@entities/ExperienceOrb';\nimport { EnemyProjectile } from '@entities/EnemyProjectile';\nimport { Mouse } from '@entities/Mouse';\nimport { Phaser } from '@entities/weapons/Phaser';\nimport { Kick } from '@entities/weapons/Kick';\nimport { WaveTriggerZone } from '@entities/WaveTriggerZone';\nimport { HealthTradingZone } from '@entities/HealthTradingZone';\nimport { InputManager } from './InputManager';\nimport { WaveManager, EnemySpawnInfo } from './WaveManager';\nimport { UIManager } from './UIManager';\nimport { gameConfig } from '@config/gameConfig';\nimport { WeaponType, EnemyAttackPattern } from '@types';\nimport { ViewportManager } from '@utils/viewport';\n\nexport class GameManager {\n  private stage: createjs.Stage;\n  private player: Player;\n  private enemies: Enemy[] = [];\n  private enemyProjectiles: EnemyProjectile[] = [];\n  private experienceOrbs: ExperienceOrb[] = [];\n  private totalExperience: number = 0;\n  private mouse: Mouse;\n  private phaser: Phaser;\n  private kick: Kick;\n  private inputManager: InputManager;\n  private waveManager: WaveManager;\n  private uiManager: UIManager;\n  private viewportManager: ViewportManager;\n  private waveTriggerZone: WaveTriggerZone;\n  private healthTradingZone: HealthTradingZone;\n  \n  private isPaused: boolean = false;\n  private currentWeaponIndex: number = 0;\n  private weaponTypes: WeaponType[] = [WeaponType.LASER, WeaponType.DUB, WeaponType.CIRCLE];\n  private lastWeaponSwitch: number = 0;\n  private killCount: number = 0;\n  private isGameOver: boolean = false;\n\n  constructor(canvasId: string) {\n    // Get canvas element\n    const canvas = document.getElementById(canvasId) as HTMLCanvasElement;\n    if (!canvas) {\n      throw new Error(`Canvas element with id '${canvasId}' not found`);\n    }\n    \n    // Initialize stage\n    this.stage = new createjs.Stage(canvas);\n    this.stage.enableMouseOver(20);\n    \n    // Initialize viewport manager\n    this.viewportManager = new ViewportManager(\n      canvas,\n      this.stage,\n      gameConfig.viewport.targetWidth,\n      gameConfig.viewport.targetHeight,\n      gameConfig.viewport.minWidth,\n      gameConfig.viewport.maxWidth\n    );\n    \n    // Initialize input manager\n    this.inputManager = new InputManager(this.stage);\n    \n    // Initialize game entities\n    const center = this.viewportManager.getCanvasCenter();\n    this.player = new Player(this.stage, center.x, center.y);\n    this.mouse = new Mouse(this.stage);\n    this.phaser = new Phaser(this.stage, WeaponType.LASER);\n    this.kick = new Kick(this.stage);\n    \n    // Initialize managers\n    this.uiManager = new UIManager(this.stage, this.viewportManager);\n    \n    // Initialize wave manager with callbacks\n    this.waveManager = new WaveManager(\n      () => this.onWaveStart(),\n      () => this.onWaveComplete(),\n      (spawnInfo: EnemySpawnInfo) => this.onEnemySpawn(spawnInfo)\n    );\n    \n    // Initialize wave trigger zone\n    this.waveTriggerZone = new WaveTriggerZone(this.stage, this.viewportManager);\n    \n    // Initialize health trading zone\n    this.healthTradingZone = new HealthTradingZone(this.stage, this.viewportManager);\n    \n    // Show trigger zone initially for testing - will be hidden when first wave starts\n    this.waveTriggerZone.show();\n    \n    // Set up ticker\n    createjs.Ticker.framerate = gameConfig.fps;\n    createjs.Ticker.addEventListener('tick', this.update.bind(this));\n  }\n\n  private update(event: createjs.Event): void {\n    // Handle input even when game over (for restart)\n    this.handleInput();\n    \n    if (this.isPaused || this.isGameOver) return;\n    \n    // Check for game over\n    if (!this.player.isAlive()) {\n      this.triggerGameOver();\n      return;\n    }\n    \n    // Update wave manager\n    this.waveManager.update();\n    \n    // Update wave trigger zone\n    this.waveTriggerZone.updatePosition();\n    this.waveTriggerZone.update();\n    \n    // Update health trading zone\n    this.healthTradingZone.updatePosition();\n    this.healthTradingZone.update();\n    \n    // Check wave trigger zone collision\n    if (this.waveManager.isInRestPeriod() && this.waveTriggerZone.isVisible()) {\n      if (this.waveTriggerZone.checkCollision(this.player.getPosition())) {\n        // Trigger wave start countdown\n        this.waveManager.triggerWaveStart();\n        this.phaser.refillAllAmmo(); // Refill ammo when triggering wave\n        this.waveTriggerZone.hide();\n      }\n    }\n    \n    // Check health trading zone collision\n    if (this.waveManager.isInRestPeriod() && this.healthTradingZone.isVisible()) {\n      const playerPos = this.player.getPosition();\n      const isInZone = this.healthTradingZone.checkCollision(playerPos);\n      \n      // Update zone state\n      this.healthTradingZone.setPlayerInZone(isInZone);\n      \n      // Handle trading\n      if (isInZone && this.healthTradingZone.canTrade()) {\n        const experienceCost = this.healthTradingZone.getExperienceCost();\n        const healthGain = this.healthTradingZone.getHealthGain();\n        \n        // Check if player has enough experience and isn't at max health\n        if (this.totalExperience >= experienceCost && this.player.getCurrentHealth() < this.player.getMaxHealth()) {\n          // Perform the trade\n          this.totalExperience -= experienceCost;\n          this.player.addHealth(healthGain);\n          this.healthTradingZone.resetTradingTimer();\n        }\n      }\n    }\n    \n    // Update UI\n    this.uiManager.updateWaveInfo(this.waveManager.getWaveData());\n    this.uiManager.updateExperienceDisplay(this.totalExperience);\n    this.uiManager.updateHealthBar(\n      this.player.getHealthPercentage(),\n      this.player.getCurrentHealth(),\n      this.player.getMaxHealth()\n    );\n    this.uiManager.updateAmmoBar(\n      this.phaser.getAmmoPercentage(),\n      this.phaser.getCurrentAmmo(),\n      this.phaser.getMaxAmmo(),\n      this.phaser.getType()\n    );\n    \n    // Update timer display based on wave state\n    if (this.waveManager.isInRestPeriod()) {\n      if (this.waveManager.isCountingDown()) {\n        this.uiManager.showTimer(this.waveManager.getCountdownTimeRemaining());\n      } else {\n        this.uiManager.hideTimer();\n      }\n    } else {\n      this.uiManager.hideTimer();\n    }\n    \n    // Input handling moved to beginning of update for game over support\n    \n    // Update mouse position\n    const mousePos = this.inputManager.getMousePosition();\n    this.mouse.updateMousePosition(mousePos.x, mousePos.y);\n    this.mouse.updatePlayerPosition(this.player.getPosition());\n    \n    // Update player angle based on mouse\n    this.player.setAngle(this.mouse.getAngle());\n    \n    // Update weapons with positions\n    this.phaser.updatePositions(this.player.getPosition(), this.mouse.getPosition());\n    \n    // Update all game objects\n    this.player.update();\n    this.mouse.update();\n    this.phaser.update();\n    this.kick.update();\n    this.uiManager.update();\n    \n    // Update enemies\n    this.updateEnemies();\n    \n    // Update enemy projectiles\n    this.updateEnemyProjectiles();\n    \n    // Update experience orbs\n    this.updateExperienceOrbs();\n    \n    \n    // Check collisions\n    this.checkCollisions();\n    \n    // Update stage\n    this.stage.update();\n  }\n\n  private handleInput(): void {\n    const keys = this.inputManager.getPressedKeys();\n    \n    // Player movement\n    this.player.handleMovement(keys);\n    \n    // Weapon firing\n    if (this.inputManager.isMouseDown()) {\n      this.phaser.startFiring();\n    } else {\n      this.phaser.stopFiring();\n    }\n    \n    // Kick ability - moved to Q key\n    if (this.inputManager.isKeyPressed('KeyQ')) {\n      this.kick.trigger(this.player.getPosition());\n    }\n    \n    // Weapon cycling with E key\n    const currentTime = Date.now() / 1000;\n    if (this.inputManager.isKeyPressed('KeyE') && (currentTime - this.lastWeaponSwitch) > 0.3) {\n      this.currentWeaponIndex = (this.currentWeaponIndex + 1) % this.weaponTypes.length;\n      this.phaser.setType(this.weaponTypes[this.currentWeaponIndex]);\n      this.lastWeaponSwitch = currentTime;\n    }\n    \n    // Pause game\n    if (this.inputManager.isKeyPressed('Escape')) {\n      this.togglePause();\n    }\n    \n    // Restart game (only when game over)\n    if (this.isGameOver && this.inputManager.isKeyPressed('Space')) {\n      this.restartGame();\n    }\n  }\n\n  private updateEnemies(): void {\n    for (let i = this.enemies.length - 1; i >= 0; i--) {\n      const enemy = this.enemies[i];\n      enemy.update();\n      \n      // Collect enemy projectiles\n      const newProjectiles = enemy.getProjectiles();\n      for (const projectile of newProjectiles) {\n        if (!this.enemyProjectiles.includes(projectile)) {\n          this.enemyProjectiles.push(projectile);\n        }\n      }\n      \n      if (!enemy.isAlive()) {\n        // Get death position before removing enemy\n        const deathPos = enemy.destroy();\n        this.enemies.splice(i, 1);\n        this.killCount++; // Increment kill counter\n        \n        // Spawn experience orb at death position\n        if (deathPos) {\n          const orb = new ExperienceOrb(this.stage, this.player, deathPos.x, deathPos.y);\n          this.experienceOrbs.push(orb);\n        }\n        \n        // Award points and notify wave manager\n        const points = this.waveManager.getPointsPerKill();\n        this.uiManager.addScore(points);\n        this.waveManager.onEnemyKilled();\n      }\n    }\n  }\n\n  private updateEnemyProjectiles(): void {\n    for (let i = this.enemyProjectiles.length - 1; i >= 0; i--) {\n      const projectile = this.enemyProjectiles[i];\n      \n      if (!projectile.isAlive()) {\n        this.enemyProjectiles.splice(i, 1);\n      }\n    }\n  }\n\n  private updateExperienceOrbs(): void {\n    for (let i = this.experienceOrbs.length - 1; i >= 0; i--) {\n      const orb = this.experienceOrbs[i];\n      orb.update();\n      \n      // Check for collection\n      const playerPos = this.player.getPosition();\n      const orbPos = orb.getPosition();\n      const dx = playerPos.x - orbPos.x;\n      const dy = playerPos.y - orbPos.y;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n      \n      // Collect if within collection radius\n      if (distance < gameConfig.experienceOrb.collectionRadius) {\n        orb.collect();\n        this.totalExperience += orb.getExperienceValue();\n        \n        \n        // Log for debugging\n        console.log(`Experience collected: ${orb.getExperienceValue()}, Total: ${this.totalExperience}`);\n      }\n      \n      // Remove collected orbs\n      if (orb.isCollected()) {\n        this.experienceOrbs.splice(i, 1);\n      }\n    }\n  }\n\n  private checkCollisions(): void {\n    // Check player-enemy collisions\n    if (this.player.isAlive()) {\n      for (const enemy of this.enemies) {\n        const playerPos = this.player.getPosition();\n        const enemyPos = enemy.getPosition();\n        \n        // Check collision using appropriate method based on enemy type\n        const playerRadius = 14;\n        let collision = false;\n        \n        if (enemy.checkWormCollision) {\n          // Use worm-specific collision detection\n          collision = enemy.checkWormCollision(playerPos, playerRadius + 5);\n        } else {\n          // Use standard circular collision\n          const dx = playerPos.x - enemyPos.x;\n          const dy = playerPos.y - enemyPos.y;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n          const collisionDistance = playerRadius + enemy.getCollisionRadius() + 5;\n          collision = distance < collisionDistance;\n        }\n        \n        if (collision) {\n          // Apply damage to player\n          const damageApplied = this.player.takeDamage(gameConfig.player.damagePerCollision);\n          \n          // Check if player died\n          if (!this.player.isAlive()) {\n            this.triggerGameOver();\n            return;\n          }\n        }\n        \n        // Check swipe attack collisions\n        const swipeAttack = enemy.getSwipeAttack();\n        if (swipeAttack && swipeAttack.isActive() && !enemy.hasSwipeHitPlayerAlready()) {\n          if (swipeAttack.checkPlayerCollision(playerPos)) {\n            // Apply swipe damage to player\n            const swipeDamage = swipeAttack.getDamage();\n            const damageApplied = this.player.takeDamage(swipeDamage);\n            enemy.markSwipeAsHit(); // Prevent multiple hits from same swipe\n            \n            // Check if player died\n            if (!this.player.isAlive()) {\n              this.triggerGameOver();\n              return;\n            }\n          }\n        }\n      }\n      \n      // Check enemy projectile-player collisions\n      for (let i = this.enemyProjectiles.length - 1; i >= 0; i--) {\n        const projectile = this.enemyProjectiles[i];\n        const playerPos = this.player.getPosition();\n        const projectilePos = projectile.getPosition();\n        \n        // Calculate distance between player and projectile\n        const dx = playerPos.x - projectilePos.x;\n        const dy = playerPos.y - projectilePos.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        \n        // Player radius (14) + Projectile radius (4) = ~18px\n        if (distance < 18) {\n          // Apply damage to player\n          const damageApplied = this.player.takeDamage(projectile.getDamage());\n          \n          // Remove the projectile\n          projectile.destroy();\n          this.enemyProjectiles.splice(i, 1);\n          \n          // Check if player died\n          if (!this.player.isAlive()) {\n            this.triggerGameOver();\n            return;\n          }\n        }\n      }\n    }\n    \n    // Check kick collisions with enemies\n    if (this.kick.isActive()) {\n      for (const enemy of this.enemies) {\n        let kickHit = false;\n        \n        if (enemy.checkWormCollision) {\n          // Use worm-specific collision detection for kick\n          kickHit = enemy.checkWormCollision(this.kick.getPosition(), this.kick.getCurrentRadius());\n        } else {\n          // Use standard collision\n          kickHit = this.kick.checkCollision(enemy.getPosition(), enemy.getCollisionRadius());\n        }\n        \n        if (kickHit) {\n          enemy.takeDamage(25);\n        }\n      }\n    }\n    \n    // Check projectile collisions with enemies\n    const projectiles = this.phaser.getProjectiles();\n    for (const projectile of projectiles) {\n      for (const enemy of this.enemies) {\n        let projectileHit = false;\n        const projectilePos = { x: projectile.shape.x, y: projectile.shape.y };\n        const projectileRadius = 3;\n        \n        if (enemy.checkWormCollision) {\n          // Use worm-specific collision detection for projectiles\n          projectileHit = enemy.checkWormCollision(projectilePos, projectileRadius + 2);\n        } else {\n          // Use standard collision\n          const dx = projectilePos.x - enemy.shape.x;\n          const dy = projectilePos.y - enemy.shape.y;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n          const collisionDistance = projectileRadius + enemy.getCollisionRadius() + 2;\n          projectileHit = distance < collisionDistance;\n        }\n        \n        if (projectileHit) {\n          enemy.takeDamage(10);\n          projectile.shape.alpha = 0; // Mark for removal\n        }\n      }\n    }\n  }\n\n  // Wave manager callbacks\n  private onWaveStart(): void {\n    this.uiManager.showWaveStartPopup(this.waveManager.getCurrentWave());\n    this.waveTriggerZone.hide(); // Hide trigger zone when wave starts\n    this.healthTradingZone.hide(); // Hide health trading zone when wave starts\n  }\n\n  private onWaveComplete(): void {\n    this.uiManager.showWaveCompletePopup();\n    this.waveTriggerZone.show(); // Show trigger zone when wave completes\n    this.healthTradingZone.show(); // Show health trading zone when wave completes\n  }\n\n  private onEnemySpawn(spawnInfo: EnemySpawnInfo): void {\n    // Determine enemy type based on wave number\n    const currentWave = this.waveManager.getCurrentWave();\n    let attackPattern = EnemyAttackPattern.CHASE;\n    \n    // Start introducing dash worms from wave 4, with moderate probability\n    if (currentWave >= 4) {\n      const dashWormChance = Math.min(0.15 + (currentWave - 4) * 0.05, 0.3); // Max 30% dash worms\n      if (Math.random() < dashWormChance) {\n        attackPattern = EnemyAttackPattern.DASH_WORM;\n      }\n    }\n    \n    // Start introducing big shooters from wave 5, with low probability (but not if dash worm was selected)\n    if (attackPattern === EnemyAttackPattern.CHASE && currentWave >= 5) {\n      const bigShooterChance = Math.min(0.2 + (currentWave - 5) * 0.05, 0.4); // Max 40% big shooters\n      if (Math.random() < bigShooterChance) {\n        attackPattern = EnemyAttackPattern.BIG_SHOOTER;\n      }\n    }\n    \n    // Start introducing circle-shooters from wave 3 (but not if other special types were selected)\n    if (attackPattern === EnemyAttackPattern.CHASE && currentWave >= 3) {\n      const circleChance = Math.min(0.3 + (currentWave - 3) * 0.1, 0.6); // Max 60% circle enemies\n      if (Math.random() < circleChance) {\n        attackPattern = EnemyAttackPattern.CIRCLE_SHOOT;\n      }\n    }\n    \n    const enemy = new Enemy(\n      this.stage, \n      this.player, \n      spawnInfo.x, \n      spawnInfo.y, \n      spawnInfo.hp, \n      spawnInfo.speed,\n      attackPattern\n    );\n    this.enemies.push(enemy);\n  }\n\n\n  private restartGame(): void {\n    // Reset game state\n    this.isGameOver = false;\n    this.killCount = 0;\n    this.currentWeaponIndex = 0;\n    \n    // Remove old player from stage\n    if (this.player && this.player.shape) {\n      this.stage.removeChild(this.player.shape);\n    }\n    \n    // Remove old weapon projectiles and beam connectors\n    if (this.phaser) {\n      // Remove all projectiles\n      for (const projectile of this.phaser.getProjectiles()) {\n        if (projectile.shape) {\n          this.stage.removeChild(projectile.shape);\n        }\n      }\n    }\n    \n    // Reset player\n    const center = this.viewportManager.getCanvasCenter();\n    this.player = new Player(this.stage, center.x, center.y);\n    \n    // Reset weapons\n    this.phaser = new Phaser(this.stage, WeaponType.LASER);\n    this.kick = new Kick(this.stage);\n    \n    // Clear enemies\n    for (const enemy of this.enemies) {\n      enemy.destroy();\n    }\n    this.enemies = [];\n    \n    // Clear enemy projectiles\n    for (const projectile of this.enemyProjectiles) {\n      projectile.destroy();\n    }\n    this.enemyProjectiles = [];\n    \n    // Clear experience orbs\n    for (const orb of this.experienceOrbs) {\n      orb.destroy();\n    }\n    this.experienceOrbs = [];\n    this.totalExperience = 0;\n    \n    // Reset wave manager\n    this.waveManager = new WaveManager(\n      () => this.onWaveStart(),\n      () => this.onWaveComplete(),\n      (spawnInfo: EnemySpawnInfo) => this.onEnemySpawn(spawnInfo)\n    );\n    \n    // Hide game over screen and cleanup old UI\n    this.uiManager.hideGameOverScreen();\n    this.uiManager.destroy();\n    \n    // Reset UI (this will create fresh counters)\n    this.uiManager = new UIManager(this.stage, this.viewportManager);\n    \n    // Reset wave trigger zone\n    this.waveTriggerZone.destroy();\n    this.waveTriggerZone = new WaveTriggerZone(this.stage, this.viewportManager);\n    \n    // Reset health trading zone\n    this.healthTradingZone.destroy();\n    this.healthTradingZone = new HealthTradingZone(this.stage, this.viewportManager);\n    \n    // Unpause\n    this.isPaused = false;\n  }\n\n  private togglePause(): void {\n    this.isPaused = !this.isPaused;\n  }\n  \n  private triggerGameOver(): void {\n    this.isGameOver = true;\n    this.uiManager.showGameOverScreen(this.killCount, this.waveManager.getWaveData().number);\n  }\n  \n\n  public destroy(): void {\n    createjs.Ticker.removeEventListener('tick', this.update);\n    this.inputManager.destroy();\n    this.viewportManager.destroy();\n  }\n}","import { GameManager } from '@managers/GameManager';\n\n// Wait for DOM to be ready\nwindow.addEventListener('DOMContentLoaded', () => {\n  // Initialize game\n  const game = new GameManager('canvas');\n  \n  // Handle window unload\n  window.addEventListener('beforeunload', () => {\n    game.destroy();\n  });\n});"],"names":["ww","s","AbstractRequest","p","createjs","this","window","extend","subclass","superclass","o","constructor","prototype","promote","prefix","subP","supP","Object","getPrototypeOf","__proto__","n","hasOwnProperty","indexOf","array","searchElement","i","l","length","UID","_nextID","get","deprecate","fallbackMethod","name","console","warn","apply","arguments","Event","type","bubbles","cancelable","target","currentTarget","eventPhase","timeStamp","Date","getTime","defaultPrevented","propagationStopped","immediatePropagationStopped","removed","preventDefault","stopPropagation","stopImmediatePropagation","remove","clone","set","props","toString","EventDispatcher","_listeners","_captureListeners","initialize","addEventListener","on","removeEventListener","off","removeAllEventListeners","hasEventListener","dispatchEvent","_dispatchEvent","willTrigger","listener","useCapture","listeners","arr","push","scope","once","data","handleEvent","d","listnr","evt","call","splice","eventObj","e","parent","top","list","captureListeners","slice","Ticker","RAF_SYNCHED","RAF","TIMEOUT","timingMode","maxDelta","paused","_addEventListener","_inited","init","_startTime","_pausedTime","_ticks","_pausedTicks","_interval","_lastTime","_times","_tickTimes","_timerId","_raf","_setInterval","interval","_setupTick","setInterval","_getInterval","getInterval","_setFPS","value","setFPS","_getFPS","getFPS","defineProperties","framerate","_getTime","reset","f","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","getMeasuredTickTime","ticks","ttl","times","Math","min","getMeasuredFPS","runTime","getEventTime","getTicks","pauseable","_handleSynch","_tick","_handleRAF","_handleTimeout","mode","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","time","elapsedTime","event","delta","unshift","pop","w","now","performance","mozNow","msNow","oNow","webkitNow","VideoBuffer","video","readyState","_video","_canvas","_videoReady","bind","getImage","canvas","createCanvas","document","createElement","width","videoWidth","height","videoHeight","currentTime","ctx","getContext","clearRect","drawImage","MouseEvent","stageX","stageY","nativeEvent","pointerID","primary","rawX","rawY","relatedTarget","Event_constructor","_get_localX","globalToLocal","x","_get_localY","y","_get_isTouch","localX","localY","isTouch","Matrix2D","a","b","c","tx","ty","setValues","DEG_TO_RAD","PI","identity","append","a1","b1","c1","d1","prepend","tx1","appendMatrix","matrix","prependMatrix","appendTransform","scaleX","scaleY","rotation","skewX","skewY","regX","regY","r","cos","sin","prependTransform","rotate","angle","skew","scale","translate","invert","isIdentity","equals","transformPoint","pt","decompose","sqrt","atan2","abs","copy","DisplayProps","visible","alpha","shadow","compositeOperation","Point","point","Rectangle","pad","left","bottom","right","rectangle","contains","union","rect","intersection","x1","y1","x2","y2","intersects","isEmpty","ButtonHelper","outLabel","overLabel","downLabel","play","hitArea","hitLabel","_isPressed","_isOver","_enabled","mouseChildren","enabled","actionsEnabled","gotoAndStop","_setEnabled","cursor","_reset","__reset","setEnabled","_getEnabled","getEnabled","label","t","gotoAndPlay","Shadow","color","offsetX","offsetY","blur","SpriteSheet","EventDispatcher_constructor","complete","_animations","_frames","_images","_data","_loadCount","_frameHeight","_frameWidth","_numFrames","_regX","_regY","_spacing","_margin","_parseData","_getAnimations","getAnimations","animations","getNumFrames","animation","frames","getAnimation","getFrame","frameIndex","frame","getFrameBounds","images","img","src","naturalWidth","onload","_handleImageLoad","onerror","_handleImageError","Array","isArray","image","spacing","margin","count","_calculateFrames","anim","obj","speed","next","errorEvent","maxFrames","frameCount","frameWidth","frameHeight","imgLoop","imgs","imgW","imgH","naturalHeight","Graphics","command","_stroke","_strokeStyle","_oldStrokeStyle","_strokeDash","_oldStrokeDash","_strokeIgnoreScale","_fill","_instructions","_commitIndex","_activeInstructions","_dirty","_storeIndex","clear","G","getRGB","g","getHSL","hue","saturation","lightness","BASE_64","A","B","C","D","E","F","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","h","j","k","m","q","u","v","z","STROKE_CAPS_MAP","STROKE_JOINTS_MAP","_ctx","_getInstructions","_updateInstructions","getInstructions","instructions","draw","instr","exec","drawAsPath","instrs","path","moveTo","MoveTo","lineTo","LineTo","arcTo","radius","ArcTo","arc","startAngle","endAngle","anticlockwise","Arc","quadraticCurveTo","cpx","cpy","QuadraticCurveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","BezierCurveTo","Rect","closePath","ClosePath","beginFill","_setFill","Fill","beginLinearGradientFill","colors","ratios","x0","y0","linearGradient","beginRadialGradientFill","r0","r1","radialGradient","beginBitmapFill","repetition","bitmap","endFill","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","StrokeStyle","setStrokeDash","segments","offset","StrokeDash","beginStroke","_setStroke","Stroke","beginLinearGradientStroke","beginRadialGradientStroke","beginBitmapStroke","endStroke","curveTo","drawRect","drawRoundRect","drawRoundRectComplex","radiusTL","radiusTR","radiusBR","radiusBL","RoundRect","drawCircle","Circle","drawEllipse","Ellipse","drawPolyStar","sides","pointSize","PolyStar","clean","decodePath","str","paramCount","params","base64","charAt","fi","pl","charCount","num","sign","store","unstore","mt","lt","at","bt","qt","cp","lf","rf","bf","ef","ss","sd","ls","rs","bs","es","dr","rr","rc","dc","de","dp","commit","active","commitIndex","beginCmd","ll","fill","stroke","BeginPath","beginPath","style","fillStyle","mtx","save","transform","restore","createLinearGradient","addColorStop","createRadialGradient","createPattern","strokeStyle","setTransform","lineWidth","lineCap","isNaN","lineJoin","setLineDash","EMPTY_SEGMENTS","lineDashOffset","max","mTL","mTR","mBR","mBL","rTL","rTR","rBR","rBL","ox","oy","xe","ye","xm","ym","ps","DisplayObject","cacheCanvas","bitmapCache","id","mouseEnabled","tickEnabled","transformMatrix","snapToPixel","filters","mask","_props","_rectangle","_bounds","_webGLRenderStyle","_StageGL_NONE","_MOUSE_EVENTS","suppressCrossDomainErrors","_snapToPixelEnabled","_StageGL_SPRITE","_StageGL_BITMAP","_hitTestCanvas","_hitTestContext","_getStage","_Stage","getStage","stage","cacheID","isVisible","ignoreCache","cache","updateContext","graphics","getMatrix","clip","globalAlpha","globalCompositeOperation","_applyShadow","options","BitmapCache","define","updateCache","update","uncache","release","getCacheDataURL","getDataURL","localToGlobal","getConcatenatedMatrix","localToLocal","getConcatenatedDisplayProps","hitTest","hit","_testHit","getBounds","_cacheScale","_cacheOffsetX","_cacheOffsetY","getTransformedBounds","_getBounds","setBounds","_cloneProps","_updateState","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","evtObj","getImageData","ignoreTransform","_transformBounds","bounds","x_a","x_b","y_c","y_d","minX","maxX","minY","maxY","_hasMouseEventListener","evts","Container","DisplayObject_constructor","children","tickChildren","_getNumChildren","getNumChildren","numChildren","hasContent","DisplayObject_draw","child","addChild","par","silent","_removeChildAt","addChildAt","index","indx","removeChild","good","removeChildAt","sort","removeAllChildren","kids","getChildAt","getChildByName","sortChildren","sortFunction","getChildIndex","swapChildrenAt","index1","index2","o1","o2","swapChildren","child1","child2","setChildIndex","getObjectUnderPoint","getObjectsUnderPoint","_getObjectsUnderPoint","recursive","_cloneChildren","DisplayObject__tick","mouse","activeListener","currentDepth","_testMask","result","DisplayObject_getBounds","Stage","Container_constructor","autoClear","getElementById","mouseX","mouseY","snapToPixelEnabled","mouseInBounds","tickOnUpdate","mouseMoveOutside","preventSelection","_pointerData","_pointerCount","_primaryPointerID","_mouseOverIntervalID","_nextStage","_prevStage","enableDOMEvents","_get_nextStage","_set_nextStage","nextStage","tick","toDataURL","backgroundColor","mimeType","fillRect","dataURL","putImageData","enableMouseOver","frequency","clearInterval","_testMouseOver","enable","_eventListeners","_this","_handleMouseUp","_handleMouseMove","_handleDoubleClick","_handleMouseDown","_getElementRect","getBoundingClientRect","err","offsetTop","offsetLeft","offsetWidth","offsetHeight","offX","pageXOffset","scrollLeft","clientLeft","body","offY","pageYOffset","scrollTop","clientTop","styles","getComputedStyle","currentStyle","padL","parseInt","paddingLeft","borderLeftWidth","padT","paddingTop","borderTopWidth","padR","paddingRight","borderRightWidth","padB","paddingBottom","borderBottomWidth","_getPointerData","_handlePointerMove","pageX","pageY","owner","inBounds","_updatePointerPosition","_dispatchMouseEvent","posEvtObj","_handlePointerUp","oTarget","down","_handlePointerDown","eventTarget","_mouseOverX","_mouseOverY","isEventTarget","common","oldList","_mouseOverTarget","oldTarget","pointerId","StageGL","Stage_constructor","premultiply","transparent","antialias","preserveBuffer","autoPurge","vocalDebug","_preserveBuffer","_antialias","_transparent","_premultiply","_autoPurge","_viewportWidth","_viewportHeight","_projectionMatrix","_webGLContext","_clearColor","_maxCardsPerBatch","DEFAULT_MAX_BATCH_SIZE","_activeShader","_vertices","_vertexPositionBuffer","_uvs","_uvPositionBuffer","_indices","_textureIndexBuffer","_alphas","_alphaBuffer","_textureDictionary","_textureIDs","_batchTextures","_baseTextures","_batchTextureCount","_lastTextureInsert","_batchID","_drawID","_slotBlacklist","_isDrawing","_lastTrackedCanvas","isCacheControlled","_cacheContainer","_initializeWebGL","buildUVRects","spritesheet","onlyTarget","start","end","uvRect","isWebGLActive","WebGLRenderingContext","VERTEX_PROPERTY_COUNT","INDICIES_PER_CARD","WEBGL_MAX_INDEX_NUM","pow","UV_RECT","COVER_VERT","Float32Array","COVER_UV","COVER_UV_FLIP","REGULAR_VARYING_HEADER","REGULAR_VERTEX_HEADER","REGULAR_FRAGMENT_HEADER","REGULAR_VERTEX_BODY","REGULAR_FRAGMENT_BODY","REGULAR_FRAG_COLOR_NORMAL","REGULAR_FRAG_COLOR_PREMULTIPLY","PARTICLE_VERTEX_BODY","PARTICLE_FRAGMENT_BODY","COVER_VARYING_HEADER","COVER_VERTEX_HEADER","COVER_FRAGMENT_HEADER","COVER_VERTEX_BODY","COVER_FRAGMENT_BODY","_get_isWebGL","_set_autoPurge","_get_autoPurge","Number","isWebGL","depth","stencil","premultipliedAlpha","preserveDrawingBuffer","gl","_fetchWebGLContext","updateSimultaneousTextureCount","getParameter","MAX_TEXTURE_IMAGE_UNITS","_maxTextureSlots","MAX_COMBINED_TEXTURE_IMAGE_UNITS","_createBuffers","_initTextures","disable","DEPTH_TEST","BLEND","blendFuncSeparate","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","clearColor","updateViewport","_batchDraw","purgeTextures","cc","adjust","COLOR_BUFFER_BIT","Stage_clear","context","Stage_draw","cacheDraw","manager","_cacheDraw","protectTextureSlot","lock","getTargetRenderTexture","toggle","__lastRT","__rtA","__rtB","getRenderBufferTexture","_width","_height","resizeTexture","setTextureParams","releaseTexture","item","foundImage","_storeID","_killTextureObject","spriteSheet","dict","success","_fetchShaderProgram","viewport","_projectionMatrixFlip","getFilterShader","filter","targetShader","_builtShader","shaderParamSetup","useProgram","VTX_SHADER_BODY","FRAG_SHADER_BODY","_name","getBaseTexture","ceil","texture","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","renderTexture","frameBuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","_renderTexture","_frameBuffer","isPOT","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","setClearColor","output","split","viewportWidth","viewportHeight","error","shaderName","customVTX","customFRAG","targetFrag","targetVtx","vertexShader","_createShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","_type","getProgramParameter","LINK_STATUS","getProgramInfoLog","vertexPositionAttribute","getAttribLocation","enableVertexAttribArray","uvPositionAttribute","samplerUniform","getUniformLocation","uniform1i","uprightUniform","uniform1f","textureIndexAttribute","alphaAttribute","samplers","samplerData","uniform1iv","pMatrixUniform","replace","insert","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","groupSize","groupCount","vertexPositionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","vertices","bufferData","DYNAMIC_DRAW","itemSize","numItems","uvPositionBuffer","uvs","textureIndexBuffer","indices","alphaBuffer","alphas","tex","_loadTextureImage","_isCanvas","storeID","_imageData","_insertTextureInBatch","_updateTextureImageData","isNPOT","activeTexture","TEXTURE0","_activeIndex","_invalid","_w","_h","MAX_TEXTURE_SIZE","found","look","batchReason","_drawBuffers","batchCardCount","deleteFramebuffer","deleteTexture","_backupBatchTextures","_backupTextures","sceneGraph","_appendToBatchGroup","shaderBackup","blackListBackup","lastTextureSlot","wBackup","hBackup","container","_drawFilters","_drawWidth","_drawHeight","filterCount","flipY","_drawCover","_multiPass","concatMtx","concatAlpha","_glMtx","subL","subT","subR","subB","cMtx","texIndex","iMtx","useCache","currentFrame","texI","sourceRect","_uvRect","_filterOffX","_filterOffY","offV1","offV2","vertexAttribPointer","FLOAT","bufferSubData","uniformMatrix4fv","FALSE","drawArrays","TRIANGLES","Bitmap","imageOrUri","node","cloneNode","Sprite","frameOrAnimation","currentAnimation","currentAnimationFrame","_animation","_currentFrame","_skipAdvance","_normalizeFrame","stop","_goto","advance","fps","DisplayObject__cloneProps","frameDelta","animFrame","_dispatchAnimationEnd","changed","Shape","Text","text","font","textAlign","textBaseline","maxWidth","outline","lineHeight","_workingContext","H_OFFSETS","center","V_OFFSETS","hanging","middle","alphabetic","ideographic","col","_drawText","_prepContext","getMeasuredWidth","_getMeasuredWidth","getMeasuredLineHeight","getMeasuredHeight","getMetrics","lines","vOffset","substr","paint","maxW","hardLines","String","measureText","words","jl","wordW","_drawTextLine","strokeText","fillText","BitmapText","letterSpacing","spaceWidth","_oldProps","_oldStage","_drawAction","maxPoolSize","_spritePool","Container_draw","_updateText","Container_getBounds","Container__cloneProps","_getFrameIndex","character","toUpperCase","toLowerCase","_getFrame","_getLineHeight","_getSpaceWidth","sprite","change","spaceW","lineH","pool","childIndex","numKids","hasSpace","MovieClip","startPosition","loop","labels","inited","INDEPENDENT","autoReset","frameBounds","useTicks","timeline","Timeline","_synchOffset","_rawPosition","_bound_resolveState","_resolveState","_t","_managed","SINGLE_FRAME","SYNCHED","MovieClipPlugin","install","_getLabels","getLabels","_getCurrentLabel","currentLabel","getCurrentLabel","_getDuration","duration","getDuration","totalFrames","positionOrLabel","independent","_framerate","_updateTimeline","Container__tick","pos","resolve","rawPosition","jump","synced","tl","setPosition","_renderFirstFrame","position","tweens","tween","passive","_stepPosition","_addManagedChild","_setState","state","_off","Container__getBounds","priority","ID","Tween","_installPlugin","prop","_addPlugin","step","ratio","prev","SpriteSheetUtils","_workingCanvas","extractFrame","addFlippedFrames","mergeAlpha","_flip","il","__tmp","fl","sfx","names","al","SpriteSheetBuilder","maxHeight","padding","timeSlice","progress","_nextFrameIndex","_index","_timerID","_scale","ERR_DIMENSIONS","ERR_RUNNING","addFrame","source","setupFunction","setupData","nominalBounds","funct","addAnimation","addMovieClip","labelFunction","rects","baseFrameIndex","_setupMovieClipFrame","_labels","lbls","build","_startBuild","_drawNext","_endBuild","buildAsync","_run","stopAsync","dataFrames","_fillRow","_getSize","ae","size","sc","rx","floor","ry","rh","rw","round","ts","DOMElement","htmlElement","transformOrigin","WebkitTransformOrigin","msTransformOrigin","MozTransformOrigin","OTransformOrigin","_handleDrawEnd","visibility","oldProps","oldMtx","WebkitTransform","OTransform","msTransform","MozTransform","opacity","Filter","usesContext","applyFilter","targetCtx","targetX","targetY","imageData","_applyFilter","_cacheDataURLID","_cacheDataURL","getFilterBounds","test","_options","filterBounds","surface","_updateSurface","_drawToCache","_webGLCache","useGL","stageGL","webGL","_applyFilters","BlurFilter","blurX","blurY","quality","Filter_constructor","_blurX","_blurXTable","_lastBlurX","_blurY","_blurYTable","_lastBlurY","_quality","_lastQuality","FRAG_SHADER_TEMPLATE","setQuality","getBlurX","getBlurY","setBlurX","setBlurY","getQuality","_getShader","xChange","yChange","qChange","_getTable","_updateShader","_compiledShader","_setShader","spread","factor","reduce","map","currentValue","toFixed","uniform1fv","uniform2f","MUL_TABLE","SHG_TABLE","radiusX","radiusY","iterations","px","yp","yi","yw","pr","pg","pb","pa","divx","divy","w1","h1","rxp1","ryp1","ssx","sx","ssy","sy","si","stx","mty","sty","ms","AlphaMapFilter","alphaMap","_alphaMap","_mapData","_mapTexture","TEXTURE1","_prepAlphaMap","HTMLCanvasElement","imgData","AlphaMaskFilter","ColorFilter","redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset","uniform4f","ColorMatrix","brightness","contrast","setColor","DELTA_INDEX","IDENTITY_MATRIX","LENGTH","adjustColor","adjustHue","adjustContrast","adjustBrightness","adjustSaturation","_cleanValue","_multiplyMatrix","lumR","lumG","lumB","cosVal","sinVal","concat","_fixMatrix","toArray","val","limit","ColorMatrixFilter","mat","colorMatrix","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","Touch","isSupported","navigator","singleTouch","allowDefault","__touch","pointers","multitouch","_IOS_enable","_IE_enable","_IOS_disable","_IE_disable","_IOS_handleEvent","touches","changedTouches","touch","identifier","_handleStart","_handleMove","_handleEnd","_IE_handleEvent","msTouchAction","touchAction","activeIDs","ids","srcElement","EaselJS","version","buildDate","PreloadJS","proxy","method","aArgs","ErrorEvent","title","message","ProgressEvent","loaded","total","objectTypes","function","object","freeExports","exports","nodeType","root","freeGlobal","module","global","runInContext","SyntaxError","TypeError","nativeJSON","stringify","parse","isProperty","forEach","undef","objectProto","getClass","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","exception","has","serialized","stringifySupported","toJSON","parseSupported","functionClass","numberClass","stringClass","arrayClass","charIndexBuggy","Months","getDay","year","month","property","members","original","callback","Properties","valueOf","isFunction","isConstructor","hasProperty","Escapes","toPaddedString","quote","useCharIndex","symbols","charCode","charCodeAt","serialize","properties","whitespace","indentation","stack","className","date","hours","minutes","seconds","milliseconds","results","element","join","Index","Source","fromCharCode","Unescapes","abort","lex","begin","isSigned","hasMembers","walk","JSON","previousJSON","isRestored","JSON3","noConflict","el","createTextNode","Elements","info","absolute","relative","protocol","hostname","port","pathname","search","hash","host","parser","href","match","queryIndex","ABSOLUTE_PATT","RELATIVE_PATT","EXTENSION_PATT","extension","query","Error","escape","idx","formatQueryString","location","URLUtils","getHead","appendChild","overflow","webkitTransform","oTransform","getBody","head","getElementsByTagName","HTMLImageElement","HTMLAudioElement","HTMLVideoElement","DomUtils","xml","DOMParser","parseFromString","ActiveXObject","async","loadXML","DataUtils","Types","Methods","LoadItem","maintainOrder","GET","values","headers","withCredentials","crossOrigin","loadTimeout","LOAD_TIMEOUT_DEFAULT","create","IMAGE","BINARY","TEXT","MANIFEST","XML","CSS","SVG","JAVASCRIPT","SPRITESHEET","SOUND","VIDEO","RequestUtils","AbstractLoader","loadItem","preferXHR","canceled","resultFormatter","_item","_preferXHR","_result","_rawResult","_loadedItems","_tagSrcAttribute","_tag","POST","FONT","FONTCSS","JSONP","getItem","getResult","raw","getTag","setTag","tag","load","_createRequest","_request","loader","cancel","destroy","_loadItems","getLoadedItems","XHRRequest","TagRequest","_createTag","_sendLoadStart","_isCanceled","_sendProgress","Infinity","_sendComplete","rawResult","_sendError","_response","Function","_resultFormatSuccess","_resultFormatFailed","AbstractMediaLoader","AbstractLoader_constructor","_formatResult","_updateXHR","preload","AbstractLoader_load","MediaTagRequest","setResponseType","_loadedHandler","onstalled","URL","webkitURL","createObjectURL","srcAttribute","AbstractRequest_constructor","_handleTagComplete","_addedToDOM","onreadystatechange","_handleReadyStateChange","_handleError","_loadTimeout","parentNode","appendToBody","_clean","AbstractRequest_destroy","_handleStalled","_stalledCallback","pc","_handleProgress","TagRequest_load","newEvent","_progressCallback","TagRequest__clean","_xhrLevel","_rawResponse","_canceled","_handleLoadStartProxy","_handleLoadStart","_handleProgressProxy","_handleAbortProxy","_handleAbort","_handleErrorProxy","_handleTimeoutProxy","_handleLoadProxy","_handleLoad","_handleReadyStateChangeProxy","_createXHR","ACTIVEX_VERSIONS","onloadstart","onprogress","onabort","ontimeout","send","_responseType","responseType","getAllResponseHeaders","getResponseHeader","header","_checkError","_getResponse","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","builder","getBlob","status","response","responseText","responseXML","crossdomain","isCrossDomain","req","XMLHttpRequest","XDomainRequest","axVersion","isText","overrideMimeType","buildURI","open","origin","setRequestHeader","LoadQueue","basePath","_plugins","_typeCallbacks","_extensionCallbacks","maintainScriptOrder","stopOnError","_maxConnections","_availableLoaders","FontLoader","ImageLoader","JavaScriptLoader","CSSLoader","JSONLoader","JSONPLoader","SoundLoader","ManifestLoader","SpriteSheetLoader","XMLLoader","SVGLoader","BinaryLoader","VideoLoader","TextLoader","_defaultLoaderLength","setPreferXHR","_paused","_basePath","_crossOrigin","_loadStartWasDispatched","_currentlyLoadingScript","_currentLoads","_loadQueue","_loadQueueBackup","_loadItemsById","_loadItemsBySrc","_loadedResults","_loadedRawResults","_numItems","_numItemsLoaded","_scriptOrder","_loadedScripts","_lastProgress","NaN","registerLoader","canLoadItem","unregisterLoader","removeAll","idsOrUrls","args","itemsWereRemoved","_disposeItem","_loadNext","close","loadManifest","installPlugin","plugin","getPreloadHandlers","types","extensions","setMaxConnections","loadFile","file","loadNow","_addItem","setPaused","manifest","fileList","getItems","loadStartWasDispatched","_itemCount","_createLoadItem","_createLoader","plugins","_loader","_updateProgress","bp","useBasePath","pathMatch","parseURI","ext","getTypeByExtension","autoId","customHandler","_canStartLoad","_loadItem","_handleFileLoad","_handleFileComplete","_handleFileError","_sendFileStart","_finishOrderedItem","_removeLoadItem","_cleanLoadItem","_saveLoadedItems","_processFinishedLoad","loadFailed","_checkScriptLoadOrder","appendToHead","_sendFileComplete","_sendFileProgress","remaining","chunk","completeHandler","link","rel","styleSheet","cssText","textNode","_faces","_watched","_count","_watchInterval","_injectCSS","injectCSS","sampleText","_referenceFonts","WEIGHT_REGEX","STYLE_REGEX","FONT_FORMAT","woff2","woff","ttf","otf","FONT_WEIGHT","thin","extralight","ultralight","light","semilight","demilight","book","regular","semibold","demibold","extrabold","ultrabold","black","heavy","WATCH_DURATION","_watchCSS","_watchFontArray","def","_defFromSrc","_watchFont","_injectStyleTag","_cssFromDef","_stopWatching","_parseCSS","AbstractLoader_handleEvent","HTMLStyleElement","textContent","css","regex","_parseFontFace","_defFromObj","styleTag","family","_getCSSValue","weight","_calculateReferenceSizes","_startWatching","_watch","defs","refFonts","refs","_getTextWidth","re","lastIndexOf","cssSrc","format","propName","RegExp","isImageTag","isLocal","_formatImage","successCallback","errorCallback","objURL","_cleanUpURL","revokeObjectURL","script","json","parseJSON","AbstractLoader_cancel","_dispose","_manifestQueue","MANIFEST_PROGRESS","_loadManifest","AbstractLoader_destroy","queue","_handleManifestFileLoad","_handleManifestProgress","_handleManifestComplete","_handleManifestError","AbstractMediaLoader_constructor","isAudioTag","audio","autoplay","isVideoTag","SPRITESHEET_PROGRESS","svg","parseXML","documentElement","importNode","SoundJS","BrowserDetect","agent","userAgent","isWindowPhone","isFirefox","isOpera","opera","isChrome","isIOS","isAndroid","isBlackberry","PlayPropsConfig","interrupt","delay","volume","pan","startTime","log","Sound","SoundChannel","INTERRUPT_ANY","INTERRUPT_EARLY","INTERRUPT_LATE","INTERRUPT_NONE","PLAY_INITED","PLAY_SUCCEEDED","PLAY_INTERRUPTED","PLAY_FINISHED","PLAY_FAILED","SUPPORTED_EXTENSIONS","EXTENSION_MAP","m4a","FILE_PATTERN","defaultInterruptBehavior","alternateExtensions","activePlugin","_masterVolume","_getMasterVolume","getVolume","_setMasterVolume","setVolume","instances","_instances","setMasterVolume","_masterMute","_getMute","getMute","_setMute","setMute","setMasterMute","_getCapabilities","_capabilities","getCapabilities","muted","capabilities","_pluginsRegistered","_lastID","_idHash","_preloadHash","_defaultPlayPropsHash","initLoad","_handleLoadComplete","_handleLoadError","_registerPlugin","registerPlugins","initializeDefaultPlugins","WebAudioPlugin","HTMLAudioPlugin","isReady","_registerSound","details","_parseSrc","_parsePath","numChannels","channels","audioSprite","sp","defaultPlayProps","register","maxPerChannel","registerSound","registerSounds","sounds","returnValues","removeSound","_getSrcById","removeSrc","removeSounds","removeAllSounds","loadComplete","ret","playProps","instance","createInstance","_playInstance","_playFailed","DefaultSoundInstance","applyPlayProps","uniqueId","setDefaultPlayProps","getDefaultPlayProps","_beginPlaying","delayTimeoutId","add","_playFinished","channel","_removeAll","_add","_remove","maxDefault","_get","_getSlot","replacement","playState","_interrupt","AbstractSoundInstance","playbackResource","_volume","defineProperty","_getVolume","_setVolume","_pan","_getPan","_setPan","_getStartTime","_setStartTime","_duration","_setDuration","_playbackResource","_getPlaybackResource","_setPlaybackResource","_position","_getPosition","_setPosition","_loop","_getLoop","_setLoop","_muted","_getMuted","_setMuted","_getPaused","_setPaused","_cleanUp","_handleStop","_pause","_resume","_updateVolume","_updatePan","_calculateCurrentPosition","_updatePosition","_updateStartTime","_updateDuration","_setDurationFromSource","_removeLooping","_addLooping","_sendEvent","_handleCleanUp","_handleSoundReady","_handleSoundComplete","_handleLoop","AbstractPlugin","_loaders","_audioSources","_soundInstances","_loaderClass","_soundInstanceClass","_handlePreloadComplete","_handlePreloadError","isPreloadStarted","isPreloadComplete","key","setPlaybackResource","Loader","decodeAudioData","_handleAudioDecoded","decodedAudio","AbstractLoader__sendComplete","WebAudioLoader","WebAudioSoundInstance","AbstractSoundInstance_constructor","gainNode","createGain","panNode","createPanner","panningModel","_panningModel","connect","sourceNode","_soundCompleteTimeout","_sourceNodeNext","_playbackStartTime","_endedHandler","_scratchBuffer","destinationNode","AbstractSoundInstance_destroy","disconnect","_cleanUpAudioNode","_createAndPlayAudioNode","numberOfOutputs","audioNode","buffer","dur","createBufferSource","newVolume","gain","AbstractPlugin_constructor","dynamicsCompressorNode","createDynamicsCompressor","destination","_addPropsToClasses","_unlocked","DEFAULT_SAMPLE_RATE","isMobilePhoneGap","_isFileXHRSupported","_generateCapabilities","playEmptySound","supported","xhr","canPlayType","_createAudioContext","_compatibilitySetUp","_unlock","panning","tracks","supportedExtensions","extensionMap","playType","numberOfChannels","AudioCtor","AudioContext","webkitAudioContext","sampleRate","dummy","createGainNode","noteGrainOn","noteOff","HTMLAudioTagPool","TagPool","_tags","_tagPool","_tagUsed","HTMLAudioSoundInstance","_audioSpriteStopTime","_delayTimeoutId","_readyHandler","_handleTagReady","_stalledHandler","_audioSpriteEndHandler","_handleAudioSpriteLoop","_loopHandler","isMuted","_AUDIO_SEEKED","pause","_AUDIO_ENDED","_AUDIO_READY","_AUDIO_STALLED","_TIME_UPDATE","AbstractSoundInstance__beginPlaying","_handleSetPositionSeek","MAX_INSTANCES","AbstractPlugin_register","AbstractPlugin_removeSound","AbstractPlugin_create","AbstractTween","ignoreGlobalPause","reversed","bounce","timeScale","_next","_prev","_parent","_labelList","onChange","onComplete","_register","getPaused","ignoreActions","loopCount","prevRawPos","_runActions","calculatePosition","setLabels","addLabel","_init","startRawPos","endRawPos","includeStart","_actionHead","loop0","loop1","t0","t1","_runActionsRange","dir","startPos","endPos","AbstractTween_constructor","pluginData","_stepHead","TweenStep","_stepTail","_actionTail","_pluginIds","_injected","override","removeTweens","ease","TweenAction","IGNORE","_tweens","_tweenHead","_tweenTail","tweenjs_count","removeAllTweens","hasActiveTweens","tail","wait","_addStep","to","_appendProps","_addAction","_set","stepNext","_updateTargetProps","v0","v1","p0","p1","proploop","rev","action","ePos","sPos","stepPlugins","initValue","inject","initProps","oldStep","stepProps","cleanProps","_injectProp","addTween","removeTween","updateDuration","Ease","linear","none","amount","getPowIn","getPowOut","getPowInOut","quadIn","quadOut","quadInOut","cubicIn","cubicOut","cubicInOut","quartIn","quartOut","quartInOut","quintIn","quintOut","quintInOut","sineIn","sineOut","sineInOut","getBackIn","backIn","getBackOut","backOut","getBackInOut","backInOut","circIn","circOut","circInOut","bounceIn","bounceOut","bounceInOut","getElasticIn","amplitude","period","pi2","asin","elasticIn","getElasticOut","elasticOut","getElasticInOut","elasticInOut","MotionGuidePlugin","guideData","guide","_solveGuideData","valid","endData","orient","initRot","startOffsetRot","startData","endAbsRot","deltaRotation","finalRot","deltaRot","modRot","_ratioToPositionData","debug","higlight","_findPathProblems","pathLength","hiCount","tempStore","tempLook","storage","subLines","totalLength","animSpan","cx","cy","ex","ey","len","temp","subLine","weightings","estLength","portion","subX","subY","_getParamsForCurve","dx","dy","startRatio","endRatio","lineSegments","effRatio","pathData","inv","valueCount","TweenJS","gameConfig","targetWidth","targetHeight","minWidth","waveDisplay","enemyCounter","experienceCounter","timerDisplay","maxVelocity","maxAcceleration","acceleration","maxHealth","invulnerabilityDuration","damagePerCollision","baseSpeed","hp","circleAttack","angularSpeed","shootCooldown","projectileSpeed","projectileDamage","projectileLifetime","bigShooter","dashWorm","dashSpeed","dashCooldown","dashDuration","detectionRadius","segmentCount","segmentSize","headSize","phaser","maxAmmo","ammoRegenRate","ammoConsumption","shotCooldown","circle","projectileSize","kick","maxRadius","expandRate","decayRate","magnetRange","magnetSpeed","collectionRadius","baseValue","bigShooterWidth","bigShooterHeight","fadeDelay","fadeDuration","restDuration","baseEnemyCount","enemyScaling","spawnDelay","difficultyScaling","hpMultiplier","speedMultiplier","pointsPerKill","Player","isInvulnerable","invulnerabilityTimer","damageFlashTimer","velocity","negDirection","currentHealth","shape","createjs.Shape","innerWidth","innerHeight","blurFilterX","createjs.BlurFilter","blurFilterY","deltaTime","updateVisualEffects","handleMovement","keys","accelerateY","accelerateX","setAngle","getPosition","takeDamage","addHealth","oldHealth","isAlive","getHealthPercentage","getCurrentHealth","getMaxHealth","getIsInvulnerable","WeaponType","EnemyAttackPattern","WaveState","EnemyProjectile","startX","startY","isActive","distance","normalizedDx","normalizedDy","damage","maxLifetime","lifetime","updateVisual","isOutOfBounds","dims","getDamage","getRadius","SwipeAttack","revealProgress","animationDuration","elapsed","revealDirection","enemyPosition","playerPosition","drawSwipe","trigger","currentStartAngle","currentEndAngle","checkCollision","angleToTarget","revealedStartAngle","revealedEndAngle","normalizeAngle","normTarget","normStart","normEnd","updatePosition","checkPlayerCollision","playerRadius","Enemy","player","attackPattern","CHASE","projectiles","circleAngle","lastShotTime","healthBarContainer","healthBarBackground","healthBarFill","healthBarBorder","healthBarVisible","lastDamageTime","swipeAttack","lastSwipeTime","swipeRange","swipeCooldown","hasSwipeHitPlayer","connectors","segmentPositions","lastDashTime","isDashing","dashDirection","dashTimer","BIG_SHOOTER","DASH_WORM","maxHp","desiredRadius","random","createVisual","createWormSegments","updateChasePattern","CIRCLE_SHOOT","updateCirclePattern","updateBigShooterPattern","updateDashWormPattern","updateProjectiles","updateHealthBarPosition","checkHealthBarFade","playerPos","applyBoundaryForces","currentSpeed","boundaryForce","canvasWidth","canvasHeight","force","showHealthBar","updateHealthBarFill","clearProjectiles","destroyHealthBar","segment","connector","deathPosition","desiredX","desiredY","clampedX","clampedY","angleToPlayer","shootAtPlayer","config","segmentPosition","updateWormConnectors","shouldDash","shouldDashToDodgeBullets","startDash","updateWormSegments","dashChance","perpX","perpY","randomAngle","currentSeg","targetSeg","segmentDistance","moveRatio","segmentIndex","fromPos","toPos","connectorWidth","connectorHeight","accelerationMultiplier","optimalDistance","shootAtPlayerBigShooter","playerVelocity","projectile","getProjectiles","getCollisionRadius","checkWormCollision","segmentPos","segmentRadius","checkOvalCollision","pointRadius","ovalStart","ovalEnd","ovalHeight","unitX","unitY","projection","clampedProjection","closestX","closestY","distanceX","distanceY","getSwipeAttack","hasSwipeHitPlayerAlready","markSwipeAsHit","createHealthBar","createjs.Container","healthPercent","fillWidth","createjs.Tween","ExperienceOrb","experienceValue","glowAnimation","collected","createjs.Shadow","dirX","dirY","magnetStrength","pulseSize","pulseAlpha","collect","createjs.Ease","isCollected","getExperienceValue","degreesToRadians","degrees","Mouse","from","xOff","yOff","atan","calculateAngle","calculateDistance","updateMousePosition","updatePlayerPosition","getAngle","getDistance","Phaser","LASER","firing","weaponAmmo","Map","weaponConfigs","cycle","cycleDown","cycleMax","baseAmplitude","flip","DUB","CIRCLE","weaponType","entries","current","regenTimer","mousePosition","superBlur","beamConnector","updateAngle","updateAmmo","canFire","createProjectile","createLaserProjectile","createDubProjectile","createCircleProjectile","ammo","angleRad","velocityX","velocityY","updateDubCycle","circleProjectiles","fadeRate","isProjectileOutOfBounds","drawBeamConnections","startFiring","stopFiring","updatePositions","mousePos","setType","ammoToRegen","ammoGained","lastShot","hasAmmo","cooldownReady","hasProjectileSpace","getCurrentAmmo","getMaxAmmo","getAmmoPercentage","getType","refillAllAmmo","sortedProjectiles","avgAlpha","first","Kick","currentDecayRate","getCurrentRadius","WaveTriggerZone","viewportManager","glowIntensity","glowDirection","getDimensions","glowShape","show","hide","halfSize","HealthTradingZone","isPlayerInZone","dimAlpha","activeAlpha","tradingTimer","tradingCooldown","experienceCost","healthGain","drawGlowShape","drawMainShape","glowAlpha","glowSize","shapeAlpha","setPlayerInZone","inZone","getIsPlayerInZone","canTrade","resetTradingTimer","getExperienceCost","getHealthGain","InputManager","pressedKeys","Set","mouseDown","initializeEventListeners","handleKeyDown","handleKeyUp","handleMouseDown","handleMouseUp","handleMouseMove","code","delete","button","clientX","clientY","isKeyPressed","isAnyKeyPressed","some","getPressedKeys","isMouseDown","isMouseInBounds","getMousePosition","WaveManager","onWaveStart","onWaveComplete","onEnemySpawn","restTimer","spawnTimer","countdownTimer","countingDown","waveData","number","totalEnemies","calculateEnemiesForWave","enemiesRemaining","enemiesSpawned","PREPARATION","handlePreparation","ACTIVE","handleActiveWave","REST","handleRestPeriod","COMPLETE","startWave","spawnEnemy","startNextWave","spawnInfo","generateEnemySpawnInfo","baseHp","generateSpawnPosition","waveNumber","onEnemyKilled","completeWave","getWaveData","getRestTimeRemaining","getCountdownTimeRemaining","isCountingDown","isInRestPeriod","triggerWaveStart","getCurrentWave","getPointsPerKill","UIManager","waveCircles","enemyCircles","experienceCircles","wavePopup","score","lowHealthWarning","lowHealthFlashTimer","lowAmmoWarning","lowAmmoFlashTimer","currentHealthPercentage","currentAmmoPercentage","currentAmmo","currentWeaponType","gameOverContainer","createUIElements","onResize","dimensions","handleResize","ui","waveContainer","wavePos","getResponsivePosition","updateWaveCircles","enemyContainer","enemyPos","updateEnemyCircles","experienceContainer","expPos","updateExperienceCircles","createjs.Text","getScaledFont","timerPos","createDiamondHealthBar","createAmmoBar","flashCycle","healthFill","ammoFill","updateWaveInfo","updateExperienceDisplay","experienceCount","enemyCount","displayCount","row","plusText","lastRow","circleCount","remainingExperience","showTimer","timeRemaining","hideTimer","showWaveStartPopup","hideWavePopup","centerX","centerY","overlay","mainText","subtitle","animateWavePopup","showGameOverScreen","killCount","waveReached","hideGameOverScreen","gameOverText","killText","waveText","restartText","resetCounters","healthBackground","healthBorder","ammoBackground","ammoBorder","showWaveCompletePopup","addScore","points","getScore","leftX","bottomY","updateDiamondFill","healthPercentage","actualSkew","updateHealthBar","wasLowHealth","rightX","updateAmmoFill","ammoPercentage","actualWeaponType","fillColor","fillOffset","updateAmmoBar","wasLowAmmo","_dimensions","recreateHealthBar","recreateAmmoBar","setWaveState","ViewportManager","resizeCallbacks","targetAspectRatio","currentDimensions","setupResizeListener","containerWidth","containerHeight","notifyResizeCallbacks","xPercent","yPercent","anchorX","anchorY","scaleValue","baseFontSize","getCanvasCenter","GameManager","canvasId","enemies","enemyProjectiles","experienceOrbs","totalExperience","isPaused","currentWeaponIndex","weaponTypes","lastWeaponSwitch","isGameOver","createjs.Stage","inputManager","uiManager","waveManager","waveTriggerZone","healthTradingZone","createjs.Ticker","handleInput","triggerGameOver","isInZone","updateEnemies","updateEnemyProjectiles","updateExperienceOrbs","checkCollisions","togglePause","restartGame","enemy","newProjectiles","includes","deathPos","orb","orbPos","collision","swipeDamage","projectilePos","kickHit","projectileHit","projectileRadius","currentWave","dashWormChance","bigShooterChance","circleChance","game"],"mappings":"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EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GASluCpC,EAAWqC,UAAY,CAAC,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI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","x_google_ignoreList":[0]}